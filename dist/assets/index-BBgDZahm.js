function X1(a,n){for(var r=0;r<n.length;r++){const i=n[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in a)){const c=Object.getOwnPropertyDescriptor(i,s);c&&Object.defineProperty(a,s,c.get?c:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ic(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Ed={exports:{}},ts={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng;function Q1(){if(ng)return ts;ng=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:a,type:i,key:d,ref:s!==void 0?s:null,props:c}}return ts.Fragment=n,ts.jsx=r,ts.jsxs=r,ts}var rg;function J1(){return rg||(rg=1,Ed.exports=Q1()),Ed.exports}var u=J1(),_d={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function ex(){if(ag)return lt;ag=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function E(U,k,$){this.props=U,this.context=k,this.refs=g,this.updater=$||x}E.prototype.isReactComponent={},E.prototype.setState=function(U,k){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,k,"setState")},E.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function R(){}R.prototype=E.prototype;function O(U,k,$){this.props=U,this.context=k,this.refs=g,this.updater=$||x}var A=O.prototype=new R;A.constructor=O,y(A,E.prototype),A.isPureReactComponent=!0;var N=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function F(U,k,$,Z,le,q){return $=q.ref,{$$typeof:a,type:U,key:k,ref:$!==void 0?$:null,props:q}}function B(U,k){return F(U.type,k,void 0,void 0,void 0,U.props)}function I(U){return typeof U=="object"&&U!==null&&U.$$typeof===a}function W(U){var k={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function($){return k[$]})}var ee=/\/+/g;function C(U,k){return typeof U=="object"&&U!==null&&U.key!=null?W(""+U.key):k.toString(36)}function J(){}function _(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(J,J):(U.status="pending",U.then(function(k){U.status==="pending"&&(U.status="fulfilled",U.value=k)},function(k){U.status==="pending"&&(U.status="rejected",U.reason=k)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function K(U,k,$,Z,le){var q=typeof U;(q==="undefined"||q==="boolean")&&(U=null);var Ee=!1;if(U===null)Ee=!0;else switch(q){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(U.$$typeof){case a:case n:Ee=!0;break;case b:return Ee=U._init,K(Ee(U._payload),k,$,Z,le)}}if(Ee)return le=le(U),Ee=Z===""?"."+C(U,0):Z,N(le)?($="",Ee!=null&&($=Ee.replace(ee,"$&/")+"/"),K(le,k,$,"",function(de){return de})):le!=null&&(I(le)&&(le=B(le,$+(le.key==null||U&&U.key===le.key?"":(""+le.key).replace(ee,"$&/")+"/")+Ee)),k.push(le)),1;Ee=0;var Fe=Z===""?".":Z+":";if(N(U))for(var pe=0;pe<U.length;pe++)Z=U[pe],q=Fe+C(Z,pe),Ee+=K(Z,k,$,q,le);else if(pe=S(U),typeof pe=="function")for(U=pe.call(U),pe=0;!(Z=U.next()).done;)Z=Z.value,q=Fe+C(Z,pe++),Ee+=K(Z,k,$,q,le);else if(q==="object"){if(typeof U.then=="function")return K(_(U),k,$,Z,le);throw k=String(U),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function P(U,k,$){if(U==null)return U;var Z=[],le=0;return K(U,Z,"","",function(q){return k.call($,q,le++)}),Z}function Y(U){if(U._status===-1){var k=U._result;k=k(),k.then(function($){(U._status===0||U._status===-1)&&(U._status=1,U._result=$)},function($){(U._status===0||U._status===-1)&&(U._status=2,U._result=$)}),U._status===-1&&(U._status=0,U._result=k)}if(U._status===1)return U._result.default;throw U._result}var oe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function te(){}return lt.Children={map:P,forEach:function(U,k,$){P(U,function(){k.apply(this,arguments)},$)},count:function(U){var k=0;return P(U,function(){k++}),k},toArray:function(U){return P(U,function(k){return k})||[]},only:function(U){if(!I(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},lt.Component=E,lt.Fragment=r,lt.Profiler=s,lt.PureComponent=O,lt.StrictMode=i,lt.Suspense=m,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,lt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return M.H.useMemoCache(U)}},lt.cache=function(U){return function(){return U.apply(null,arguments)}},lt.cloneElement=function(U,k,$){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Z=y({},U.props),le=U.key,q=void 0;if(k!=null)for(Ee in k.ref!==void 0&&(q=void 0),k.key!==void 0&&(le=""+k.key),k)!z.call(k,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&k.ref===void 0||(Z[Ee]=k[Ee]);var Ee=arguments.length-2;if(Ee===1)Z.children=$;else if(1<Ee){for(var Fe=Array(Ee),pe=0;pe<Ee;pe++)Fe[pe]=arguments[pe+2];Z.children=Fe}return F(U.type,le,void 0,void 0,q,Z)},lt.createContext=function(U){return U={$$typeof:d,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:c,_context:U},U},lt.createElement=function(U,k,$){var Z,le={},q=null;if(k!=null)for(Z in k.key!==void 0&&(q=""+k.key),k)z.call(k,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(le[Z]=k[Z]);var Ee=arguments.length-2;if(Ee===1)le.children=$;else if(1<Ee){for(var Fe=Array(Ee),pe=0;pe<Ee;pe++)Fe[pe]=arguments[pe+2];le.children=Fe}if(U&&U.defaultProps)for(Z in Ee=U.defaultProps,Ee)le[Z]===void 0&&(le[Z]=Ee[Z]);return F(U,q,void 0,void 0,null,le)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:f,render:U}},lt.isValidElement=I,lt.lazy=function(U){return{$$typeof:b,_payload:{_status:-1,_result:U},_init:Y}},lt.memo=function(U,k){return{$$typeof:h,type:U,compare:k===void 0?null:k}},lt.startTransition=function(U){var k=M.T,$={};M.T=$;try{var Z=U(),le=M.S;le!==null&&le($,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(te,oe)}catch(q){oe(q)}finally{M.T=k}},lt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},lt.use=function(U){return M.H.use(U)},lt.useActionState=function(U,k,$){return M.H.useActionState(U,k,$)},lt.useCallback=function(U,k){return M.H.useCallback(U,k)},lt.useContext=function(U){return M.H.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U,k){return M.H.useDeferredValue(U,k)},lt.useEffect=function(U,k,$){var Z=M.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(U,k)},lt.useId=function(){return M.H.useId()},lt.useImperativeHandle=function(U,k,$){return M.H.useImperativeHandle(U,k,$)},lt.useInsertionEffect=function(U,k){return M.H.useInsertionEffect(U,k)},lt.useLayoutEffect=function(U,k){return M.H.useLayoutEffect(U,k)},lt.useMemo=function(U,k){return M.H.useMemo(U,k)},lt.useOptimistic=function(U,k){return M.H.useOptimistic(U,k)},lt.useReducer=function(U,k,$){return M.H.useReducer(U,k,$)},lt.useRef=function(U){return M.H.useRef(U)},lt.useState=function(U){return M.H.useState(U)},lt.useSyncExternalStore=function(U,k,$){return M.H.useSyncExternalStore(U,k,$)},lt.useTransition=function(){return M.H.useTransition()},lt.version="19.1.0",lt}var ig;function oc(){return ig||(ig=1,_d.exports=ex()),_d.exports}var L=oc();const ne=ic(L),u0=X1({__proto__:null,default:ne},[L]);var Td={exports:{}},ns={},Cd={exports:{}},Ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function tx(){return og||(og=1,function(a){function n(P,Y){var oe=P.length;P.push(Y);e:for(;0<oe;){var te=oe-1>>>1,U=P[te];if(0<s(U,Y))P[te]=Y,P[oe]=U,oe=te;else break e}}function r(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var Y=P[0],oe=P.pop();if(oe!==Y){P[0]=oe;e:for(var te=0,U=P.length,k=U>>>1;te<k;){var $=2*(te+1)-1,Z=P[$],le=$+1,q=P[le];if(0>s(Z,oe))le<U&&0>s(q,Z)?(P[te]=q,P[le]=oe,te=le):(P[te]=Z,P[$]=oe,te=$);else if(le<U&&0>s(q,oe))P[te]=q,P[le]=oe,te=le;else break e}}return Y}function s(P,Y){var oe=P.sortIndex-Y.sortIndex;return oe!==0?oe:P.id-Y.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();a.unstable_now=function(){return d.now()-f}}var m=[],h=[],b=1,w=null,S=3,x=!1,y=!1,g=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var Y=r(h);Y!==null;){if(Y.callback===null)i(h);else if(Y.startTime<=P)i(h),Y.sortIndex=Y.expirationTime,n(m,Y);else break;Y=r(h)}}function M(P){if(g=!1,N(P),!y)if(r(m)!==null)y=!0,z||(z=!0,C());else{var Y=r(h);Y!==null&&K(M,Y.startTime-P)}}var z=!1,F=-1,B=5,I=-1;function W(){return E?!0:!(a.unstable_now()-I<B)}function ee(){if(E=!1,z){var P=a.unstable_now();I=P;var Y=!0;try{e:{y=!1,g&&(g=!1,O(F),F=-1),x=!0;var oe=S;try{t:{for(N(P),w=r(m);w!==null&&!(w.expirationTime>P&&W());){var te=w.callback;if(typeof te=="function"){w.callback=null,S=w.priorityLevel;var U=te(w.expirationTime<=P);if(P=a.unstable_now(),typeof U=="function"){w.callback=U,N(P),Y=!0;break t}w===r(m)&&i(m),N(P)}else i(m);w=r(m)}if(w!==null)Y=!0;else{var k=r(h);k!==null&&K(M,k.startTime-P),Y=!1}}break e}finally{w=null,S=oe,x=!1}Y=void 0}}finally{Y?C():z=!1}}}var C;if(typeof A=="function")C=function(){A(ee)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,_=J.port2;J.port1.onmessage=ee,C=function(){_.postMessage(null)}}else C=function(){R(ee,0)};function K(P,Y){F=R(function(){P(a.unstable_now())},Y)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(P){P.callback=null},a.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<P?Math.floor(1e3/P):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(P){switch(S){case 1:case 2:case 3:var Y=3;break;default:Y=S}var oe=S;S=Y;try{return P()}finally{S=oe}},a.unstable_requestPaint=function(){E=!0},a.unstable_runWithPriority=function(P,Y){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var oe=S;S=P;try{return Y()}finally{S=oe}},a.unstable_scheduleCallback=function(P,Y,oe){var te=a.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?te+oe:te):oe=te,P){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=oe+U,P={id:b++,callback:Y,priorityLevel:P,startTime:oe,expirationTime:U,sortIndex:-1},oe>te?(P.sortIndex=oe,n(h,P),r(m)===null&&P===r(h)&&(g?(O(F),F=-1):g=!0,K(M,oe-te))):(P.sortIndex=U,n(m,P),y||x||(y=!0,z||(z=!0,C()))),P},a.unstable_shouldYield=W,a.unstable_wrapCallback=function(P){var Y=S;return function(){var oe=S;S=Y;try{return P.apply(this,arguments)}finally{S=oe}}}}(Ad)),Ad}var sg;function nx(){return sg||(sg=1,Cd.exports=tx()),Cd.exports}var Rd={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function rx(){if(lg)return gn;lg=1;var a=oc();function n(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(m,h,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:w==null?null:""+w,children:m,containerInfo:h,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gn.createPortal=function(m,h){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(n(299));return c(m,h,null,b)},gn.flushSync=function(m){var h=d.T,b=i.p;try{if(d.T=null,i.p=2,m)return m()}finally{d.T=h,i.p=b,i.d.f()}},gn.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},gn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},gn.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var b=h.as,w=f(b,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;b==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:x}):b==="script"&&i.d.X(m,{crossOrigin:w,integrity:S,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},gn.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var b=f(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},gn.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var b=h.as,w=f(b,h.crossOrigin);i.d.L(m,b,{crossOrigin:w,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},gn.preloadModule=function(m,h){if(typeof m=="string")if(h){var b=f(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},gn.requestFormReset=function(m){i.d.r(m)},gn.unstable_batchedUpdates=function(m,h){return m(h)},gn.useFormState=function(m,h,b){return d.H.useFormState(m,h,b)},gn.useFormStatus=function(){return d.H.useHostTransitionStatus()},gn.version="19.1.0",gn}var cg;function d0(){if(cg)return Rd.exports;cg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Rd.exports=rx(),Rd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function ax(){if(ug)return ns;ug=1;var a=nx(),n=oc(),r=d0();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(c(e)!==e)throw Error(i(188))}function m(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(i(188));return t!==e?null:e}for(var o=e,l=t;;){var p=o.return;if(p===null)break;var v=p.alternate;if(v===null){if(l=p.return,l!==null){o=l;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===o)return f(p),e;if(v===l)return f(p),t;v=v.sibling}throw Error(i(188))}if(o.return!==l.return)o=p,l=v;else{for(var D=!1,V=p.child;V;){if(V===o){D=!0,o=p,l=v;break}if(V===l){D=!0,l=p,o=v;break}V=V.sibling}if(!D){for(V=v.child;V;){if(V===o){D=!0,o=v,l=p;break}if(V===l){D=!0,l=v,o=p;break}V=V.sibling}if(!D)throw Error(i(189))}}if(o.alternate!==l)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?e:t}function h(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=h(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function C(e){return e===null||typeof e!="object"?null:(e=ee&&e[ee]||e["@@iterator"],typeof e=="function"?e:null)}var J=Symbol.for("react.client.reference");function _(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case y:return"Fragment";case E:return"Profiler";case g:return"StrictMode";case M:return"Suspense";case z:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case A:return(e.displayName||"Context")+".Provider";case O:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:_(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return _(e(t))}catch{}}return null}var K=Array.isArray,P=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},te=[],U=-1;function k(e){return{current:e}}function $(e){0>U||(e.current=te[U],te[U]=null,U--)}function Z(e,t){U++,te[U]=e.current,e.current=t}var le=k(null),q=k(null),Ee=k(null),Fe=k(null);function pe(e,t){switch(Z(Ee,t),Z(q,e),Z(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?kh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=kh(t),e=Nh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(le),Z(le,e)}function de(){$(le),$(q),$(Ee)}function Re(e){e.memoizedState!==null&&Z(Fe,e);var t=le.current,o=Nh(t,e.type);t!==o&&(Z(q,e),Z(le,o))}function me(e){q.current===e&&($(le),$(q)),Fe.current===e&&($(Fe),Ko._currentValue=oe)}var _e=Object.prototype.hasOwnProperty,Ae=a.unstable_scheduleCallback,T=a.unstable_cancelCallback,G=a.unstable_shouldYield,X=a.unstable_requestPaint,j=a.unstable_now,H=a.unstable_getCurrentPriorityLevel,Q=a.unstable_ImmediatePriority,ue=a.unstable_UserBlockingPriority,ye=a.unstable_NormalPriority,ie=a.unstable_LowPriority,ge=a.unstable_IdlePriority,Oe=a.log,Le=a.unstable_setDisableYieldValue,De=null,He=null;function Ie(e){if(typeof Oe=="function"&&Le(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(De,e)}catch{}}var Ve=Math.clz32?Math.clz32:Je,Ct=Math.log,$e=Math.LN2;function Je(e){return e>>>=0,e===0?32:31-(Ct(e)/$e|0)|0}var Pe=256,Et=4194304;function Qt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zt(e,t,o){var l=e.pendingLanes;if(l===0)return 0;var p=0,v=e.suspendedLanes,D=e.pingedLanes;e=e.warmLanes;var V=l&134217727;return V!==0?(l=V&~v,l!==0?p=Qt(l):(D&=V,D!==0?p=Qt(D):o||(o=V&~e,o!==0&&(p=Qt(o))))):(V=l&~v,V!==0?p=Qt(V):D!==0?p=Qt(D):o||(o=l&~e,o!==0&&(p=Qt(o)))),p===0?0:t!==0&&t!==p&&(t&v)===0&&(v=p&-p,o=t&-t,v>=o||v===32&&(o&4194048)!==0)?t:p}function Nn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ur(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Be(){var e=Pe;return Pe<<=1,(Pe&4194048)===0&&(Pe=256),e}function Ke(){var e=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),e}function at(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Xe(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ye(e,t,o,l,p,v){var D=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var V=e.entanglements,se=e.expirationTimes,xe=e.hiddenUpdates;for(o=D&~o;0<o;){var Me=31-Ve(o),je=1<<Me;V[Me]=0,se[Me]=-1;var Se=xe[Me];if(Se!==null)for(xe[Me]=null,Me=0;Me<Se.length;Me++){var we=Se[Me];we!==null&&(we.lane&=-536870913)}o&=~je}l!==0&&ht(e,l,0),v!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=v&~(D&~t))}function ht(e,t,o){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ve(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|o&4194090}function wt(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var l=31-Ve(o),p=1<<l;p&t|e[l]&t&&(e[l]|=t),o&=~p}}function gt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function nn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Kn(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:Kh(e.type))}function sr(e,t){var o=Y.p;try{return Y.p=e,t()}finally{Y.p=o}}var $t=Math.random().toString(36).slice(2),Ot="__reactFiber$"+$t,ut="__reactProps$"+$t,On="__reactContainer$"+$t,Ya="__reactEvents$"+$t,bs="__reactListeners$"+$t,vs="__reactHandles$"+$t,Qi="__reactResources$"+$t,Br="__reactMarker$"+$t;function Za(e){delete e[Ot],delete e[ut],delete e[Ya],delete e[bs],delete e[vs]}function Pr(e){var t=e[Ot];if(t)return t;for(var o=e.parentNode;o;){if(t=o[On]||o[Ot]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=Lh(e);e!==null;){if(o=e[Ot])return o;e=Lh(e)}return t}e=o,o=e.parentNode}return null}function Fr(e){if(e=e[Ot]||e[On]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Sa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Xn(e){var t=e[Qi];return t||(t=e[Qi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Gt(e){e[Br]=!0}var Ji=new Set,eo={};function vr(e,t){xr(e,t),xr(e+"Capture",t)}function xr(e,t){for(eo[e]=t,e=0;e<t.length;e++)Ji.add(t[e])}var xs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),to={},Ss={};function wc(e){return _e.call(Ss,e)?!0:_e.call(to,e)?!1:xs.test(e)?Ss[e]=!0:(to[e]=!0,!1)}function Ka(e,t,o){if(wc(t))if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+o)}}function Xa(e,t,o){if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+o)}}function Fn(e,t,o,l){if(l===null)e.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(t,o,""+l)}}var no,ws;function Hr(e){if(no===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);no=t&&t[1]||"",ws=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+no+e+ws}var ro=!1;function ao(e,t){if(!e||ro)return"";ro=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(we){var Se=we}Reflect.construct(e,[],je)}else{try{je.call()}catch(we){Se=we}e.call(je.prototype)}}else{try{throw Error()}catch(we){Se=we}(je=e())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(we){if(we&&Se&&typeof we.stack=="string")return[we.stack,Se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=l.DetermineComponentFrameRoot(),D=v[0],V=v[1];if(D&&V){var se=D.split(`
`),xe=V.split(`
`);for(p=l=0;l<se.length&&!se[l].includes("DetermineComponentFrameRoot");)l++;for(;p<xe.length&&!xe[p].includes("DetermineComponentFrameRoot");)p++;if(l===se.length||p===xe.length)for(l=se.length-1,p=xe.length-1;1<=l&&0<=p&&se[l]!==xe[p];)p--;for(;1<=l&&0<=p;l--,p--)if(se[l]!==xe[p]){if(l!==1||p!==1)do if(l--,p--,0>p||se[l]!==xe[p]){var Me=`
`+se[l].replace(" at new "," at ");return e.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",e.displayName)),Me}while(1<=l&&0<=p);break}}}finally{ro=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Hr(o):""}function Ec(e){switch(e.tag){case 26:case 27:case 5:return Hr(e.type);case 16:return Hr("Lazy");case 13:return Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 15:return ao(e.type,!1);case 11:return ao(e.type.render,!1);case 1:return ao(e.type,!0);case 31:return Hr("Activity");default:return""}}function Es(e){try{var t="";do t+=Ec(e),e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function wn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _s(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _c(e){var t=_s(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,v=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(D){l=""+D,v.call(this,D)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(D){l=""+D},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qa(e){e._valueTracker||(e._valueTracker=_c(e))}function Ts(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),l="";return e&&(l=_s(e)?e.checked?"true":"false":e.value),e=l,e!==o?(t.setValue(e),!0):!1}function Ja(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Tc=/[\n"\\]/g;function En(e){return e.replace(Tc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function io(e,t,o,l,p,v,D,V){e.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.type=D:e.removeAttribute("type"),t!=null?D==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+wn(t)):e.value!==""+wn(t)&&(e.value=""+wn(t)):D!=="submit"&&D!=="reset"||e.removeAttribute("value"),t!=null?oo(e,D,wn(t)):o!=null?oo(e,D,wn(o)):l!=null&&e.removeAttribute("value"),p==null&&v!=null&&(e.defaultChecked=!!v),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?e.name=""+wn(V):e.removeAttribute("name")}function Cs(e,t,o,l,p,v,D,V){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.type=v),t!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||t!=null))return;o=o!=null?""+wn(o):"",t=t!=null?""+wn(t):o,V||t===e.value||(e.value=t),e.defaultValue=t}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=V?e.checked:!!l,e.defaultChecked=!!l,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(e.name=D)}function oo(e,t,o){t==="number"&&Ja(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Wr(e,t,o,l){if(e=e.options,t){t={};for(var p=0;p<o.length;p++)t["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=t.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&l&&(e[o].defaultSelected=!0)}else{for(o=""+wn(o),t=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function As(e,t,o){if(t!=null&&(t=""+wn(t),t!==e.value&&(e.value=t),o==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=o!=null?""+wn(o):""}function Rs(e,t,o,l){if(t==null){if(l!=null){if(o!=null)throw Error(i(92));if(K(l)){if(1<l.length)throw Error(i(93));l=l[0]}o=l}o==null&&(o=""),t=o}o=wn(t),e.defaultValue=o,l=e.textContent,l===o&&l!==""&&l!==null&&(e.value=l)}function Vr(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Cc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ms(e,t,o){var l=t.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,o):typeof o!="number"||o===0||Cc.has(t)?t==="float"?e.cssFloat=o:e[t]=(""+o).trim():e[t]=o+"px"}function ks(e,t,o){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var p in t)l=t[p],t.hasOwnProperty(p)&&o[p]!==l&&Ms(e,p,l)}else for(var v in t)t.hasOwnProperty(v)&&Ms(e,v,t[v])}function so(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ac=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(e){return Rc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var lo=null;function co(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $r=null,Gr=null;function Ns(e){var t=Fr(e);if(t&&(e=t.stateNode)){var o=e[ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(io(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+En(""+t)+'"][type="radio"]'),t=0;t<o.length;t++){var l=o[t];if(l!==e&&l.form===e.form){var p=l[ut]||null;if(!p)throw Error(i(90));io(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(t=0;t<o.length;t++)l=o[t],l.form===e.form&&Ts(l)}break e;case"textarea":As(e,o.value,o.defaultValue);break e;case"select":t=o.value,t!=null&&Wr(e,!!o.multiple,t,!1)}}}var uo=!1;function Os(e,t,o){if(uo)return e(t,o);uo=!0;try{var l=e(t);return l}finally{if(uo=!1,($r!==null||Gr!==null)&&(fl(),$r&&(t=$r,e=Gr,Gr=$r=null,Ns(t),e)))for(t=0;t<e.length;t++)Ns(e[t])}}function wa(e,t){var o=e.stateNode;if(o===null)return null;var l=o[ut]||null;if(l===null)return null;o=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(i(231,t,typeof o));return o}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fo=!1;if(Qn)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){fo=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{fo=!1}var lr=null,be=null,re=null;function ce(){if(re)return re;var e,t=be,o=t.length,l,p="value"in lr?lr.value:lr.textContent,v=p.length;for(e=0;e<o&&t[e]===p[e];e++);var D=o-e;for(l=1;l<=D&&t[o-l]===p[v-l];l++);return re=p.slice(e,1<l?1-l:void 0)}function Ce(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ue(){return!0}function ct(){return!1}function yt(e){function t(o,l,p,v,D){this._reactName=o,this._targetInst=p,this.type=l,this.nativeEvent=v,this.target=D,this.currentTarget=null;for(var V in e)e.hasOwnProperty(V)&&(o=e[V],this[V]=o?o(v):v[V]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ue:ct,this.isPropagationStopped=ct,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ue)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ue)},persist:function(){},isPersistent:Ue}),t}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sr=yt(Ft),Ea=b({},Ft,{view:0,detail:0}),Mc=yt(Ea),ti,ni,Yr,_a=b({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yr&&(Yr&&e.type==="mousemove"?(ti=e.screenX-Yr.screenX,ni=e.screenY-Yr.screenY):ni=ti=0,Yr=e),ti)},movementY:function(e){return"movementY"in e?e.movementY:ni}}),If=yt(_a),Qb=b({},_a,{dataTransfer:0}),Jb=yt(Qb),ev=b({},Ea,{relatedTarget:0}),kc=yt(ev),tv=b({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),nv=yt(tv),rv=b({},Ft,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),av=yt(rv),iv=b({},Ft,{data:0}),zf=yt(iv),ov={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lv[e])?!!t[e]:!1}function Nc(){return cv}var uv=b({},Ea,{key:function(e){if(e.key){var t=ov[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ce(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(e){return e.type==="keypress"?Ce(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ce(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dv=yt(uv),fv=b({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uf=yt(fv),mv=b({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),pv=yt(mv),hv=b({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),gv=yt(hv),yv=b({},_a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bv=yt(yv),vv=b({},Ft,{newState:0,oldState:0}),xv=yt(vv),Sv=[9,13,27,32],Oc=Qn&&"CompositionEvent"in window,mo=null;Qn&&"documentMode"in document&&(mo=document.documentMode);var wv=Qn&&"TextEvent"in window&&!mo,Bf=Qn&&(!Oc||mo&&8<mo&&11>=mo),Pf=" ",Ff=!1;function Hf(e,t){switch(e){case"keyup":return Sv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ri=!1;function Ev(e,t){switch(e){case"compositionend":return Wf(t);case"keypress":return t.which!==32?null:(Ff=!0,Pf);case"textInput":return e=t.data,e===Pf&&Ff?null:e;default:return null}}function _v(e,t){if(ri)return e==="compositionend"||!Oc&&Hf(e,t)?(e=ce(),re=be=lr=null,ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bf&&t.locale!=="ko"?null:t.data;default:return null}}var Tv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tv[e.type]:t==="textarea"}function $f(e,t,o,l){$r?Gr?Gr.push(l):Gr=[l]:$r=l,t=bl(t,"onChange"),0<t.length&&(o=new Sr("onChange","change",null,o,l),e.push({event:o,listeners:t}))}var po=null,ho=null;function Cv(e){Th(e,0)}function Ds(e){var t=Sa(e);if(Ts(t))return e}function Gf(e,t){if(e==="change")return t}var qf=!1;if(Qn){var Dc;if(Qn){var jc="oninput"in document;if(!jc){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),jc=typeof Yf.oninput=="function"}Dc=jc}else Dc=!1;qf=Dc&&(!document.documentMode||9<document.documentMode)}function Zf(){po&&(po.detachEvent("onpropertychange",Kf),ho=po=null)}function Kf(e){if(e.propertyName==="value"&&Ds(ho)){var t=[];$f(t,ho,e,co(e)),Os(Cv,t)}}function Av(e,t,o){e==="focusin"?(Zf(),po=t,ho=o,po.attachEvent("onpropertychange",Kf)):e==="focusout"&&Zf()}function Rv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ds(ho)}function Mv(e,t){if(e==="click")return Ds(t)}function kv(e,t){if(e==="input"||e==="change")return Ds(t)}function Nv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:Nv;function go(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var p=o[l];if(!_e.call(t,p)||!Dn(e[p],t[p]))return!1}return!0}function Xf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qf(e,t){var o=Xf(e);e=0;for(var l;o;){if(o.nodeType===3){if(l=e+o.textContent.length,e<=t&&l>=t)return{node:o,offset:t-e};e=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Xf(o)}}function Jf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function em(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ja(e.document);t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Ja(e.document)}return t}function Lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ov=Qn&&"documentMode"in document&&11>=document.documentMode,ai=null,Ic=null,yo=null,zc=!1;function tm(e,t,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zc||ai==null||ai!==Ja(l)||(l=ai,"selectionStart"in l&&Lc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),yo&&go(yo,l)||(yo=l,l=bl(Ic,"onSelect"),0<l.length&&(t=new Sr("onSelect","select",null,t,o),e.push({event:t,listeners:l}),t.target=ai)))}function Ta(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var ii={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},Uc={},nm={};Qn&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function Ca(e){if(Uc[e])return Uc[e];if(!ii[e])return e;var t=ii[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in nm)return Uc[e]=t[o];return e}var rm=Ca("animationend"),am=Ca("animationiteration"),im=Ca("animationstart"),Dv=Ca("transitionrun"),jv=Ca("transitionstart"),Lv=Ca("transitioncancel"),om=Ca("transitionend"),sm=new Map,Bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bc.push("scrollEnd");function Jn(e,t){sm.set(e,t),vr(t,[e])}var lm=new WeakMap;function Hn(e,t){if(typeof e=="object"&&e!==null){var o=lm.get(e);return o!==void 0?o:(t={value:e,source:t,stack:Es(t)},lm.set(e,t),t)}return{value:e,source:t,stack:Es(t)}}var Wn=[],oi=0,Pc=0;function js(){for(var e=oi,t=Pc=oi=0;t<e;){var o=Wn[t];Wn[t++]=null;var l=Wn[t];Wn[t++]=null;var p=Wn[t];Wn[t++]=null;var v=Wn[t];if(Wn[t++]=null,l!==null&&p!==null){var D=l.pending;D===null?p.next=p:(p.next=D.next,D.next=p),l.pending=p}v!==0&&cm(o,p,v)}}function Ls(e,t,o,l){Wn[oi++]=e,Wn[oi++]=t,Wn[oi++]=o,Wn[oi++]=l,Pc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Fc(e,t,o,l){return Ls(e,t,o,l),Is(e)}function si(e,t){return Ls(e,null,null,t),Is(e)}function cm(e,t,o){e.lanes|=o;var l=e.alternate;l!==null&&(l.lanes|=o);for(var p=!1,v=e.return;v!==null;)v.childLanes|=o,l=v.alternate,l!==null&&(l.childLanes|=o),v.tag===22&&(e=v.stateNode,e===null||e._visibility&1||(p=!0)),e=v,v=v.return;return e.tag===3?(v=e.stateNode,p&&t!==null&&(p=31-Ve(o),e=v.hiddenUpdates,l=e[p],l===null?e[p]=[t]:l.push(t),t.lane=o|536870912),v):null}function Is(e){if(50<Ho)throw Ho=0,qu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var li={};function Iv(e,t,o,l){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,o,l){return new Iv(e,t,o,l)}function Hc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wr(e,t){var o=e.alternate;return o===null?(o=jn(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function um(e,t){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,t=o.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zs(e,t,o,l,p,v){var D=0;if(l=e,typeof e=="function")Hc(e)&&(D=1);else if(typeof e=="string")D=U1(e,o,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case I:return e=jn(31,o,t,p),e.elementType=I,e.lanes=v,e;case y:return Aa(o.children,p,v,t);case g:D=8,p|=24;break;case E:return e=jn(12,o,t,p|2),e.elementType=E,e.lanes=v,e;case M:return e=jn(13,o,t,p),e.elementType=M,e.lanes=v,e;case z:return e=jn(19,o,t,p),e.elementType=z,e.lanes=v,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:case A:D=10;break e;case O:D=9;break e;case N:D=11;break e;case F:D=14;break e;case B:D=16,l=null;break e}D=29,o=Error(i(130,e===null?"null":typeof e,"")),l=null}return t=jn(D,o,t,p),t.elementType=e,t.type=l,t.lanes=v,t}function Aa(e,t,o,l){return e=jn(7,e,l,t),e.lanes=o,e}function Wc(e,t,o){return e=jn(6,e,null,t),e.lanes=o,e}function Vc(e,t,o){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ci=[],ui=0,Us=null,Bs=0,Vn=[],$n=0,Ra=null,Er=1,_r="";function Ma(e,t){ci[ui++]=Bs,ci[ui++]=Us,Us=e,Bs=t}function dm(e,t,o){Vn[$n++]=Er,Vn[$n++]=_r,Vn[$n++]=Ra,Ra=e;var l=Er;e=_r;var p=32-Ve(l)-1;l&=~(1<<p),o+=1;var v=32-Ve(t)+p;if(30<v){var D=p-p%5;v=(l&(1<<D)-1).toString(32),l>>=D,p-=D,Er=1<<32-Ve(t)+p|o<<p|l,_r=v+e}else Er=1<<v|o<<p|l,_r=e}function $c(e){e.return!==null&&(Ma(e,1),dm(e,1,0))}function Gc(e){for(;e===Us;)Us=ci[--ui],ci[ui]=null,Bs=ci[--ui],ci[ui]=null;for(;e===Ra;)Ra=Vn[--$n],Vn[$n]=null,_r=Vn[--$n],Vn[$n]=null,Er=Vn[--$n],Vn[$n]=null}var bn=null,Ht=null,xt=!1,ka=null,cr=!1,qc=Error(i(519));function Na(e){var t=Error(i(418,""));throw xo(Hn(t,e)),qc}function fm(e){var t=e.stateNode,o=e.type,l=e.memoizedProps;switch(t[Ot]=e,t[ut]=l,o){case"dialog":pt("cancel",t),pt("close",t);break;case"iframe":case"object":case"embed":pt("load",t);break;case"video":case"audio":for(o=0;o<Vo.length;o++)pt(Vo[o],t);break;case"source":pt("error",t);break;case"img":case"image":case"link":pt("error",t),pt("load",t);break;case"details":pt("toggle",t);break;case"input":pt("invalid",t),Cs(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Qa(t);break;case"select":pt("invalid",t);break;case"textarea":pt("invalid",t),Rs(t,l.value,l.defaultValue,l.children),Qa(t)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||t.textContent===""+o||l.suppressHydrationWarning===!0||Mh(t.textContent,o)?(l.popover!=null&&(pt("beforetoggle",t),pt("toggle",t)),l.onScroll!=null&&pt("scroll",t),l.onScrollEnd!=null&&pt("scrollend",t),l.onClick!=null&&(t.onclick=vl),t=!0):t=!1,t||Na(e)}function mm(e){for(bn=e.return;bn;)switch(bn.tag){case 5:case 13:cr=!1;return;case 27:case 3:cr=!0;return;default:bn=bn.return}}function bo(e){if(e!==bn)return!1;if(!xt)return mm(e),xt=!0,!1;var t=e.tag,o;if((o=t!==3&&t!==27)&&((o=t===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||cd(e.type,e.memoizedProps)),o=!o),o&&Ht&&Na(e),mm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(t===0){Ht=tr(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++;e=e.nextSibling}Ht=null}}else t===27?(t=Ht,ua(e.type)?(e=md,md=null,Ht=e):Ht=t):Ht=bn?tr(e.stateNode.nextSibling):null;return!0}function vo(){Ht=bn=null,xt=!1}function pm(){var e=ka;return e!==null&&(Cn===null?Cn=e:Cn.push.apply(Cn,e),ka=null),e}function xo(e){ka===null?ka=[e]:ka.push(e)}var Yc=k(null),Oa=null,Tr=null;function Zr(e,t,o){Z(Yc,t._currentValue),t._currentValue=o}function Cr(e){e._currentValue=Yc.current,$(Yc)}function Zc(e,t,o){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===o)break;e=e.return}}function Kc(e,t,o,l){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var v=p.dependencies;if(v!==null){var D=p.child;v=v.firstContext;e:for(;v!==null;){var V=v;v=p;for(var se=0;se<t.length;se++)if(V.context===t[se]){v.lanes|=o,V=v.alternate,V!==null&&(V.lanes|=o),Zc(v.return,o,e),l||(D=null);break e}v=V.next}}else if(p.tag===18){if(D=p.return,D===null)throw Error(i(341));D.lanes|=o,v=D.alternate,v!==null&&(v.lanes|=o),Zc(D,o,e),D=null}else D=p.child;if(D!==null)D.return=p;else for(D=p;D!==null;){if(D===e){D=null;break}if(p=D.sibling,p!==null){p.return=D.return,D=p;break}D=D.return}p=D}}function So(e,t,o,l){e=null;for(var p=t,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var D=p.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var V=p.type;Dn(p.pendingProps.value,D.value)||(e!==null?e.push(V):e=[V])}}else if(p===Fe.current){if(D=p.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Ko):e=[Ko])}p=p.return}e!==null&&Kc(t,e,o,l),t.flags|=262144}function Ps(e){for(e=e.firstContext;e!==null;){if(!Dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Da(e){Oa=e,Tr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function hn(e){return hm(Oa,e)}function Fs(e,t){return Oa===null&&Da(e),hm(e,t)}function hm(e,t){var o=t._currentValue;if(t={context:t,memoizedValue:o,next:null},Tr===null){if(e===null)throw Error(i(308));Tr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Tr=Tr.next=t;return o}var zv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(o,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(o){return o()})}},Uv=a.unstable_scheduleCallback,Bv=a.unstable_NormalPriority,rn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xc(){return{controller:new zv,data:new Map,refCount:0}}function wo(e){e.refCount--,e.refCount===0&&Uv(Bv,function(){e.controller.abort()})}var Eo=null,Qc=0,di=0,fi=null;function Pv(e,t){if(Eo===null){var o=Eo=[];Qc=0,di=ed(),fi={status:"pending",value:void 0,then:function(l){o.push(l)}}}return Qc++,t.then(gm,gm),t}function gm(){if(--Qc===0&&Eo!==null){fi!==null&&(fi.status="fulfilled");var e=Eo;Eo=null,di=0,fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Fv(e,t){var o=[],l={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var p=0;p<o.length;p++)(0,o[p])(t)},function(p){for(l.status="rejected",l.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),l}var ym=P.S;P.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Pv(e,t),ym!==null&&ym(e,t)};var ja=k(null);function Jc(){var e=ja.current;return e!==null?e:Lt.pooledCache}function Hs(e,t){t===null?Z(ja,ja.current):Z(ja,t.pool)}function bm(){var e=Jc();return e===null?null:{parent:rn._currentValue,pool:e}}var _o=Error(i(460)),vm=Error(i(474)),Ws=Error(i(542)),eu={then:function(){}};function xm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vs(){}function Sm(e,t,o){switch(o=e[o],o===void 0?e.push(t):o!==t&&(t.then(Vs,Vs),t=o),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Em(e),e;default:if(typeof t.status=="string")t.then(Vs,Vs);else{if(e=Lt,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var p=t;p.status="fulfilled",p.value=l}},function(l){if(t.status==="pending"){var p=t;p.status="rejected",p.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Em(e),e}throw To=t,_o}}var To=null;function wm(){if(To===null)throw Error(i(459));var e=To;return To=null,e}function Em(e){if(e===_o||e===Ws)throw Error(i(483))}var Kr=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Xr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qr(e,t,o){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(_t&2)!==0){var p=l.pending;return p===null?t.next=t:(t.next=p.next,p.next=t),l.pending=t,t=Is(e),cm(e,null,o),t}return Ls(e,l,t,o),Is(e)}function Co(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,wt(e,o)}}function ru(e,t){var o=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var p=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var D={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?p=v=D:v=v.next=D,o=o.next}while(o!==null);v===null?p=v=t:v=v.next=t}else p=v=t;o={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:l.shared,callbacks:l.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}var au=!1;function Ao(){if(au){var e=fi;if(e!==null)throw e}}function Ro(e,t,o,l){au=!1;var p=e.updateQueue;Kr=!1;var v=p.firstBaseUpdate,D=p.lastBaseUpdate,V=p.shared.pending;if(V!==null){p.shared.pending=null;var se=V,xe=se.next;se.next=null,D===null?v=xe:D.next=xe,D=se;var Me=e.alternate;Me!==null&&(Me=Me.updateQueue,V=Me.lastBaseUpdate,V!==D&&(V===null?Me.firstBaseUpdate=xe:V.next=xe,Me.lastBaseUpdate=se))}if(v!==null){var je=p.baseState;D=0,Me=xe=se=null,V=v;do{var Se=V.lane&-536870913,we=Se!==V.lane;if(we?(bt&Se)===Se:(l&Se)===Se){Se!==0&&Se===di&&(au=!0),Me!==null&&(Me=Me.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var rt=e,tt=V;Se=t;var Mt=o;switch(tt.tag){case 1:if(rt=tt.payload,typeof rt=="function"){je=rt.call(Mt,je,Se);break e}je=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=tt.payload,Se=typeof rt=="function"?rt.call(Mt,je,Se):rt,Se==null)break e;je=b({},je,Se);break e;case 2:Kr=!0}}Se=V.callback,Se!==null&&(e.flags|=64,we&&(e.flags|=8192),we=p.callbacks,we===null?p.callbacks=[Se]:we.push(Se))}else we={lane:Se,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Me===null?(xe=Me=we,se=je):Me=Me.next=we,D|=Se;if(V=V.next,V===null){if(V=p.shared.pending,V===null)break;we=V,V=we.next,we.next=null,p.lastBaseUpdate=we,p.shared.pending=null}}while(!0);Me===null&&(se=je),p.baseState=se,p.firstBaseUpdate=xe,p.lastBaseUpdate=Me,v===null&&(p.shared.lanes=0),oa|=D,e.lanes=D,e.memoizedState=je}}function _m(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Tm(e,t){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)_m(o[e],t)}var mi=k(null),$s=k(0);function Cm(e,t){e=Dr,Z($s,e),Z(mi,t),Dr=e|t.baseLanes}function iu(){Z($s,Dr),Z(mi,mi.current)}function ou(){Dr=$s.current,$(mi),$($s)}var Jr=0,dt=null,At=null,Jt=null,Gs=!1,pi=!1,La=!1,qs=0,Mo=0,hi=null,Hv=0;function qt(){throw Error(i(321))}function su(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!Dn(e[o],t[o]))return!1;return!0}function lu(e,t,o,l,p,v){return Jr=v,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=e===null||e.memoizedState===null?cp:up,La=!1,v=o(l,p),La=!1,pi&&(v=Rm(t,o,l,p)),Am(e),v}function Am(e){P.H=Js;var t=At!==null&&At.next!==null;if(Jr=0,Jt=At=dt=null,Gs=!1,Mo=0,hi=null,t)throw Error(i(300));e===null||sn||(e=e.dependencies,e!==null&&Ps(e)&&(sn=!0))}function Rm(e,t,o,l){dt=e;var p=0;do{if(pi&&(hi=null),Mo=0,pi=!1,25<=p)throw Error(i(301));if(p+=1,Jt=At=null,e.updateQueue!=null){var v=e.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}P.H=Zv,v=t(o,l)}while(pi);return v}function Wv(){var e=P.H,t=e.useState()[0];return t=typeof t.then=="function"?ko(t):t,e=e.useState()[0],(At!==null?At.memoizedState:null)!==e&&(dt.flags|=1024),t}function cu(){var e=qs!==0;return qs=0,e}function uu(e,t,o){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o}function du(e){if(Gs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Gs=!1}Jr=0,Jt=At=dt=null,pi=!1,Mo=qs=0,hi=null}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?dt.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function en(){if(At===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Jt===null?dt.memoizedState:Jt.next;if(t!==null)Jt=t,At=e;else{if(e===null)throw dt.alternate===null?Error(i(467)):Error(i(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Jt===null?dt.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(e){var t=Mo;return Mo+=1,hi===null&&(hi=[]),e=Sm(hi,e,t),t=dt,(Jt===null?t.memoizedState:Jt.next)===null&&(t=t.alternate,P.H=t===null||t.memoizedState===null?cp:up),e}function Ys(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ko(e);if(e.$$typeof===A)return hn(e)}throw Error(i(438,String(e)))}function mu(e){var t=null,o=dt.updateQueue;if(o!==null&&(t=o.memoCache),t==null){var l=dt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(p){return p.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),o===null&&(o=fu(),dt.updateQueue=o),o.memoCache=t,o=t.data[t.index],o===void 0)for(o=t.data[t.index]=Array(e),l=0;l<e;l++)o[l]=W;return t.index++,o}function Ar(e,t){return typeof t=="function"?t(e):t}function Zs(e){var t=en();return pu(t,At,e)}function pu(e,t,o){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var p=e.baseQueue,v=l.pending;if(v!==null){if(p!==null){var D=p.next;p.next=v.next,v.next=D}t.baseQueue=p=v,l.pending=null}if(v=e.baseState,p===null)e.memoizedState=v;else{t=p.next;var V=D=null,se=null,xe=t,Me=!1;do{var je=xe.lane&-536870913;if(je!==xe.lane?(bt&je)===je:(Jr&je)===je){var Se=xe.revertLane;if(Se===0)se!==null&&(se=se.next={lane:0,revertLane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),je===di&&(Me=!0);else if((Jr&Se)===Se){xe=xe.next,Se===di&&(Me=!0);continue}else je={lane:0,revertLane:xe.revertLane,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},se===null?(V=se=je,D=v):se=se.next=je,dt.lanes|=Se,oa|=Se;je=xe.action,La&&o(v,je),v=xe.hasEagerState?xe.eagerState:o(v,je)}else Se={lane:je,revertLane:xe.revertLane,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},se===null?(V=se=Se,D=v):se=se.next=Se,dt.lanes|=je,oa|=je;xe=xe.next}while(xe!==null&&xe!==t);if(se===null?D=v:se.next=V,!Dn(v,e.memoizedState)&&(sn=!0,Me&&(o=fi,o!==null)))throw o;e.memoizedState=v,e.baseState=D,e.baseQueue=se,l.lastRenderedState=v}return p===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function hu(e){var t=en(),o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=e;var l=o.dispatch,p=o.pending,v=t.memoizedState;if(p!==null){o.pending=null;var D=p=p.next;do v=e(v,D.action),D=D.next;while(D!==p);Dn(v,t.memoizedState)||(sn=!0),t.memoizedState=v,t.baseQueue===null&&(t.baseState=v),o.lastRenderedState=v}return[v,l]}function Mm(e,t,o){var l=dt,p=en(),v=xt;if(v){if(o===void 0)throw Error(i(407));o=o()}else o=t();var D=!Dn((At||p).memoizedState,o);D&&(p.memoizedState=o,sn=!0),p=p.queue;var V=Om.bind(null,l,p,e);if(No(2048,8,V,[e]),p.getSnapshot!==t||D||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,gi(9,Ks(),Nm.bind(null,l,p,o,t),null),Lt===null)throw Error(i(349));v||(Jr&124)!==0||km(l,t,o)}return o}function km(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=dt.updateQueue,t===null?(t=fu(),dt.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function Nm(e,t,o,l){t.value=o,t.getSnapshot=l,Dm(t)&&jm(e)}function Om(e,t,o){return o(function(){Dm(t)&&jm(e)})}function Dm(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Dn(e,o)}catch{return!0}}function jm(e){var t=si(e,2);t!==null&&Bn(t,e,2)}function gu(e){var t=_n();if(typeof e=="function"){var o=e;if(e=o(),La){Ie(!0);try{o()}finally{Ie(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:e},t}function Lm(e,t,o,l){return e.baseState=o,pu(e,At,typeof l=="function"?l:Ar)}function Vv(e,t,o,l,p){if(Qs(e))throw Error(i(485));if(e=t.action,e!==null){var v={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){v.listeners.push(D)}};P.T!==null?o(!0):v.isTransition=!1,l(v),o=t.pending,o===null?(v.next=t.pending=v,Im(t,v)):(v.next=o.next,t.pending=o.next=v)}}function Im(e,t){var o=t.action,l=t.payload,p=e.state;if(t.isTransition){var v=P.T,D={};P.T=D;try{var V=o(p,l),se=P.S;se!==null&&se(D,V),zm(e,t,V)}catch(xe){yu(e,t,xe)}finally{P.T=v}}else try{v=o(p,l),zm(e,t,v)}catch(xe){yu(e,t,xe)}}function zm(e,t,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){Um(e,t,l)},function(l){return yu(e,t,l)}):Um(e,t,o)}function Um(e,t,o){t.status="fulfilled",t.value=o,Bm(t),e.state=o,t=e.pending,t!==null&&(o=t.next,o===t?e.pending=null:(o=o.next,t.next=o,Im(e,o)))}function yu(e,t,o){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=o,Bm(t),t=t.next;while(t!==l)}e.action=null}function Bm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pm(e,t){return t}function Fm(e,t){if(xt){var o=Lt.formState;if(o!==null){e:{var l=dt;if(xt){if(Ht){t:{for(var p=Ht,v=cr;p.nodeType!==8;){if(!v){p=null;break t}if(p=tr(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){Ht=tr(p.nextSibling),l=p.data==="F!";break e}}Na(l)}l=!1}l&&(t=o[0])}}return o=_n(),o.memoizedState=o.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pm,lastRenderedState:t},o.queue=l,o=op.bind(null,dt,l),l.dispatch=o,l=gu(!1),v=wu.bind(null,dt,!1,l.queue),l=_n(),p={state:t,dispatch:null,action:e,pending:null},l.queue=p,o=Vv.bind(null,dt,p,v,o),p.dispatch=o,l.memoizedState=e,[t,o,!1]}function Hm(e){var t=en();return Wm(t,At,e)}function Wm(e,t,o){if(t=pu(e,t,Pm)[0],e=Zs(Ar)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ko(t)}catch(D){throw D===_o?Ws:D}else l=t;t=en();var p=t.queue,v=p.dispatch;return o!==t.memoizedState&&(dt.flags|=2048,gi(9,Ks(),$v.bind(null,p,o),null)),[l,v,e]}function $v(e,t){e.action=t}function Vm(e){var t=en(),o=At;if(o!==null)return Wm(t,o,e);en(),t=t.memoizedState,o=en();var l=o.queue.dispatch;return o.memoizedState=e,[t,l,!1]}function gi(e,t,o,l){return e={tag:e,create:o,deps:l,inst:t,next:null},t=dt.updateQueue,t===null&&(t=fu(),dt.updateQueue=t),o=t.lastEffect,o===null?t.lastEffect=e.next=e:(l=o.next,o.next=e,e.next=l,t.lastEffect=e),e}function Ks(){return{destroy:void 0,resource:void 0}}function $m(){return en().memoizedState}function Xs(e,t,o,l){var p=_n();l=l===void 0?null:l,dt.flags|=e,p.memoizedState=gi(1|t,Ks(),o,l)}function No(e,t,o,l){var p=en();l=l===void 0?null:l;var v=p.memoizedState.inst;At!==null&&l!==null&&su(l,At.memoizedState.deps)?p.memoizedState=gi(t,v,o,l):(dt.flags|=e,p.memoizedState=gi(1|t,v,o,l))}function Gm(e,t){Xs(8390656,8,e,t)}function qm(e,t){No(2048,8,e,t)}function Ym(e,t){return No(4,2,e,t)}function Zm(e,t){return No(4,4,e,t)}function Km(e,t){if(typeof t=="function"){e=e();var o=t(e);return function(){typeof o=="function"?o():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xm(e,t,o){o=o!=null?o.concat([e]):null,No(4,4,Km.bind(null,t,e),o)}function bu(){}function Qm(e,t){var o=en();t=t===void 0?null:t;var l=o.memoizedState;return t!==null&&su(t,l[1])?l[0]:(o.memoizedState=[e,t],e)}function Jm(e,t){var o=en();t=t===void 0?null:t;var l=o.memoizedState;if(t!==null&&su(t,l[1]))return l[0];if(l=e(),La){Ie(!0);try{e()}finally{Ie(!1)}}return o.memoizedState=[l,t],l}function vu(e,t,o){return o===void 0||(Jr&1073741824)!==0?e.memoizedState=t:(e.memoizedState=o,e=nh(),dt.lanes|=e,oa|=e,o)}function ep(e,t,o,l){return Dn(o,t)?o:mi.current!==null?(e=vu(e,o,l),Dn(e,t)||(sn=!0),e):(Jr&42)===0?(sn=!0,e.memoizedState=o):(e=nh(),dt.lanes|=e,oa|=e,t)}function tp(e,t,o,l,p){var v=Y.p;Y.p=v!==0&&8>v?v:8;var D=P.T,V={};P.T=V,wu(e,!1,t,o);try{var se=p(),xe=P.S;if(xe!==null&&xe(V,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Me=Fv(se,l);Oo(e,t,Me,Un(e))}else Oo(e,t,l,Un(e))}catch(je){Oo(e,t,{then:function(){},status:"rejected",reason:je},Un())}finally{Y.p=v,P.T=D}}function Gv(){}function xu(e,t,o,l){if(e.tag!==5)throw Error(i(476));var p=np(e).queue;tp(e,p,t,oe,o===null?Gv:function(){return rp(e),o(l)})}function np(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:oe},next:null};var o={};return t.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:o},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function rp(e){var t=np(e).next.queue;Oo(e,t,{},Un())}function Su(){return hn(Ko)}function ap(){return en().memoizedState}function ip(){return en().memoizedState}function qv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var o=Un();e=Xr(o);var l=Qr(t,e,o);l!==null&&(Bn(l,t,o),Co(l,t,o)),t={cache:Xc()},e.payload=t;return}t=t.return}}function Yv(e,t,o){var l=Un();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Qs(e)?sp(t,o):(o=Fc(e,t,o,l),o!==null&&(Bn(o,e,l),lp(o,t,l)))}function op(e,t,o){var l=Un();Oo(e,t,o,l)}function Oo(e,t,o,l){var p={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qs(e))sp(t,p);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=t.lastRenderedReducer,v!==null))try{var D=t.lastRenderedState,V=v(D,o);if(p.hasEagerState=!0,p.eagerState=V,Dn(V,D))return Ls(e,t,p,0),Lt===null&&js(),!1}catch{}finally{}if(o=Fc(e,t,p,l),o!==null)return Bn(o,e,l),lp(o,t,l),!0}return!1}function wu(e,t,o,l){if(l={lane:2,revertLane:ed(),action:l,hasEagerState:!1,eagerState:null,next:null},Qs(e)){if(t)throw Error(i(479))}else t=Fc(e,o,l,2),t!==null&&Bn(t,e,2)}function Qs(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function sp(e,t){pi=Gs=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function lp(e,t,o){if((o&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,wt(e,o)}}var Js={readContext:hn,use:Ys,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},cp={readContext:hn,use:Ys,useCallback:function(e,t){return _n().memoizedState=[e,t===void 0?null:t],e},useContext:hn,useEffect:Gm,useImperativeHandle:function(e,t,o){o=o!=null?o.concat([e]):null,Xs(4194308,4,Km.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Xs(4194308,4,e,t)},useInsertionEffect:function(e,t){Xs(4,2,e,t)},useMemo:function(e,t){var o=_n();t=t===void 0?null:t;var l=e();if(La){Ie(!0);try{e()}finally{Ie(!1)}}return o.memoizedState=[l,t],l},useReducer:function(e,t,o){var l=_n();if(o!==void 0){var p=o(t);if(La){Ie(!0);try{o(t)}finally{Ie(!1)}}}else p=t;return l.memoizedState=l.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},l.queue=e,e=e.dispatch=Yv.bind(null,dt,e),[l.memoizedState,e]},useRef:function(e){var t=_n();return e={current:e},t.memoizedState=e},useState:function(e){e=gu(e);var t=e.queue,o=op.bind(null,dt,t);return t.dispatch=o,[e.memoizedState,o]},useDebugValue:bu,useDeferredValue:function(e,t){var o=_n();return vu(o,e,t)},useTransition:function(){var e=gu(!1);return e=tp.bind(null,dt,e.queue,!0,!1),_n().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,o){var l=dt,p=_n();if(xt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=t(),Lt===null)throw Error(i(349));(bt&124)!==0||km(l,t,o)}p.memoizedState=o;var v={value:o,getSnapshot:t};return p.queue=v,Gm(Om.bind(null,l,v,e),[e]),l.flags|=2048,gi(9,Ks(),Nm.bind(null,l,v,o,t),null),o},useId:function(){var e=_n(),t=Lt.identifierPrefix;if(xt){var o=_r,l=Er;o=(l&~(1<<32-Ve(l)-1)).toString(32)+o,t=""+t+"R"+o,o=qs++,0<o&&(t+="H"+o.toString(32)),t+=""}else o=Hv++,t=""+t+"r"+o.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Su,useFormState:Fm,useActionState:Fm,useOptimistic:function(e){var t=_n();t.memoizedState=t.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=o,t=wu.bind(null,dt,!0,o),o.dispatch=t,[e,t]},useMemoCache:mu,useCacheRefresh:function(){return _n().memoizedState=qv.bind(null,dt)}},up={readContext:hn,use:Ys,useCallback:Qm,useContext:hn,useEffect:qm,useImperativeHandle:Xm,useInsertionEffect:Ym,useLayoutEffect:Zm,useMemo:Jm,useReducer:Zs,useRef:$m,useState:function(){return Zs(Ar)},useDebugValue:bu,useDeferredValue:function(e,t){var o=en();return ep(o,At.memoizedState,e,t)},useTransition:function(){var e=Zs(Ar)[0],t=en().memoizedState;return[typeof e=="boolean"?e:ko(e),t]},useSyncExternalStore:Mm,useId:ap,useHostTransitionStatus:Su,useFormState:Hm,useActionState:Hm,useOptimistic:function(e,t){var o=en();return Lm(o,At,e,t)},useMemoCache:mu,useCacheRefresh:ip},Zv={readContext:hn,use:Ys,useCallback:Qm,useContext:hn,useEffect:qm,useImperativeHandle:Xm,useInsertionEffect:Ym,useLayoutEffect:Zm,useMemo:Jm,useReducer:hu,useRef:$m,useState:function(){return hu(Ar)},useDebugValue:bu,useDeferredValue:function(e,t){var o=en();return At===null?vu(o,e,t):ep(o,At.memoizedState,e,t)},useTransition:function(){var e=hu(Ar)[0],t=en().memoizedState;return[typeof e=="boolean"?e:ko(e),t]},useSyncExternalStore:Mm,useId:ap,useHostTransitionStatus:Su,useFormState:Vm,useActionState:Vm,useOptimistic:function(e,t){var o=en();return At!==null?Lm(o,At,e,t):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:mu,useCacheRefresh:ip},yi=null,Do=0;function el(e){var t=Do;return Do+=1,yi===null&&(yi=[]),Sm(yi,e,t)}function jo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function tl(e,t){throw t.$$typeof===w?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dp(e){var t=e._init;return t(e._payload)}function fp(e){function t(he,fe){if(e){var ve=he.deletions;ve===null?(he.deletions=[fe],he.flags|=16):ve.push(fe)}}function o(he,fe){if(!e)return null;for(;fe!==null;)t(he,fe),fe=fe.sibling;return null}function l(he){for(var fe=new Map;he!==null;)he.key!==null?fe.set(he.key,he):fe.set(he.index,he),he=he.sibling;return fe}function p(he,fe){return he=wr(he,fe),he.index=0,he.sibling=null,he}function v(he,fe,ve){return he.index=ve,e?(ve=he.alternate,ve!==null?(ve=ve.index,ve<fe?(he.flags|=67108866,fe):ve):(he.flags|=67108866,fe)):(he.flags|=1048576,fe)}function D(he){return e&&he.alternate===null&&(he.flags|=67108866),he}function V(he,fe,ve,ke){return fe===null||fe.tag!==6?(fe=Wc(ve,he.mode,ke),fe.return=he,fe):(fe=p(fe,ve),fe.return=he,fe)}function se(he,fe,ve,ke){var qe=ve.type;return qe===y?Me(he,fe,ve.props.children,ke,ve.key):fe!==null&&(fe.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===B&&dp(qe)===fe.type)?(fe=p(fe,ve.props),jo(fe,ve),fe.return=he,fe):(fe=zs(ve.type,ve.key,ve.props,null,he.mode,ke),jo(fe,ve),fe.return=he,fe)}function xe(he,fe,ve,ke){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==ve.containerInfo||fe.stateNode.implementation!==ve.implementation?(fe=Vc(ve,he.mode,ke),fe.return=he,fe):(fe=p(fe,ve.children||[]),fe.return=he,fe)}function Me(he,fe,ve,ke,qe){return fe===null||fe.tag!==7?(fe=Aa(ve,he.mode,ke,qe),fe.return=he,fe):(fe=p(fe,ve),fe.return=he,fe)}function je(he,fe,ve){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=Wc(""+fe,he.mode,ve),fe.return=he,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case S:return ve=zs(fe.type,fe.key,fe.props,null,he.mode,ve),jo(ve,fe),ve.return=he,ve;case x:return fe=Vc(fe,he.mode,ve),fe.return=he,fe;case B:var ke=fe._init;return fe=ke(fe._payload),je(he,fe,ve)}if(K(fe)||C(fe))return fe=Aa(fe,he.mode,ve,null),fe.return=he,fe;if(typeof fe.then=="function")return je(he,el(fe),ve);if(fe.$$typeof===A)return je(he,Fs(he,fe),ve);tl(he,fe)}return null}function Se(he,fe,ve,ke){var qe=fe!==null?fe.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return qe!==null?null:V(he,fe,""+ve,ke);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case S:return ve.key===qe?se(he,fe,ve,ke):null;case x:return ve.key===qe?xe(he,fe,ve,ke):null;case B:return qe=ve._init,ve=qe(ve._payload),Se(he,fe,ve,ke)}if(K(ve)||C(ve))return qe!==null?null:Me(he,fe,ve,ke,null);if(typeof ve.then=="function")return Se(he,fe,el(ve),ke);if(ve.$$typeof===A)return Se(he,fe,Fs(he,ve),ke);tl(he,ve)}return null}function we(he,fe,ve,ke,qe){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return he=he.get(ve)||null,V(fe,he,""+ke,qe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case S:return he=he.get(ke.key===null?ve:ke.key)||null,se(fe,he,ke,qe);case x:return he=he.get(ke.key===null?ve:ke.key)||null,xe(fe,he,ke,qe);case B:var ft=ke._init;return ke=ft(ke._payload),we(he,fe,ve,ke,qe)}if(K(ke)||C(ke))return he=he.get(ve)||null,Me(fe,he,ke,qe,null);if(typeof ke.then=="function")return we(he,fe,ve,el(ke),qe);if(ke.$$typeof===A)return we(he,fe,ve,Fs(fe,ke),qe);tl(fe,ke)}return null}function rt(he,fe,ve,ke){for(var qe=null,ft=null,Qe=fe,nt=fe=0,cn=null;Qe!==null&&nt<ve.length;nt++){Qe.index>nt?(cn=Qe,Qe=null):cn=Qe.sibling;var vt=Se(he,Qe,ve[nt],ke);if(vt===null){Qe===null&&(Qe=cn);break}e&&Qe&&vt.alternate===null&&t(he,Qe),fe=v(vt,fe,nt),ft===null?qe=vt:ft.sibling=vt,ft=vt,Qe=cn}if(nt===ve.length)return o(he,Qe),xt&&Ma(he,nt),qe;if(Qe===null){for(;nt<ve.length;nt++)Qe=je(he,ve[nt],ke),Qe!==null&&(fe=v(Qe,fe,nt),ft===null?qe=Qe:ft.sibling=Qe,ft=Qe);return xt&&Ma(he,nt),qe}for(Qe=l(Qe);nt<ve.length;nt++)cn=we(Qe,he,nt,ve[nt],ke),cn!==null&&(e&&cn.alternate!==null&&Qe.delete(cn.key===null?nt:cn.key),fe=v(cn,fe,nt),ft===null?qe=cn:ft.sibling=cn,ft=cn);return e&&Qe.forEach(function(ha){return t(he,ha)}),xt&&Ma(he,nt),qe}function tt(he,fe,ve,ke){if(ve==null)throw Error(i(151));for(var qe=null,ft=null,Qe=fe,nt=fe=0,cn=null,vt=ve.next();Qe!==null&&!vt.done;nt++,vt=ve.next()){Qe.index>nt?(cn=Qe,Qe=null):cn=Qe.sibling;var ha=Se(he,Qe,vt.value,ke);if(ha===null){Qe===null&&(Qe=cn);break}e&&Qe&&ha.alternate===null&&t(he,Qe),fe=v(ha,fe,nt),ft===null?qe=ha:ft.sibling=ha,ft=ha,Qe=cn}if(vt.done)return o(he,Qe),xt&&Ma(he,nt),qe;if(Qe===null){for(;!vt.done;nt++,vt=ve.next())vt=je(he,vt.value,ke),vt!==null&&(fe=v(vt,fe,nt),ft===null?qe=vt:ft.sibling=vt,ft=vt);return xt&&Ma(he,nt),qe}for(Qe=l(Qe);!vt.done;nt++,vt=ve.next())vt=we(Qe,he,nt,vt.value,ke),vt!==null&&(e&&vt.alternate!==null&&Qe.delete(vt.key===null?nt:vt.key),fe=v(vt,fe,nt),ft===null?qe=vt:ft.sibling=vt,ft=vt);return e&&Qe.forEach(function(K1){return t(he,K1)}),xt&&Ma(he,nt),qe}function Mt(he,fe,ve,ke){if(typeof ve=="object"&&ve!==null&&ve.type===y&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case S:e:{for(var qe=ve.key;fe!==null;){if(fe.key===qe){if(qe=ve.type,qe===y){if(fe.tag===7){o(he,fe.sibling),ke=p(fe,ve.props.children),ke.return=he,he=ke;break e}}else if(fe.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===B&&dp(qe)===fe.type){o(he,fe.sibling),ke=p(fe,ve.props),jo(ke,ve),ke.return=he,he=ke;break e}o(he,fe);break}else t(he,fe);fe=fe.sibling}ve.type===y?(ke=Aa(ve.props.children,he.mode,ke,ve.key),ke.return=he,he=ke):(ke=zs(ve.type,ve.key,ve.props,null,he.mode,ke),jo(ke,ve),ke.return=he,he=ke)}return D(he);case x:e:{for(qe=ve.key;fe!==null;){if(fe.key===qe)if(fe.tag===4&&fe.stateNode.containerInfo===ve.containerInfo&&fe.stateNode.implementation===ve.implementation){o(he,fe.sibling),ke=p(fe,ve.children||[]),ke.return=he,he=ke;break e}else{o(he,fe);break}else t(he,fe);fe=fe.sibling}ke=Vc(ve,he.mode,ke),ke.return=he,he=ke}return D(he);case B:return qe=ve._init,ve=qe(ve._payload),Mt(he,fe,ve,ke)}if(K(ve))return rt(he,fe,ve,ke);if(C(ve)){if(qe=C(ve),typeof qe!="function")throw Error(i(150));return ve=qe.call(ve),tt(he,fe,ve,ke)}if(typeof ve.then=="function")return Mt(he,fe,el(ve),ke);if(ve.$$typeof===A)return Mt(he,fe,Fs(he,ve),ke);tl(he,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,fe!==null&&fe.tag===6?(o(he,fe.sibling),ke=p(fe,ve),ke.return=he,he=ke):(o(he,fe),ke=Wc(ve,he.mode,ke),ke.return=he,he=ke),D(he)):o(he,fe)}return function(he,fe,ve,ke){try{Do=0;var qe=Mt(he,fe,ve,ke);return yi=null,qe}catch(Qe){if(Qe===_o||Qe===Ws)throw Qe;var ft=jn(29,Qe,null,he.mode);return ft.lanes=ke,ft.return=he,ft}finally{}}}var bi=fp(!0),mp=fp(!1),Gn=k(null),ur=null;function ea(e){var t=e.alternate;Z(an,an.current&1),Z(Gn,e),ur===null&&(t===null||mi.current!==null||t.memoizedState!==null)&&(ur=e)}function pp(e){if(e.tag===22){if(Z(an,an.current),Z(Gn,e),ur===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ur=e)}}else ta()}function ta(){Z(an,an.current),Z(Gn,Gn.current)}function Rr(e){$(Gn),ur===e&&(ur=null),$(an)}var an=k(0);function nl(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||fd(o)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Eu(e,t,o,l){t=e.memoizedState,o=o(l,t),o=o==null?t:b({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var _u={enqueueSetState:function(e,t,o){e=e._reactInternals;var l=Un(),p=Xr(l);p.payload=t,o!=null&&(p.callback=o),t=Qr(e,p,l),t!==null&&(Bn(t,e,l),Co(t,e,l))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var l=Un(),p=Xr(l);p.tag=1,p.payload=t,o!=null&&(p.callback=o),t=Qr(e,p,l),t!==null&&(Bn(t,e,l),Co(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Un(),l=Xr(o);l.tag=2,t!=null&&(l.callback=t),t=Qr(e,l,o),t!==null&&(Bn(t,e,o),Co(t,e,o))}};function hp(e,t,o,l,p,v,D){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,v,D):t.prototype&&t.prototype.isPureReactComponent?!go(o,l)||!go(p,v):!0}function gp(e,t,o,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,l),t.state!==e&&_u.enqueueReplaceState(t,t.state,null)}function Ia(e,t){var o=t;if("ref"in t){o={};for(var l in t)l!=="ref"&&(o[l]=t[l])}if(e=e.defaultProps){o===t&&(o=b({},o));for(var p in e)o[p]===void 0&&(o[p]=e[p])}return o}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function yp(e){rl(e)}function bp(e){console.error(e)}function vp(e){rl(e)}function al(e,t){try{var o=e.onUncaughtError;o(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function xp(e,t,o){try{var l=e.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Tu(e,t,o){return o=Xr(o),o.tag=3,o.payload={element:null},o.callback=function(){al(e,t)},o}function Sp(e){return e=Xr(e),e.tag=3,e}function wp(e,t,o,l){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var v=l.value;e.payload=function(){return p(v)},e.callback=function(){xp(t,o,l)}}var D=o.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(e.callback=function(){xp(t,o,l),typeof p!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var V=l.stack;this.componentDidCatch(l.value,{componentStack:V!==null?V:""})})}function Kv(e,t,o,l,p){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=o.alternate,t!==null&&So(t,o,p,!0),o=Gn.current,o!==null){switch(o.tag){case 13:return ur===null?Zu():o.alternate===null&&Wt===0&&(Wt=3),o.flags&=-257,o.flags|=65536,o.lanes=p,l===eu?o.flags|=16384:(t=o.updateQueue,t===null?o.updateQueue=new Set([l]):t.add(l),Xu(e,l,p)),!1;case 22:return o.flags|=65536,l===eu?o.flags|=16384:(t=o.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=t):(o=t.retryQueue,o===null?t.retryQueue=new Set([l]):o.add(l)),Xu(e,l,p)),!1}throw Error(i(435,o.tag))}return Xu(e,l,p),Zu(),!1}if(xt)return t=Gn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=p,l!==qc&&(e=Error(i(422),{cause:l}),xo(Hn(e,o)))):(l!==qc&&(t=Error(i(423),{cause:l}),xo(Hn(t,o))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,l=Hn(l,o),p=Tu(e.stateNode,l,p),ru(e,p),Wt!==4&&(Wt=2)),!1;var v=Error(i(520),{cause:l});if(v=Hn(v,o),Fo===null?Fo=[v]:Fo.push(v),Wt!==4&&(Wt=2),t===null)return!0;l=Hn(l,o),o=t;do{switch(o.tag){case 3:return o.flags|=65536,e=p&-p,o.lanes|=e,e=Tu(o.stateNode,l,e),ru(o,e),!1;case 1:if(t=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(sa===null||!sa.has(v))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Sp(p),wp(p,e,o,l),ru(o,p),!1}o=o.return}while(o!==null);return!1}var Ep=Error(i(461)),sn=!1;function dn(e,t,o,l){t.child=e===null?mp(t,null,o,l):bi(t,e.child,o,l)}function _p(e,t,o,l,p){o=o.render;var v=t.ref;if("ref"in l){var D={};for(var V in l)V!=="ref"&&(D[V]=l[V])}else D=l;return Da(t),l=lu(e,t,o,D,v,p),V=cu(),e!==null&&!sn?(uu(e,t,p),Mr(e,t,p)):(xt&&V&&$c(t),t.flags|=1,dn(e,t,l,p),t.child)}function Tp(e,t,o,l,p){if(e===null){var v=o.type;return typeof v=="function"&&!Hc(v)&&v.defaultProps===void 0&&o.compare===null?(t.tag=15,t.type=v,Cp(e,t,v,l,p)):(e=zs(o.type,null,l,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(v=e.child,!Du(e,p)){var D=v.memoizedProps;if(o=o.compare,o=o!==null?o:go,o(D,l)&&e.ref===t.ref)return Mr(e,t,p)}return t.flags|=1,e=wr(v,l),e.ref=t.ref,e.return=t,t.child=e}function Cp(e,t,o,l,p){if(e!==null){var v=e.memoizedProps;if(go(v,l)&&e.ref===t.ref)if(sn=!1,t.pendingProps=l=v,Du(e,p))(e.flags&131072)!==0&&(sn=!0);else return t.lanes=e.lanes,Mr(e,t,p)}return Cu(e,t,o,l,p)}function Ap(e,t,o){var l=t.pendingProps,p=l.children,v=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=v!==null?v.baseLanes|o:o,e!==null){for(p=t.child=e.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;t.childLanes=v&~l}else t.childLanes=0,t.child=null;return Rp(e,t,l,o)}if((o&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hs(t,v!==null?v.cachePool:null),v!==null?Cm(t,v):iu(),pp(t);else return t.lanes=t.childLanes=536870912,Rp(e,t,v!==null?v.baseLanes|o:o,o)}else v!==null?(Hs(t,v.cachePool),Cm(t,v),ta(),t.memoizedState=null):(e!==null&&Hs(t,null),iu(),ta());return dn(e,t,p,o),t.child}function Rp(e,t,o,l){var p=Jc();return p=p===null?null:{parent:rn._currentValue,pool:p},t.memoizedState={baseLanes:o,cachePool:p},e!==null&&Hs(t,null),iu(),pp(t),e!==null&&So(e,t,l,!0),null}function il(e,t){var o=t.ref;if(o===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(e===null||e.ref!==o)&&(t.flags|=4194816)}}function Cu(e,t,o,l,p){return Da(t),o=lu(e,t,o,l,void 0,p),l=cu(),e!==null&&!sn?(uu(e,t,p),Mr(e,t,p)):(xt&&l&&$c(t),t.flags|=1,dn(e,t,o,p),t.child)}function Mp(e,t,o,l,p,v){return Da(t),t.updateQueue=null,o=Rm(t,l,o,p),Am(e),l=cu(),e!==null&&!sn?(uu(e,t,v),Mr(e,t,v)):(xt&&l&&$c(t),t.flags|=1,dn(e,t,o,v),t.child)}function kp(e,t,o,l,p){if(Da(t),t.stateNode===null){var v=li,D=o.contextType;typeof D=="object"&&D!==null&&(v=hn(D)),v=new o(l,v),t.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=_u,t.stateNode=v,v._reactInternals=t,v=t.stateNode,v.props=l,v.state=t.memoizedState,v.refs={},tu(t),D=o.contextType,v.context=typeof D=="object"&&D!==null?hn(D):li,v.state=t.memoizedState,D=o.getDerivedStateFromProps,typeof D=="function"&&(Eu(t,o,D,l),v.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(D=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),D!==v.state&&_u.enqueueReplaceState(v,v.state,null),Ro(t,l,v,p),Ao(),v.state=t.memoizedState),typeof v.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){v=t.stateNode;var V=t.memoizedProps,se=Ia(o,V);v.props=se;var xe=v.context,Me=o.contextType;D=li,typeof Me=="object"&&Me!==null&&(D=hn(Me));var je=o.getDerivedStateFromProps;Me=typeof je=="function"||typeof v.getSnapshotBeforeUpdate=="function",V=t.pendingProps!==V,Me||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(V||xe!==D)&&gp(t,v,l,D),Kr=!1;var Se=t.memoizedState;v.state=Se,Ro(t,l,v,p),Ao(),xe=t.memoizedState,V||Se!==xe||Kr?(typeof je=="function"&&(Eu(t,o,je,l),xe=t.memoizedState),(se=Kr||hp(t,o,se,l,Se,xe,D))?(Me||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=xe),v.props=l,v.state=xe,v.context=D,l=se):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{v=t.stateNode,nu(e,t),D=t.memoizedProps,Me=Ia(o,D),v.props=Me,je=t.pendingProps,Se=v.context,xe=o.contextType,se=li,typeof xe=="object"&&xe!==null&&(se=hn(xe)),V=o.getDerivedStateFromProps,(xe=typeof V=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D!==je||Se!==se)&&gp(t,v,l,se),Kr=!1,Se=t.memoizedState,v.state=Se,Ro(t,l,v,p),Ao();var we=t.memoizedState;D!==je||Se!==we||Kr||e!==null&&e.dependencies!==null&&Ps(e.dependencies)?(typeof V=="function"&&(Eu(t,o,V,l),we=t.memoizedState),(Me=Kr||hp(t,o,Me,l,Se,we,se)||e!==null&&e.dependencies!==null&&Ps(e.dependencies))?(xe||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(l,we,se),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(l,we,se)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||D===e.memoizedProps&&Se===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&Se===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=we),v.props=l,v.state=we,v.context=se,l=Me):(typeof v.componentDidUpdate!="function"||D===e.memoizedProps&&Se===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&Se===e.memoizedState||(t.flags|=1024),l=!1)}return v=l,il(e,t),l=(t.flags&128)!==0,v||l?(v=t.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:v.render(),t.flags|=1,e!==null&&l?(t.child=bi(t,e.child,null,p),t.child=bi(t,null,o,p)):dn(e,t,o,p),t.memoizedState=v.state,e=t.child):e=Mr(e,t,p),e}function Np(e,t,o,l){return vo(),t.flags|=256,dn(e,t,o,l),t.child}var Au={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ru(e){return{baseLanes:e,cachePool:bm()}}function Mu(e,t,o){return e=e!==null?e.childLanes&~o:0,t&&(e|=qn),e}function Op(e,t,o){var l=t.pendingProps,p=!1,v=(t.flags&128)!==0,D;if((D=v)||(D=e!==null&&e.memoizedState===null?!1:(an.current&2)!==0),D&&(p=!0,t.flags&=-129),D=(t.flags&32)!==0,t.flags&=-33,e===null){if(xt){if(p?ea(t):ta(),xt){var V=Ht,se;if(se=V){e:{for(se=V,V=cr;se.nodeType!==8;){if(!V){V=null;break e}if(se=tr(se.nextSibling),se===null){V=null;break e}}V=se}V!==null?(t.memoizedState={dehydrated:V,treeContext:Ra!==null?{id:Er,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},se=jn(18,null,null,0),se.stateNode=V,se.return=t,t.child=se,bn=t,Ht=null,se=!0):se=!1}se||Na(t)}if(V=t.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return fd(V)?t.lanes=32:t.lanes=536870912,null;Rr(t)}return V=l.children,l=l.fallback,p?(ta(),p=t.mode,V=ol({mode:"hidden",children:V},p),l=Aa(l,p,o,null),V.return=t,l.return=t,V.sibling=l,t.child=V,p=t.child,p.memoizedState=Ru(o),p.childLanes=Mu(e,D,o),t.memoizedState=Au,l):(ea(t),ku(t,V))}if(se=e.memoizedState,se!==null&&(V=se.dehydrated,V!==null)){if(v)t.flags&256?(ea(t),t.flags&=-257,t=Nu(e,t,o)):t.memoizedState!==null?(ta(),t.child=e.child,t.flags|=128,t=null):(ta(),p=l.fallback,V=t.mode,l=ol({mode:"visible",children:l.children},V),p=Aa(p,V,o,null),p.flags|=2,l.return=t,p.return=t,l.sibling=p,t.child=l,bi(t,e.child,null,o),l=t.child,l.memoizedState=Ru(o),l.childLanes=Mu(e,D,o),t.memoizedState=Au,t=p);else if(ea(t),fd(V)){if(D=V.nextSibling&&V.nextSibling.dataset,D)var xe=D.dgst;D=xe,l=Error(i(419)),l.stack="",l.digest=D,xo({value:l,source:null,stack:null}),t=Nu(e,t,o)}else if(sn||So(e,t,o,!1),D=(o&e.childLanes)!==0,sn||D){if(D=Lt,D!==null&&(l=o&-o,l=(l&42)!==0?1:gt(l),l=(l&(D.suspendedLanes|o))!==0?0:l,l!==0&&l!==se.retryLane))throw se.retryLane=l,si(e,l),Bn(D,e,l),Ep;V.data==="$?"||Zu(),t=Nu(e,t,o)}else V.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=se.treeContext,Ht=tr(V.nextSibling),bn=t,xt=!0,ka=null,cr=!1,e!==null&&(Vn[$n++]=Er,Vn[$n++]=_r,Vn[$n++]=Ra,Er=e.id,_r=e.overflow,Ra=t),t=ku(t,l.children),t.flags|=4096);return t}return p?(ta(),p=l.fallback,V=t.mode,se=e.child,xe=se.sibling,l=wr(se,{mode:"hidden",children:l.children}),l.subtreeFlags=se.subtreeFlags&65011712,xe!==null?p=wr(xe,p):(p=Aa(p,V,o,null),p.flags|=2),p.return=t,l.return=t,l.sibling=p,t.child=l,l=p,p=t.child,V=e.child.memoizedState,V===null?V=Ru(o):(se=V.cachePool,se!==null?(xe=rn._currentValue,se=se.parent!==xe?{parent:xe,pool:xe}:se):se=bm(),V={baseLanes:V.baseLanes|o,cachePool:se}),p.memoizedState=V,p.childLanes=Mu(e,D,o),t.memoizedState=Au,l):(ea(t),o=e.child,e=o.sibling,o=wr(o,{mode:"visible",children:l.children}),o.return=t,o.sibling=null,e!==null&&(D=t.deletions,D===null?(t.deletions=[e],t.flags|=16):D.push(e)),t.child=o,t.memoizedState=null,o)}function ku(e,t){return t=ol({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ol(e,t){return e=jn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Nu(e,t,o){return bi(t,e.child,null,o),e=ku(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dp(e,t,o){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Zc(e.return,t,o)}function Ou(e,t,o,l,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:p}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=o,v.tailMode=p)}function jp(e,t,o){var l=t.pendingProps,p=l.revealOrder,v=l.tail;if(dn(e,t,l.children,o),l=an.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dp(e,o,t);else if(e.tag===19)Dp(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Z(an,l),p){case"forwards":for(o=t.child,p=null;o!==null;)e=o.alternate,e!==null&&nl(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=t.child,t.child=null):(p=o.sibling,o.sibling=null),Ou(t,!1,p,o,v);break;case"backwards":for(o=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&nl(e)===null){t.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}Ou(t,!0,o,null,v);break;case"together":Ou(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mr(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),oa|=t.lanes,(o&t.childLanes)===0)if(e!==null){if(So(e,t,o,!1),(o&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,o=wr(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=wr(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function Du(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ps(e)))}function Xv(e,t,o){switch(t.tag){case 3:pe(t,t.stateNode.containerInfo),Zr(t,rn,e.memoizedState.cache),vo();break;case 27:case 5:Re(t);break;case 4:pe(t,t.stateNode.containerInfo);break;case 10:Zr(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(ea(t),t.flags|=128,null):(o&t.child.childLanes)!==0?Op(e,t,o):(ea(t),e=Mr(e,t,o),e!==null?e.sibling:null);ea(t);break;case 19:var p=(e.flags&128)!==0;if(l=(o&t.childLanes)!==0,l||(So(e,t,o,!1),l=(o&t.childLanes)!==0),p){if(l)return jp(e,t,o);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Z(an,an.current),l)break;return null;case 22:case 23:return t.lanes=0,Ap(e,t,o);case 24:Zr(t,rn,e.memoizedState.cache)}return Mr(e,t,o)}function Lp(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps)sn=!0;else{if(!Du(e,o)&&(t.flags&128)===0)return sn=!1,Xv(e,t,o);sn=(e.flags&131072)!==0}else sn=!1,xt&&(t.flags&1048576)!==0&&dm(t,Bs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,p=l._init;if(l=p(l._payload),t.type=l,typeof l=="function")Hc(l)?(e=Ia(l,e),t.tag=1,t=kp(null,t,l,e,o)):(t.tag=0,t=Cu(null,t,l,e,o));else{if(l!=null){if(p=l.$$typeof,p===N){t.tag=11,t=_p(null,t,l,e,o);break e}else if(p===F){t.tag=14,t=Tp(null,t,l,e,o);break e}}throw t=_(l)||l,Error(i(306,t,""))}}return t;case 0:return Cu(e,t,t.type,t.pendingProps,o);case 1:return l=t.type,p=Ia(l,t.pendingProps),kp(e,t,l,p,o);case 3:e:{if(pe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));l=t.pendingProps;var v=t.memoizedState;p=v.element,nu(e,t),Ro(t,l,null,o);var D=t.memoizedState;if(l=D.cache,Zr(t,rn,l),l!==v.cache&&Kc(t,[rn],o,!0),Ao(),l=D.element,v.isDehydrated)if(v={element:l,isDehydrated:!1,cache:D.cache},t.updateQueue.baseState=v,t.memoizedState=v,t.flags&256){t=Np(e,t,l,o);break e}else if(l!==p){p=Hn(Error(i(424)),t),xo(p),t=Np(e,t,l,o);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ht=tr(e.firstChild),bn=t,xt=!0,ka=null,cr=!0,o=mp(t,null,l,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(vo(),l===p){t=Mr(e,t,o);break e}dn(e,t,l,o)}t=t.child}return t;case 26:return il(e,t),e===null?(o=Bh(t.type,null,t.pendingProps,null))?t.memoizedState=o:xt||(o=t.type,e=t.pendingProps,l=xl(Ee.current).createElement(o),l[Ot]=t,l[ut]=e,mn(l,o,e),Gt(l),t.stateNode=l):t.memoizedState=Bh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Re(t),e===null&&xt&&(l=t.stateNode=Ih(t.type,t.pendingProps,Ee.current),bn=t,cr=!0,p=Ht,ua(t.type)?(md=p,Ht=tr(l.firstChild)):Ht=p),dn(e,t,t.pendingProps.children,o),il(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xt&&((p=l=Ht)&&(l=T1(l,t.type,t.pendingProps,cr),l!==null?(t.stateNode=l,bn=t,Ht=tr(l.firstChild),cr=!1,p=!0):p=!1),p||Na(t)),Re(t),p=t.type,v=t.pendingProps,D=e!==null?e.memoizedProps:null,l=v.children,cd(p,v)?l=null:D!==null&&cd(p,D)&&(t.flags|=32),t.memoizedState!==null&&(p=lu(e,t,Wv,null,null,o),Ko._currentValue=p),il(e,t),dn(e,t,l,o),t.child;case 6:return e===null&&xt&&((e=o=Ht)&&(o=C1(o,t.pendingProps,cr),o!==null?(t.stateNode=o,bn=t,Ht=null,e=!0):e=!1),e||Na(t)),null;case 13:return Op(e,t,o);case 4:return pe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=bi(t,null,l,o):dn(e,t,l,o),t.child;case 11:return _p(e,t,t.type,t.pendingProps,o);case 7:return dn(e,t,t.pendingProps,o),t.child;case 8:return dn(e,t,t.pendingProps.children,o),t.child;case 12:return dn(e,t,t.pendingProps.children,o),t.child;case 10:return l=t.pendingProps,Zr(t,t.type,l.value),dn(e,t,l.children,o),t.child;case 9:return p=t.type._context,l=t.pendingProps.children,Da(t),p=hn(p),l=l(p),t.flags|=1,dn(e,t,l,o),t.child;case 14:return Tp(e,t,t.type,t.pendingProps,o);case 15:return Cp(e,t,t.type,t.pendingProps,o);case 19:return jp(e,t,o);case 31:return l=t.pendingProps,o=t.mode,l={mode:l.mode,children:l.children},e===null?(o=ol(l,o),o.ref=t.ref,t.child=o,o.return=t,t=o):(o=wr(e.child,l),o.ref=t.ref,t.child=o,o.return=t,t=o),t;case 22:return Ap(e,t,o);case 24:return Da(t),l=hn(rn),e===null?(p=Jc(),p===null&&(p=Lt,v=Xc(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=o),p=v),t.memoizedState={parent:l,cache:p},tu(t),Zr(t,rn,p)):((e.lanes&o)!==0&&(nu(e,t),Ro(t,null,null,o),Ao()),p=e.memoizedState,v=t.memoizedState,p.parent!==l?(p={parent:l,cache:l},t.memoizedState=p,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=p),Zr(t,rn,l)):(l=v.cache,Zr(t,rn,l),l!==p.cache&&Kc(t,[rn],o,!0))),dn(e,t,t.pendingProps.children,o),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function kr(e){e.flags|=4}function Ip(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Vh(t)){if(t=Gn.current,t!==null&&((bt&4194048)===bt?ur!==null:(bt&62914560)!==bt&&(bt&536870912)===0||t!==ur))throw To=eu,vm;e.flags|=8192}}function sl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ke():536870912,e.lanes|=t,wi|=t)}function Lo(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,l=0;if(t)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=o,t}function Qv(e,t,o){var l=t.pendingProps;switch(Gc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(t),null;case 1:return Pt(t),null;case 3:return o=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Cr(rn),de(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(bo(t)?kr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pm())),Pt(t),null;case 26:return o=t.memoizedState,e===null?(kr(t),o!==null?(Pt(t),Ip(t,o)):(Pt(t),t.flags&=-16777217)):o?o!==e.memoizedState?(kr(t),Pt(t),Ip(t,o)):(Pt(t),t.flags&=-16777217):(e.memoizedProps!==l&&kr(t),Pt(t),t.flags&=-16777217),null;case 27:me(t),o=Ee.current;var p=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&kr(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Pt(t),null}e=le.current,bo(t)?fm(t):(e=Ih(p,l,o),t.stateNode=e,kr(t))}return Pt(t),null;case 5:if(me(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&kr(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Pt(t),null}if(e=le.current,bo(t))fm(t);else{switch(p=xl(Ee.current),e){case 1:e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?p.createElement("select",{is:l.is}):p.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?p.createElement(o,{is:l.is}):p.createElement(o)}}e[Ot]=t,e[ut]=l;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)e.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=e;e:switch(mn(e,o,l),o){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&kr(t)}}return Pt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&kr(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(e=Ee.current,bo(t)){if(e=t.stateNode,o=t.memoizedProps,l=null,p=bn,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}e[Ot]=t,e=!!(e.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||Mh(e.nodeValue,o)),e||Na(t)}else e=xl(e).createTextNode(l),e[Ot]=t,t.stateNode=e}return Pt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=bo(t),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(i(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Ot]=t}else vo(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Pt(t),p=!1}else p=pm(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return t.flags&256?(Rr(t),t):(Rr(t),null)}if(Rr(t),(t.flags&128)!==0)return t.lanes=o,t;if(o=l!==null,e=e!==null&&e.memoizedState!==null,o){l=t.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool);var v=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==p&&(l.flags|=2048)}return o!==e&&o&&(t.child.flags|=8192),sl(t,t.updateQueue),Pt(t),null;case 4:return de(),e===null&&ad(t.stateNode.containerInfo),Pt(t),null;case 10:return Cr(t.type),Pt(t),null;case 19:if($(an),p=t.memoizedState,p===null)return Pt(t),null;if(l=(t.flags&128)!==0,v=p.rendering,v===null)if(l)Lo(p,!1);else{if(Wt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=nl(e),v!==null){for(t.flags|=128,Lo(p,!1),e=v.updateQueue,t.updateQueue=e,sl(t,e),t.subtreeFlags=0,e=o,o=t.child;o!==null;)um(o,e),o=o.sibling;return Z(an,an.current&1|2),t.child}e=e.sibling}p.tail!==null&&j()>ul&&(t.flags|=128,l=!0,Lo(p,!1),t.lanes=4194304)}else{if(!l)if(e=nl(v),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,sl(t,e),Lo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!xt)return Pt(t),null}else 2*j()-p.renderingStartTime>ul&&o!==536870912&&(t.flags|=128,l=!0,Lo(p,!1),t.lanes=4194304);p.isBackwards?(v.sibling=t.child,t.child=v):(e=p.last,e!==null?e.sibling=v:t.child=v,p.last=v)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=j(),t.sibling=null,e=an.current,Z(an,l?e&1|2:e&1),t):(Pt(t),null);case 22:case 23:return Rr(t),ou(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(o&536870912)!==0&&(t.flags&128)===0&&(Pt(t),t.subtreeFlags&6&&(t.flags|=8192)):Pt(t),o=t.updateQueue,o!==null&&sl(t,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==o&&(t.flags|=2048),e!==null&&$(ja),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Cr(rn),Pt(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Jv(e,t){switch(Gc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cr(rn),de(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return me(t),null;case 13:if(Rr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));vo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(an),null;case 4:return de(),null;case 10:return Cr(t.type),null;case 22:case 23:return Rr(t),ou(),e!==null&&$(ja),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Cr(rn),null;case 25:return null;default:return null}}function zp(e,t){switch(Gc(t),t.tag){case 3:Cr(rn),de();break;case 26:case 27:case 5:me(t);break;case 4:de();break;case 13:Rr(t);break;case 19:$(an);break;case 10:Cr(t.type);break;case 22:case 23:Rr(t),ou(),e!==null&&$(ja);break;case 24:Cr(rn)}}function Io(e,t){try{var o=t.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var p=l.next;o=p;do{if((o.tag&e)===e){l=void 0;var v=o.create,D=o.inst;l=v(),D.destroy=l}o=o.next}while(o!==p)}}catch(V){Dt(t,t.return,V)}}function na(e,t,o){try{var l=t.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var v=p.next;l=v;do{if((l.tag&e)===e){var D=l.inst,V=D.destroy;if(V!==void 0){D.destroy=void 0,p=t;var se=o,xe=V;try{xe()}catch(Me){Dt(p,se,Me)}}}l=l.next}while(l!==v)}}catch(Me){Dt(t,t.return,Me)}}function Up(e){var t=e.updateQueue;if(t!==null){var o=e.stateNode;try{Tm(t,o)}catch(l){Dt(e,e.return,l)}}}function Bp(e,t,o){o.props=Ia(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(l){Dt(e,t,l)}}function zo(e,t){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof o=="function"?e.refCleanup=o(l):o.current=l}}catch(p){Dt(e,t,p)}}function dr(e,t){var o=e.ref,l=e.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(p){Dt(e,t,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Dt(e,t,p)}else o.current=null}function Pp(e){var t=e.type,o=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break e;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(p){Dt(e,e.return,p)}}function ju(e,t,o){try{var l=e.stateNode;x1(l,e.type,o,t),l[ut]=t}catch(p){Dt(e,e.return,p)}}function Fp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ua(e.type)||e.tag===4}function Lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ua(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iu(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,t):(t=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,t.appendChild(e),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=vl));else if(l!==4&&(l===27&&ua(e.type)&&(o=e.stateNode,t=null),e=e.child,e!==null))for(Iu(e,t,o),e=e.sibling;e!==null;)Iu(e,t,o),e=e.sibling}function ll(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(l!==4&&(l===27&&ua(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(ll(e,t,o),e=e.sibling;e!==null;)ll(e,t,o),e=e.sibling}function Hp(e){var t=e.stateNode,o=e.memoizedProps;try{for(var l=e.type,p=t.attributes;p.length;)t.removeAttributeNode(p[0]);mn(t,l,o),t[Ot]=e,t[ut]=o}catch(v){Dt(e,e.return,v)}}var Nr=!1,Yt=!1,zu=!1,Wp=typeof WeakSet=="function"?WeakSet:Set,ln=null;function e1(e,t){if(e=e.containerInfo,sd=Cl,e=em(e),Lc(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var p=l.anchorOffset,v=l.focusNode;l=l.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var D=0,V=-1,se=-1,xe=0,Me=0,je=e,Se=null;t:for(;;){for(var we;je!==o||p!==0&&je.nodeType!==3||(V=D+p),je!==v||l!==0&&je.nodeType!==3||(se=D+l),je.nodeType===3&&(D+=je.nodeValue.length),(we=je.firstChild)!==null;)Se=je,je=we;for(;;){if(je===e)break t;if(Se===o&&++xe===p&&(V=D),Se===v&&++Me===l&&(se=D),(we=je.nextSibling)!==null)break;je=Se,Se=je.parentNode}je=we}o=V===-1||se===-1?null:{start:V,end:se}}else o=null}o=o||{start:0,end:0}}else o=null;for(ld={focusedElem:e,selectionRange:o},Cl=!1,ln=t;ln!==null;)if(t=ln,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ln=e;else for(;ln!==null;){switch(t=ln,v=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&v!==null){e=void 0,o=t,p=v.memoizedProps,v=v.memoizedState,l=o.stateNode;try{var rt=Ia(o.type,p,o.elementType===o.type);e=l.getSnapshotBeforeUpdate(rt,v),l.__reactInternalSnapshotBeforeUpdate=e}catch(tt){Dt(o,o.return,tt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,o=e.nodeType,o===9)dd(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,ln=e;break}ln=t.return}}function Vp(e,t,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:ra(e,o),l&4&&Io(5,o);break;case 1:if(ra(e,o),l&4)if(e=o.stateNode,t===null)try{e.componentDidMount()}catch(D){Dt(o,o.return,D)}else{var p=Ia(o.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(p,t,e.__reactInternalSnapshotBeforeUpdate)}catch(D){Dt(o,o.return,D)}}l&64&&Up(o),l&512&&zo(o,o.return);break;case 3:if(ra(e,o),l&64&&(e=o.updateQueue,e!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{Tm(e,t)}catch(D){Dt(o,o.return,D)}}break;case 27:t===null&&l&4&&Hp(o);case 26:case 5:ra(e,o),t===null&&l&4&&Pp(o),l&512&&zo(o,o.return);break;case 12:ra(e,o);break;case 13:ra(e,o),l&4&&qp(e,o),l&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=c1.bind(null,o),A1(e,o))));break;case 22:if(l=o.memoizedState!==null||Nr,!l){t=t!==null&&t.memoizedState!==null||Yt,p=Nr;var v=Yt;Nr=l,(Yt=t)&&!v?aa(e,o,(o.subtreeFlags&8772)!==0):ra(e,o),Nr=p,Yt=v}break;case 30:break;default:ra(e,o)}}function $p(e){var t=e.alternate;t!==null&&(e.alternate=null,$p(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Za(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ut=null,Tn=!1;function Or(e,t,o){for(o=o.child;o!==null;)Gp(e,t,o),o=o.sibling}function Gp(e,t,o){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(De,o)}catch{}switch(o.tag){case 26:Yt||dr(o,t),Or(e,t,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Yt||dr(o,t);var l=Ut,p=Tn;ua(o.type)&&(Ut=o.stateNode,Tn=!1),Or(e,t,o),Go(o.stateNode),Ut=l,Tn=p;break;case 5:Yt||dr(o,t);case 6:if(l=Ut,p=Tn,Ut=null,Or(e,t,o),Ut=l,Tn=p,Ut!==null)if(Tn)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(o.stateNode)}catch(v){Dt(o,t,v)}else try{Ut.removeChild(o.stateNode)}catch(v){Dt(o,t,v)}break;case 18:Ut!==null&&(Tn?(e=Ut,jh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),es(e)):jh(Ut,o.stateNode));break;case 4:l=Ut,p=Tn,Ut=o.stateNode.containerInfo,Tn=!0,Or(e,t,o),Ut=l,Tn=p;break;case 0:case 11:case 14:case 15:Yt||na(2,o,t),Yt||na(4,o,t),Or(e,t,o);break;case 1:Yt||(dr(o,t),l=o.stateNode,typeof l.componentWillUnmount=="function"&&Bp(o,t,l)),Or(e,t,o);break;case 21:Or(e,t,o);break;case 22:Yt=(l=Yt)||o.memoizedState!==null,Or(e,t,o),Yt=l;break;default:Or(e,t,o)}}function qp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{es(e)}catch(o){Dt(t,t.return,o)}}function t1(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Wp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Wp),t;default:throw Error(i(435,e.tag))}}function Uu(e,t){var o=t1(e);t.forEach(function(l){var p=u1.bind(null,e,l);o.has(l)||(o.add(l),l.then(p,p))})}function Ln(e,t){var o=t.deletions;if(o!==null)for(var l=0;l<o.length;l++){var p=o[l],v=e,D=t,V=D;e:for(;V!==null;){switch(V.tag){case 27:if(ua(V.type)){Ut=V.stateNode,Tn=!1;break e}break;case 5:Ut=V.stateNode,Tn=!1;break e;case 3:case 4:Ut=V.stateNode.containerInfo,Tn=!0;break e}V=V.return}if(Ut===null)throw Error(i(160));Gp(v,D,p),Ut=null,Tn=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Yp(t,e),t=t.sibling}var er=null;function Yp(e,t){var o=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ln(t,e),In(e),l&4&&(na(3,e,e.return),Io(3,e),na(5,e,e.return));break;case 1:Ln(t,e),In(e),l&512&&(Yt||o===null||dr(o,o.return)),l&64&&Nr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var p=er;if(Ln(t,e),In(e),l&512&&(Yt||o===null||dr(o,o.return)),l&4){var v=o!==null?o.memoizedState:null;if(l=e.memoizedState,o===null)if(l===null)if(e.stateNode===null){e:{l=e.type,o=e.memoizedProps,p=p.ownerDocument||p;t:switch(l){case"title":v=p.getElementsByTagName("title")[0],(!v||v[Br]||v[Ot]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(l),p.head.insertBefore(v,p.querySelector("head > title"))),mn(v,l,o),v[Ot]=e,Gt(v),l=v;break e;case"link":var D=Hh("link","href",p).get(l+(o.href||""));if(D){for(var V=0;V<D.length;V++)if(v=D[V],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){D.splice(V,1);break t}}v=p.createElement(l),mn(v,l,o),p.head.appendChild(v);break;case"meta":if(D=Hh("meta","content",p).get(l+(o.content||""))){for(V=0;V<D.length;V++)if(v=D[V],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){D.splice(V,1);break t}}v=p.createElement(l),mn(v,l,o),p.head.appendChild(v);break;default:throw Error(i(468,l))}v[Ot]=e,Gt(v),l=v}e.stateNode=l}else Wh(p,e.type,e.stateNode);else e.stateNode=Fh(p,l,e.memoizedProps);else v!==l?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,l===null?Wh(p,e.type,e.stateNode):Fh(p,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ju(e,e.memoizedProps,o.memoizedProps)}break;case 27:Ln(t,e),In(e),l&512&&(Yt||o===null||dr(o,o.return)),o!==null&&l&4&&ju(e,e.memoizedProps,o.memoizedProps);break;case 5:if(Ln(t,e),In(e),l&512&&(Yt||o===null||dr(o,o.return)),e.flags&32){p=e.stateNode;try{Vr(p,"")}catch(we){Dt(e,e.return,we)}}l&4&&e.stateNode!=null&&(p=e.memoizedProps,ju(e,p,o!==null?o.memoizedProps:p)),l&1024&&(zu=!0);break;case 6:if(Ln(t,e),In(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,o=e.stateNode;try{o.nodeValue=l}catch(we){Dt(e,e.return,we)}}break;case 3:if(El=null,p=er,er=Sl(t.containerInfo),Ln(t,e),er=p,In(e),l&4&&o!==null&&o.memoizedState.isDehydrated)try{es(t.containerInfo)}catch(we){Dt(e,e.return,we)}zu&&(zu=!1,Zp(e));break;case 4:l=er,er=Sl(e.stateNode.containerInfo),Ln(t,e),In(e),er=l;break;case 12:Ln(t,e),In(e);break;case 13:Ln(t,e),In(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Vu=j()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Uu(e,l)));break;case 22:p=e.memoizedState!==null;var se=o!==null&&o.memoizedState!==null,xe=Nr,Me=Yt;if(Nr=xe||p,Yt=Me||se,Ln(t,e),Yt=Me,Nr=xe,In(e),l&8192)e:for(t=e.stateNode,t._visibility=p?t._visibility&-2:t._visibility|1,p&&(o===null||se||Nr||Yt||za(e)),o=null,t=e;;){if(t.tag===5||t.tag===26){if(o===null){se=o=t;try{if(v=se.stateNode,p)D=v.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{V=se.stateNode;var je=se.memoizedProps.style,Se=je!=null&&je.hasOwnProperty("display")?je.display:null;V.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(we){Dt(se,se.return,we)}}}else if(t.tag===6){if(o===null){se=t;try{se.stateNode.nodeValue=p?"":se.memoizedProps}catch(we){Dt(se,se.return,we)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;o===t&&(o=null),t=t.return}o===t&&(o=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,Uu(e,o))));break;case 19:Ln(t,e),In(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Uu(e,l)));break;case 30:break;case 21:break;default:Ln(t,e),In(e)}}function In(e){var t=e.flags;if(t&2){try{for(var o,l=e.return;l!==null;){if(Fp(l)){o=l;break}l=l.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var p=o.stateNode,v=Lu(e);ll(e,v,p);break;case 5:var D=o.stateNode;o.flags&32&&(Vr(D,""),o.flags&=-33);var V=Lu(e);ll(e,V,D);break;case 3:case 4:var se=o.stateNode.containerInfo,xe=Lu(e);Iu(e,xe,se);break;default:throw Error(i(161))}}catch(Me){Dt(e,e.return,Me)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Zp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ra(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Vp(e,t.alternate,t),t=t.sibling}function za(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:na(4,t,t.return),za(t);break;case 1:dr(t,t.return);var o=t.stateNode;typeof o.componentWillUnmount=="function"&&Bp(t,t.return,o),za(t);break;case 27:Go(t.stateNode);case 26:case 5:dr(t,t.return),za(t);break;case 22:t.memoizedState===null&&za(t);break;case 30:za(t);break;default:za(t)}e=e.sibling}}function aa(e,t,o){for(o=o&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,p=e,v=t,D=v.flags;switch(v.tag){case 0:case 11:case 15:aa(p,v,o),Io(4,v);break;case 1:if(aa(p,v,o),l=v,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(xe){Dt(l,l.return,xe)}if(l=v,p=l.updateQueue,p!==null){var V=l.stateNode;try{var se=p.shared.hiddenCallbacks;if(se!==null)for(p.shared.hiddenCallbacks=null,p=0;p<se.length;p++)_m(se[p],V)}catch(xe){Dt(l,l.return,xe)}}o&&D&64&&Up(v),zo(v,v.return);break;case 27:Hp(v);case 26:case 5:aa(p,v,o),o&&l===null&&D&4&&Pp(v),zo(v,v.return);break;case 12:aa(p,v,o);break;case 13:aa(p,v,o),o&&D&4&&qp(p,v);break;case 22:v.memoizedState===null&&aa(p,v,o),zo(v,v.return);break;case 30:break;default:aa(p,v,o)}t=t.sibling}}function Bu(e,t){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&wo(o))}function Pu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wo(e))}function fr(e,t,o,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kp(e,t,o,l),t=t.sibling}function Kp(e,t,o,l){var p=t.flags;switch(t.tag){case 0:case 11:case 15:fr(e,t,o,l),p&2048&&Io(9,t);break;case 1:fr(e,t,o,l);break;case 3:fr(e,t,o,l),p&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wo(e)));break;case 12:if(p&2048){fr(e,t,o,l),e=t.stateNode;try{var v=t.memoizedProps,D=v.id,V=v.onPostCommit;typeof V=="function"&&V(D,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(se){Dt(t,t.return,se)}}else fr(e,t,o,l);break;case 13:fr(e,t,o,l);break;case 23:break;case 22:v=t.stateNode,D=t.alternate,t.memoizedState!==null?v._visibility&2?fr(e,t,o,l):Uo(e,t):v._visibility&2?fr(e,t,o,l):(v._visibility|=2,vi(e,t,o,l,(t.subtreeFlags&10256)!==0)),p&2048&&Bu(D,t);break;case 24:fr(e,t,o,l),p&2048&&Pu(t.alternate,t);break;default:fr(e,t,o,l)}}function vi(e,t,o,l,p){for(p=p&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var v=e,D=t,V=o,se=l,xe=D.flags;switch(D.tag){case 0:case 11:case 15:vi(v,D,V,se,p),Io(8,D);break;case 23:break;case 22:var Me=D.stateNode;D.memoizedState!==null?Me._visibility&2?vi(v,D,V,se,p):Uo(v,D):(Me._visibility|=2,vi(v,D,V,se,p)),p&&xe&2048&&Bu(D.alternate,D);break;case 24:vi(v,D,V,se,p),p&&xe&2048&&Pu(D.alternate,D);break;default:vi(v,D,V,se,p)}t=t.sibling}}function Uo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var o=e,l=t,p=l.flags;switch(l.tag){case 22:Uo(o,l),p&2048&&Bu(l.alternate,l);break;case 24:Uo(o,l),p&2048&&Pu(l.alternate,l);break;default:Uo(o,l)}t=t.sibling}}var Bo=8192;function xi(e){if(e.subtreeFlags&Bo)for(e=e.child;e!==null;)Xp(e),e=e.sibling}function Xp(e){switch(e.tag){case 26:xi(e),e.flags&Bo&&e.memoizedState!==null&&P1(er,e.memoizedState,e.memoizedProps);break;case 5:xi(e);break;case 3:case 4:var t=er;er=Sl(e.stateNode.containerInfo),xi(e),er=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Bo,Bo=16777216,xi(e),Bo=t):xi(e));break;default:xi(e)}}function Qp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Po(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var l=t[o];ln=l,eh(l,e)}Qp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jp(e),e=e.sibling}function Jp(e){switch(e.tag){case 0:case 11:case 15:Po(e),e.flags&2048&&na(9,e,e.return);break;case 3:Po(e);break;case 12:Po(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,cl(e)):Po(e);break;default:Po(e)}}function cl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var l=t[o];ln=l,eh(l,e)}Qp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:na(8,t,t.return),cl(t);break;case 22:o=t.stateNode,o._visibility&2&&(o._visibility&=-3,cl(t));break;default:cl(t)}e=e.sibling}}function eh(e,t){for(;ln!==null;){var o=ln;switch(o.tag){case 0:case 11:case 15:na(8,o,t);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:wo(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,ln=l;else e:for(o=e;ln!==null;){l=ln;var p=l.sibling,v=l.return;if($p(l),l===o){ln=null;break e}if(p!==null){p.return=v,ln=p;break e}ln=v}}}var n1={getCacheForType:function(e){var t=hn(rn),o=t.data.get(e);return o===void 0&&(o=e(),t.data.set(e,o)),o}},r1=typeof WeakMap=="function"?WeakMap:Map,_t=0,Lt=null,mt=null,bt=0,Tt=0,zn=null,ia=!1,Si=!1,Fu=!1,Dr=0,Wt=0,oa=0,Ua=0,Hu=0,qn=0,wi=0,Fo=null,Cn=null,Wu=!1,Vu=0,ul=1/0,dl=null,sa=null,fn=0,la=null,Ei=null,_i=0,$u=0,Gu=null,th=null,Ho=0,qu=null;function Un(){if((_t&2)!==0&&bt!==0)return bt&-bt;if(P.T!==null){var e=di;return e!==0?e:ed()}return Kn()}function nh(){qn===0&&(qn=(bt&536870912)===0||xt?Be():536870912);var e=Gn.current;return e!==null&&(e.flags|=32),qn}function Bn(e,t,o){(e===Lt&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(Ti(e,0),ca(e,bt,qn,!1)),Xe(e,o),((_t&2)===0||e!==Lt)&&(e===Lt&&((_t&2)===0&&(Ua|=o),Wt===4&&ca(e,bt,qn,!1)),mr(e))}function rh(e,t,o){if((_t&6)!==0)throw Error(i(327));var l=!o&&(t&124)===0&&(t&e.expiredLanes)===0||Nn(e,t),p=l?o1(e,t):Ku(e,t,!0),v=l;do{if(p===0){Si&&!l&&ca(e,t,0,!1);break}else{if(o=e.current.alternate,v&&!a1(o)){p=Ku(e,t,!1),v=!1;continue}if(p===2){if(v=t,e.errorRecoveryDisabledLanes&v)var D=0;else D=e.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){t=D;e:{var V=e;p=Fo;var se=V.current.memoizedState.isDehydrated;if(se&&(Ti(V,D).flags|=256),D=Ku(V,D,!1),D!==2){if(Fu&&!se){V.errorRecoveryDisabledLanes|=v,Ua|=v,p=4;break e}v=Cn,Cn=p,v!==null&&(Cn===null?Cn=v:Cn.push.apply(Cn,v))}p=D}if(v=!1,p!==2)continue}}if(p===1){Ti(e,0),ca(e,t,0,!0);break}e:{switch(l=e,v=p,v){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:ca(l,t,qn,!ia);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(p=Vu+300-j(),10<p)){if(ca(l,t,qn,!ia),zt(l,0,!0)!==0)break e;l.timeoutHandle=Oh(ah.bind(null,l,o,Cn,dl,Wu,t,qn,Ua,wi,ia,v,2,-0,0),p);break e}ah(l,o,Cn,dl,Wu,t,qn,Ua,wi,ia,v,0,-0,0)}}break}while(!0);mr(e)}function ah(e,t,o,l,p,v,D,V,se,xe,Me,je,Se,we){if(e.timeoutHandle=-1,je=t.subtreeFlags,(je&8192||(je&16785408)===16785408)&&(Zo={stylesheets:null,count:0,unsuspend:B1},Xp(t),je=F1(),je!==null)){e.cancelPendingCommit=je(dh.bind(null,e,t,v,o,l,p,D,V,se,Me,1,Se,we)),ca(e,v,D,!xe);return}dh(e,t,v,o,l,p,D,V,se)}function a1(e){for(var t=e;;){var o=t.tag;if((o===0||o===11||o===15)&&t.flags&16384&&(o=t.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var p=o[l],v=p.getSnapshot;p=p.value;try{if(!Dn(v(),p))return!1}catch{return!1}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ca(e,t,o,l){t&=~Hu,t&=~Ua,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var p=t;0<p;){var v=31-Ve(p),D=1<<v;l[v]=-1,p&=~D}o!==0&&ht(e,o,t)}function fl(){return(_t&6)===0?(Wo(0),!1):!0}function Yu(){if(mt!==null){if(Tt===0)var e=mt.return;else e=mt,Tr=Oa=null,du(e),yi=null,Do=0,e=mt;for(;e!==null;)zp(e.alternate,e),e=e.return;mt=null}}function Ti(e,t){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,w1(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Yu(),Lt=e,mt=o=wr(e.current,null),bt=t,Tt=0,zn=null,ia=!1,Si=Nn(e,t),Fu=!1,wi=qn=Hu=Ua=oa=Wt=0,Cn=Fo=null,Wu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var p=31-Ve(l),v=1<<p;t|=e[p],l&=~v}return Dr=t,js(),o}function ih(e,t){dt=null,P.H=Js,t===_o||t===Ws?(t=wm(),Tt=3):t===vm?(t=wm(),Tt=4):Tt=t===Ep?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,zn=t,mt===null&&(Wt=1,al(e,Hn(t,e.current)))}function oh(){var e=P.H;return P.H=Js,e===null?Js:e}function sh(){var e=P.A;return P.A=n1,e}function Zu(){Wt=4,ia||(bt&4194048)!==bt&&Gn.current!==null||(Si=!0),(oa&134217727)===0&&(Ua&134217727)===0||Lt===null||ca(Lt,bt,qn,!1)}function Ku(e,t,o){var l=_t;_t|=2;var p=oh(),v=sh();(Lt!==e||bt!==t)&&(dl=null,Ti(e,t)),t=!1;var D=Wt;e:do try{if(Tt!==0&&mt!==null){var V=mt,se=zn;switch(Tt){case 8:Yu(),D=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(t=!0);var xe=Tt;if(Tt=0,zn=null,Ci(e,V,se,xe),o&&Si){D=0;break e}break;default:xe=Tt,Tt=0,zn=null,Ci(e,V,se,xe)}}i1(),D=Wt;break}catch(Me){ih(e,Me)}while(!0);return t&&e.shellSuspendCounter++,Tr=Oa=null,_t=l,P.H=p,P.A=v,mt===null&&(Lt=null,bt=0,js()),D}function i1(){for(;mt!==null;)lh(mt)}function o1(e,t){var o=_t;_t|=2;var l=oh(),p=sh();Lt!==e||bt!==t?(dl=null,ul=j()+500,Ti(e,t)):Si=Nn(e,t);e:do try{if(Tt!==0&&mt!==null){t=mt;var v=zn;t:switch(Tt){case 1:Tt=0,zn=null,Ci(e,t,v,1);break;case 2:case 9:if(xm(v)){Tt=0,zn=null,ch(t);break}t=function(){Tt!==2&&Tt!==9||Lt!==e||(Tt=7),mr(e)},v.then(t,t);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:xm(v)?(Tt=0,zn=null,ch(t)):(Tt=0,zn=null,Ci(e,t,v,7));break;case 5:var D=null;switch(mt.tag){case 26:D=mt.memoizedState;case 5:case 27:var V=mt;if(!D||Vh(D)){Tt=0,zn=null;var se=V.sibling;if(se!==null)mt=se;else{var xe=V.return;xe!==null?(mt=xe,ml(xe)):mt=null}break t}}Tt=0,zn=null,Ci(e,t,v,5);break;case 6:Tt=0,zn=null,Ci(e,t,v,6);break;case 8:Yu(),Wt=6;break e;default:throw Error(i(462))}}s1();break}catch(Me){ih(e,Me)}while(!0);return Tr=Oa=null,P.H=l,P.A=p,_t=o,mt!==null?0:(Lt=null,bt=0,js(),Wt)}function s1(){for(;mt!==null&&!G();)lh(mt)}function lh(e){var t=Lp(e.alternate,e,Dr);e.memoizedProps=e.pendingProps,t===null?ml(e):mt=t}function ch(e){var t=e,o=t.alternate;switch(t.tag){case 15:case 0:t=Mp(o,t,t.pendingProps,t.type,void 0,bt);break;case 11:t=Mp(o,t,t.pendingProps,t.type.render,t.ref,bt);break;case 5:du(t);default:zp(o,t),t=mt=um(t,Dr),t=Lp(o,t,Dr)}e.memoizedProps=e.pendingProps,t===null?ml(e):mt=t}function Ci(e,t,o,l){Tr=Oa=null,du(t),yi=null,Do=0;var p=t.return;try{if(Kv(e,p,t,o,bt)){Wt=1,al(e,Hn(o,e.current)),mt=null;return}}catch(v){if(p!==null)throw mt=p,v;Wt=1,al(e,Hn(o,e.current)),mt=null;return}t.flags&32768?(xt||l===1?e=!0:Si||(bt&536870912)!==0?e=!1:(ia=e=!0,(l===2||l===9||l===3||l===6)&&(l=Gn.current,l!==null&&l.tag===13&&(l.flags|=16384))),uh(t,e)):ml(t)}function ml(e){var t=e;do{if((t.flags&32768)!==0){uh(t,ia);return}e=t.return;var o=Qv(t.alternate,t,Dr);if(o!==null){mt=o;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);Wt===0&&(Wt=5)}function uh(e,t){do{var o=Jv(e.alternate,e);if(o!==null){o.flags&=32767,mt=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!t&&(e=e.sibling,e!==null)){mt=e;return}mt=e=o}while(e!==null);Wt=6,mt=null}function dh(e,t,o,l,p,v,D,V,se){e.cancelPendingCommit=null;do pl();while(fn!==0);if((_t&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(v=t.lanes|t.childLanes,v|=Pc,Ye(e,o,v,D,V,se),e===Lt&&(mt=Lt=null,bt=0),Ei=t,la=e,_i=o,$u=v,Gu=p,th=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,d1(ye,function(){return gh(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,p=Y.p,Y.p=2,D=_t,_t|=4;try{e1(e,t,o)}finally{_t=D,Y.p=p,P.T=l}}fn=1,fh(),mh(),ph()}}function fh(){if(fn===1){fn=0;var e=la,t=Ei,o=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||o){o=P.T,P.T=null;var l=Y.p;Y.p=2;var p=_t;_t|=4;try{Yp(t,e);var v=ld,D=em(e.containerInfo),V=v.focusedElem,se=v.selectionRange;if(D!==V&&V&&V.ownerDocument&&Jf(V.ownerDocument.documentElement,V)){if(se!==null&&Lc(V)){var xe=se.start,Me=se.end;if(Me===void 0&&(Me=xe),"selectionStart"in V)V.selectionStart=xe,V.selectionEnd=Math.min(Me,V.value.length);else{var je=V.ownerDocument||document,Se=je&&je.defaultView||window;if(Se.getSelection){var we=Se.getSelection(),rt=V.textContent.length,tt=Math.min(se.start,rt),Mt=se.end===void 0?tt:Math.min(se.end,rt);!we.extend&&tt>Mt&&(D=Mt,Mt=tt,tt=D);var he=Qf(V,tt),fe=Qf(V,Mt);if(he&&fe&&(we.rangeCount!==1||we.anchorNode!==he.node||we.anchorOffset!==he.offset||we.focusNode!==fe.node||we.focusOffset!==fe.offset)){var ve=je.createRange();ve.setStart(he.node,he.offset),we.removeAllRanges(),tt>Mt?(we.addRange(ve),we.extend(fe.node,fe.offset)):(ve.setEnd(fe.node,fe.offset),we.addRange(ve))}}}}for(je=[],we=V;we=we.parentNode;)we.nodeType===1&&je.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<je.length;V++){var ke=je[V];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}Cl=!!sd,ld=sd=null}finally{_t=p,Y.p=l,P.T=o}}e.current=t,fn=2}}function mh(){if(fn===2){fn=0;var e=la,t=Ei,o=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||o){o=P.T,P.T=null;var l=Y.p;Y.p=2;var p=_t;_t|=4;try{Vp(e,t.alternate,t)}finally{_t=p,Y.p=l,P.T=o}}fn=3}}function ph(){if(fn===4||fn===3){fn=0,X();var e=la,t=Ei,o=_i,l=th;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?fn=5:(fn=0,Ei=la=null,hh(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(sa=null),nn(o),t=t.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(De,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=P.T,p=Y.p,Y.p=2,P.T=null;try{for(var v=e.onRecoverableError,D=0;D<l.length;D++){var V=l[D];v(V.value,{componentStack:V.stack})}}finally{P.T=t,Y.p=p}}(_i&3)!==0&&pl(),mr(e),p=e.pendingLanes,(o&4194090)!==0&&(p&42)!==0?e===qu?Ho++:(Ho=0,qu=e):Ho=0,Wo(0)}}function hh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,wo(t)))}function pl(e){return fh(),mh(),ph(),gh()}function gh(){if(fn!==5)return!1;var e=la,t=$u;$u=0;var o=nn(_i),l=P.T,p=Y.p;try{Y.p=32>o?32:o,P.T=null,o=Gu,Gu=null;var v=la,D=_i;if(fn=0,Ei=la=null,_i=0,(_t&6)!==0)throw Error(i(331));var V=_t;if(_t|=4,Jp(v.current),Kp(v,v.current,D,o),_t=V,Wo(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(De,v)}catch{}return!0}finally{Y.p=p,P.T=l,hh(e,t)}}function yh(e,t,o){t=Hn(o,t),t=Tu(e.stateNode,t,2),e=Qr(e,t,2),e!==null&&(Xe(e,2),mr(e))}function Dt(e,t,o){if(e.tag===3)yh(e,e,o);else for(;t!==null;){if(t.tag===3){yh(t,e,o);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(sa===null||!sa.has(l))){e=Hn(o,e),o=Sp(2),l=Qr(t,o,2),l!==null&&(wp(o,l,t,e),Xe(l,2),mr(l));break}}t=t.return}}function Xu(e,t,o){var l=e.pingCache;if(l===null){l=e.pingCache=new r1;var p=new Set;l.set(t,p)}else p=l.get(t),p===void 0&&(p=new Set,l.set(t,p));p.has(o)||(Fu=!0,p.add(o),e=l1.bind(null,e,t,o),t.then(e,e))}function l1(e,t,o){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Lt===e&&(bt&o)===o&&(Wt===4||Wt===3&&(bt&62914560)===bt&&300>j()-Vu?(_t&2)===0&&Ti(e,0):Hu|=o,wi===bt&&(wi=0)),mr(e)}function bh(e,t){t===0&&(t=Ke()),e=si(e,t),e!==null&&(Xe(e,t),mr(e))}function c1(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),bh(e,o)}function u1(e,t){var o=0;switch(e.tag){case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(t),bh(e,o)}function d1(e,t){return Ae(e,t)}var hl=null,Ai=null,Qu=!1,gl=!1,Ju=!1,Ba=0;function mr(e){e!==Ai&&e.next===null&&(Ai===null?hl=Ai=e:Ai=Ai.next=e),gl=!0,Qu||(Qu=!0,m1())}function Wo(e,t){if(!Ju&&gl){Ju=!0;do for(var o=!1,l=hl;l!==null;){if(e!==0){var p=l.pendingLanes;if(p===0)var v=0;else{var D=l.suspendedLanes,V=l.pingedLanes;v=(1<<31-Ve(42|e)+1)-1,v&=p&~(D&~V),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,wh(l,v))}else v=bt,v=zt(l,l===Lt?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(v&3)===0||Nn(l,v)||(o=!0,wh(l,v));l=l.next}while(o);Ju=!1}}function f1(){vh()}function vh(){gl=Qu=!1;var e=0;Ba!==0&&(S1()&&(e=Ba),Ba=0);for(var t=j(),o=null,l=hl;l!==null;){var p=l.next,v=xh(l,t);v===0?(l.next=null,o===null?hl=p:o.next=p,p===null&&(Ai=o)):(o=l,(e!==0||(v&3)!==0)&&(gl=!0)),l=p}Wo(e)}function xh(e,t){for(var o=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,v=e.pendingLanes&-62914561;0<v;){var D=31-Ve(v),V=1<<D,se=p[D];se===-1?((V&o)===0||(V&l)!==0)&&(p[D]=Ur(V,t)):se<=t&&(e.expiredLanes|=V),v&=~V}if(t=Lt,o=bt,o=zt(e,e===t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,o===0||e===t&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&T(l),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Nn(e,o)){if(t=o&-o,t===e.callbackPriority)return t;switch(l!==null&&T(l),nn(o)){case 2:case 8:o=ue;break;case 32:o=ye;break;case 268435456:o=ge;break;default:o=ye}return l=Sh.bind(null,e),o=Ae(o,l),e.callbackPriority=t,e.callbackNode=o,t}return l!==null&&l!==null&&T(l),e.callbackPriority=2,e.callbackNode=null,2}function Sh(e,t){if(fn!==0&&fn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(pl()&&e.callbackNode!==o)return null;var l=bt;return l=zt(e,e===Lt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(rh(e,l,t),xh(e,j()),e.callbackNode!=null&&e.callbackNode===o?Sh.bind(null,e):null)}function wh(e,t){if(pl())return null;rh(e,t,!0)}function m1(){E1(function(){(_t&6)!==0?Ae(Q,f1):vh()})}function ed(){return Ba===0&&(Ba=Be()),Ba}function Eh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ei(""+e)}function _h(e,t){var o=t.ownerDocument.createElement("input");return o.name=t.name,o.value=t.value,e.id&&o.setAttribute("form",e.id),t.parentNode.insertBefore(o,t),e=new FormData(e),o.parentNode.removeChild(o),e}function p1(e,t,o,l,p){if(t==="submit"&&o&&o.stateNode===p){var v=Eh((p[ut]||null).action),D=l.submitter;D&&(t=(t=D[ut]||null)?Eh(t.formAction):D.getAttribute("formAction"),t!==null&&(v=t,D=null));var V=new Sr("action","action",null,l,p);e.push({event:V,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ba!==0){var se=D?_h(p,D):new FormData(p);xu(o,{pending:!0,data:se,method:p.method,action:v},null,se)}}else typeof v=="function"&&(V.preventDefault(),se=D?_h(p,D):new FormData(p),xu(o,{pending:!0,data:se,method:p.method,action:v},v,se))},currentTarget:p}]})}}for(var td=0;td<Bc.length;td++){var nd=Bc[td],h1=nd.toLowerCase(),g1=nd[0].toUpperCase()+nd.slice(1);Jn(h1,"on"+g1)}Jn(rm,"onAnimationEnd"),Jn(am,"onAnimationIteration"),Jn(im,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(Dv,"onTransitionRun"),Jn(jv,"onTransitionStart"),Jn(Lv,"onTransitionCancel"),Jn(om,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function Th(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var l=e[o],p=l.event;l=l.listeners;e:{var v=void 0;if(t)for(var D=l.length-1;0<=D;D--){var V=l[D],se=V.instance,xe=V.currentTarget;if(V=V.listener,se!==v&&p.isPropagationStopped())break e;v=V,p.currentTarget=xe;try{v(p)}catch(Me){rl(Me)}p.currentTarget=null,v=se}else for(D=0;D<l.length;D++){if(V=l[D],se=V.instance,xe=V.currentTarget,V=V.listener,se!==v&&p.isPropagationStopped())break e;v=V,p.currentTarget=xe;try{v(p)}catch(Me){rl(Me)}p.currentTarget=null,v=se}}}}function pt(e,t){var o=t[Ya];o===void 0&&(o=t[Ya]=new Set);var l=e+"__bubble";o.has(l)||(Ch(t,e,2,!1),o.add(l))}function rd(e,t,o){var l=0;t&&(l|=4),Ch(o,e,l,t)}var yl="_reactListening"+Math.random().toString(36).slice(2);function ad(e){if(!e[yl]){e[yl]=!0,Ji.forEach(function(o){o!=="selectionchange"&&(y1.has(o)||rd(o,!1,e),rd(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yl]||(t[yl]=!0,rd("selectionchange",!1,t))}}function Ch(e,t,o,l){switch(Kh(t)){case 2:var p=V1;break;case 8:p=$1;break;default:p=bd}o=p.bind(null,t,o,e),p=void 0,!fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(t,o,{capture:!0,passive:p}):e.addEventListener(t,o,!0):p!==void 0?e.addEventListener(t,o,{passive:p}):e.addEventListener(t,o,!1)}function id(e,t,o,l,p){var v=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var D=l.tag;if(D===3||D===4){var V=l.stateNode.containerInfo;if(V===p)break;if(D===4)for(D=l.return;D!==null;){var se=D.tag;if((se===3||se===4)&&D.stateNode.containerInfo===p)return;D=D.return}for(;V!==null;){if(D=Pr(V),D===null)return;if(se=D.tag,se===5||se===6||se===26||se===27){l=v=D;continue e}V=V.parentNode}}l=l.return}Os(function(){var xe=v,Me=co(o),je=[];e:{var Se=sm.get(e);if(Se!==void 0){var we=Sr,rt=e;switch(e){case"keypress":if(Ce(o)===0)break e;case"keydown":case"keyup":we=dv;break;case"focusin":rt="focus",we=kc;break;case"focusout":rt="blur",we=kc;break;case"beforeblur":case"afterblur":we=kc;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=pv;break;case rm:case am:case im:we=nv;break;case om:we=gv;break;case"scroll":case"scrollend":we=Mc;break;case"wheel":we=bv;break;case"copy":case"cut":case"paste":we=av;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Uf;break;case"toggle":case"beforetoggle":we=xv}var tt=(t&4)!==0,Mt=!tt&&(e==="scroll"||e==="scrollend"),he=tt?Se!==null?Se+"Capture":null:Se;tt=[];for(var fe=xe,ve;fe!==null;){var ke=fe;if(ve=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||ve===null||he===null||(ke=wa(fe,he),ke!=null&&tt.push($o(fe,ke,ve))),Mt)break;fe=fe.return}0<tt.length&&(Se=new we(Se,rt,null,o,Me),je.push({event:Se,listeners:tt}))}}if((t&7)===0){e:{if(Se=e==="mouseover"||e==="pointerover",we=e==="mouseout"||e==="pointerout",Se&&o!==lo&&(rt=o.relatedTarget||o.fromElement)&&(Pr(rt)||rt[On]))break e;if((we||Se)&&(Se=Me.window===Me?Me:(Se=Me.ownerDocument)?Se.defaultView||Se.parentWindow:window,we?(rt=o.relatedTarget||o.toElement,we=xe,rt=rt?Pr(rt):null,rt!==null&&(Mt=c(rt),tt=rt.tag,rt!==Mt||tt!==5&&tt!==27&&tt!==6)&&(rt=null)):(we=null,rt=xe),we!==rt)){if(tt=If,ke="onMouseLeave",he="onMouseEnter",fe="mouse",(e==="pointerout"||e==="pointerover")&&(tt=Uf,ke="onPointerLeave",he="onPointerEnter",fe="pointer"),Mt=we==null?Se:Sa(we),ve=rt==null?Se:Sa(rt),Se=new tt(ke,fe+"leave",we,o,Me),Se.target=Mt,Se.relatedTarget=ve,ke=null,Pr(Me)===xe&&(tt=new tt(he,fe+"enter",rt,o,Me),tt.target=ve,tt.relatedTarget=Mt,ke=tt),Mt=ke,we&&rt)t:{for(tt=we,he=rt,fe=0,ve=tt;ve;ve=Ri(ve))fe++;for(ve=0,ke=he;ke;ke=Ri(ke))ve++;for(;0<fe-ve;)tt=Ri(tt),fe--;for(;0<ve-fe;)he=Ri(he),ve--;for(;fe--;){if(tt===he||he!==null&&tt===he.alternate)break t;tt=Ri(tt),he=Ri(he)}tt=null}else tt=null;we!==null&&Ah(je,Se,we,tt,!1),rt!==null&&Mt!==null&&Ah(je,Mt,rt,tt,!0)}}e:{if(Se=xe?Sa(xe):window,we=Se.nodeName&&Se.nodeName.toLowerCase(),we==="select"||we==="input"&&Se.type==="file")var qe=Gf;else if(Vf(Se))if(qf)qe=kv;else{qe=Rv;var ft=Av}else we=Se.nodeName,!we||we.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?xe&&so(xe.elementType)&&(qe=Gf):qe=Mv;if(qe&&(qe=qe(e,xe))){$f(je,qe,o,Me);break e}ft&&ft(e,Se,xe),e==="focusout"&&xe&&Se.type==="number"&&xe.memoizedProps.value!=null&&oo(Se,"number",Se.value)}switch(ft=xe?Sa(xe):window,e){case"focusin":(Vf(ft)||ft.contentEditable==="true")&&(ai=ft,Ic=xe,yo=null);break;case"focusout":yo=Ic=ai=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,tm(je,o,Me);break;case"selectionchange":if(Ov)break;case"keydown":case"keyup":tm(je,o,Me)}var Qe;if(Oc)e:{switch(e){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else ri?Hf(e,o)&&(nt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(nt="onCompositionStart");nt&&(Bf&&o.locale!=="ko"&&(ri||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&ri&&(Qe=ce()):(lr=Me,be="value"in lr?lr.value:lr.textContent,ri=!0)),ft=bl(xe,nt),0<ft.length&&(nt=new zf(nt,e,null,o,Me),je.push({event:nt,listeners:ft}),Qe?nt.data=Qe:(Qe=Wf(o),Qe!==null&&(nt.data=Qe)))),(Qe=wv?Ev(e,o):_v(e,o))&&(nt=bl(xe,"onBeforeInput"),0<nt.length&&(ft=new zf("onBeforeInput","beforeinput",null,o,Me),je.push({event:ft,listeners:nt}),ft.data=Qe)),p1(je,e,xe,o,Me)}Th(je,t)})}function $o(e,t,o){return{instance:e,listener:t,currentTarget:o}}function bl(e,t){for(var o=t+"Capture",l=[];e!==null;){var p=e,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=wa(e,o),p!=null&&l.unshift($o(e,p,v)),p=wa(e,t),p!=null&&l.push($o(e,p,v))),e.tag===3)return l;e=e.return}return[]}function Ri(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ah(e,t,o,l,p){for(var v=t._reactName,D=[];o!==null&&o!==l;){var V=o,se=V.alternate,xe=V.stateNode;if(V=V.tag,se!==null&&se===l)break;V!==5&&V!==26&&V!==27||xe===null||(se=xe,p?(xe=wa(o,v),xe!=null&&D.unshift($o(o,xe,se))):p||(xe=wa(o,v),xe!=null&&D.push($o(o,xe,se)))),o=o.return}D.length!==0&&e.push({event:t,listeners:D})}var b1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function Rh(e){return(typeof e=="string"?e:""+e).replace(b1,`
`).replace(v1,"")}function Mh(e,t){return t=Rh(t),Rh(e)===t}function vl(){}function Rt(e,t,o,l,p,v){switch(o){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Vr(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Vr(e,""+l);break;case"className":Xa(e,"class",l);break;case"tabIndex":Xa(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Xa(e,o,l);break;case"style":ks(e,l,v);break;case"data":if(t!=="object"){Xa(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||o!=="href")){e.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(o);break}l=ei(""+l),e.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(t!=="input"&&Rt(e,t,"name",p.name,p,null),Rt(e,t,"formEncType",p.formEncType,p,null),Rt(e,t,"formMethod",p.formMethod,p,null),Rt(e,t,"formTarget",p.formTarget,p,null)):(Rt(e,t,"encType",p.encType,p,null),Rt(e,t,"method",p.method,p,null),Rt(e,t,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(o);break}l=ei(""+l),e.setAttribute(o,l);break;case"onClick":l!=null&&(e.onclick=vl);break;case"onScroll":l!=null&&pt("scroll",e);break;case"onScrollEnd":l!=null&&pt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(o=l.__html,o!=null){if(p.children!=null)throw Error(i(60));e.innerHTML=o}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}o=ei(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(o,""+l):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":l===!0?e.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(o,l):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(o,l):e.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(o):e.setAttribute(o,l);break;case"popover":pt("beforetoggle",e),pt("toggle",e),Ka(e,"popover",l);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ka(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ac.get(o)||o,Ka(e,o,l))}}function od(e,t,o,l,p,v){switch(o){case"style":ks(e,l,v);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(o=l.__html,o!=null){if(p.children!=null)throw Error(i(60));e.innerHTML=o}}break;case"children":typeof l=="string"?Vr(e,l):(typeof l=="number"||typeof l=="bigint")&&Vr(e,""+l);break;case"onScroll":l!=null&&pt("scroll",e);break;case"onScrollEnd":l!=null&&pt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=vl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),t=o.slice(2,p?o.length-7:void 0),v=e[ut]||null,v=v!=null?v[o]:null,typeof v=="function"&&e.removeEventListener(t,v,p),typeof l=="function")){typeof v!="function"&&v!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(t,l,p);break e}o in e?e[o]=l:l===!0?e.setAttribute(o,""):Ka(e,o,l)}}}function mn(e,t,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",e),pt("load",e);var l=!1,p=!1,v;for(v in o)if(o.hasOwnProperty(v)){var D=o[v];if(D!=null)switch(v){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Rt(e,t,v,D,o,null)}}p&&Rt(e,t,"srcSet",o.srcSet,o,null),l&&Rt(e,t,"src",o.src,o,null);return;case"input":pt("invalid",e);var V=v=D=p=null,se=null,xe=null;for(l in o)if(o.hasOwnProperty(l)){var Me=o[l];if(Me!=null)switch(l){case"name":p=Me;break;case"type":D=Me;break;case"checked":se=Me;break;case"defaultChecked":xe=Me;break;case"value":v=Me;break;case"defaultValue":V=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(i(137,t));break;default:Rt(e,t,l,Me,o,null)}}Cs(e,v,V,se,xe,D,p,!1),Qa(e);return;case"select":pt("invalid",e),l=D=v=null;for(p in o)if(o.hasOwnProperty(p)&&(V=o[p],V!=null))switch(p){case"value":v=V;break;case"defaultValue":D=V;break;case"multiple":l=V;default:Rt(e,t,p,V,o,null)}t=v,o=D,e.multiple=!!l,t!=null?Wr(e,!!l,t,!1):o!=null&&Wr(e,!!l,o,!0);return;case"textarea":pt("invalid",e),v=p=l=null;for(D in o)if(o.hasOwnProperty(D)&&(V=o[D],V!=null))switch(D){case"value":l=V;break;case"defaultValue":p=V;break;case"children":v=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(91));break;default:Rt(e,t,D,V,o,null)}Rs(e,l,p,v),Qa(e);return;case"option":for(se in o)if(o.hasOwnProperty(se)&&(l=o[se],l!=null))switch(se){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Rt(e,t,se,l,o,null)}return;case"dialog":pt("beforetoggle",e),pt("toggle",e),pt("cancel",e),pt("close",e);break;case"iframe":case"object":pt("load",e);break;case"video":case"audio":for(l=0;l<Vo.length;l++)pt(Vo[l],e);break;case"image":pt("error",e),pt("load",e);break;case"details":pt("toggle",e);break;case"embed":case"source":case"link":pt("error",e),pt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in o)if(o.hasOwnProperty(xe)&&(l=o[xe],l!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Rt(e,t,xe,l,o,null)}return;default:if(so(t)){for(Me in o)o.hasOwnProperty(Me)&&(l=o[Me],l!==void 0&&od(e,t,Me,l,o,void 0));return}}for(V in o)o.hasOwnProperty(V)&&(l=o[V],l!=null&&Rt(e,t,V,l,o,null))}function x1(e,t,o,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,D=null,V=null,se=null,xe=null,Me=null;for(we in o){var je=o[we];if(o.hasOwnProperty(we)&&je!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":se=je;default:l.hasOwnProperty(we)||Rt(e,t,we,null,l,je)}}for(var Se in l){var we=l[Se];if(je=o[Se],l.hasOwnProperty(Se)&&(we!=null||je!=null))switch(Se){case"type":v=we;break;case"name":p=we;break;case"checked":xe=we;break;case"defaultChecked":Me=we;break;case"value":D=we;break;case"defaultValue":V=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,t));break;default:we!==je&&Rt(e,t,Se,we,l,je)}}io(e,D,V,se,xe,Me,v,p);return;case"select":we=D=V=Se=null;for(v in o)if(se=o[v],o.hasOwnProperty(v)&&se!=null)switch(v){case"value":break;case"multiple":we=se;default:l.hasOwnProperty(v)||Rt(e,t,v,null,l,se)}for(p in l)if(v=l[p],se=o[p],l.hasOwnProperty(p)&&(v!=null||se!=null))switch(p){case"value":Se=v;break;case"defaultValue":V=v;break;case"multiple":D=v;default:v!==se&&Rt(e,t,p,v,l,se)}t=V,o=D,l=we,Se!=null?Wr(e,!!o,Se,!1):!!l!=!!o&&(t!=null?Wr(e,!!o,t,!0):Wr(e,!!o,o?[]:"",!1));return;case"textarea":we=Se=null;for(V in o)if(p=o[V],o.hasOwnProperty(V)&&p!=null&&!l.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Rt(e,t,V,null,l,p)}for(D in l)if(p=l[D],v=o[D],l.hasOwnProperty(D)&&(p!=null||v!=null))switch(D){case"value":Se=p;break;case"defaultValue":we=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==v&&Rt(e,t,D,p,l,v)}As(e,Se,we);return;case"option":for(var rt in o)if(Se=o[rt],o.hasOwnProperty(rt)&&Se!=null&&!l.hasOwnProperty(rt))switch(rt){case"selected":e.selected=!1;break;default:Rt(e,t,rt,null,l,Se)}for(se in l)if(Se=l[se],we=o[se],l.hasOwnProperty(se)&&Se!==we&&(Se!=null||we!=null))switch(se){case"selected":e.selected=Se&&typeof Se!="function"&&typeof Se!="symbol";break;default:Rt(e,t,se,Se,l,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in o)Se=o[tt],o.hasOwnProperty(tt)&&Se!=null&&!l.hasOwnProperty(tt)&&Rt(e,t,tt,null,l,Se);for(xe in l)if(Se=l[xe],we=o[xe],l.hasOwnProperty(xe)&&Se!==we&&(Se!=null||we!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,t));break;default:Rt(e,t,xe,Se,l,we)}return;default:if(so(t)){for(var Mt in o)Se=o[Mt],o.hasOwnProperty(Mt)&&Se!==void 0&&!l.hasOwnProperty(Mt)&&od(e,t,Mt,void 0,l,Se);for(Me in l)Se=l[Me],we=o[Me],!l.hasOwnProperty(Me)||Se===we||Se===void 0&&we===void 0||od(e,t,Me,Se,l,we);return}}for(var he in o)Se=o[he],o.hasOwnProperty(he)&&Se!=null&&!l.hasOwnProperty(he)&&Rt(e,t,he,null,l,Se);for(je in l)Se=l[je],we=o[je],!l.hasOwnProperty(je)||Se===we||Se==null&&we==null||Rt(e,t,je,Se,l,we)}var sd=null,ld=null;function xl(e){return e.nodeType===9?e:e.ownerDocument}function kh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ud=null;function S1(){var e=window.event;return e&&e.type==="popstate"?e===ud?!1:(ud=e,!0):(ud=null,!1)}var Oh=typeof setTimeout=="function"?setTimeout:void 0,w1=typeof clearTimeout=="function"?clearTimeout:void 0,Dh=typeof Promise=="function"?Promise:void 0,E1=typeof queueMicrotask=="function"?queueMicrotask:typeof Dh<"u"?function(e){return Dh.resolve(null).then(e).catch(_1)}:Oh;function _1(e){setTimeout(function(){throw e})}function ua(e){return e==="head"}function jh(e,t){var o=t,l=0,p=0;do{var v=o.nextSibling;if(e.removeChild(o),v&&v.nodeType===8)if(o=v.data,o==="/$"){if(0<l&&8>l){o=l;var D=e.ownerDocument;if(o&1&&Go(D.documentElement),o&2&&Go(D.body),o&4)for(o=D.head,Go(o),D=o.firstChild;D;){var V=D.nextSibling,se=D.nodeName;D[Br]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&D.rel.toLowerCase()==="stylesheet"||o.removeChild(D),D=V}}if(p===0){e.removeChild(v),es(t);return}p--}else o==="$"||o==="$?"||o==="$!"?p++:l=o.charCodeAt(0)-48;else l=0;o=v}while(o);es(t)}function dd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var o=t;switch(t=t.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":dd(o),Za(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function T1(e,t,o,l){for(;e.nodeType===1;){var p=o;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Br])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(v=e.getAttribute("rel"),v==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(v!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(v=e.getAttribute("src"),(v!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===v)return e}else return e;if(e=tr(e.nextSibling),e===null)break}return null}function C1(e,t,o){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=tr(e.nextSibling),e===null))return null;return e}function fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function A1(e,t){var o=e.ownerDocument;if(e.data!=="$?"||o.readyState==="complete")t();else{var l=function(){t(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var md=null;function Lh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}function Ih(e,t,o){switch(t=xl(o),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Go(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Za(e)}var Yn=new Map,zh=new Set;function Sl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var jr=Y.d;Y.d={f:R1,r:M1,D:k1,C:N1,L:O1,m:D1,X:L1,S:j1,M:I1};function R1(){var e=jr.f(),t=fl();return e||t}function M1(e){var t=Fr(e);t!==null&&t.tag===5&&t.type==="form"?rp(t):jr.r(e)}var Mi=typeof document>"u"?null:document;function Uh(e,t,o){var l=Mi;if(l&&typeof t=="string"&&t){var p=En(t);p='link[rel="'+e+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),zh.has(p)||(zh.add(p),e={rel:e,crossOrigin:o,href:t},l.querySelector(p)===null&&(t=l.createElement("link"),mn(t,"link",e),Gt(t),l.head.appendChild(t)))}}function k1(e){jr.D(e),Uh("dns-prefetch",e,null)}function N1(e,t){jr.C(e,t),Uh("preconnect",e,t)}function O1(e,t,o){jr.L(e,t,o);var l=Mi;if(l&&e&&t){var p='link[rel="preload"][as="'+En(t)+'"]';t==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+En(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+En(o.imageSizes)+'"]')):p+='[href="'+En(e)+'"]';var v=p;switch(t){case"style":v=ki(e);break;case"script":v=Ni(e)}Yn.has(v)||(e=b({rel:"preload",href:t==="image"&&o&&o.imageSrcSet?void 0:e,as:t},o),Yn.set(v,e),l.querySelector(p)!==null||t==="style"&&l.querySelector(qo(v))||t==="script"&&l.querySelector(Yo(v))||(t=l.createElement("link"),mn(t,"link",e),Gt(t),l.head.appendChild(t)))}}function D1(e,t){jr.m(e,t);var o=Mi;if(o&&e){var l=t&&typeof t.as=="string"?t.as:"script",p='link[rel="modulepreload"][as="'+En(l)+'"][href="'+En(e)+'"]',v=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ni(e)}if(!Yn.has(v)&&(e=b({rel:"modulepreload",href:e},t),Yn.set(v,e),o.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yo(v)))return}l=o.createElement("link"),mn(l,"link",e),Gt(l),o.head.appendChild(l)}}}function j1(e,t,o){jr.S(e,t,o);var l=Mi;if(l&&e){var p=Xn(l).hoistableStyles,v=ki(e);t=t||"default";var D=p.get(v);if(!D){var V={loading:0,preload:null};if(D=l.querySelector(qo(v)))V.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},o),(o=Yn.get(v))&&pd(e,o);var se=D=l.createElement("link");Gt(se),mn(se,"link",e),se._p=new Promise(function(xe,Me){se.onload=xe,se.onerror=Me}),se.addEventListener("load",function(){V.loading|=1}),se.addEventListener("error",function(){V.loading|=2}),V.loading|=4,wl(D,t,l)}D={type:"stylesheet",instance:D,count:1,state:V},p.set(v,D)}}}function L1(e,t){jr.X(e,t);var o=Mi;if(o&&e){var l=Xn(o).hoistableScripts,p=Ni(e),v=l.get(p);v||(v=o.querySelector(Yo(p)),v||(e=b({src:e,async:!0},t),(t=Yn.get(p))&&hd(e,t),v=o.createElement("script"),Gt(v),mn(v,"link",e),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},l.set(p,v))}}function I1(e,t){jr.M(e,t);var o=Mi;if(o&&e){var l=Xn(o).hoistableScripts,p=Ni(e),v=l.get(p);v||(v=o.querySelector(Yo(p)),v||(e=b({src:e,async:!0,type:"module"},t),(t=Yn.get(p))&&hd(e,t),v=o.createElement("script"),Gt(v),mn(v,"link",e),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},l.set(p,v))}}function Bh(e,t,o,l){var p=(p=Ee.current)?Sl(p):null;if(!p)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(t=ki(o.href),o=Xn(p).hoistableStyles,l=o.get(t),l||(l={type:"style",instance:null,count:0,state:null},o.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=ki(o.href);var v=Xn(p).hoistableStyles,D=v.get(e);if(D||(p=p.ownerDocument||p,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(e,D),(v=p.querySelector(qo(e)))&&!v._p&&(D.instance=v,D.state.loading=5),Yn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Yn.set(e,o),v||z1(p,e,o,D.state))),t&&l===null)throw Error(i(528,""));return D}if(t&&l!==null)throw Error(i(529,""));return null;case"script":return t=o.async,o=o.src,typeof o=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ni(o),o=Xn(p).hoistableScripts,l=o.get(t),l||(l={type:"script",instance:null,count:0,state:null},o.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function ki(e){return'href="'+En(e)+'"'}function qo(e){return'link[rel="stylesheet"]['+e+"]"}function Ph(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function z1(e,t,o,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),mn(t,"link",o),Gt(t),e.head.appendChild(t))}function Ni(e){return'[src="'+En(e)+'"]'}function Yo(e){return"script[async]"+e}function Fh(e,t,o){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+En(o.href)+'"]');if(l)return t.instance=l,Gt(l),l;var p=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Gt(l),mn(l,"style",p),wl(l,o.precedence,e),t.instance=l;case"stylesheet":p=ki(o.href);var v=e.querySelector(qo(p));if(v)return t.state.loading|=4,t.instance=v,Gt(v),v;l=Ph(o),(p=Yn.get(p))&&pd(l,p),v=(e.ownerDocument||e).createElement("link"),Gt(v);var D=v;return D._p=new Promise(function(V,se){D.onload=V,D.onerror=se}),mn(v,"link",l),t.state.loading|=4,wl(v,o.precedence,e),t.instance=v;case"script":return v=Ni(o.src),(p=e.querySelector(Yo(v)))?(t.instance=p,Gt(p),p):(l=o,(p=Yn.get(v))&&(l=b({},o),hd(l,p)),e=e.ownerDocument||e,p=e.createElement("script"),Gt(p),mn(p,"link",l),e.head.appendChild(p),t.instance=p);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,wl(l,o.precedence,e));return t.instance}function wl(e,t,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,v=p,D=0;D<l.length;D++){var V=l[D];if(V.dataset.precedence===t)v=V;else if(v!==p)break}v?v.parentNode.insertBefore(e,v.nextSibling):(t=o.nodeType===9?o.head:o,t.insertBefore(e,t.firstChild))}function pd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function hd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var El=null;function Hh(e,t,o){if(El===null){var l=new Map,p=El=new Map;p.set(o,l)}else p=El,l=p.get(o),l||(l=new Map,p.set(o,l));if(l.has(e))return l;for(l.set(e,null),o=o.getElementsByTagName(e),p=0;p<o.length;p++){var v=o[p];if(!(v[Br]||v[Ot]||e==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var D=v.getAttribute(t)||"";D=e+D;var V=l.get(D);V?V.push(v):l.set(D,[v])}}return l}function Wh(e,t,o){e=e.ownerDocument||e,e.head.insertBefore(o,t==="title"?e.querySelector("head > title"):null)}function U1(e,t,o){if(o===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Vh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Zo=null;function B1(){}function P1(e,t,o){if(Zo===null)throw Error(i(475));var l=Zo;if(t.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var p=ki(o.href),v=e.querySelector(qo(p));if(v){e=v._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=_l.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=v,Gt(v);return}v=e.ownerDocument||e,o=Ph(o),(p=Yn.get(p))&&pd(o,p),v=v.createElement("link"),Gt(v);var D=v;D._p=new Promise(function(V,se){D.onload=V,D.onerror=se}),mn(v,"link",o),t.instance=v}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=_l.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function F1(){if(Zo===null)throw Error(i(475));var e=Zo;return e.stylesheets&&e.count===0&&gd(e,e.stylesheets),0<e.count?function(t){var o=setTimeout(function(){if(e.stylesheets&&gd(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(o)}}:null}function _l(){if(this.count--,this.count===0){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tl=null;function gd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tl=new Map,t.forEach(H1,e),Tl=null,_l.call(e))}function H1(e,t){if(!(t.state.loading&4)){var o=Tl.get(e);if(o)var l=o.get(null);else{o=new Map,Tl.set(e,o);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var D=p[v];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(o.set(D.dataset.precedence,D),l=D)}l&&o.set(null,l)}p=t.instance,D=p.getAttribute("data-precedence"),v=o.get(D)||l,v===l&&o.set(null,p),o.set(D,p),this.count++,l=_l.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),v?v.parentNode.insertBefore(p,v.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),t.state.loading|=4}}var Ko={$$typeof:A,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function W1(e,t,o,l,p,v,D,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=at(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=at(0),this.hiddenUpdates=at(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function $h(e,t,o,l,p,v,D,V,se,xe,Me,je){return e=new W1(e,t,o,D,V,se,xe,je),t=1,v===!0&&(t|=24),v=jn(3,null,null,t),e.current=v,v.stateNode=e,t=Xc(),t.refCount++,e.pooledCache=t,t.refCount++,v.memoizedState={element:l,isDehydrated:o,cache:t},tu(v),e}function Gh(e){return e?(e=li,e):li}function qh(e,t,o,l,p,v){p=Gh(p),l.context===null?l.context=p:l.pendingContext=p,l=Xr(t),l.payload={element:o},v=v===void 0?null:v,v!==null&&(l.callback=v),o=Qr(e,l,t),o!==null&&(Bn(o,e,t),Co(o,e,t))}function Yh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function yd(e,t){Yh(e,t),(e=e.alternate)&&Yh(e,t)}function Zh(e){if(e.tag===13){var t=si(e,67108864);t!==null&&Bn(t,e,67108864),yd(e,67108864)}}var Cl=!0;function V1(e,t,o,l){var p=P.T;P.T=null;var v=Y.p;try{Y.p=2,bd(e,t,o,l)}finally{Y.p=v,P.T=p}}function $1(e,t,o,l){var p=P.T;P.T=null;var v=Y.p;try{Y.p=8,bd(e,t,o,l)}finally{Y.p=v,P.T=p}}function bd(e,t,o,l){if(Cl){var p=vd(l);if(p===null)id(e,t,l,Al,o),Xh(e,l);else if(q1(p,e,t,o,l))l.stopPropagation();else if(Xh(e,l),t&4&&-1<G1.indexOf(e)){for(;p!==null;){var v=Fr(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var D=Qt(v.pendingLanes);if(D!==0){var V=v;for(V.pendingLanes|=2,V.entangledLanes|=2;D;){var se=1<<31-Ve(D);V.entanglements[1]|=se,D&=~se}mr(v),(_t&6)===0&&(ul=j()+500,Wo(0))}}break;case 13:V=si(v,2),V!==null&&Bn(V,v,2),fl(),yd(v,2)}if(v=vd(l),v===null&&id(e,t,l,Al,o),v===p)break;p=v}p!==null&&l.stopPropagation()}else id(e,t,l,null,o)}}function vd(e){return e=co(e),xd(e)}var Al=null;function xd(e){if(Al=null,e=Pr(e),e!==null){var t=c(e);if(t===null)e=null;else{var o=t.tag;if(o===13){if(e=d(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Al=e,null}function Kh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(H()){case Q:return 2;case ue:return 8;case ye:case ie:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Sd=!1,da=null,fa=null,ma=null,Xo=new Map,Qo=new Map,pa=[],G1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xh(e,t){switch(e){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":Xo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(t.pointerId)}}function Jo(e,t,o,l,p,v){return e===null||e.nativeEvent!==v?(e={blockedOn:t,domEventName:o,eventSystemFlags:l,nativeEvent:v,targetContainers:[p]},t!==null&&(t=Fr(t),t!==null&&Zh(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function q1(e,t,o,l,p){switch(t){case"focusin":return da=Jo(da,e,t,o,l,p),!0;case"dragenter":return fa=Jo(fa,e,t,o,l,p),!0;case"mouseover":return ma=Jo(ma,e,t,o,l,p),!0;case"pointerover":var v=p.pointerId;return Xo.set(v,Jo(Xo.get(v)||null,e,t,o,l,p)),!0;case"gotpointercapture":return v=p.pointerId,Qo.set(v,Jo(Qo.get(v)||null,e,t,o,l,p)),!0}return!1}function Qh(e){var t=Pr(e.target);if(t!==null){var o=c(t);if(o!==null){if(t=o.tag,t===13){if(t=d(o),t!==null){e.blockedOn=t,sr(e.priority,function(){if(o.tag===13){var l=Un();l=gt(l);var p=si(o,l);p!==null&&Bn(p,o,l),yd(o,l)}});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=vd(e.nativeEvent);if(o===null){o=e.nativeEvent;var l=new o.constructor(o.type,o);lo=l,o.target.dispatchEvent(l),lo=null}else return t=Fr(o),t!==null&&Zh(t),e.blockedOn=o,!1;t.shift()}return!0}function Jh(e,t,o){Rl(e)&&o.delete(t)}function Y1(){Sd=!1,da!==null&&Rl(da)&&(da=null),fa!==null&&Rl(fa)&&(fa=null),ma!==null&&Rl(ma)&&(ma=null),Xo.forEach(Jh),Qo.forEach(Jh)}function Ml(e,t){e.blockedOn===t&&(e.blockedOn=null,Sd||(Sd=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Y1)))}var kl=null;function eg(e){kl!==e&&(kl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){kl===e&&(kl=null);for(var t=0;t<e.length;t+=3){var o=e[t],l=e[t+1],p=e[t+2];if(typeof l!="function"){if(xd(l||o)===null)continue;break}var v=Fr(o);v!==null&&(e.splice(t,3),t-=3,xu(v,{pending:!0,data:p,method:o.method,action:l},l,p))}}))}function es(e){function t(se){return Ml(se,e)}da!==null&&Ml(da,e),fa!==null&&Ml(fa,e),ma!==null&&Ml(ma,e),Xo.forEach(t),Qo.forEach(t);for(var o=0;o<pa.length;o++){var l=pa[o];l.blockedOn===e&&(l.blockedOn=null)}for(;0<pa.length&&(o=pa[0],o.blockedOn===null);)Qh(o),o.blockedOn===null&&pa.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var p=o[l],v=o[l+1],D=p[ut]||null;if(typeof v=="function")D||eg(o);else if(D){var V=null;if(v&&v.hasAttribute("formAction")){if(p=v,D=v[ut]||null)V=D.formAction;else if(xd(p)!==null)continue}else V=D.action;typeof V=="function"?o[l+1]=V:(o.splice(l,3),l-=3),eg(o)}}}function wd(e){this._internalRoot=e}Nl.prototype.render=wd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var o=t.current,l=Un();qh(o,l,e,t,null,null)},Nl.prototype.unmount=wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qh(e.current,2,null,e,null,null),fl(),t[On]=null}};function Nl(e){this._internalRoot=e}Nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kn();e={blockedOn:null,target:e,priority:t};for(var o=0;o<pa.length&&t!==0&&t<pa[o].priority;o++);pa.splice(o,0,e),o===0&&Qh(e)}};var tg=n.version;if(tg!=="19.1.0")throw Error(i(527,tg,"19.1.0"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=m(t),e=e!==null?h(e):null,e=e===null?null:e.stateNode,e};var Z1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{De=Ol.inject(Z1),He=Ol}catch{}}return ns.createRoot=function(e,t){if(!s(e))throw Error(i(299));var o=!1,l="",p=yp,v=bp,D=vp,V=null;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(p=t.onUncaughtError),t.onCaughtError!==void 0&&(v=t.onCaughtError),t.onRecoverableError!==void 0&&(D=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(V=t.unstable_transitionCallbacks)),t=$h(e,1,!1,null,null,o,l,p,v,D,V,null),e[On]=t.current,ad(e),new wd(t)},ns.hydrateRoot=function(e,t,o){if(!s(e))throw Error(i(299));var l=!1,p="",v=yp,D=bp,V=vp,se=null,xe=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(D=o.onCaughtError),o.onRecoverableError!==void 0&&(V=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(se=o.unstable_transitionCallbacks),o.formState!==void 0&&(xe=o.formState)),t=$h(e,1,!0,t,o??null,l,p,v,D,V,se,xe),t.context=Gh(null),o=t.current,l=Un(),l=gt(l),p=Xr(l),p.callback=null,Qr(o,p,l),o=l,t.current.lanes=o,Xe(t,o),mr(t),e[On]=t.current,ad(e),new Nl(t)},ns.version="19.1.0",ns}var dg;function ix(){if(dg)return Td.exports;dg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Td.exports=ax(),Td.exports}var ox=ix(),Bt={},Ze={};try{Bt.CARBON_ENABLE_CSS_CUSTOM_PROPERTIES&&Bt.CARBON_ENABLE_CSS_CUSTOM_PROPERTIES==="true"?Ze.enableCssCustomProperties=!0:Ze.enableCssCustomProperties=!1,Bt.CARBON_ENABLE_CSS_GRID&&Bt.CARBON_ENABLE_CSS_GRID==="true"?Ze.enableCssGrid=!0:Ze.enableCssGrid=!1,Bt.CARBON_ENABLE_V11_RELEASE?Bt.CARBON_ENABLE_V11_RELEASE==="true"?Ze.enableV11Release=!0:Ze.enableV11Release=!1:Ze.enableV11Release=!0,Bt.CARBON_ENABLE_EXPERIMENTAL_TILE_CONTRAST&&Bt.CARBON_ENABLE_EXPERIMENTAL_TILE_CONTRAST==="true"?Ze.enableExperimentalTileContrast=!0:Ze.enableExperimentalTileContrast=!1,Bt.CARBON_ENABLE_V12_TILE_DEFAULT_ICONS&&Bt.CARBON_ENABLE_V12_TILE_DEFAULT_ICONS==="true"?Ze.enableV12TileDefaultIcons=!0:Ze.enableV12TileDefaultIcons=!1,Bt.CARBON_ENABLE_V12_TILE_RADIO_ICONS&&Bt.CARBON_ENABLE_V12_TILE_RADIO_ICONS==="true"?Ze.enableV12TileRadioIcons=!0:Ze.enableV12TileRadioIcons=!1,Bt.CARBON_ENABLE_V12_OVERFLOWMENU&&Bt.CARBON_ENABLE_V12_OVERFLOWMENU==="true"?Ze.enableV12Overflowmenu=!0:Ze.enableV12Overflowmenu=!1,Bt.CARBON_ENABLE_TREEVIEW_CONTROLLABLE&&Bt.CARBON_ENABLE_TREEVIEW_CONTROLLABLE==="true"?Ze.enableTreeviewControllable=!0:Ze.enableTreeviewControllable=!1,Bt.CARBON_ENABLE_V12_STRUCTURED_LIST_VISIBLE_ICONS&&Bt.CARBON_ENABLE_V12_STRUCTURED_LIST_VISIBLE_ICONS==="true"?Ze.enableV12StructuredListVisibleIcons=!0:Ze.enableV12StructuredListVisibleIcons=!1,Bt.CARBON_ENABLE_EXPERIMENTAL_FOCUS_WRAP_WITHOUT_SENTINELS&&Bt.CARBON_ENABLE_EXPERIMENTAL_FOCUS_WRAP_WITHOUT_SENTINELS==="true"?Ze.enableExperimentalFocusWrapWithoutSentinels=!0:Ze.enableExperimentalFocusWrapWithoutSentinels=!1,Bt.CARBON_ENABLE_DIALOG_ELEMENT&&Bt.CARBON_ENABLE_DIALOG_ELEMENT==="true"?Ze.enableDialogElement=!0:Ze.enableDialogElement=!1,Bt.CARBON_ENABLE_V12_DYNAMIC_FLOATING_STYLES&&Bt.CARBON_ENABLE_V12_DYNAMIC_FLOATING_STYLES==="true"?Ze.enableV12DynamicFloatingStyles=!0:Ze.enableV12DynamicFloatingStyles=!1}catch{Ze.enableCssCustomProperties=!1,Ze.enableCssGrid=!1,Ze.enableV11Release=!0,Ze.enableExperimentalTileContrast=!1,Ze.enableV12TileDefaultIcons=!1,Ze.enableV12TileRadioIcons=!1,Ze.enableV12Overflowmenu=!1,Ze.enableTreeviewControllable=!1,Ze.enableV12StructuredListVisibleIcons=!1,Ze.enableExperimentalFocusWrapWithoutSentinels=!1,Ze.enableDialogElement=!1,Ze.enableV12DynamicFloatingStyles=!1}var fg=[{name:"enable-css-custom-properties",description:"Describe what the flag does",enabled:Ze.enableCssCustomProperties},{name:"enable-css-grid",description:`Enable CSS Grid Layout in the Grid and Column React components
`,enabled:Ze.enableCssGrid},{name:"enable-v11-release",description:`Enable the features and functionality for the v11 Release
`,enabled:Ze.enableV11Release},{name:"enable-experimental-tile-contrast",description:`Enable the experimental tile improved contrast styles
`,enabled:Ze.enableExperimentalTileContrast},{name:"enable-v12-tile-default-icons",description:`Enable rendering of default icons in the tile components
`,enabled:Ze.enableV12TileDefaultIcons},{name:"enable-v12-tile-radio-icons",description:`Enable rendering of radio icons in the RadioTile component
`,enabled:Ze.enableV12TileRadioIcons},{name:"enable-v12-overflowmenu",description:`Enable the use of the v12 OverflowMenu leveraging the Menu subcomponents
`,enabled:Ze.enableV12Overflowmenu},{name:"enable-treeview-controllable",description:`Enable the new TreeView controllable API
`,enabled:Ze.enableTreeviewControllable},{name:"enable-v12-structured-list-visible-icons",description:`Enable rendering of radio icons in the StructuredList component
`,enabled:Ze.enableV12StructuredListVisibleIcons},{name:"enable-experimental-focus-wrap-without-sentinels",description:`Enable the new focus wrap behavior that doesn't use sentinel nodes
`,enabled:Ze.enableExperimentalFocusWrapWithoutSentinels},{name:"enable-dialog-element",description:`Enable components to utilize the native dialog element
`,enabled:Ze.enableDialogElement},{name:"enable-v12-dynamic-floating-styles",description:`Enable dynamic setting of floating styles for components like Popover, Tooltip, etc.
`,enabled:Ze.enableV12DynamicFloatingStyles}];function mg(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,i=Array(n);r<n;r++)i[r]=a[r];return i}function sx(a){if(Array.isArray(a))return a}function lx(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function cx(a,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,gx(i.key),i)}}function ux(a,n,r){return n&&cx(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function dx(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=f0(a))||n){r&&(a=r);var i=0,s=function(){};return{s,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(m){throw m},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,f=!1;return{s:function(){r=r.call(a)},n:function(){var m=r.next();return d=m.done,m},e:function(m){f=!0,c=m},f:function(){try{d||r.return==null||r.return()}finally{if(f)throw c}}}}function fx(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var i,s,c,d,f=[],m=!0,h=!1;try{if(c=(r=r.call(a)).next,n!==0)for(;!(m=(i=c.call(r)).done)&&(f.push(i.value),f.length!==n);m=!0);}catch(b){h=!0,s=b}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(h)throw s}}return f}}function mx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function px(a,n){return sx(a)||fx(a,n)||f0(a,n)||mx()}function hx(a,n){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var i=r.call(a,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}function gx(a){var n=hx(a,"string");return typeof n=="symbol"?n:n+""}function f0(a,n){if(a){if(typeof a=="string")return mg(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mg(a,n):void 0}}var yx=function(){function a(n){var r=this;lx(this,a),this.flags=new Map,n&&Object.keys(n).forEach(function(i){r.flags.set(i,n[i])})}return ux(a,[{key:"checkForFlag",value:function(r){if(!this.flags.has(r))throw new Error("Unable to find a feature flag with the name: `".concat(r,"`"))}},{key:"add",value:function(r,i){if(this.flags.has(r))throw new Error("The feature flag: ".concat(r," already exists"));this.flags.set(r,i)}},{key:"enable",value:function(r){this.checkForFlag(r),this.flags.set(r,!0)}},{key:"disable",value:function(r){this.checkForFlag(r),this.flags.set(r,!1)}},{key:"merge",value:function(r){var i=this;Object.keys(r).forEach(function(s){i.flags.set(s,r[s])})}},{key:"mergeWithScope",value:function(r){var i=dx(r.flags),s;try{for(i.s();!(s=i.n()).done;){var c=px(s.value,2),d=c[0],f=c[1];this.flags.has(d)||this.flags.set(d,f)}}catch(m){i.e(m)}finally{i.f()}}},{key:"enabled",value:function(r){return this.checkForFlag(r),this.flags.get(r)}}])}(),Hl=bx();for(var Md=0;Md<fg.length;Md++){var pg=fg[Md];Hl.add(pg.name,pg.enabled)}function bx(a){return new yx(a)}function vx(){return Hl.merge.apply(Hl,arguments)}vx({"enable-css-custom-properties":!0,"enable-css-grid":!0,"enable-v11-release":!0,"enable-experimental-tile-contrast":!1,"enable-v12-tile-radio-icons":!1,"enable-v12-structured-list-visible-icons":!1,"enable-v12-dynamic-floating-styles":!1});function St(a,n,r){return(n=Sx(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function Nt(){return Nt=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)({}).hasOwnProperty.call(r,i)&&(a[i]=r[i])}return a},Nt.apply(null,arguments)}function xx(a,n){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var i=r.call(a,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Sx(a){var n=xx(a,"string");return typeof n=="symbol"?n:n+""}var kd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hg;function wx(){return hg||(hg=1,function(a){(function(){var n={}.hasOwnProperty;function r(){for(var c="",d=0;d<arguments.length;d++){var f=arguments[d];f&&(c=s(c,i(f)))}return c}function i(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return r.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var d="";for(var f in c)n.call(c,f)&&c[f]&&(d=s(d,f));return d}function s(c,d){return d?c?c+" "+d:c+d:c}a.exports?(r.default=r,a.exports=r):window.classNames=r})()}(kd)),kd.exports}var Ex=wx();const et=ic(Ex),Gi=ne.createContext("cds");function Vt(){return ne.useContext(Gi)}var Nd={exports:{}},Od,gg;function _x(){if(gg)return Od;gg=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Od=a,Od}var Dd,yg;function Tx(){if(yg)return Dd;yg=1;var a=_x();function n(){}function r(){}return r.resetWarningCache=n,Dd=function(){function i(d,f,m,h,b,w){if(w!==a){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function s(){return i}var c={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:n};return c.PropTypes=c,c},Dd}var bg;function Cx(){return bg||(bg=1,Nd.exports=Tx()()),Nd.exports}var Ax=Cx();const ae=ic(Ax);function Rx(a,n,r){return(n=Nx(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function vg(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),r.push.apply(r,i)}return r}function jd(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?vg(Object(r),!0).forEach(function(i){Rx(a,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):vg(Object(r)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(r,i))})}return a}function xg(a,n){if(a==null)return{};var r,i,s=Mx(a,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(i=0;i<c.length;i++)r=c[i],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(s[r]=a[r])}return s}function Mx(a,n){if(a==null)return{};var r={};for(var i in a)if({}.hasOwnProperty.call(a,i)){if(n.indexOf(i)!==-1)continue;r[i]=a[i]}return r}function kx(a,n){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var i=r.call(a,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Nx(a){var n=kx(a,"string");return typeof n=="symbol"?n:n+""}var Ox=["width","height","viewBox"],Dx=["tabindex"],jx={focusable:"false",preserveAspectRatio:"xMidYMid meet"};function Lx(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=a.width,r=a.height,i=a.viewBox,s=i===void 0?"0 0 ".concat(n," ").concat(r):i,c=xg(a,Ox),d=c.tabindex,f=xg(c,Dx),m=jd(jd(jd({},jx),f),{},{width:n,height:r,viewBox:s});return m["aria-label"]||m["aria-labelledby"]||m.title?(m.role="img",d!=null&&(m.focusable="true",m.tabindex=d)):m["aria-hidden"]=!0,m}const on=ne.forwardRef(function({className:n,children:r,tabIndex:i,xmlns:s="http://www.w3.org/2000/svg",preserveAspectRatio:c="xMidYMid meet",...d},f){const{tabindex:m,...h}=Lx({...d,tabindex:i}),b=h;return n&&(b.className=n),m!=null&&(typeof m=="number"?b.tabIndex=m:b.tabIndex=Number(i)),f&&(b.ref=f),s&&(b.xmlns=s),c&&(b.preserveAspectRatio=c),ne.createElement("svg",b,r)});on.displayName="Icon";on.propTypes={"aria-hidden":ae.oneOfType([ae.bool,ae.oneOf(["true","false"])]),"aria-label":ae.string,"aria-labelledby":ae.string,children:ae.node,className:ae.string,height:ae.oneOfType([ae.number,ae.string]),preserveAspectRatio:ae.string,tabIndex:ae.oneOfType([ae.number,ae.string]),viewBox:ae.string,width:ae.oneOfType([ae.number,ae.string]),xmlns:ae.string};var Sg,wg,Eg,_g,Tg,Cg,Ag,Rg,Mg,kg,Ng;const Ix=ne.forwardRef(function({children:n,size:r=16,...i},s){return r===16||r==="16"||r==="16px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...i},Sg||(Sg=ne.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"})),wg||(wg=ne.createElement("path",{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"})),n):r===20||r==="20"||r==="20px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...i},Eg||(Eg=ne.createElement("path",{d:"M10,1c-4.9,0-9,4.1-9,9s4.1,9,9,9s9-4,9-9S15,1,10,1z M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"})),_g||(_g=ne.createElement("path",{fill:"none",d:"M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z","data-icon-path":"inner-path",opacity:"0"})),n):r===24||r==="24"||r==="24px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...i},Tg||(Tg=ne.createElement("path",{d:"M12,1C6,1,1,6,1,12s5,11,11,11s11-4.9,11-11S18.1,1,12,1z M10.4,16.3l-3.9-3.9l1.3-1.2l2.7,2.7l5.8-5.8l1.3,1.3L10.4,16.3z"})),Cg||(Cg=ne.createElement("path",{fill:"none",d:"M10.4,16.3l-3.9-3.9l1.3-1.2l2.7,2.7l5.8-5.8l1.3,1.3L10.4,16.3z","data-icon-path":"inner-path",opacity:"0"})),n):ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...i},Ag||(Ag=ne.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2ZM14,21.5908l-5-5L10.5906,15,14,18.4092,21.41,11l1.5957,1.5859Z"})),Rg||(Rg=ne.createElement("path",{fill:"none",d:"M14 21.591L9 16.591 10.591 15 14 18.409 21.41 11 23.005 12.585 14 21.591z","data-icon-path":"inner-path"})),n)}),zx=ne.forwardRef(function({children:n,size:r=16,...i},s){return r==="glyph"||r==="glyph"||r==="glyphpx"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 6",fill:"currentColor",...i},Mg||(Mg=ne.createElement("path",{d:"M5 6L0 1 0.7 0.3 5 4.6 9.3 0.3 10 1z"})),n):r===16||r==="16"||r==="16px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...i},kg||(kg=ne.createElement("path",{d:"M8 11L3 6 3.7 5.3 8 9.6 12.3 5.3 13 6z"})),n):ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...i},Ng||(Ng=ne.createElement("path",{d:"M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"})),n)});var Og,Dg,jg,Lg,Ig,zg,Ug,Bg;const Ux=ne.forwardRef(function({children:n,size:r=16,...i},s){return r===16||r==="16"||r==="16px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...i},Og||(Og=ne.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z"})),Dg||(Dg=ne.createElement("path",{fill:"none",d:"M10.7,11.5L4.5,5.3l0.8-0.8l6.2,6.2L10.7,11.5z","data-icon-path":"inner-path",opacity:"0"})),n):r===20||r==="20"||r==="20px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...i},jg||(jg=ne.createElement("path",{d:"M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"})),Lg||(Lg=ne.createElement("path",{d:"M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z","data-icon-path":"inner-path",opacity:"0"})),n):r===24||r==="24"||r==="24px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...i},Ig||(Ig=ne.createElement("path",{d:"M12,1C5.9,1,1,5.9,1,12s4.9,11,11,11s11-4.9,11-11S18.1,1,12,1z M16.3,17.5L6.5,7.7l1.2-1.2l9.8,9.8L16.3,17.5z"})),zg||(zg=ne.createElement("path",{fill:"none",d:"M16.3,17.5L6.5,7.7l1.2-1.2l9.8,9.8L16.3,17.5z","data-icon-path":"inner-path",opacity:"0"})),n):ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...i},Ug||(Ug=ne.createElement("path",{fill:"none",d:"M14.9 7.2H17.1V24.799H14.9z","data-icon-path":"inner-path",transform:"rotate(-45 16 16)"})),Bg||(Bg=ne.createElement("path",{d:"M16,2A13.914,13.914,0,0,0,2,16,13.914,13.914,0,0,0,16,30,13.914,13.914,0,0,0,30,16,13.914,13.914,0,0,0,16,2Zm5.4449,21L9,10.5557,10.5557,9,23,21.4448Z"})),n)});var Pg;const Bx=ne.forwardRef(function({children:n,size:r=16,...i},s){return ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...i},Pg||(Pg=ne.createElement("path",{d:"M20,10H7.8149l3.5874-3.5859L10,5,4,11,10,17l1.4023-1.4146L7.8179,12H20a6,6,0,0,1,0,12H12v2h8a8,8,0,0,0,0-16Z"})),n)});var Fg,Hg,Wg,Vg,$g,Gg,qg,Yg,Zg,Kg,Xg;const Wl=ne.forwardRef(function({children:n,size:r=16,...i},s){return ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...i},Fg||(Fg=ne.createElement("path",{fill:"none",d:"M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z","data-icon-path":"inner-path"})),Hg||(Hg=ne.createElement("path",{d:"M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"})),Wg||(Wg=ne.createElement("path",{d:"M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"})),n)}),Vl=ne.forwardRef(function({children:n,size:r=16,...i},s){return r===16||r==="16"||r==="16px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...i},Vg||(Vg=ne.createElement("path",{d:"M8,1C4.2,1,1,4.2,1,8s3.2,7,7,7s7-3.1,7-7S11.9,1,8,1z M7.5,4h1v5h-1C7.5,9,7.5,4,7.5,4z M8,12.2 c-0.4,0-0.8-0.4-0.8-0.8s0.3-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8S8.4,12.2,8,12.2z"})),$g||($g=ne.createElement("path",{d:"M7.5,4h1v5h-1C7.5,9,7.5,4,7.5,4z M8,12.2c-0.4,0-0.8-0.4-0.8-0.8s0.3-0.8,0.8-0.8 c0.4,0,0.8,0.4,0.8,0.8S8.4,12.2,8,12.2z","data-icon-path":"inner-path",opacity:"0"})),n):r===20||r==="20"||r==="20px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...i},Gg||(Gg=ne.createElement("path",{d:"M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1 s1,0.4,1,1S10.6,16,10,16z"})),qg||(qg=ne.createElement("path",{d:"M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1s1,0.4,1,1S10.6,16,10,16z","data-icon-path":"inner-path",opacity:"0"})),n):r===24||r==="24"||r==="24px"?ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...i},Yg||(Yg=ne.createElement("path",{d:"M12,1C5.9,1,1,5.9,1,12s4.9,11,11,11s11-4.9,11-11C23,5.9,18.1,1,12,1z M11.1,6h1.8v8h-1.8V6z M12,19.2 c-0.7,0-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2s1.2,0.6,1.2,1.2S12.7,19.2,12,19.2z"})),Zg||(Zg=ne.createElement("path",{fill:"none",d:"M13.2,18c0,0.7-0.6,1.2-1.2,1.2s-1.2-0.6-1.2-1.2s0.6-1.2,1.2-1.2S13.2,17.3,13.2,18z M12.9,6 h-1.8v8h1.8V6z","data-icon-path":"inner-path",opacity:"0"})),n):ne.createElement(on,{width:r,height:r,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...i},Kg||(Kg=ne.createElement("path",{d:"M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25 c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"})),Xg||(Xg=ne.createElement("path",{fill:"none",d:"M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22 C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z","data-icon-path":"inner-path",opacity:"0"})),n)}),Qg=L.createContext({direction:"auto",getTextDirection:{current:void 0}}),Px=ne.forwardRef(({as:a,children:n,dir:r="auto",...i},s)=>{const c=L.useContext(Qg),d={},f=a??"span",m={...c};if(!c)d.dir=r,m.direction=r;else{const{direction:h,getTextDirection:b}=c;if(b&&b.current){const w=Fx(n),S=b.current(w);h!==S?(d.dir=S,m.direction=S):h==="auto"&&(d.dir=S)}else h!==r?(d.dir=r,m.direction=r):h==="auto"&&(d.dir=r)}return ne.createElement(Qg.Provider,{value:m},ne.createElement(f,Nt({ref:s},i,d),n))}),pn=Px;pn.propTypes={as:ae.oneOfType([ae.func,ae.string,ae.elementType]),children:ae.node.isRequired,dir:ae.oneOf(["ltr","rtl","auto"])};const Fx=a=>{if(typeof a=="string")return a;const n=L.Children.map(a,r=>typeof r=="string"?r:null)?.filter(r=>r!==null);return n?.length===1?n[0]:n},m0={key:"Enter",which:13,keyCode:13,code:"Enter"},Xd={key:["Escape","Esc"],which:27,keyCode:27,code:"Esc"},Hx={key:" ",which:32,keyCode:32,code:"Space"},Wx={key:"ArrowLeft",which:37,keyCode:37,code:"ArrowLeft"},Vx={key:"ArrowUp",which:38,keyCode:38,code:"ArrowUp"},$x={key:"ArrowRight",which:39,keyCode:39,code:"ArrowRight"},Gx={key:"ArrowDown",which:40,keyCode:40,code:"ArrowDown"},Ld=(a,n)=>{for(let r=0;r<n.length;r++)if(Ii(a,n[r]))return!0;return!1},Ii=(a,{key:n,which:r,keyCode:i,code:s})=>typeof a=="string"?a===n:typeof a=="number"?a===r||a===i:a.key&&Array.isArray(n)?n.includes(a.key):a.key===n||a.which===r||a.keyCode===i||a.code===s,qx=()=>{let a=0;return()=>++a},Yx=!!(typeof window<"u"&&window.document&&window.document.createElement),Zx=ne.createContext(null);function p0(){return ne.useContext(Zx)}const h0={...ne},Id=qx(),Kx=Yx?L.useLayoutEffect:L.useEffect;let zd=!1;const g0="id";function Xx(a=g0){const n=p0(),[r,i]=L.useState(()=>zd?`${n?`${n}-`:""}${a}-${Id()}`:null);return Kx(()=>{r===null&&i(`${n?`${n}-`:""}${a}-${Id()}`)},[Id]),L.useEffect(()=>{zd===!1&&(zd=!0)},[]),r}function Qx(a=g0){const n=p0();return`${n?`${n}-`:""}${a}-${h0.useId()}`}const qi=h0.useId?Qx:Xx,Ud=new Map,zr=(a,n)=>(i,s,c,...d)=>{if(typeof i[s]>"u")return;Ud.has(c)||Ud.set(c,new Set);const f=Ud.get(c);return f&&!f.has(s)&&f.add(s),a(i,s,c,...d)},y0=typeof window<"u"?L.useLayoutEffect:L.useEffect,jl={};function mf(a,n,r){return function(s,c,d,...f){if(s[c]!==void 0){if(!jl[d]||!jl[d][c]){jl[d]={...jl[d],[c]:!0};const m=s[c],h=r?r(m):null;n&&!n.includes(m)&&(r?`${m}${c}${d}${h}${m}`:`${m}${c}${d}${n.join(", ")}${m}`)}return a(s,c,d,...f)}}}const pf=a=>L.useCallback(n=>{a.forEach(r=>{typeof r=="function"?r(n):r&&(r.current=n)})},[a]),$l=(a,n)=>{const r=L.useRef(null);L.useEffect(()=>{r.current=n},[n]),L.useEffect(()=>{const i=s=>{r.current&&r.current(s)};return window.addEventListener(a,i),()=>{window.removeEventListener(a,i)}},[a])},Jx={"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"},sc=a=>Jx[a]??a;function lc(){return typeof window<"u"}function Yi(a){return b0(a)?(a.nodeName||"").toLowerCase():"#document"}function Pn(a){var n;return(a==null||(n=a.ownerDocument)==null?void 0:n.defaultView)||window}function br(a){var n;return(n=(b0(a)?a.ownerDocument:a.document)||window.document)==null?void 0:n.documentElement}function b0(a){return lc()?a instanceof Node||a instanceof Pn(a).Node:!1}function xn(a){return lc()?a instanceof Element||a instanceof Pn(a).Element:!1}function yr(a){return lc()?a instanceof HTMLElement||a instanceof Pn(a).HTMLElement:!1}function Jg(a){return!lc()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof Pn(a).ShadowRoot}const eS=new Set(["inline","contents"]);function ds(a){const{overflow:n,overflowX:r,overflowY:i,display:s}=ar(a);return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!eS.has(s)}const tS=new Set(["table","td","th"]);function nS(a){return tS.has(Yi(a))}const rS=[":popover-open",":modal"];function cc(a){return rS.some(n=>{try{return a.matches(n)}catch{return!1}})}const aS=["transform","translate","scale","rotate","perspective"],iS=["transform","translate","scale","rotate","perspective","filter"],oS=["paint","layout","strict","content"];function hf(a){const n=gf(),r=xn(a)?ar(a):a;return aS.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!n&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!n&&(r.filter?r.filter!=="none":!1)||iS.some(i=>(r.willChange||"").includes(i))||oS.some(i=>(r.contain||"").includes(i))}function sS(a){let n=xa(a);for(;yr(n)&&!Hi(n);){if(hf(n))return n;if(cc(n))return null;n=xa(n)}return null}function gf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lS=new Set(["html","body","#document"]);function Hi(a){return lS.has(Yi(a))}function ar(a){return Pn(a).getComputedStyle(a)}function uc(a){return xn(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function xa(a){if(Yi(a)==="html")return a;const n=a.assignedSlot||a.parentNode||Jg(a)&&a.host||br(a);return Jg(n)?n.host:n}function v0(a){const n=xa(a);return Hi(n)?a.ownerDocument?a.ownerDocument.body:a.body:yr(n)&&ds(n)?n:v0(n)}function ss(a,n,r){var i;n===void 0&&(n=[]),r===void 0&&(r=!0);const s=v0(a),c=s===((i=a.ownerDocument)==null?void 0:i.body),d=Pn(s);if(c){const f=Qd(d);return n.concat(d,d.visualViewport||[],ds(s)?s:[],f&&r?ss(f):[])}return n.concat(s,ss(s,[],r))}function Qd(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}const cS=["top","right","bottom","left"],Wi=Math.min,Wa=Math.max,Gl=Math.round,Ll=Math.floor,gr=a=>({x:a,y:a}),uS={left:"right",right:"left",bottom:"top",top:"bottom"},dS={start:"end",end:"start"};function fS(a,n,r){return Wa(a,Wi(n,r))}function fs(a,n){return typeof a=="function"?a(n):a}function Vi(a){return a.split("-")[0]}function ms(a){return a.split("-")[1]}function mS(a){return a==="x"?"y":"x"}function yf(a){return a==="y"?"height":"width"}const pS=new Set(["top","bottom"]);function Fa(a){return pS.has(Vi(a))?"y":"x"}function bf(a){return mS(Fa(a))}function hS(a,n,r){r===void 0&&(r=!1);const i=ms(a),s=bf(a),c=yf(s);let d=s==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return n.reference[c]>n.floating[c]&&(d=ql(d)),[d,ql(d)]}function gS(a){const n=ql(a);return[Jd(a),n,Jd(n)]}function Jd(a){return a.replace(/start|end/g,n=>dS[n])}const ey=["left","right"],ty=["right","left"],yS=["top","bottom"],bS=["bottom","top"];function vS(a,n,r){switch(a){case"top":case"bottom":return r?n?ty:ey:n?ey:ty;case"left":case"right":return n?yS:bS;default:return[]}}function xS(a,n,r,i){const s=ms(a);let c=vS(Vi(a),r==="start",i);return s&&(c=c.map(d=>d+"-"+s),n&&(c=c.concat(c.map(Jd)))),c}function ql(a){return a.replace(/left|right|bottom|top/g,n=>uS[n])}function SS(a){return{top:0,right:0,bottom:0,left:0,...a}}function x0(a){return typeof a!="number"?SS(a):{top:a,right:a,bottom:a,left:a}}function Yl(a){const{x:n,y:r,width:i,height:s}=a;return{width:i,height:s,top:r,left:n,right:n+i,bottom:r+s,x:n,y:r}}var wS=typeof document<"u",ES=function(){},ef=wS?L.useLayoutEffect:ES;const _S={...u0},TS=_S.useInsertionEffect,CS=TS||(a=>a());function AS(a){const n=L.useRef(()=>{});return CS(()=>{n.current=a}),L.useCallback(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n.current==null?void 0:n.current(...i)},[])}var S0=d0();function ny(a,n,r){let{reference:i,floating:s}=a;const c=Fa(n),d=bf(n),f=yf(d),m=Vi(n),h=c==="y",b=i.x+i.width/2-s.width/2,w=i.y+i.height/2-s.height/2,S=i[f]/2-s[f]/2;let x;switch(m){case"top":x={x:b,y:i.y-s.height};break;case"bottom":x={x:b,y:i.y+i.height};break;case"right":x={x:i.x+i.width,y:w};break;case"left":x={x:i.x-s.width,y:w};break;default:x={x:i.x,y:i.y}}switch(ms(n)){case"start":x[d]-=S*(r&&h?-1:1);break;case"end":x[d]+=S*(r&&h?-1:1);break}return x}const RS=async(a,n,r)=>{const{placement:i="bottom",strategy:s="absolute",middleware:c=[],platform:d}=r,f=c.filter(Boolean),m=await(d.isRTL==null?void 0:d.isRTL(n));let h=await d.getElementRects({reference:a,floating:n,strategy:s}),{x:b,y:w}=ny(h,i,m),S=i,x={},y=0;for(let g=0;g<f.length;g++){const{name:E,fn:R}=f[g],{x:O,y:A,data:N,reset:M}=await R({x:b,y:w,initialPlacement:i,placement:S,strategy:s,middlewareData:x,rects:h,platform:d,elements:{reference:a,floating:n}});b=O??b,w=A??w,x={...x,[E]:{...x[E],...N}},M&&y<=50&&(y++,typeof M=="object"&&(M.placement&&(S=M.placement),M.rects&&(h=M.rects===!0?await d.getElementRects({reference:a,floating:n,strategy:s}):M.rects),{x:b,y:w}=ny(h,S,m)),g=-1)}return{x:b,y:w,placement:S,strategy:s,middlewareData:x}};async function tf(a,n){var r;n===void 0&&(n={});const{x:i,y:s,platform:c,rects:d,elements:f,strategy:m}=a,{boundary:h="clippingAncestors",rootBoundary:b="viewport",elementContext:w="floating",altBoundary:S=!1,padding:x=0}=fs(n,a),y=x0(x),E=f[S?w==="floating"?"reference":"floating":w],R=Yl(await c.getClippingRect({element:(r=await(c.isElement==null?void 0:c.isElement(E)))==null||r?E:E.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:h,rootBoundary:b,strategy:m})),O=w==="floating"?{x:i,y:s,width:d.floating.width,height:d.floating.height}:d.reference,A=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),N=await(c.isElement==null?void 0:c.isElement(A))?await(c.getScale==null?void 0:c.getScale(A))||{x:1,y:1}:{x:1,y:1},M=Yl(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:O,offsetParent:A,strategy:m}):O);return{top:(R.top-M.top+y.top)/N.y,bottom:(M.bottom-R.bottom+y.bottom)/N.y,left:(R.left-M.left+y.left)/N.x,right:(M.right-R.right+y.right)/N.x}}const MS=a=>({name:"arrow",options:a,async fn(n){const{x:r,y:i,placement:s,rects:c,platform:d,elements:f,middlewareData:m}=n,{element:h,padding:b=0}=fs(a,n)||{};if(h==null)return{};const w=x0(b),S={x:r,y:i},x=bf(s),y=yf(x),g=await d.getDimensions(h),E=x==="y",R=E?"top":"left",O=E?"bottom":"right",A=E?"clientHeight":"clientWidth",N=c.reference[y]+c.reference[x]-S[x]-c.floating[y],M=S[x]-c.reference[x],z=await(d.getOffsetParent==null?void 0:d.getOffsetParent(h));let F=z?z[A]:0;(!F||!await(d.isElement==null?void 0:d.isElement(z)))&&(F=f.floating[A]||c.floating[y]);const B=N/2-M/2,I=F/2-g[y]/2-1,W=Wi(w[R],I),ee=Wi(w[O],I),C=W,J=F-g[y]-ee,_=F/2-g[y]/2+B,K=fS(C,_,J),P=!m.arrow&&ms(s)!=null&&_!==K&&c.reference[y]/2-(_<C?W:ee)-g[y]/2<0,Y=P?_<C?_-C:_-J:0;return{[x]:S[x]+Y,data:{[x]:K,centerOffset:_-K-Y,...P&&{alignmentOffset:Y}},reset:P}}}),kS=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(n){var r,i;const{placement:s,middlewareData:c,rects:d,initialPlacement:f,platform:m,elements:h}=n,{mainAxis:b=!0,crossAxis:w=!0,fallbackPlacements:S,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...E}=fs(a,n);if((r=c.arrow)!=null&&r.alignmentOffset)return{};const R=Vi(s),O=Fa(f),A=Vi(f)===f,N=await(m.isRTL==null?void 0:m.isRTL(h.floating)),M=S||(A||!g?[ql(f)]:gS(f)),z=y!=="none";!S&&z&&M.push(...xS(f,g,y,N));const F=[f,...M],B=await tf(n,E),I=[];let W=((i=c.flip)==null?void 0:i.overflows)||[];if(b&&I.push(B[R]),w){const _=hS(s,d,N);I.push(B[_[0]],B[_[1]])}if(W=[...W,{placement:s,overflows:I}],!I.every(_=>_<=0)){var ee,C;const _=(((ee=c.flip)==null?void 0:ee.index)||0)+1,K=F[_];if(K&&(!(w==="alignment"?O!==Fa(K):!1)||W.every(oe=>oe.overflows[0]>0&&Fa(oe.placement)===O)))return{data:{index:_,overflows:W},reset:{placement:K}};let P=(C=W.filter(Y=>Y.overflows[0]<=0).sort((Y,oe)=>Y.overflows[1]-oe.overflows[1])[0])==null?void 0:C.placement;if(!P)switch(x){case"bestFit":{var J;const Y=(J=W.filter(oe=>{if(z){const te=Fa(oe.placement);return te===O||te==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(te=>te>0).reduce((te,U)=>te+U,0)]).sort((oe,te)=>oe[1]-te[1])[0])==null?void 0:J[0];Y&&(P=Y);break}case"initialPlacement":P=f;break}if(s!==P)return{reset:{placement:P}}}return{}}}};function ry(a,n){return{top:a.top-n.height,right:a.right-n.width,bottom:a.bottom-n.height,left:a.left-n.width}}function ay(a){return cS.some(n=>a[n]>=0)}const NS=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(n){const{rects:r}=n,{strategy:i="referenceHidden",...s}=fs(a,n);switch(i){case"referenceHidden":{const c=await tf(n,{...s,elementContext:"reference"}),d=ry(c,r.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:ay(d)}}}case"escaped":{const c=await tf(n,{...s,altBoundary:!0}),d=ry(c,r.floating);return{data:{escapedOffsets:d,escaped:ay(d)}}}default:return{}}}}},OS=new Set(["left","top"]);async function DS(a,n){const{placement:r,platform:i,elements:s}=a,c=await(i.isRTL==null?void 0:i.isRTL(s.floating)),d=Vi(r),f=ms(r),m=Fa(r)==="y",h=OS.has(d)?-1:1,b=c&&m?-1:1,w=fs(n,a);let{mainAxis:S,crossAxis:x,alignmentAxis:y}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return f&&typeof y=="number"&&(x=f==="end"?y*-1:y),m?{x:x*b,y:S*h}:{x:S*h,y:x*b}}const jS=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(n){var r,i;const{x:s,y:c,placement:d,middlewareData:f}=n,m=await DS(n,a);return d===((r=f.offset)==null?void 0:r.placement)&&(i=f.arrow)!=null&&i.alignmentOffset?{}:{x:s+m.x,y:c+m.y,data:{...m,placement:d}}}}};function w0(a){const n=ar(a);let r=parseFloat(n.width)||0,i=parseFloat(n.height)||0;const s=yr(a),c=s?a.offsetWidth:r,d=s?a.offsetHeight:i,f=Gl(r)!==c||Gl(i)!==d;return f&&(r=c,i=d),{width:r,height:i,$:f}}function vf(a){return xn(a)?a:a.contextElement}function Fi(a){const n=vf(a);if(!yr(n))return gr(1);const r=n.getBoundingClientRect(),{width:i,height:s,$:c}=w0(n);let d=(c?Gl(r.width):r.width)/i,f=(c?Gl(r.height):r.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const LS=gr(0);function E0(a){const n=Pn(a);return!gf()||!n.visualViewport?LS:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function IS(a,n,r){return n===void 0&&(n=!1),!r||n&&r!==Pn(a)?!1:n}function Ga(a,n,r,i){n===void 0&&(n=!1),r===void 0&&(r=!1);const s=a.getBoundingClientRect(),c=vf(a);let d=gr(1);n&&(i?xn(i)&&(d=Fi(i)):d=Fi(a));const f=IS(c,r,i)?E0(c):gr(0);let m=(s.left+f.x)/d.x,h=(s.top+f.y)/d.y,b=s.width/d.x,w=s.height/d.y;if(c){const S=Pn(c),x=i&&xn(i)?Pn(i):i;let y=S,g=Qd(y);for(;g&&i&&x!==y;){const E=Fi(g),R=g.getBoundingClientRect(),O=ar(g),A=R.left+(g.clientLeft+parseFloat(O.paddingLeft))*E.x,N=R.top+(g.clientTop+parseFloat(O.paddingTop))*E.y;m*=E.x,h*=E.y,b*=E.x,w*=E.y,m+=A,h+=N,y=Pn(g),g=Qd(y)}}return Yl({width:b,height:w,x:m,y:h})}function xf(a,n){const r=uc(a).scrollLeft;return n?n.left+r:Ga(br(a)).left+r}function _0(a,n,r){r===void 0&&(r=!1);const i=a.getBoundingClientRect(),s=i.left+n.scrollLeft-(r?0:xf(a,i)),c=i.top+n.scrollTop;return{x:s,y:c}}function zS(a){let{elements:n,rect:r,offsetParent:i,strategy:s}=a;const c=s==="fixed",d=br(i),f=n?cc(n.floating):!1;if(i===d||f&&c)return r;let m={scrollLeft:0,scrollTop:0},h=gr(1);const b=gr(0),w=yr(i);if((w||!w&&!c)&&((Yi(i)!=="body"||ds(d))&&(m=uc(i)),yr(i))){const x=Ga(i);h=Fi(i),b.x=x.x+i.clientLeft,b.y=x.y+i.clientTop}const S=d&&!w&&!c?_0(d,m,!0):gr(0);return{width:r.width*h.x,height:r.height*h.y,x:r.x*h.x-m.scrollLeft*h.x+b.x+S.x,y:r.y*h.y-m.scrollTop*h.y+b.y+S.y}}function US(a){return Array.from(a.getClientRects())}function BS(a){const n=br(a),r=uc(a),i=a.ownerDocument.body,s=Wa(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth),c=Wa(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight);let d=-r.scrollLeft+xf(a);const f=-r.scrollTop;return ar(i).direction==="rtl"&&(d+=Wa(n.clientWidth,i.clientWidth)-s),{width:s,height:c,x:d,y:f}}function PS(a,n){const r=Pn(a),i=br(a),s=r.visualViewport;let c=i.clientWidth,d=i.clientHeight,f=0,m=0;if(s){c=s.width,d=s.height;const h=gf();(!h||h&&n==="fixed")&&(f=s.offsetLeft,m=s.offsetTop)}return{width:c,height:d,x:f,y:m}}const FS=new Set(["absolute","fixed"]);function HS(a,n){const r=Ga(a,!0,n==="fixed"),i=r.top+a.clientTop,s=r.left+a.clientLeft,c=yr(a)?Fi(a):gr(1),d=a.clientWidth*c.x,f=a.clientHeight*c.y,m=s*c.x,h=i*c.y;return{width:d,height:f,x:m,y:h}}function iy(a,n,r){let i;if(n==="viewport")i=PS(a,r);else if(n==="document")i=BS(br(a));else if(xn(n))i=HS(n,r);else{const s=E0(a);i={x:n.x-s.x,y:n.y-s.y,width:n.width,height:n.height}}return Yl(i)}function T0(a,n){const r=xa(a);return r===n||!xn(r)||Hi(r)?!1:ar(r).position==="fixed"||T0(r,n)}function WS(a,n){const r=n.get(a);if(r)return r;let i=ss(a,[],!1).filter(f=>xn(f)&&Yi(f)!=="body"),s=null;const c=ar(a).position==="fixed";let d=c?xa(a):a;for(;xn(d)&&!Hi(d);){const f=ar(d),m=hf(d);!m&&f.position==="fixed"&&(s=null),(c?!m&&!s:!m&&f.position==="static"&&!!s&&FS.has(s.position)||ds(d)&&!m&&T0(a,d))?i=i.filter(b=>b!==d):s=f,d=xa(d)}return n.set(a,i),i}function VS(a){let{element:n,boundary:r,rootBoundary:i,strategy:s}=a;const d=[...r==="clippingAncestors"?cc(n)?[]:WS(n,this._c):[].concat(r),i],f=d[0],m=d.reduce((h,b)=>{const w=iy(n,b,s);return h.top=Wa(w.top,h.top),h.right=Wi(w.right,h.right),h.bottom=Wi(w.bottom,h.bottom),h.left=Wa(w.left,h.left),h},iy(n,f,s));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function $S(a){const{width:n,height:r}=w0(a);return{width:n,height:r}}function GS(a,n,r){const i=yr(n),s=br(n),c=r==="fixed",d=Ga(a,!0,c,n);let f={scrollLeft:0,scrollTop:0};const m=gr(0);function h(){m.x=xf(s)}if(i||!i&&!c)if((Yi(n)!=="body"||ds(s))&&(f=uc(n)),i){const x=Ga(n,!0,c,n);m.x=x.x+n.clientLeft,m.y=x.y+n.clientTop}else s&&h();c&&!i&&s&&h();const b=s&&!i&&!c?_0(s,f):gr(0),w=d.left+f.scrollLeft-m.x-b.x,S=d.top+f.scrollTop-m.y-b.y;return{x:w,y:S,width:d.width,height:d.height}}function Bd(a){return ar(a).position==="static"}function oy(a,n){if(!yr(a)||ar(a).position==="fixed")return null;if(n)return n(a);let r=a.offsetParent;return br(a)===r&&(r=r.ownerDocument.body),r}function C0(a,n){const r=Pn(a);if(cc(a))return r;if(!yr(a)){let s=xa(a);for(;s&&!Hi(s);){if(xn(s)&&!Bd(s))return s;s=xa(s)}return r}let i=oy(a,n);for(;i&&nS(i)&&Bd(i);)i=oy(i,n);return i&&Hi(i)&&Bd(i)&&!hf(i)?r:i||sS(a)||r}const qS=async function(a){const n=this.getOffsetParent||C0,r=this.getDimensions,i=await r(a.floating);return{reference:GS(a.reference,await n(a.floating),a.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function YS(a){return ar(a).direction==="rtl"}const ZS={convertOffsetParentRelativeRectToViewportRelativeRect:zS,getDocumentElement:br,getClippingRect:VS,getOffsetParent:C0,getElementRects:qS,getClientRects:US,getDimensions:$S,getScale:Fi,isElement:xn,isRTL:YS};function A0(a,n){return a.x===n.x&&a.y===n.y&&a.width===n.width&&a.height===n.height}function KS(a,n){let r=null,i;const s=br(a);function c(){var f;clearTimeout(i),(f=r)==null||f.disconnect(),r=null}function d(f,m){f===void 0&&(f=!1),m===void 0&&(m=1),c();const h=a.getBoundingClientRect(),{left:b,top:w,width:S,height:x}=h;if(f||n(),!S||!x)return;const y=Ll(w),g=Ll(s.clientWidth-(b+S)),E=Ll(s.clientHeight-(w+x)),R=Ll(b),A={rootMargin:-y+"px "+-g+"px "+-E+"px "+-R+"px",threshold:Wa(0,Wi(1,m))||1};let N=!0;function M(z){const F=z[0].intersectionRatio;if(F!==m){if(!N)return d();F?d(!1,F):i=setTimeout(()=>{d(!1,1e-7)},1e3)}F===1&&!A0(h,a.getBoundingClientRect())&&d(),N=!1}try{r=new IntersectionObserver(M,{...A,root:s.ownerDocument})}catch{r=new IntersectionObserver(M,A)}r.observe(a)}return d(!0),c}function XS(a,n,r,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:m=!1}=i,h=vf(a),b=s||c?[...h?ss(h):[],...ss(n)]:[];b.forEach(R=>{s&&R.addEventListener("scroll",r,{passive:!0}),c&&R.addEventListener("resize",r)});const w=h&&f?KS(h,r):null;let S=-1,x=null;d&&(x=new ResizeObserver(R=>{let[O]=R;O&&O.target===h&&x&&(x.unobserve(n),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var A;(A=x)==null||A.observe(n)})),r()}),h&&!m&&x.observe(h),x.observe(n));let y,g=m?Ga(a):null;m&&E();function E(){const R=Ga(a);g&&!A0(g,R)&&r(),g=R,y=requestAnimationFrame(E)}return r(),()=>{var R;b.forEach(O=>{s&&O.removeEventListener("scroll",r),c&&O.removeEventListener("resize",r)}),w?.(),(R=x)==null||R.disconnect(),x=null,m&&cancelAnimationFrame(y)}}const QS=jS,JS=kS,ew=NS,sy=MS,tw=(a,n,r)=>{const i=new Map,s={platform:ZS,...r},c={...s.platform,_c:i};return RS(a,n,{...s,platform:c})};var nw=typeof document<"u",rw=function(){},zl=nw?L.useLayoutEffect:rw;function Zl(a,n){if(a===n)return!0;if(typeof a!=typeof n)return!1;if(typeof a=="function"&&a.toString()===n.toString())return!0;let r,i,s;if(a&&n&&typeof a=="object"){if(Array.isArray(a)){if(r=a.length,r!==n.length)return!1;for(i=r;i--!==0;)if(!Zl(a[i],n[i]))return!1;return!0}if(s=Object.keys(a),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){const c=s[i];if(!(c==="_owner"&&a.$$typeof)&&!Zl(a[c],n[c]))return!1}return!0}return a!==a&&n!==n}function R0(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function ly(a,n){const r=R0(a);return Math.round(n*r)/r}function Pd(a){const n=L.useRef(a);return zl(()=>{n.current=a}),n}function aw(a){a===void 0&&(a={});const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:s,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:m,open:h}=a,[b,w]=L.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[S,x]=L.useState(i);Zl(S,i)||x(i);const[y,g]=L.useState(null),[E,R]=L.useState(null),O=L.useCallback(oe=>{oe!==z.current&&(z.current=oe,g(oe))},[]),A=L.useCallback(oe=>{oe!==F.current&&(F.current=oe,R(oe))},[]),N=c||y,M=d||E,z=L.useRef(null),F=L.useRef(null),B=L.useRef(b),I=m!=null,W=Pd(m),ee=Pd(s),C=Pd(h),J=L.useCallback(()=>{if(!z.current||!F.current)return;const oe={placement:n,strategy:r,middleware:S};ee.current&&(oe.platform=ee.current),tw(z.current,F.current,oe).then(te=>{const U={...te,isPositioned:C.current!==!1};_.current&&!Zl(B.current,U)&&(B.current=U,S0.flushSync(()=>{w(U)}))})},[S,n,r,ee,C]);zl(()=>{h===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,w(oe=>({...oe,isPositioned:!1})))},[h]);const _=L.useRef(!1);zl(()=>(_.current=!0,()=>{_.current=!1}),[]),zl(()=>{if(N&&(z.current=N),M&&(F.current=M),N&&M){if(W.current)return W.current(N,M,J);J()}},[N,M,J,W,I]);const K=L.useMemo(()=>({reference:z,floating:F,setReference:O,setFloating:A}),[O,A]),P=L.useMemo(()=>({reference:N,floating:M}),[N,M]),Y=L.useMemo(()=>{const oe={position:r,left:0,top:0};if(!P.floating)return oe;const te=ly(P.floating,b.x),U=ly(P.floating,b.y);return f?{...oe,transform:"translate("+te+"px, "+U+"px)",...R0(P.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:te,top:U}},[r,f,P.floating,b.x,b.y]);return L.useMemo(()=>({...b,update:J,refs:K,elements:P,floatingStyles:Y}),[b,J,K,P,Y])}const iw=a=>{function n(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:a,fn(r){const{element:i,padding:s}=typeof a=="function"?a(r):a;return i&&n(i)?i.current!=null?sy({element:i.current,padding:s}).fn(r):{}:i?sy({element:i,padding:s}).fn(r):{}}}},ow=(a,n)=>({...QS(a),options:[a,n]}),sw=(a,n)=>({...JS(a),options:[a,n]}),lw=(a,n)=>({...ew(a),options:[a,n]}),cw=(a,n)=>({...iw(a),options:[a,n]}),uw={...u0};let cy=!1,dw=0;const uy=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+dw++;function fw(){const[a,n]=L.useState(()=>cy?uy():void 0);return ef(()=>{a==null&&n(uy())},[]),L.useEffect(()=>{cy=!0},[]),a}const mw=uw.useId,pw=mw||fw;function hw(){const a=new Map;return{emit(n,r){var i;(i=a.get(n))==null||i.forEach(s=>s(r))},on(n,r){a.has(n)||a.set(n,new Set),a.get(n).add(r)},off(n,r){var i;(i=a.get(n))==null||i.delete(r)}}}const gw=L.createContext(null),yw=L.createContext(null),bw=()=>{var a;return((a=L.useContext(gw))==null?void 0:a.id)||null},vw=()=>L.useContext(yw);function xw(a){const{open:n=!1,onOpenChange:r,elements:i}=a,s=pw(),c=L.useRef({}),[d]=L.useState(()=>hw()),f=bw()!=null,[m,h]=L.useState(i.reference),b=AS((x,y,g)=>{c.current.openEvent=x?y:void 0,d.emit("openchange",{open:x,event:y,reason:g,nested:f}),r?.(x,y,g)}),w=L.useMemo(()=>({setPositionReference:h}),[]),S=L.useMemo(()=>({reference:m||i.reference||null,floating:i.floating||null,domReference:i.reference}),[m,i.reference,i.floating]);return L.useMemo(()=>({dataRef:c,open:n,onOpenChange:b,elements:S,events:d,floatingId:s,refs:w}),[n,b,S,d,s,w])}function Sw(a){a===void 0&&(a={});const{nodeId:n}=a,r=xw({...a,elements:{reference:null,floating:null,...a.elements}}),i=a.rootContext||r,s=i.elements,[c,d]=L.useState(null),[f,m]=L.useState(null),b=s?.domReference||c,w=L.useRef(null),S=vw();ef(()=>{b&&(w.current=b)},[b]);const x=aw({...a,elements:{...s,...f&&{reference:f}}}),y=L.useCallback(A=>{const N=xn(A)?{getBoundingClientRect:()=>A.getBoundingClientRect(),getClientRects:()=>A.getClientRects(),contextElement:A}:A;m(N),x.refs.setReference(N)},[x.refs]),g=L.useCallback(A=>{(xn(A)||A===null)&&(w.current=A,d(A)),(xn(x.refs.reference.current)||x.refs.reference.current===null||A!==null&&!xn(A))&&x.refs.setReference(A)},[x.refs]),E=L.useMemo(()=>({...x.refs,setReference:g,setPositionReference:y,domReference:w}),[x.refs,g,y]),R=L.useMemo(()=>({...x.elements,domReference:b}),[x.elements,b]),O=L.useMemo(()=>({...x,...i,refs:E,elements:R,nodeId:n}),[x,E,R,n,i]);return ef(()=>{i.dataRef.current.floatingContext=O;const A=S?.nodesRef.current.find(N=>N.id===n);A&&(A.context=O)}),L.useMemo(()=>({...x,context:O,refs:E,elements:R}),[x,E,R,O])}const M0=L.createContext(Hl);ae.node,zr(ae.objectOf(ae.bool)),ae.bool,ae.bool,ae.bool,ae.bool,ae.bool,ae.bool,ae.bool;function k0(a){return L.useContext(M0).enabled(a)}ae.elementType,ae.node,ae.string;const N0=ne.createContext(void 0);function O0(){return L.useContext(N0)}function D0({align:a,as:n,autoAlign:r,className:i,children:s,defaultOpen:c=!1,...d}){const f=L.useRef(null),[m,h]=L.useState(c),b=Vt(),w=qi(),S=et(`${b}--toggletip`,i,{[`${b}--toggletip--open`]:m,[`${b}--autoalign`]:r}),x={toggle:()=>{h(!m)},close:()=>{h(!1)}},y={buttonProps:{"aria-expanded":m,"aria-controls":w,"aria-describedby":m?w:void 0,onClick:x.toggle},contentProps:{id:w},onClick:{onClick:x.toggle}},g=R=>{if(m&&Ii(R,Xd)){x.close();const O=f.current?.children[0];O instanceof HTMLButtonElement&&O.focus()}},E=R=>{m&&R.relatedTarget===null||R.currentTarget.contains(R.relatedTarget)||x.close()};return $l("blur",()=>{m&&x.close()}),$l("click",({target:R})=>{m&&R instanceof Node&&!f.current?.contains(R)&&x.close()}),ne.createElement(N0.Provider,{value:y},ne.createElement(wf,Nt({align:a,as:n,caret:!0,className:S,dropShadow:!1,highContrast:!0,open:m,onKeyDown:g,onBlur:E,ref:f,autoAlign:r},d),s))}D0.propTypes={align:ae.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),alignmentAxisOffset:ae.number,as:ae.elementType,autoAlign:ae.bool,children:ae.node,className:ae.string,defaultOpen:ae.bool};const dc=ne.forwardRef(function({children:n,className:r,label:i="Show information",as:s,...c},d){const f=O0(),m=Vt(),h=et(`${m}--toggletip-button`,r),b=s??"button";return b!=="button"?ne.createElement(b,Nt({},f?.onClick,{className:h},c),n):ne.createElement("button",Nt({},f?.buttonProps,{"aria-label":i,type:"button",className:h,ref:d},c),n)});dc.propTypes={children:ae.node,className:ae.string,label:ae.string};dc.displayName="ToggletipButton";const Sf=ne.forwardRef(function({children:n,className:r},i){const s=O0(),c=Vt();return ne.createElement(ps,Nt({className:r},s?.contentProps,{ref:i}),ne.createElement("div",{className:`${c}--toggletip-content`},n))});Sf.propTypes={children:ae.node,className:ae.string};Sf.displayName="ToggletipContent";function j0({children:a,className:n}){const r=Vt(),i=et(`${r}--toggletip-actions`,n);return ne.createElement("div",{className:i},a)}j0.propTypes={children:ae.node,className:ae.string};const L0=ne.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),wf=ne.forwardRef(function({isTabTip:n,align:r=n?"bottom-start":"bottom",as:i="span",autoAlign:s=!1,autoAlignBoundary:c,caret:d=!n,className:f,children:m,dropShadow:h=!0,highContrast:b=!1,onRequestClose:w,open:S,alignmentAxisOffset:x,...y},g){const E=Vt(),R=L.useRef(null),O=L.useRef(null),A=L.useRef(null),N=k0("enable-v12-dynamic-floating-styles")||s;let M=sc(r);$l("blur",()=>{S&&w?.()}),$l("click",({target:oe})=>{S&&oe instanceof Node&&!A.current?.contains(oe)&&w?.()});const z=ne.Children.toArray(m).some(oe=>oe?.props?.className?.includes("slug")||oe?.props?.className?.includes("ai-label"))?7:6,F=L.useRef({offset:10,caretHeight:z});y0(()=>{if(d&&A.current){const oe=window.getComputedStyle(A.current,null),te=oe.getPropertyValue("--cds-popover-offset"),U=oe.getPropertyValue("--cds-popover-caret-height");te&&(F.current.offset=te.includes("px")?Number(te.split("px",1)[0])*1:Number(te.split("rem",1)[0])*16),U&&(F.current.caretHeight=U.includes("px")?Number(U.split("px",1)[0])*1:Number(U.split("rem",1)[0])*16)}});const{refs:B,floatingStyles:I,placement:W,middlewareData:ee}=Sw(N?{placement:M,strategy:"fixed",middleware:[ow(n?0:{alignmentAxis:x,mainAxis:F?.current?.offset}),s&&sw({fallbackPlacements:n?M.includes("bottom")?["bottom-start","bottom-end","top-start","top-end"]:["top-start","top-end","bottom-start","bottom-end"]:M.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start",boundary:c}),cw({element:O}),s&&lw()],whileElementsMounted:XS}:{}),C=L.useMemo(()=>({floating:R,setFloating:B.setFloating,caretRef:O,autoAlign:s}),[B.setFloating,s]);n&&(["bottom-start","bottom-end"].includes(M)||(M="bottom-start")),L.useEffect(()=>{if(N){const oe={...I,visibility:ee.hide?.referenceHidden?"hidden":"visible"};if(Object.keys(oe).forEach(te=>{B.floating.current&&(B.floating.current.style[te]=oe[te])}),d&&ee&&ee.arrow&&O?.current){const{x:te,y:U}=ee.arrow,k={top:"bottom",right:"left",bottom:"top",left:"right"}[W.split("-")[0]];O.current.style.left=te!=null?`${te}px`:"",O.current.style.top=U!=null?`${U}px`:"",O.current.style.right="",O.current.style.bottom="",k&&(O.current.style[k]=`${-F?.current?.caretHeight}px`)}}},[I,B.floating,N,ee,W,d]);const J=pf([g,A]),_=s&&W!==M?W:M,K=et({[`${E}--popover-container`]:!0,[`${E}--popover--caret`]:d,[`${E}--popover--drop-shadow`]:h,[`${E}--popover--high-contrast`]:b,[`${E}--popover--open`]:S,[`${E}--popover--auto-align ${E}--autoalign`]:N,[`${E}--popover--${_}`]:!0,[`${E}--popover--tab-tip`]:n},f),P=ne.Children.map(m,oe=>{const te=oe,U=te?.type?.displayName,k=te?.type==="button",$=N&&U&&["ToggletipButton"].includes(U),Z=N&&!["ToggletipContent","PopoverContent"].includes(U);if(ne.isValidElement(te)&&(k||$||Z)){const le=te?.props?.className,q=(te?.props).ref,Ee=et(`${E}--popover--tab-tip__button`,le);return ne.cloneElement(te,{className:n&&te?.type==="button"?Ee:le||"",ref:Fe=>{(N&&te?.type!==ps||N&&te?.type===dc)&&B.setReference(Fe),typeof q=="function"?q(Fe):q!=null&&(q.current=Fe)}})}else return te}),Y=i;return ne.createElement(L0.Provider,{value:C},ne.createElement(Y,Nt({},y,{className:K,ref:J}),N||n?P:m))});wf.propTypes={align:mf(ae.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],sc),as:ae.oneOfType([ae.string,ae.elementType]),autoAlign:ae.bool,autoAlignBoundary:ae.oneOfType([ae.oneOf(["clippingAncestors"]),ae.elementType,ae.arrayOf(ae.elementType),ae.exact({x:ae.number.isRequired,y:ae.number.isRequired,width:ae.number.isRequired,height:ae.number.isRequired})]),caret:ae.bool,children:ae.node,className:ae.string,dropShadow:ae.bool,highContrast:ae.bool,isTabTip:ae.bool,onRequestClose:ae.func,open:ae.bool.isRequired};function ww({className:a,children:n,...r},i){const s=Vt(),{setFloating:c,caretRef:d,autoAlign:f}=ne.useContext(L0),m=pf([c,i]),h=k0("enable-v12-dynamic-floating-styles")||f;return ne.createElement("span",Nt({},r,{className:`${s}--popover`}),ne.createElement("span",{className:et(`${s}--popover-content`,a),ref:m},n,h&&ne.createElement("span",{className:et({[`${s}--popover-caret`]:!0,[`${s}--popover--auto-align`]:!0}),ref:d})),!h&&ne.createElement("span",{className:et({[`${s}--popover-caret`]:!0}),ref:d}))}const ps=ne.forwardRef(ww);ps.displayName="PopoverContent";ps.propTypes={children:ae.node,className:ae.string};function Ew(a){const[n,r]=L.useState(a),i=L.useRef(null),s=L.useCallback((c,d=0)=>{if(window.clearTimeout(i.current??void 0),i.current=null,d===0){r(c);return}i.current=window.setTimeout(()=>{r(c),i.current=null},d)},[]);return L.useEffect(()=>()=>{window.clearTimeout(i.current??void 0)},[]),[n,s]}const dy=new Set(["mouseup","touchend","touchcancel"]),Ef=ne.forwardRef(({as:a,align:n="top",className:r,children:i,label:s,description:c,enterDelayMs:d=100,leaveDelayMs:f=300,defaultOpen:m=!1,closeOnActivation:h=!1,dropShadow:b=!1,highContrast:w=!0,...S},x)=>{L.useRef(null);const[y,g]=Ew(m),[E,R]=L.useState(!1),[O,A]=L.useState(!1),[N,M]=L.useState(!1),z=qi("tooltip"),F=Vt(),B=ne.Children.only(i),{"aria-label":I,"aria-labelledby":W,"aria-describedby":ee}=B?.props??{},C=!!s,J=typeof I=="string"?I.trim()!=="":!1,P={onFocus:()=>!O&&g(!0),onBlur:()=>{g(!1),A(!1)},onClick:()=>h&&g(!1),onMouseEnter:te,onMouseLeave:k,onMouseDown:U,onMouseMove:$,onTouchStart:Z,"aria-labelledby":J?void 0:C?W??z:void 0,"aria-describedby":J?ee:ee??(!C&&!W?z:void 0)};function Y(q){const Ee=Object.keys(P).filter(pe=>pe.startsWith("on")),Fe={};return Ee.forEach(pe=>{Fe[pe]=de=>{P[pe](de),q?.[pe]&&q?.[pe](de)}}),Fe}const oe=L.useCallback(q=>{y&&Ii(q,Xd)&&(q.stopPropagation(),g(!1)),y&&h&&(Ii(q,m0)||Ii(q,Hx))&&g(!1)},[h,y,g]);y0(()=>{if(!y)return;function q(Ee){Ii(Ee,Xd)&&oe(Ee)}return document.addEventListener("keydown",q),()=>{document.removeEventListener("keydown",q)}},[y,oe]);function te(){S?.onMouseEnter||(M(!0),g(!0,d))}function U(){A(!0),Z()}function k(){M(!1),!E&&g(!1,f)}function $(q){q.buttons===1?R(!0):R(!1)}function Z(){R(!0)}const le=L.useCallback(()=>{R(!1),N||g(!1,f)},[N,f,g]);return L.useEffect(()=>(E&&dy.forEach(q=>{document.addEventListener(q,le)}),()=>{dy.forEach(q=>{document.removeEventListener(q,le)})}),[E,le]),ne.createElement(wf,Nt({as:a,ref:x},S,{align:n,className:et(`${F}--tooltip`,r),dropShadow:b,highContrast:w,onKeyDown:oe,onMouseLeave:k,open:y}),ne.createElement("div",{className:`${F}--tooltip-trigger__wrapper`},typeof B<"u"?ne.cloneElement(B,{...P,...Y(B.props)}):null),ne.createElement(ps,{"aria-hidden":y?"false":"true",className:`${F}--tooltip-content`,id:z,onMouseEnter:te,role:"tooltip"},s||c))});Ef.propTypes={align:ae.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),children:ae.node,className:ae.string,closeOnActivation:ae.bool,defaultOpen:ae.bool,description:ae.node,dropShadow:ae.bool,enterDelayMs:ae.number,highContrast:ae.bool,label:ae.node,leaveDelayMs:ae.number};const _w=ne.forwardRef(function({as:n,children:r,className:i,dangerDescription:s="danger",disabled:c=!1,hasIconOnly:d=!1,href:f,iconDescription:m,isExpressive:h=!1,isSelected:b,kind:w="primary",onBlur:S,onClick:x,onFocus:y,onMouseEnter:g,onMouseLeave:E,renderIcon:R,size:O,tabIndex:A,type:N="button",...M},z){const F=Vt(),B=et(i,{[`${F}--btn`]:!0,[`${F}--btn--sm`]:O==="sm"&&!h,[`${F}--btn--md`]:O==="md"&&!h,[`${F}--btn--lg`]:O==="lg"&&!h,[`${F}--btn--xl`]:O==="xl",[`${F}--btn--2xl`]:O==="2xl",[`${F}--layout--size-${O}`]:O,[`${F}--btn--${w}`]:w,[`${F}--btn--disabled`]:c,[`${F}--btn--expressive`]:h,[`${F}--btn--icon-only`]:d,[`${F}--btn--selected`]:d&&b&&w==="ghost"}),I={tabIndex:A,className:B,ref:z},W=R?ne.createElement(R,{"aria-label":m,className:`${F}--btn__icon`,"aria-hidden":"true"}):null,ee=["danger","danger--tertiary","danger--ghost"];let C="button";const J=qi("danger-description"),{"aria-pressed":_,"aria-describedby":K}=M;let P={disabled:c,type:N,"aria-describedby":ee.includes(w)?J:K||void 0,"aria-pressed":_??(d&&w==="ghost"?b:void 0)};const Y={href:f};let oe=null;return ee.includes(w)&&(oe=ne.createElement("span",{id:J,className:`${F}--visually-hidden`},s)),n?(C=n,P={...P,...Y}):f&&!c&&(C="a",P=Y),ne.createElement(C,{onMouseEnter:g,onMouseLeave:E,onFocus:y,onBlur:S,onClick:x,...M,...I,...P},oe,r,W)}),I0=ne.forwardRef(function({className:n,count:r,...i},s){const c=Vt(),d=et(`${c}--badge-indicator`,n,{[`${c}--badge-indicator--count`]:r}),f=r&&r>999?"999+":r;return ne.createElement("div",Nt({className:d,ref:s},i),f)});I0.propTypes={className:ae.string,count:ae.number,id:ae.string};const Tw=["primary","secondary","ghost","tertiary"],z0=ne.forwardRef(function({align:n,autoAlign:r=!1,badgeCount:i,children:s,className:c,closeOnActivation:d=!0,defaultOpen:f=!1,disabled:m,dropShadow:h=!1,enterDelayMs:b=100,highContrast:w=!0,kind:S,label:x,leaveDelayMs:y=100,wrapperClasses:g,size:E,isSelected:R,...O},A){const N=Vt(),M=et(g,`${N}--icon-tooltip`,{[`${N}--icon-tooltip--disabled`]:m});i&&(S!=="ghost"||E!=="lg")&&console.warn("The prop BadgeCount must be used with hasIconOnly=true, kind='ghost' and size='lg'");const z=qi("badge-indicator");return ne.createElement(Ef,{align:n,autoAlign:r,closeOnActivation:d,className:M,defaultOpen:f,dropShadow:h,enterDelayMs:b,highContrast:w,label:x,leaveDelayMs:y},ne.createElement(_w,Nt({},O,{disabled:m,kind:S,ref:A,size:E,isSelected:R,hasIconOnly:!0,className:c,"aria-describedby":O["aria-describedby"]||i&&z}),s,!m&&i!==void 0&&ne.createElement(I0,{id:z,count:i>0?i:void 0})))});z0.propTypes={align:mf(ae.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],sc),autoAlign:ae.bool,badgeCount:ae.number,href:ae.string,children:ae.node,className:ae.string,closeOnActivation:ae.bool,defaultOpen:ae.bool,dropShadow:ae.bool,disabled:ae.bool,enterDelayMs:ae.number,isSelected:ae.bool,highContrast:ae.bool,kind:ae.oneOf(Tw),label:ae.node.isRequired,leaveDelayMs:ae.number,rel:ae.string,size:ae.oneOf(["sm","md","lg"]),target:ae.string,wrapperClasses:ae.string};var fy;const U0=ne.forwardRef(function({className:n,children:r,...i},s){const c=Vt(),d=ne.Children.toArray(r).some(m=>{m.type}),f=et(n,{[`${c}--ai-label-content`]:!0,[`${c}--ai-label-content--with-actions`]:d});return ne.createElement(Sf,{className:f},r)});U0.displayName="AILabelContent";U0.propTypes={children:ae.node,className:ae.string};const _f=ne.forwardRef(function({className:n,children:r,...i},s){const c=Vt(),d=et(n,{[`${c}--ai-label-actions`]:!0});return ne.createElement(j0,{className:d},r)});_f.displayName="AILabelActions";_f.propTypes={children:ae.node,className:ae.string};const fc=ne.forwardRef(function({aiText:n="AI",aiTextLabel:r,textLabel:i,align:s,autoAlign:c=!0,children:d,className:f,kind:m="default",onRevertClick:h,revertActive:b,revertLabel:w="Revert to AI input",slugLabel:S="Show information",["aria-label"]:x="Show information",size:y="xs",...g},E){const R=Vt(),O=qi("AILabel"),A=et(f,{[`${R}--ai-label`]:!0,[`${R}--ai-label--revert`]:b}),N=et({[`${R}--ai-label__button`]:!0,[`${R}--ai-label__button--${y}`]:y,[`${R}--ai-label__button--${m}`]:m,[`${R}--ai-label__button--inline-with-content`]:m==="inline"&&(r||i)}),M=B=>{h&&h(B)},z=!r&&!i?`${n} ${S||x}`:`${n} ${r||i}`,F=["xs","2xs","mini"].includes(y);return ne.createElement("div",{className:A,ref:E,id:O},b?ne.createElement(z0,Nt({onClick:M,kind:"ghost",size:"sm",label:w},g),fy||(fy=ne.createElement(Bx,null))):ne.createElement(D0,Nt({align:s,autoAlign:c,alignmentAxisOffset:F?-24:0},g),ne.createElement(dc,{className:N,label:m==="inline"?"":z},ne.createElement("span",{className:`${R}--ai-label__text`},n),m==="inline"&&(r||i)&&ne.createElement("span",{className:`${R}--ai-label__additional-text`},r||i)),d))});fc.displayName="AILabel";fc.propTypes={AILabelContent:ae.node,aiText:ae.string,aiTextLabel:zr(ae.string),align:mf(ae.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],sc),"aria-label":ae.string,autoAlign:ae.bool,children:ae.node,className:ae.string,kind:ae.oneOf(["default","inline"]),onRevertClick:ae.func,revertActive:ae.bool,revertLabel:ae.string,size:ae.oneOf(["mini","2xs","xs","sm","md","lg","xl"]),slugLabel:zr(ae.string),textLabel:ae.string};const B0=(a,n)=>L.isValidElement(a)&&a.type===n,Cw=a=>(n,...r)=>{for(const i of a){if(n.defaultPrevented)break;typeof i=="function"&&i(n,...r)}};function Aw(a,n,{signal:r,edges:i}={}){let s,c=null;const d=i!=null&&i.includes("leading"),f=i==null||i.includes("trailing"),m=()=>{c!==null&&(a.apply(s,c),s=void 0,c=null)},h=()=>{f&&m(),x()};let b=null;const w=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,h()},n)},S=()=>{b!==null&&(clearTimeout(b),b=null)},x=()=>{S(),s=void 0,c=null},y=()=>{S(),m()},g=function(...E){if(r?.aborted)return;s=this,c=E;const R=b==null;w(),d&&R&&m()};return g.schedule=w,g.cancel=x,g.flush=y,r?.addEventListener("abort",x,{once:!0}),g}function Rw(a,n=0,r={}){typeof r!="object"&&(r={});const{signal:i,leading:s=!1,trailing:c=!0,maxWait:d}=r,f=Array(2);s&&(f[0]="leading"),c&&(f[1]="trailing");let m,h=null;const b=Aw(function(...x){m=a.apply(this,x),h=null},n,{signal:i,edges:f}),w=function(...x){if(d!=null){if(h===null)h=Date.now();else if(Date.now()-h>=d)return m=a.apply(this,x),h=Date.now(),b.cancel(),b.schedule(),m}return b.apply(this,x),m},S=()=>(b.flush(),m);return w.cancel=b.cancel,w.flush=S,w}const P0=L.createContext({isFluid:!1}),Mw=({defaultValue:a,name:n="custom",onChange:r,value:i})=>{const[s,c]=L.useState(typeof i<"u"?i:a),d=L.useRef(null);d.current===null&&(d.current=typeof i<"u");const f=m=>{const h=typeof m=="function"?m(s):m;d.current===!1&&c(h),r&&r(h)};return L.useEffect(()=>{const m=typeof i<"u";d.current,d.current},[n,i]),d.current===!0?[i,f,d.current]:[s,f,d.current]},kw=ne.createContext(1),Nw=(a,n,r)=>Math.min(r,Math.max(n,a));function F0({active:a=!0,className:n,withOverlay:r=!0,small:i=!1,description:s="loading",...c}){const d=Vt(),f=et(n,{[`${d}--loading`]:!0,[`${d}--loading--small`]:i,[`${d}--loading--stop`]:!a}),m=et({[`${d}--loading-overlay`]:!0,[`${d}--loading-overlay--stop`]:!a}),h=ne.createElement("div",Nt({},c,{"aria-atomic":"true","aria-live":a?"assertive":"off",className:f}),ne.createElement("svg",{className:`${d}--loading__svg`,viewBox:"0 0 100 100"},ne.createElement("title",null,s),i?ne.createElement("circle",{className:`${d}--loading__background`,cx:"50%",cy:"50%",r:"42"}):null,ne.createElement("circle",{className:`${d}--loading__stroke`,cx:"50%",cy:"50%",r:i?"42":"44"})));return r?ne.createElement("div",{className:m},h):h}F0.propTypes={active:ae.bool,className:ae.string,description:ae.string,id:zr(ae.string),small:ae.bool,withOverlay:ae.bool};const H0=({className:a,status:n="active",iconDescription:r,description:i,onSuccess:s,successDelay:c=1500,...d})=>{const f=Vt(),m=et(`${f}--inline-loading`,a),h=L.useRef(null);L.useEffect(()=>(n==="finished"&&(h.current=setTimeout(()=>{s&&s()},c)),()=>{h.current&&(clearTimeout(h.current),h.current=null)}),[n,s,c]);const b=()=>{let y=r||n;if(n==="error")return ne.createElement(Ux,{className:`${f}--inline-loading--error`},ne.createElement("title",null,y));if(n==="finished")return ne.createElement(Ix,{className:`${f}--inline-loading__checkmark-container`},ne.createElement("title",null,y));if(n==="active")return r||(y="loading"),ne.createElement(F0,{small:!0,description:y,withOverlay:!1,active:n==="active"});if(n==="inactive")return r||(y="not loading"),ne.createElement("title",{className:`${f}--inline-loading__inactive-status`},y)},w=i&&ne.createElement("div",{className:`${f}--inline-loading__text`},i),S=b(),x=S&&ne.createElement("div",{className:`${f}--inline-loading__animation`},S);return ne.createElement("div",Nt({className:m},d,{"aria-live":d["aria-live"]??"assertive"}),x,w)};H0.propTypes={className:ae.string,description:ae.node,iconDescription:ae.string,onSuccess:ae.func,status:ae.oneOf(["inactive","active","finished","error"]),successDelay:ae.number};const Ow=({id:a,readOnly:n,disabled:r,invalid:i,invalidText:s,warn:c,warnText:d})=>{const f=Vt(),m={disabled:!n&&r,invalid:!n&&i,invalidId:`${a}-error-msg`,warn:!n&&!i&&c,warnId:`${a}-warn-msg`,validation:null,icon:null,helperId:`${a}-helper-text`};return m.invalid?(m.icon=Vl,m.validation=ne.createElement(pn,{as:"div",className:`${f}--form-requirement`,id:m.invalidId},s)):m.warn&&(m.icon=Wl,m.validation=ne.createElement(pn,{as:"div",className:`${f}--form-requirement`,id:m.warnId},d)),m},Ir=ne.forwardRef(function({className:n,decorator:r,id:i,inline:s=!1,labelText:c="Select",disabled:d=!1,children:f,noLabel:m=!1,hideLabel:h=!1,invalid:b=!1,invalidText:w="",helperText:S="",light:x=!1,readOnly:y,size:g,warn:E=!1,warnText:R,onChange:O,slug:A,...N},M){const z=Vt(),{isFluid:F}=L.useContext(P0),[B,I]=L.useState(!1),W=qi(),ee=ne.Children.toArray(f).filter(Ae=>ne.isValidElement(Ae)),J=ee.find(Ae=>Ae.props?.value===N?.defaultValue)?.props?.text||ee[0]?.props?.text||"",[_,K]=L.useState(J),P=et({[`${z}--select`]:!0,[`${z}--select--inline`]:s,[`${z}--select--light`]:x,[`${z}--select--invalid`]:b,[`${z}--select--disabled`]:d,[`${z}--select--readonly`]:y,[`${z}--select--warning`]:E,[`${z}--select--fluid--invalid`]:F&&b,[`${z}--select--fluid--focus`]:F&&B,[`${z}--select--slug`]:A,[`${z}--select--decorator`]:r}),Y=et(`${z}--label`,{[`${z}--visually-hidden`]:h,[`${z}--label--disabled`]:d}),oe=et({[`${z}--select-input`]:!0,[`${z}--select-input--${g}`]:g}),te=`${i}-error-msg`,U=(()=>{if(b)return w;if(E)return R})(),k=b||E?ne.createElement(pn,{as:"div",className:`${z}--form-requirement`,id:te},U):null,$=et(`${z}--form__helper-text`,{[`${z}--form__helper-text--disabled`]:d}),Z=S?`select-helper-text-${W}`:void 0,le=S?ne.createElement(pn,{as:"div",id:Z,className:$},S):null,q={};b?q["aria-describedby"]=te:!s&&!F&&(q["aria-describedby"]=le?Z:void 0);const Ee=Ae=>{I(Ae.type==="focus")},Fe=Ae=>{const T=Ae?.target?.options[Ae.target.selectedIndex];K(T?.text)},pe={onMouseDown:Ae=>{y&&(Ae.preventDefault(),Ae.target.focus())},onKeyDown:Ae=>{y&&["ArrowDown","ArrowUp"," "].includes(Ae.key)&&Ae.preventDefault()}},de=A??r,me=B0(de,fc)?L.cloneElement(de,{size:"mini"}):null,_e=ne.createElement(ne.Fragment,null,ne.createElement("select",Nt({},N,q,{id:i,className:oe,disabled:d||void 0,"aria-invalid":b||void 0,"aria-readonly":y||void 0,title:_,onChange:Cw([O,Fe])},pe,{ref:M}),f),ne.createElement(zx,{className:`${z}--select__arrow`}),b&&ne.createElement(Vl,{className:`${z}--select__invalid-icon`}),!b&&E&&ne.createElement(Wl,{className:`${z}--select__invalid-icon ${z}--select__invalid-icon--warning`}));return ne.createElement("div",{className:et(`${z}--form-item`,n)},ne.createElement("div",{className:P},!m&&ne.createElement(pn,{as:"label",htmlFor:i,className:Y},c),s&&ne.createElement("div",{className:`${z}--select-input--inline__wrapper`},ne.createElement("div",{className:`${z}--select-input__wrapper`,"data-invalid":b||null},_e),k),!s&&ne.createElement("div",{className:`${z}--select-input__wrapper`,"data-invalid":b||null,onFocus:Ee,onBlur:Ee},_e,A?me:r?ne.createElement("div",{className:`${z}--select__inner-wrapper--decorator`},me):"",F&&ne.createElement("hr",{className:`${z}--select__divider`}),F&&k?k:null),!s&&!F&&k?k:le))});Ir.displayName="Select";Ir.propTypes={children:ae.node,className:ae.string,decorator:ae.node,defaultValue:ae.any,disabled:ae.bool,helperText:ae.node,hideLabel:ae.bool,id:ae.string.isRequired,inline:ae.bool,invalid:ae.bool,invalidText:ae.node,labelText:ae.node,light:zr(ae.bool),noLabel:ae.bool,onChange:ae.func,readOnly:ae.bool,size:ae.oneOf(["sm","md","lg"]),slug:zr(ae.node),warn:ae.bool,warnText:ae.node};const Kt=({className:a,value:n="",disabled:r=!1,hidden:i=!1,text:s="",...c})=>{const d=Vt(),f=et({[`${d}--select-option`]:!0,...a&&{[a]:a}});return ne.createElement("option",Nt({},c,{className:f,value:n,disabled:r,hidden:i}),s)};Kt.propTypes={className:ae.string,disabled:ae.bool,hidden:ae.bool,text:ae.string.isRequired,value:ae.any.isRequired};const Dw=a=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":a}),jw=a=>({"aria-describedby":a}),Lw=a=>({"aria-describedby":a}),Iw=({sharedTextInputProps:a,invalid:n,invalidId:r,warn:i,warnId:s,hasHelper:c,helperId:d})=>({...a,...n?Dw(r):{},...i?jw(s):{},...c?Lw(d):{}});var my,py,hy,gy,yy,by,vy,xy,Sy,wy,Ey,_y,Ty,Cy;const Ay=a=>ne.createElement(Gi.Consumer,null,n=>ne.createElement("svg",Nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 24",className:`${n}--slider__thumb-icon ${n}--slider__thumb-icon--lower`},a),my||(my=ne.createElement("path",{d:"M15.08 6.46H16v11.08h-.92zM4.46 17.54c-.25 0-.46-.21-.46-.46V6.92a.465.465 0 0 1 .69-.4l8.77 5.08a.46.46 0 0 1 0 .8l-8.77 5.08c-.07.04-.15.06-.23.06Z"})),py||(py=ne.createElement("path",{fill:"none",d:"M-4 0h24v24H-4z"})))),Ry=a=>ne.createElement(Gi.Consumer,null,n=>ne.createElement("svg",Nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 24",className:`${n}--slider__thumb-icon ${n}--slider__thumb-icon--lower ${n}--slider__thumb-icon--focus`},a),hy||(hy=ne.createElement("path",{d:"M15.08 6.46H16v11.08h-.92zM4.46 17.54c-.25 0-.46-.21-.46-.46V6.92a.465.465 0 0 1 .69-.4l8.77 5.08a.46.46 0 0 1 0 .8l-8.77 5.08c-.07.04-.15.06-.23.06Z"})),gy||(gy=ne.createElement("path",{fill:"none",d:"M-4 0h24v24H-4z"})),yy||(yy=ne.createElement("path",{d:"M15.08 0H16v6.46h-.92z"})),by||(by=ne.createElement("path",{d:"M0 0h.92v24H0zM15.08 0H16v24h-.92z"})),vy||(vy=ne.createElement("path",{d:"M0 .92V0h16v.92zM0 24v-.92h16V24z"})))),My=a=>ne.createElement(Gi.Consumer,null,n=>ne.createElement("svg",Nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 24",className:`${n}--slider__thumb-icon ${n}--slider__thumb-icon--upper`},a),xy||(xy=ne.createElement("path",{d:"M0 6.46h.92v11.08H0zM11.54 6.46c.25 0 .46.21.46.46v10.15a.465.465 0 0 1-.69.4L2.54 12.4a.46.46 0 0 1 0-.8l8.77-5.08c.07-.04.15-.06.23-.06Z"})),Sy||(Sy=ne.createElement("path",{fill:"none",d:"M-4 0h24v24H-4z"})))),ky=a=>ne.createElement(Gi.Consumer,null,n=>ne.createElement("svg",Nt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 24",className:`${n}--slider__thumb-icon ${n}--slider__thumb-icon--upper ${n}--slider__thumb-icon--focus`},a),wy||(wy=ne.createElement("path",{d:"M0 6.46h.92v11.08H0zM11.54 6.46c.25 0 .46.21.46.46v10.15a.465.465 0 0 1-.69.4L2.54 12.4a.46.46 0 0 1 0-.8l8.77-5.08c.07-.04.15-.06.23-.06Z"})),Ey||(Ey=ne.createElement("path",{fill:"none",d:"M-4 0h24v24H-4z"})),_y||(_y=ne.createElement("path",{d:"M.92 24H0v-6.46h.92z"})),Ty||(Ty=ne.createElement("path",{d:"M16 24h-.92V0H16zM.92 24H0V0h.92z"})),Cy||(Cy=ne.createElement("path",{d:"M16 23.08V24H0v-.92zM16 0v.92H0V0z"}))));function zw(a,n=0,r={}){typeof r!="object"&&(r={});const{leading:i=!0,trailing:s=!0,signal:c}=r;return Rw(a,n,{leading:i,trailing:s,signal:c,maxWait:n})}const Ny=({hasTooltip:a,className:n,style:r,children:i,...s})=>a?ne.createElement(Ef,Nt({className:n,style:r},s),i):ne.createElement("div",{className:n,style:r},i),W0={autoCorrectAnnouncement:"carbon.slider.auto-correct-announcement"};function Uw(a,n){if(n?.correctedValue){const{correctedValue:r}=n;return`The inputted value "${r}" was corrected to the nearest allowed digit.`}return""}const Bw=(a,n)=>`${a}${n??""}`,Pw=16,Oy=new Set(["mousemove","touchmove"]),Dy=new Set(["mouseup","touchend","touchcancel"]);var jt=function(a){return a.LOWER="lower",a.UPPER="upper",a}(jt||{});let mc=class extends L.PureComponent{constructor(n){super(n),St(this,"state",{value:this.props.value,valueUpper:this.props.unstable_valueUpper,left:0,leftUpper:0,needsOnRelease:!1,isValid:!0,isValidUpper:!0,activeHandle:void 0,correctedValue:null,correctedPosition:null,isRtl:!1}),St(this,"thumbRef",void 0),St(this,"thumbRefUpper",void 0),St(this,"filledTrackRef",void 0),St(this,"element",null),St(this,"inputId",""),St(this,"track",void 0),St(this,"handleDrag",r=>{(r instanceof globalThis.MouseEvent||r instanceof globalThis.TouchEvent)&&this.onDrag(r)}),St(this,"onDragStart",r=>{if(this.props.disabled||this.props.readOnly)return;r.preventDefault(),Dy.forEach(d=>{this.element?.ownerDocument.addEventListener(d,this.onDragStop)}),Oy.forEach(d=>{this.element?.ownerDocument.addEventListener(d,this.handleDrag)});const i=this.getClientXFromEvent(r.nativeEvent);let s;if(this.hasTwoHandles()){if(r.target==this.thumbRef.current)s=jt.LOWER;else if(r.target==this.thumbRefUpper.current)s=jt.UPPER;else if(i){const d=this.calcDistanceToHandle(jt.LOWER,i),f=this.calcDistanceToHandle(jt.UPPER,i);d<=f?s=jt.LOWER:s=jt.UPPER}}const c={preventScroll:!0};this.hasTwoHandles()?this.thumbRef.current&&s===jt.LOWER?this.thumbRef.current.focus(c):this.thumbRefUpper.current&&s===jt.UPPER&&this.thumbRefUpper.current.focus(c):this.thumbRef.current&&this.thumbRef.current.focus(c),this.setState({activeHandle:s}),this.onDrag(r.nativeEvent,s)}),St(this,"onDragStop",()=>{this.props.disabled||this.props.readOnly||(Dy.forEach(r=>{this.element?.ownerDocument.removeEventListener(r,this.onDragStop)}),Oy.forEach(r=>{this.element?.ownerDocument.removeEventListener(r,this.handleDrag)}),this.setState({needsOnRelease:!0,isValid:!0,isValidUpper:!0}))}),St(this,"_onDrag",(r,i)=>{if(i=i??this.state.activeHandle,this.props.disabled||this.props.readOnly||!r)return;const s=this.getClientXFromEvent(r),{value:c,left:d}=this.calcValue({clientX:s,value:this.state.value});this.hasTwoHandles()&&i?this.setValueLeftForHandle(i,{value:this.nearestStepValue(c),left:d}):this.setState({value:this.nearestStepValue(c),left:d,isValid:!0}),this.setState({correctedValue:null,correctedPosition:null})}),St(this,"onDrag",zw(this._onDrag,Pw,{leading:!0,trailing:!1})),St(this,"onKeyDown",r=>{if(this.props.disabled||this.props.readOnly)return;const{step:i=1,stepMultiplier:s=4}=this.props;let c=0;if(Ld(r,[Gx,Wx]))c=-i;else if(Ld(r,[Vx,$x]))c=i;else return;if(r.shiftKey&&(c*=s),this.hasTwoHandles()&&this.state.activeHandle){const d=this.state.activeHandle===jt.LOWER?this.state.value:this.state.valueUpper,{value:f,left:m}=this.calcValue({value:this.calcValueForDelta(d??this.props.min,c,this.props.step)});this.setValueLeftForHandle(this.state.activeHandle,{value:this.nearestStepValue(f),left:m})}else{const{value:d,left:f}=this.calcValue({value:this.calcValueForDelta(this.state.value,c,this.props.step)});this.setState({value:this.nearestStepValue(d),left:f,isValid:!0})}this.setState({correctedValue:null,correctedPosition:null})}),St(this,"onChange",r=>{if(this.props.disabled||this.props.readOnly||!r||!("target"in r)||typeof r.target.value!="string")return;const i=r.target.dataset.handlePosition??jt.LOWER,s=Number.parseFloat(r.target.value);this.hasTwoHandles()?isNaN(s)?this.setValueForHandle(i,r.target.value):this.isValidValueForPosition({handle:i,value:s,min:this.props.min,max:this.props.max})?this.processNewInputValue(r.target):this.setValueForHandle(i,s):isNaN(s)?this.setState({value:r.target.value}):this.isValidValue({value:s,min:this.props.min,max:this.props.max})?this.processNewInputValue(r.target):this.setState({value:s})}),St(this,"onBlur",r=>{if(!r||!("target"in r)||typeof r.target.value!="string")return;const{value:i}=r.target;this.processNewInputValue(r.target),this.props.onBlur?.({value:i,handlePosition:r.target.dataset.handlePosition})}),St(this,"onInputKeyDown",r=>{this.props.disabled||this.props.readOnly||!(r.target instanceof HTMLInputElement)||!r||!("target"in r)||typeof r.target.value!="string"||Ld(r,[m0])&&this.processNewInputValue(r.target)}),St(this,"processNewInputValue",r=>{this.setState({correctedValue:null,correctedPosition:null});const i=Number.parseFloat(r.value),s=!isNaN(i),c=r.dataset.handlePosition;if(c===jt.LOWER?this.setState({isValid:s}):c===jt.UPPER&&this.setState({isValidUpper:s}),this.setState({isValid:s}),s){const d=c?this.getAdjustedValueForPosition({handle:c,value:i,min:this.props.min,max:this.props.max}):this.getAdjustedValue({value:i,min:this.props.min,max:this.props.max});d!==i?this.setState({correctedValue:i.toString(),correctedPosition:c}):this.setState({correctedValue:null,correctedPosition:null});const{value:f,left:m}=this.calcValue({value:d,useRawValue:!0});c?this.setValueLeftForHandle(c,{value:this.nearestStepValue(f),left:m}):this.setState({value:f,left:m})}}),St(this,"calcLeftPercent",({clientX:r,value:i,range:s})=>{const c=this.element?.getBoundingClientRect?.();let d=c?c.right-c.left:0;return d<=0&&(d=1),r?(this.state.isRtl?(c?.right??0)-r:r-(c?.left??0))/d:i!==null&&typeof i<"u"&&s?s===0?0:(i-this.props.min)/s:0}),St(this,"calcDiscreteValueAndPercent",({leftPercent:r})=>{const{step:i=1,min:s,max:c}=this.props,d=Math.floor((c-s)/i)+((c-s)%i===0?1:2),f=Math.round(r*(d-1)),m=f===d-1?c:s+i*f,h=f/(d-1);return{discreteValue:m,discretePercent:h}}),St(this,"calcValue",({clientX:r,value:i,useRawValue:s})=>{const c=this.props.max-this.props.min,d=this.calcLeftPercent({clientX:r,value:i,range:c}),f=Nw(d,0,1);if(s)return{value:i,left:f*100};const{discreteValue:m,discretePercent:h}=this.calcDiscreteValueAndPercent({leftPercent:f});return{value:m,left:h*100}}),St(this,"calcDistanceToHandle",(r,i)=>{const s=this.getHandleBoundingRect(r),c=s.left+s.width/2;return Math.abs(c-i)}),St(this,"calcValueForDelta",(r,i,s=1)=>{const d=(i>0?Math.floor(r/s)*s:r)+i,f=(s.toString().split(".")[1]||"").length;return Number(d.toFixed(f))}),St(this,"setValueLeftForHandle",(r,{value:i,left:s})=>{const{value:c,valueUpper:d,left:f,leftUpper:m}=this.state;r===jt.LOWER?this.setState({value:d&&i>d?d:i,left:d&&i>d?m:s,isValid:!0}):this.setState({valueUpper:c&&i<c?c:i,leftUpper:c&&i<c?f:s,isValidUpper:!0})}),St(this,"setValueForHandle",(r,i)=>{r===jt.LOWER?this.setState({value:i,isValid:!0}):this.setState({valueUpper:i,isValidUpper:!0})}),St(this,"isValidValueForPosition",({handle:r,value:i,min:s,max:c})=>{const{value:d,valueUpper:f}=this.state;return this.isValidValue({value:i,min:s,max:c})?r===jt.LOWER?!f||i<=f:r===jt.UPPER?!d||i>=d:!1:!1}),St(this,"isValidValue",({value:r,min:i,max:s})=>!(r<i||r>s)),St(this,"getAdjustedValueForPosition",({handle:r,value:i,min:s,max:c})=>{const{value:d,valueUpper:f}=this.state;return i=this.getAdjustedValue({value:i,min:s,max:c}),r===jt.LOWER&&f?i=i>f?f:i:r===jt.UPPER&&d&&(i=i<d?d:i),i}),St(this,"getAdjustedValue",({value:r,min:i,max:s})=>(r<i&&(r=i),r>s&&(r=s),r)),St(this,"getHandleBoundingRect",r=>{let i;return r===jt.LOWER?i=this.thumbRef.current?.getBoundingClientRect():i=this.thumbRefUpper.current?.getBoundingClientRect(),i??new DOMRect}),this.thumbRef=L.createRef(),this.thumbRefUpper=L.createRef(),this.filledTrackRef=L.createRef()}componentDidMount(){if(this.element){const n=document?.dir==="rtl";if(this.hasTwoHandles()){const{value:r,left:i}=this.calcValue({value:this.state.value,useRawValue:!0}),{value:s,left:c}=this.calcValue({value:this.state.valueUpper,useRawValue:!0});this.setState({isRtl:n,value:r,left:i,valueUpper:s,leftUpper:c}),this.filledTrackRef.current&&(this.filledTrackRef.current.style.transform=this.state.isRtl?`translate(${100-this.state.leftUpper}%, -50%) scaleX(${(this.state.leftUpper-this.state.left)/100})`:`translate(${this.state.left}%, -50%) scaleX(${(this.state.leftUpper-this.state.left)/100})`)}else{const{value:r,left:i}=this.calcValue({value:this.state.value,useRawValue:!0});this.setState({isRtl:n,value:r,left:i}),this.filledTrackRef.current&&(this.filledTrackRef.current.style.transform=this.state.isRtl?`translate(100%, -50%) scaleX(-${this.state.left/100})`:`translate(0%, -50%) scaleX(${this.state.left/100})`)}}}componentDidUpdate(n,r){if(this.hasTwoHandles()?this.filledTrackRef.current&&(this.filledTrackRef.current.style.transform=this.state.isRtl?`translate(${100-this.state.leftUpper}%, -50%) scaleX(${(this.state.leftUpper-this.state.left)/100})`:`translate(${this.state.left}%, -50%) scaleX(${(this.state.leftUpper-this.state.left)/100})`):this.filledTrackRef.current&&(this.filledTrackRef.current.style.transform=this.state.isRtl?`translate(100%, -50%) scaleX(-${this.state.left/100})`:`translate(0%, -50%) scaleX(${this.state.left/100})`),(r.value!==this.state.value||r.valueUpper!==this.state.valueUpper)&&typeof this.props.onChange=="function"&&this.props.onChange({value:this.state.value,valueUpper:this.state.valueUpper}),this.state.needsOnRelease&&typeof this.props.onRelease=="function"&&(this.props.onRelease({value:this.state.value,valueUpper:this.state.valueUpper}),this.setState({needsOnRelease:!1})),!(n.value===this.props.value&&n.unstable_valueUpper===this.props.unstable_valueUpper&&n.max===this.props.max&&n.min===this.props.min))if(this.setState(this.calcValue({value:this.props.value,useRawValue:!0})),typeof this.props.unstable_valueUpper<"u"){const{value:i,left:s}=this.calcValue({value:this.props.unstable_valueUpper,useRawValue:!0});this.setState({valueUpper:i,leftUpper:s})}else this.setState({valueUpper:void 0,leftUpper:void 0})}nearestStepValue(n=0){const r=(this.props.step?.toString().split(".")[1]||"").length;return Number(n.toFixed(r))}getClientXFromEvent(n){let r;return"clientX"in n?r=n.clientX:"touches"in n&&0 in n.touches&&"clientX"in n.touches[0]&&(r=n.touches[0].clientX),r}hasTwoHandles(){return typeof this.state.valueUpper<"u"}static getDerivedStateFromProps(n,r){const{isValid:i,isValidUpper:s}=r,c={};return n.invalid===!0?(i===!0&&(c.isValid=!1),s===!0&&(c.isValidUpper=!1)):n.invalid===!1&&(i===!1&&(c.isValid=!0),s===!1&&(c.isValidUpper=!0)),Object.keys(c).length?c:null}render(){var n,r,i,s;const{ariaLabelInput:c,unstable_ariaLabelInputUpper:d,className:f,hideTextInput:m=!1,id:h=this.inputId=this.inputId||`__carbon-slider_${Math.random().toString(36).substr(2)}`,min:b,minLabel:w,max:S,maxLabel:x,formatLabel:y=Bw,labelText:g,hideLabel:E,step:R=1,stepMultiplier:O,inputType:A="number",invalidText:N,required:M,disabled:z=!1,name:F,unstable_nameUpper:B,light:I,readOnly:W=!1,warn:ee,warnText:C,translateWithId:J=Uw,..._}=this.props,K=this.hasTwoHandles();delete _.onRelease,delete _.invalid,delete _.unstable_valueUpper;const{value:P,valueUpper:Y,isValid:oe,isValidUpper:te,correctedValue:U,correctedPosition:k,isRtl:$}=this.state,Z=!W&&ee||typeof U!==null&&k===jt.LOWER&&oe,le=!W&&ee||typeof U!==null&&k===(K?jt.UPPER:jt.LOWER)&&(K?te:oe);return ne.createElement(Gi.Consumer,null,q=>{const Ee=`${h}-label`,Fe=et(`${q}--label`,{[`${q}--visually-hidden`]:E,[`${q}--label--disabled`]:z}),pe=et(`${q}--slider-container`,{[`${q}--slider-container--two-handles`]:K,[`${q}--slider-container--disabled`]:z,[`${q}--slider-container--readonly`]:W,[`${q}--slider-container--rtl`]:$}),de=et(`${q}--slider`,{[`${q}--slider--disabled`]:z,[`${q}--slider--readonly`]:W}),Re=[`${q}--text-input`,`${q}--slider-text-input`],me={[`${q}--text-input--light`]:I},_e=et([...Re,`${q}--slider-text-input--lower`,me,{[`${q}--text-input--invalid`]:!W&&!oe,[`${q}--slider-text-input--warn`]:Z}]),Ae=et([...Re,`${q}--slider-text-input--upper`,me,{[`${q}--text-input--invalid`]:!W&&(K?!te:!oe),[`${q}--slider-text-input--warn`]:le}]),T=et([`${q}--text-input-wrapper`,`${q}--slider-text-input-wrapper`,`${q}--slider-text-input-wrapper--lower`,{[`${q}--text-input-wrapper--readonly`]:W,[`${q}--slider-text-input-wrapper--hidden`]:m}]),G=et([`${q}--text-input-wrapper`,`${q}--slider-text-input-wrapper`,`${q}--slider-text-input-wrapper--upper`,{[`${q}--text-input-wrapper--readonly`]:W,[`${q}--slider-text-input-wrapper--hidden`]:m}]),X=et(`${q}--slider__thumb`,{[`${q}--slider__thumb--lower`]:K}),j=et(`${q}--slider__thumb`,{[`${q}--slider__thumb--upper`]:K}),H=et([`${q}--icon-tooltip`,`${q}--slider__thumb-wrapper`,{[`${q}--slider__thumb-wrapper--lower`]:K}]),Q=et([`${q}--icon-tooltip`,`${q}--slider__thumb-wrapper`,{[`${q}--slider__thumb-wrapper--upper`]:K}]),ue={style:{insetInlineStart:`${this.state.left}%`}},ye={style:{insetInlineStart:`${this.state.leftUpper}%`}};return ne.createElement("div",{className:et(`${q}--form-item`,f)},ne.createElement(pn,{as:"label",htmlFor:K?void 0:h,className:Fe,id:Ee},g),ne.createElement("div",{className:pe},K?ne.createElement("div",{className:T},ne.createElement("input",{type:m?"hidden":A,id:`${h}-lower-input-for-slider`,name:F,className:_e,value:P,"aria-label":c,disabled:z,required:M,min:b,max:S,step:R,onChange:this.onChange,onBlur:this.onBlur,onKeyUp:this.props.onInputKeyUp,onKeyDown:this.onInputKeyDown,"data-invalid":!oe&&!W?!0:null,"data-handle-position":jt.LOWER,"aria-invalid":!oe&&!W?!0:void 0,readOnly:W}),!W&&!oe&&ne.createElement(Vl,{className:`${q}--slider__invalid-icon`}),Z&&ne.createElement(Wl,{className:`${q}--slider__invalid-icon ${q}--slider__invalid-icon--warning`})):null,ne.createElement(pn,{className:`${q}--slider__range-label`},y(b,w)),ne.createElement("div",Nt({className:de,ref:ie=>{this.element=ie},onMouseDown:this.onDragStart,onTouchStart:this.onDragStart,onKeyDown:this.onKeyDown,role:"presentation",tabIndex:-1,"data-invalid":(K?!oe||!te:!oe)&&!W?!0:null},_),ne.createElement(Ny,Nt({hasTooltip:m,className:H,label:y(P,void 0),align:"top"},ue),ne.createElement("div",{className:X,role:"slider",id:K?void 0:h,tabIndex:W||z?void 0:0,"aria-valuetext":y(P,void 0),"aria-valuemax":K?Y:S,"aria-valuemin":b,"aria-valuenow":P,"aria-labelledby":K?void 0:Ee,"aria-label":K?c:void 0,ref:this.thumbRef,onFocus:()=>this.setState({activeHandle:jt.LOWER})},K&&!$?n||(n=ne.createElement(ne.Fragment,null,ne.createElement(Ay,{"aria-label":c}),ne.createElement(Ry,{"aria-label":c}))):K&&$?r||(r=ne.createElement(ne.Fragment,null,ne.createElement(My,{"aria-label":d}),ne.createElement(ky,{"aria-label":d}))):void 0)),K?ne.createElement(Ny,Nt({hasTooltip:m,className:Q,label:y(Y??0,void 0),align:"top"},ye),ne.createElement("div",{className:j,role:"slider",tabIndex:W||z?void 0:0,"aria-valuemax":S,"aria-valuemin":P,"aria-valuenow":Y,"aria-label":d,ref:this.thumbRefUpper,onFocus:()=>this.setState({activeHandle:jt.UPPER})},K&&!$?i||(i=ne.createElement(ne.Fragment,null,ne.createElement(My,{"aria-label":d}),ne.createElement(ky,{"aria-label":d}))):K&&$?s||(s=ne.createElement(ne.Fragment,null,ne.createElement(Ay,{"aria-label":c}),ne.createElement(Ry,{"aria-label":c}))):void 0)):null,ne.createElement("div",{className:`${q}--slider__track`,ref:ie=>{this.track=ie}}),ne.createElement("div",{className:`${q}--slider__filled-track`,ref:this.filledTrackRef})),ne.createElement(pn,{className:`${q}--slider__range-label`},y(S,x)),ne.createElement("div",{className:G},ne.createElement("input",{type:m?"hidden":A,id:`${h}-${K?"upper-":""}input-for-slider`,name:K?B:F,className:Ae,value:K?Y:P,"aria-labelledby":!c&&!K?Ee:void 0,"aria-label":K?d:c||void 0,disabled:z,required:M,min:b,max:S,step:R,onChange:this.onChange,onBlur:this.onBlur,onKeyDown:this.onInputKeyDown,onKeyUp:this.props.onInputKeyUp,"data-invalid":(K?!te:!oe)&&!W?!0:null,"data-handle-position":K?jt.UPPER:null,"aria-invalid":(K?!te:!oe)&&!W?!0:void 0,readOnly:W}),!W&&(K?!te:!oe)&&ne.createElement(Vl,{className:`${q}--slider__invalid-icon`}),le&&ne.createElement(Wl,{className:`${q}--slider__invalid-icon ${q}--slider__invalid-icon--warning`}))),!W&&(!oe||!te)&&ne.createElement(pn,{as:"div",className:et(`${q}--slider__validation-msg`,`${q}--slider__validation-msg--invalid`,`${q}--form-requirement`)},N),!W&&ee&&oe&&te&&ne.createElement(pn,{as:"div",className:et(`${q}--slider__validation-msg`,`${q}--form-requirement`)},C),U&&ne.createElement(pn,{as:"div",role:"alert",className:et(`${q}--slider__status-msg`,`${q}--form-requirement`)},J(W0.autoCorrectAnnouncement,{correctedValue:U})))})}};St(mc,"contextType",M0);St(mc,"translationIds",Object.values(W0));mc.propTypes={ariaLabelInput:ae.string,children:ae.node,className:ae.string,disabled:ae.bool,formatLabel:ae.func,hideTextInput:ae.bool,id:ae.string,inputType:ae.string,invalid:ae.bool,invalidText:ae.node,labelText:ae.node,hideLabel:ae.bool,light:zr(ae.bool),max:ae.number.isRequired,maxLabel:ae.string,min:ae.number.isRequired,minLabel:ae.string,name:ae.string,onBlur:ae.func,onChange:ae.func,onInputKeyUp:ae.func,onRelease:ae.func,readOnly:ae.bool,required:ae.bool,step:ae.number,stepMultiplier:ae.number,translateWithId:ae.func,unstable_ariaLabelInputUpper:ae.string,unstable_nameUpper:ae.string,unstable_valueUpper:ae.number,value:ae.number.isRequired,warn:ae.bool,warnText:ae.node};const Fw=a=>{const n=i=>ne.createElement(a,i),r=a.displayName||a.name;return n.displayName=`ClassWrapper(${r})`,n},vn=Fw(mc),Hw=(a,n,r="character",i="characters")=>{if(typeof n>"u")return null;const s=n-a;return s<=10&&s>0?`${s} ${s===1?r:i} left.`:s<=0?`Maximum ${i} reached.`:null},Tf=ne.forwardRef(function({className:n,decorator:r,disabled:i=!1,helperText:s,hideLabel:c,id:d,inline:f=!1,invalid:m=!1,invalidText:h,labelText:b,light:w,onChange:S=()=>{},onClick:x=()=>{},placeholder:y,readOnly:g,size:E,type:R="text",warn:O=!1,warnText:A,enableCounter:N=!1,maxCount:M,slug:z,...F},B){const I=Vt(),{defaultValue:W,value:ee}=F,C=L.useRef(null),J=pf([B,C]);function _(){return(W||ee||C.current?.value||"").toString().length}const[K,P]=L.useState(_());L.useEffect(()=>{P(_())},[ee,W,N]);const Y=Ow({id:d,readOnly:g,disabled:i,invalid:m,invalidText:h,warn:O,warnText:A}),oe=et(`${I}--text-input`,{[`${I}--text-input--light`]:w,[`${I}--text-input--invalid`]:Y.invalid,[`${I}--text-input--warning`]:Y.warn,[`${I}--text-input--${E}`]:E,[`${I}--layout--size-${E}`]:E}),te={id:d,onChange:ye=>{Y.disabled||(P(ye.target.value?.length),S(ye))},onClick:ye=>{Y.disabled||x(ye)},placeholder:y,type:R,ref:J,className:oe,title:y,disabled:Y.disabled,readOnly:g,"aria-describedby":s&&Y.helperId,...F};N&&(te.maxLength=M);const U=et([et(`${I}--form-item`,n)],`${I}--text-input-wrapper`,{[`${I}--text-input-wrapper--readonly`]:g,[`${I}--text-input-wrapper--light`]:w,[`${I}--text-input-wrapper--inline`]:f,[`${I}--text-input-wrapper--inline--invalid`]:f&&Y.invalid}),k=et(`${I}--label`,{[`${I}--visually-hidden`]:c,[`${I}--label--disabled`]:Y.disabled,[`${I}--label--inline`]:f,[`${I}--label--inline--${E}`]:f&&!!E}),$=et(`${I}--form__helper-text`,{[`${I}--form__helper-text--disabled`]:Y.disabled,[`${I}--form__helper-text--inline`]:f}),Z=et(`${I}--text-input__field-outer-wrapper`,{[`${I}--text-input__field-outer-wrapper--inline`]:f}),le=et(`${I}--text-input__field-wrapper`,{[`${I}--text-input__field-wrapper--warning`]:Y.warn,[`${I}--text-input__field-wrapper--slug`]:z,[`${I}--text-input__field-wrapper--decorator`]:r}),q=et({[`${I}--text-input__invalid-icon`]:Y.invalid||Y.warn,[`${I}--text-input__invalid-icon--warning`]:Y.warn}),Ee=et(`${I}--label`,{[`${I}--label--disabled`]:i,[`${I}--text-input__label-counter`]:!0}),Fe=N&&M?ne.createElement(pn,{as:"div",className:Ee},`${K}/${M}`):null,pe=b?ne.createElement(pn,{as:"label",htmlFor:d,className:k},b):null,de=ne.createElement("div",{className:`${I}--text-input__label-wrapper`},pe,Fe),Re=s?ne.createElement(pn,{as:"div",id:Y.helperId,className:$},s):null,me=ne.createElement("input",Iw({sharedTextInputProps:te,invalid:Y.invalid,invalidId:Y.invalidId,warn:Y.warn,warnId:Y.warnId})),{isFluid:_e}=L.useContext(P0),Ae=L.useRef(null),[T,G]=L.useState(""),X=Hw(K,M);L.useEffect(()=>{if(X&&X!==T){const ye=Ae.current;if(ye){ye.textContent="";const ie=setTimeout(()=>{ye&&(ye.textContent=X,G(X))},1e3);return()=>{ie&&clearTimeout(ie)}}}},[X,T]);const j=Y.icon,H=z??r,ue=B0(H,fc)?L.cloneElement(H,{size:"mini"}):null;return ne.createElement("div",{className:U},f?ne.createElement("div",{className:`${I}--text-input__label-helper-wrapper`},de,!_e&&(Y.validation||Re)):de,ne.createElement("div",{className:Z},ne.createElement("div",{className:le,"data-invalid":Y.invalid||null},j&&ne.createElement(j,{className:q}),me,z?ue:r?ne.createElement("div",{className:`${I}--text-input__field-inner-wrapper--decorator`},ue):"",ne.createElement("span",{className:`${I}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:Ae},X),_e&&ne.createElement("hr",{className:`${I}--text-input__divider`}),_e&&!f&&Y.validation),!_e&&!f&&(Y.validation||Re)))});Tf.displayName="TextInput";Tf.propTypes={className:ae.string,decorator:ae.node,defaultValue:ae.oneOfType([ae.string,ae.number]),disabled:ae.bool,enableCounter:ae.bool,helperText:ae.node,hideLabel:ae.bool,id:ae.string.isRequired,inline:ae.bool,invalid:ae.bool,invalidText:ae.node,labelText:ae.node.isRequired,light:zr(ae.bool),maxCount:ae.number,onChange:ae.func,onClick:ae.func,placeholder:ae.string,readOnly:ae.bool,size:ae.oneOf(["sm","md","lg"]),slug:zr(ae.node),type:ae.string,value:ae.oneOfType([ae.string,ae.number]),warn:ae.bool,warnText:ae.node};var jy;function $i({"aria-labelledby":a,className:n,defaultToggled:r=!1,disabled:i=!1,hideLabel:s=!1,id:c,labelA:d="Off",labelB:f="On",labelText:m,onClick:h,onToggle:b,readOnly:w,size:S="md",toggled:x,...y}){const g=Vt(),E=L.useRef(null),[R,O]=Mw({value:x,onChange:b,defaultValue:r});function A(J){w||O(!R),h&&h(J)}const N=S==="sm",M=s?m:R?f:d,z=!(s&&!m),F=m?"label":"div",B=et(`${g}--toggle`,{[`${g}--toggle--disabled`]:i,[`${g}--toggle--readonly`]:w},n),I=et(`${g}--toggle__label-text`,{[`${g}--visually-hidden`]:s}),W=et(`${g}--toggle__appearance`,{[`${g}--toggle__appearance--sm`]:N}),ee=et(`${g}--toggle__switch`,{[`${g}--toggle__switch--checked`]:R}),C=`${c}_label`;return ne.createElement("div",{className:B,onClick:m?void 0:J=>{E.current&&J.target!==E.current&&!i&&(A(J),E.current.focus())}},ne.createElement("button",Nt({},y,{ref:E,id:c,className:`${g}--toggle__button`,role:"switch",type:"button","aria-checked":R,"aria-labelledby":a??(m?C:void 0),disabled:i,onClick:A})),ne.createElement(F,{id:C,htmlFor:a?void 0:c,className:`${g}--toggle__label`},m&&ne.createElement(pn,{className:I},m),ne.createElement("div",{className:W},ne.createElement("div",{className:ee},N&&ne.createElement("svg",{"aria-hidden":"true",focusable:"false",className:`${g}--toggle__check`,width:"6px",height:"5px",viewBox:"0 0 6 5"},jy||(jy=ne.createElement("path",{d:"M2.2 2.7L5 0 6 1 2.2 5 0 2.7 1 1.5z"})))),z&&ne.createElement(pn,{className:`${g}--toggle__text`,"aria-hidden":"true"},M))))}$i.propTypes={"aria-labelledby":ae.string,className:ae.string,defaultToggled:ae.bool,disabled:ae.bool,hideLabel:ae.bool,id:ae.string.isRequired,labelA:ae.node,labelB:ae.node,labelText:ae.string,onClick:ae.func,onToggle:ae.func,readOnly:ae.bool,size:ae.oneOf(["sm","md"]),toggled:ae.bool};const V0=({className:a,children:n,tagName:r="main",...i})=>{const s=Vt(),c=et(`${s}--content`,a);return ne.createElement(r,{...i,className:c},n)};V0.propTypes={children:ae.node,className:ae.string,tagName:ae.string};const $0=ne.createContext({theme:"white"}),Ww=ne.forwardRef(function({children:n,theme:r},i){const s=L.useMemo(()=>({theme:r}),[r]),c=ne.cloneElement(n,{ref:i});return ne.createElement($0.Provider,{value:s},c)});Ww.propTypes={children:ae.node,theme:ae.oneOf(["white","g10","g90","g100"])};function G0({as:a="div",className:n,theme:r,...i}){const s=Vt(),c=et(n,{[`${s}--white`]:r==="white",[`${s}--g10`]:r==="g10",[`${s}--g90`]:r==="g90",[`${s}--g100`]:r==="g100",[`${s}--layer-one`]:!0}),d=ne.useMemo(()=>{const m=r&&["g90","g100"].includes(r);return{theme:r,isDark:m}},[r]),f=a;return ne.createElement($0.Provider,{value:d},ne.createElement(kw.Provider,{value:1},ne.createElement(f,Nt({},i,{className:c}))))}G0.propTypes={as:ae.oneOfType([ae.func,ae.string,ae.elementType]),children:ae.node,className:ae.string,theme:ae.oneOf(["white","g10","g90","g100"])};function Vw(){const[a,n]=L.useState(window.innerWidth<=768);L.useEffect(()=>{const d=()=>n(window.innerWidth<=768);return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const r=a?"2.1rem":"2.8rem",i=a?"0.65rem":"0.9rem",s=a?"12px":"16px",c=a?"36%":"40%";return u.jsx("header",{role:"banner",style:{marginBottom:"2rem"},children:u.jsxs("h1",{style:{position:"relative",display:"inline-block",fontSize:r,letterSpacing:"-0.05em",fontFamily:'"NimbusSansL", Arial, sans-serif',fontWeight:200,color:"var(--color-text-primary)",margin:0,lineHeight:1},children:["OP",u.jsx("span",{style:{margin:"0 0.1em"},children:""}),"PatchStudio",u.jsx("span",{"aria-label":"unofficial version",style:{position:"absolute",left:`calc(100% + ${s})`,bottom:c,fontFamily:'"NimbusSansL", "Helvetica", "Helvetica Neue", Arial, sans-serif',letterSpacing:"-0.008em",fontVariantLigatures:"none",fontFeatureSettings:'"liga" 0',fontSize:i,fontWeight:400,padding:"0.15rem 0.5rem",backgroundColor:"transparent",color:"var(--color-text-primary)",borderRadius:"4px",border:"1px solid var(--color-text-primary)",lineHeight:"1",whiteSpace:"nowrap"},children:"unofficial"})]})})}class zi{static instance;audioContext=null;isInitialized=!1;constructor(){}static getInstance(){return zi.instance||(zi.instance=new zi),zi.instance}async getAudioContext(){return(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=new AudioContext,this.isInitialized=!0),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.audioContext}async closeAudioContext(){this.audioContext&&this.audioContext.state!=="closed"&&(await this.audioContext.close(),this.audioContext=null,this.isInitialized=!1)}getState(){return this.audioContext?.state||null}getSampleRate(){return this.audioContext?.sampleRate||44100}isReady(){return this.isInitialized&&this.audioContext?.state==="running"}createOfflineContext(n,r,i){return new OfflineAudioContext(n,r,i)}cleanup(){return this.closeAudioContext()}}const ir=zi.getInstance();typeof window<"u"&&window.addEventListener("beforeunload",()=>{ir.cleanup()});const q0={AUDIO_SCHEDULE_BUFFER:.001,ZERO_CROSSING_THRESHOLD:.001},Y0={VISUAL_FEEDBACK_TIMEOUT:150},$w={DONATE_PAGE:!0},Gw=32767;async function qw(a,n){const r=new OfflineAudioContext(a.numberOfChannels,Math.ceil(a.length*n/a.sampleRate),n),i=r.createBufferSource();return i.buffer=a,i.connect(r.destination),i.start(),await r.startRendering()}async function Yw(a,n){const r=new OfflineAudioContext(n,a.length,a.sampleRate),i=r.createBufferSource();return i.buffer=a,i.connect(r.destination),i.start(),await r.startRendering()}async function ls(a,n=16,r={}){if(![8,12,16,24].includes(n))throw new Error(`Unsupported bit depth: ${n}. Supported: 8, 12, 16, 24`);if(r.sampleRate&&![11025,22050,44100].includes(r.sampleRate))throw new Error(`Unsupported sample rate: ${r.sampleRate}. Supported: 11025, 22050, 44100`);if(a.numberOfChannels!==1&&a.numberOfChannels!==2)throw new Error("Expecting mono or stereo audioBuffer");if(r.channels&&![1,2].includes(r.channels))throw new Error(`Unsupported channel count: ${r.channels}. Supported: 1 (mono), 2 (stereo)`);let i=a;r.sampleRate&&r.sampleRate!==a.sampleRate&&(i=await qw(a,r.sampleRate)),r.channels&&r.channels!==a.numberOfChannels&&(i=await Yw(i,r.channels));const s=i.numberOfChannels,c=i.length,d=n/8,f=c*s*d,m=16,h=60,b=r.rootNote!==void 0||r.loopStart!==void 0||r.loopEnd!==void 0,w=4+(8+m)+(b?8+h:0)+(8+f),S=new ArrayBuffer(8+w),x=new Uint8Array(S),y=new DataView(S);let g=0;if(rs(x,g,"RIFF"),g+=4,y.setUint32(g,w,!0),g+=4,rs(x,g,"WAVE"),g+=4,rs(x,g,"fmt "),g+=4,y.setUint32(g,m,!0),g+=4,y.setUint16(g,1,!0),g+=2,y.setUint16(g,s,!0),g+=2,y.setUint32(g,i.sampleRate,!0),g+=4,y.setUint32(g,i.sampleRate*s*d,!0),g+=4,y.setUint16(g,s*d,!0),g+=2,y.setUint16(g,n,!0),g+=2,b&&(rs(x,g,"smpl"),g+=4,y.setUint32(g,h,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,Math.round(1e9/i.sampleRate),!0),g+=4,y.setUint32(g,r.rootNote??60,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,1,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,r.loopStart??0,!0),g+=4,y.setUint32(g,(r.loopEnd??c-1)-1,!0),g+=4,y.setUint32(g,0,!0),g+=4,y.setUint32(g,0,!0),g+=4),rs(x,g,"data"),g+=4,y.setUint32(g,f,!0),g+=4,n===8)Kw(x,i,g);else if(n===12)Xw(x,i,g);else if(n===16)Zw(x,i,g);else if(n===24)Qw(x,i,g);else throw new Error(`Unsupported bit depth: ${n}`);return new Blob([x],{type:"audio/wav"})}function rs(a,n,r){for(let i=0;i<r.length;i++)a[n+i]=r.charCodeAt(i)}function Zw(a,n,r){const i=new Int16Array(a.buffer,r),s=n.numberOfChannels,c=n.length,d=[];for(let f=0;f<s;f++)d.push(n.getChannelData(f));for(let f=0,m=0;f<c;f++)for(let h=0;h<s;h++){let b=d[h][f];b=Math.min(1,Math.max(-1,b)),i[m++]=Math.round(b*Gw)}}function Kw(a,n,r){const i=n.numberOfChannels,s=n.length,c=127,d=[];for(let m=0;m<i;m++)d.push(n.getChannelData(m));let f=r;for(let m=0;m<s;m++)for(let h=0;h<i;h++){let b=d[h][m];b=Math.min(1,Math.max(-1,b));const S=Math.round(b*c)+128;a[f++]=Math.max(0,Math.min(255,S))}}function Xw(a,n,r){const i=new Int16Array(a.buffer,r),s=n.numberOfChannels,c=n.length,d=2047,f=[];for(let m=0;m<s;m++)f.push(n.getChannelData(m));for(let m=0,h=0;m<c;m++)for(let b=0;b<s;b++){let w=f[b][m];w=Math.min(1,Math.max(-1,w));const S=Math.round(w*d);i[h++]=S<<4}}function Qw(a,n,r){const i=n.numberOfChannels,s=n.length,c=8388607,d=[];for(let m=0;m<i;m++)d.push(n.getChannelData(m));let f=r;for(let m=0;m<s;m++)for(let h=0;h<i;h++){let b=d[h][m];b=Math.min(1,Math.max(-1,b));const w=Math.round(b*c);a[f++]=w&255,a[f++]=w>>8&255,a[f++]=w>>16&255}}const Jw=44,eE=8*1024*1024,Kl=5;async function Z0(a,n,r,i="C3"){try{const s=a.slice(0),c=a.slice(0),d=new DataView(s),f=tE(d),h=await(await ir.getAudioContext()).decodeAudioData(c),b=h.duration,w=nE(d,f.sampleRate,b,n,i);return{format:f.format,sampleRate:f.sampleRate,bitDepth:f.bitDepth,channels:f.channels,dataLength:f.dataLength,duration:b,audioBuffer:h,midiNote:w.midiNote,loopStart:w.loopStart,loopEnd:w.loopEnd,hasLoopData:w.hasLoopData,fileSize:r}}catch(s){throw new Error(`Failed to read WAV metadata: ${s instanceof Error?s.message:"Unknown error"}`)}}function tE(a){if(String.fromCharCode(...Array.from(new Uint8Array(a.buffer,0,4)))!=="RIFF")throw new Error("Invalid WAV file: missing RIFF header");if(String.fromCharCode(...Array.from(new Uint8Array(a.buffer,8,4)))!=="WAVE")throw new Error("Invalid WAV file: missing WAVE format");let i=12,s=-1,c=-1;for(;i<a.byteLength-8;){const w=String.fromCharCode(...Array.from(new Uint8Array(a.buffer,i,4))),S=a.getUint32(i+4,!0);if(w==="fmt ")s=i+8;else if(w==="data"){c=i+8;break}i+=8+S}if(s===-1)throw new Error("Invalid WAV file: missing fmt chunk");const d=a.getUint16(s,!0),f=a.getUint16(s+2,!0),m=a.getUint32(s+4,!0),h=a.getUint16(s+14,!0);if(d!==1)throw new Error("Unsupported WAV format: only PCM is supported");const b=c!==-1?a.getUint32(c-4,!0):0;return{format:"PCM",sampleRate:m,bitDepth:h,channels:f,dataLength:b}}function nE(a,n,r,i,s="C3"){let c=12,d=-1,f=r*.1,m=r*.9,h=!1;for(;c<a.byteLength-8;){const b=String.fromCharCode(a.getUint8(c),a.getUint8(c+1),a.getUint8(c+2),a.getUint8(c+3)),w=a.getUint32(c+4,!0);if(b==="smpl"){const S=c+8;if(S+12<a.byteLength&&(d=a.getUint32(S+12,!0)),S+28<a.byteLength&&a.getUint32(S+28,!0)>0&&S+36+24<=a.byteLength){const y=S+36,g=a.getUint32(y+8,!0),E=a.getUint32(y+12,!0);f=g/n,m=E/n,h=!0}break}c+=8+w+w%2}if(d<0)try{const b=Af(i,s);b&&b.length>1&&(d=b[1])}catch{}return{midiNote:d,loopStart:f,loopEnd:m,hasLoopData:h}}function K0(a,n=0){let r=0;for(let c=0;c<a.numberOfChannels;c++){const d=a.getChannelData(c);for(let f=0;f<d.length;f++){const m=Math.abs(d[f]);m>r&&(r=m)}}return r===0?1:Math.pow(10,n/20)/r}function X0(a,n=-.1){const r=a.createDynamicsCompressor();return r.threshold.setValueAtTime(n,a.currentTime),r.knee.setValueAtTime(0,a.currentTime),r.ratio.setValueAtTime(20,a.currentTime),r.attack.setValueAtTime(.001,a.currentTime),r.release.setValueAtTime(.01,a.currentTime),r}async function Q0(a,n=-.1){const r=ir.createOfflineContext(a.numberOfChannels,a.length,a.sampleRate),i=X0(r,n),s=r.createBufferSource();return s.buffer=a,s.connect(i),i.connect(r.destination),s.start(0),await r.startRendering()}async function J0(a,n){if(n<=0||n>=a.length)return a;const r=n+Kl;if(r>=a.length)return a;const s=(await ir.getAudioContext()).createBuffer(a.numberOfChannels,r,a.sampleRate);for(let c=0;c<a.numberOfChannels;c++){const d=a.getChannelData(c),f=s.getChannelData(c);for(let m=0;m<r;m++)f[m]=d[m]}return s}async function Cf(a,n={}){const r=n.sampleRate||a.sampleRate,i=n.channels||a.numberOfChannels,s=n.normalize||!1,c=n.normalizeLevel||-.1,d=n.gain||0,f=n.applyLimiter!==void 0?n.applyLimiter:!0;let m=a;n.cutAtLoopEnd&&n.loopEnd&&(m=await J0(a,n.loopEnd));const h=ir.createOfflineContext(i,Math.ceil(m.duration*r),r),b=h.createBufferSource();b.buffer=m;const w=h.createGain();let S=1;d!==0&&(S*=Math.pow(10,d/20));let x=1,y=0;if(s){let E=0;for(let R=0;R<m.numberOfChannels;R++){const O=m.getChannelData(R);for(let A=0;A<O.length;A++){const N=Math.abs(O[A]);N>E&&(E=N)}}y=E>0?20*Math.log10(E):-1/0,x=K0(m,c),S*=x}if(s||d!==0){const E=n.sampleName?` (${n.sampleName})`:"";console.log(`[AUDIO PROCESSING]${E} normalization: ${s}, target: ${c}dBFS, original peak: ${y.toFixed(1)}dBFS, normalizeGain: ${x.toFixed(4)}, gain: ${d}dBFS, final gainValue: ${S.toFixed(4)}`)}if(w.gain.value=S,i!==m.numberOfChannels){const E=h.createChannelSplitter(m.numberOfChannels),R=h.createChannelMerger(i);if(b.connect(E),i===1&&m.numberOfChannels===2)E.connect(w,0,0),E.connect(w,1,0),w.connect(R,0,0);else if(i===2&&m.numberOfChannels===1)E.connect(w,0,0),w.connect(R,0,0),w.connect(R,0,1);else{const O=Math.min(i,m.numberOfChannels);for(let A=0;A<O;A++){const N=h.createGain();N.gain.value=S,E.connect(N,A,0),N.connect(R,0,A)}}R.connect(h.destination)}else b.connect(w),w.connect(h.destination);b.start(0);let g=await h.startRendering();if(f){const E=s?Math.min(c+.1,0):-.1;g=await Q0(g,E)}return g}async function eb(a,n={}){let r=0;for(const i of a){if(!i)continue;const s=n.sampleRate||i.sampleRate,c=n.channels||i.numberOfChannels,d=n.bitDepth||16,f=Math.ceil(i.duration*s),m=d/8,h=Jw+f*c*m;r+=h}return r}function is(a,n,r="both",i=1e3,s){const c=a.getChannelData(0),d=c.length;n=Math.max(0,Math.min(n,d-1));let f=n,m=Math.abs(c[n]);const h=r==="forward"?n:Math.max(0,n-i),b=r==="backward"?n:Math.min(d-1,n+i),w=s?.min!==void 0?Math.max(h,s.min):h,S=s?.max!==void 0?Math.min(b,s.max):b;for(let x=w;x<=S;x++){const y=Math.abs(c[x]);if(y<m&&(m=y,f=x,y<q0.ZERO_CROSSING_THRESHOLD))break}return f}function Li(a,n,r,i,s,c=500){const d=[],f=Math.floor(n*a.sampleRate),m=Math.floor(r*a.sampleRate),h=is(a,f,"forward",c);h!==f&&d.push({marker:"inPoint",original:f,adjusted:h});const b=is(a,m,"backward",c);b!==m&&d.push({marker:"outPoint",original:m,adjusted:b});let w,S;if(i!==void 0){const y=Math.floor(i*a.sampleRate),g=Math.floor(n*a.sampleRate),E=Math.floor(r*a.sampleRate);w=is(a,y,"both",c,{min:g,max:E}),w!==y&&d.push({marker:"loopStart",original:y,adjusted:w})}if(s!==void 0){const y=Math.floor(s*a.sampleRate),g=Math.floor(n*a.sampleRate),E=Math.floor(r*a.sampleRate);S=is(a,y,"both",c,{min:g,max:E}),S!==y&&d.push({marker:"loopEnd",original:y,adjusted:S})}return{inPoint:h/a.sampleRate,outPoint:b/a.sampleRate,loopStart:w!==void 0?w/a.sampleRate:void 0,loopEnd:S!==void 0?S/a.sampleRate:void 0,adjustments:d}}function Va(a){return a.replace(/[^a-zA-Z0-9 #\-().]+/g,"")}function nf(a){return/^[a-zA-Z0-9 #\-().]*$/.test(a)}function tb(a){const n=a.match(/[^a-zA-Z0-9 #\-().]/g);return n?[...new Set(n)]:[]}function Af(a,n="C3"){const i=a.replace(/\.[^/.]+$/,"").match(/(.+?)[\s-]*([A-G](?:b|#)?\d|\d{1,3})$/i);if(!i)throw new Error(`Filename '${a}' does not match the expected pattern.`);const s=Va(i[1]),c=i[2];return/^[A-G](?:b|#)?\d$/i.test(c)?[s,Rf(c,n)]:[s,parseInt(c,10)]}const nb=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Lr(a,n="C3"){if(a<0||a>127)return"";const r=a%12,i=n==="C3"?Math.floor(a/12)-2:Math.floor(a/12)-1;return`${nb[r]}${i}`}const rE={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11};function Rf(a,n="C3"){const r=a.match(/^([A-Ga-g])([#b]?)(-?\d+)$/);if(!r)throw new Error("Bad note format");const[,i,s,c]=r,d=i.toUpperCase()+(s||""),f=rE[d];if(f===void 0)throw new Error("Bad note");const m=parseInt(c,10);return(n==="C3"?(m+2)*12:(m+1)*12)+f}function Mf(a){return a===0?"0 mb":a<1024?a+" b":a<1048576?(a/1024).toFixed(1)+" kb":(a/1048576).toFixed(1)+" mb"}function rb(a){const n=a/eE*100;return n>=95?"Preset size too large - reduce sample rate, bit depth, or convert to mono":n>=75?"Approaching size limit - consider optimizing samples":null}function Xl(a,n,r,i,s,c="C3",d="wav"){const f=a.replace(/[ _-]+/g,n).replace(/^[ _-]+|[ _-]+$/g,""),m=n===" "?"a-zA-Z0-9 ":"a-zA-Z0-9-",h=f.replace(new RegExp(`[^${m}]`,"g"),"");if(r==="drum"){let w=["KD1","KD2","SD1","SD2","RIM","CLP","TB","SH","CH","CL","OH","CAB","RC","CC","LT","COW","MT","HT","LC","HC","TRI","LT","WS","GUI"][i]||`DRUM${i+1}`;return w==="LT"&&i===21&&(w="LT2"),`${h}${n}${w}.${d}`}else{const b=Lr(i,c);return`${h}${n}${b}.${d}`}}const ab=Object.freeze(Object.defineProperty({__proto__:null,LOOP_END_PADDING:Kl,NOTE_NAMES:nb,applyLimiter:Q0,applyZeroCrossingToMarkers:Li,calculatePatchSize:eb,calculatePeakNormalizationGain:K0,convertAudioFormat:Cf,createLimiter:X0,cutAudioAtLoopEnd:J0,findNearestZeroCrossing:is,formatFileSize:Mf,generateFilename:Xl,getInvalidPresetNameChars:tb,getPatchSizeWarning:rb,isValidPresetName:nf,midiNoteToString:Lr,noteStringToMidiValue:Rf,parseFilename:Af,readWavMetadataFromArrayBuffer:Z0,sanitizeName:Va},Symbol.toStringTag,{value:"Module"})),kn={setCookie:(a,n,r=30)=>{try{const i=new Date;i.setTime(i.getTime()+r*24*60*60*1e3);const s=`expires=${i.toUTCString()}`;document.cookie=`${a}=${n};${s};path=/`}catch(i){console.warn("Failed to set cookie (cookies may be disabled):",i)}},getCookie:a=>{try{const n=`${a}=`,r=document.cookie.split(";");for(let i=0;i<r.length;i++){let s=r[i];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null}catch(n){return console.warn("Failed to read cookie (cookies may be disabled):",n),null}},removeCookie:a=>{document.cookie=`${a}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}},Sn={LAST_TAB:"opxy_last_tab",DRUM_KEYBOARD_PINNED:"opxy_drum_keyboard_pinned",MULTISAMPLE_KEYBOARD_PINNED:"opxy_multisample_keyboard_pinned",MIDI_NOTE_MAPPING:"opxy_midi_note_mapping",DRUM_DEFAULT_SETTINGS:"opxy_drum_default_settings",MULTISAMPLE_DEFAULT_SETTINGS:"opxy_multisample_default_settings"},Fd={sampleRate:44100,bitDepth:16,channels:2,presetName:"",normalize:!1,normalizeLevel:-.1,autoZeroCrossing:!1,renameFiles:!1,filenameSeparator:" ",audioFormat:"wav",presetSettings:{playmode:"poly",transpose:0,velocity:20,volume:69,width:0}},tn={sampleRate:44100,bitDepth:16,channels:2,presetName:"",normalize:!1,normalizeLevel:-.1,autoZeroCrossing:!1,cutAtLoopEnd:!1,gain:0,loopEnabled:!0,loopOnRelease:!0,renameFiles:!1,filenameSeparator:" ",audioFormat:"wav",playmode:"poly",transpose:0,velocitySensitivity:20,volume:69,width:0,highpass:0,portamentoType:"linear",portamentoAmount:0,tuningRoot:0,ampEnvelope:{attack:500,decay:6e3,sustain:22e3,release:12e3},filterEnvelope:{attack:0,decay:5e3,sustain:18e3,release:1e4}};function aE(a,n=null){try{const r={basicSettings:{sampleRate:a.sampleRate,bitDepth:a.bitDepth,channels:a.channels,presetName:a.presetName,normalize:a.normalize,normalizeLevel:a.normalizeLevel,autoZeroCrossing:a.autoZeroCrossing,renameFiles:a.renameFiles,filenameSeparator:a.filenameSeparator,audioFormat:a.audioFormat,presetSettings:{playmode:a.presetSettings.playmode,transpose:a.presetSettings.transpose,velocity:a.presetSettings.velocity,volume:a.presetSettings.volume,width:a.presetSettings.width}},importedPreset:n};kn.setCookie(Sn.DRUM_DEFAULT_SETTINGS,JSON.stringify(r),365)}catch(r){console.warn("Failed to save drum default settings:",r)}}function iE(a,n=null){try{const r={basicSettings:{sampleRate:a.sampleRate,bitDepth:a.bitDepth,channels:a.channels,presetName:a.presetName,normalize:a.normalize,normalizeLevel:a.normalizeLevel,autoZeroCrossing:a.autoZeroCrossing,cutAtLoopEnd:a.cutAtLoopEnd,gain:a.gain,loopEnabled:a.loopEnabled,loopOnRelease:a.loopOnRelease,renameFiles:a.renameFiles,filenameSeparator:a.filenameSeparator,audioFormat:a.audioFormat,playmode:a.playmode,transpose:a.transpose,velocitySensitivity:a.velocitySensitivity,volume:a.volume,width:a.width,highpass:a.highpass,portamentoType:a.portamentoType,portamentoAmount:a.portamentoAmount,tuningRoot:a.tuningRoot,ampEnvelope:a.ampEnvelope,filterEnvelope:a.filterEnvelope},importedPreset:n};kn.setCookie(Sn.MULTISAMPLE_DEFAULT_SETTINGS,JSON.stringify(r),365)}catch(r){console.warn("Failed to save multisample default settings:",r)}}function oE(){try{const a=kn.getCookie(Sn.DRUM_DEFAULT_SETTINGS);if(a){const n=JSON.parse(a);return n.basicSettings?{...Fd,...n.basicSettings}:{...Fd,...n}}}catch(a){console.warn("Failed to load drum default settings, using defaults:",a)}return Fd}function sE(){try{const a=kn.getCookie(Sn.MULTISAMPLE_DEFAULT_SETTINGS);if(a){const n=JSON.parse(a);if(n.basicSettings){const r={...tn,...n.basicSettings};return r.playmode=n.basicSettings.playmode||tn.playmode,r.transpose=n.basicSettings.transpose??tn.transpose,r.velocitySensitivity=n.basicSettings.velocitySensitivity??tn.velocitySensitivity,r.volume=n.basicSettings.volume??tn.volume,r.width=n.basicSettings.width??tn.width,r.highpass=n.basicSettings.highpass??tn.highpass,r.portamentoType=n.basicSettings.portamentoType||tn.portamentoType,r.portamentoAmount=n.basicSettings.portamentoAmount??tn.portamentoAmount,r.tuningRoot=n.basicSettings.tuningRoot??tn.tuningRoot,r.ampEnvelope={attack:n.basicSettings.ampEnvelope?.attack??tn.ampEnvelope.attack,decay:n.basicSettings.ampEnvelope?.decay??tn.ampEnvelope.decay,sustain:n.basicSettings.ampEnvelope?.sustain??tn.ampEnvelope.sustain,release:n.basicSettings.ampEnvelope?.release??tn.ampEnvelope.release},r.filterEnvelope={attack:n.basicSettings.filterEnvelope?.attack??tn.filterEnvelope.attack,decay:n.basicSettings.filterEnvelope?.decay??tn.filterEnvelope.decay,sustain:n.basicSettings.filterEnvelope?.sustain??tn.filterEnvelope.sustain,release:n.basicSettings.filterEnvelope?.release??tn.filterEnvelope.release},r}else return{...tn,...n}}}catch(a){console.warn("Failed to load multisample default settings, using defaults:",a)}return tn}function lE(){try{const a=kn.getCookie(Sn.DRUM_DEFAULT_SETTINGS);if(a)return JSON.parse(a).importedPreset||null}catch(a){console.warn("Failed to load drum imported preset, using null:",a)}return null}function cE(){try{const a=kn.getCookie(Sn.MULTISAMPLE_DEFAULT_SETTINGS);if(a)return JSON.parse(a).importedPreset||null}catch(a){console.warn("Failed to load multisample imported preset, using null:",a)}return null}const ib={file:null,audioBuffer:null,name:"",isLoaded:!1,inPoint:0,outPoint:0,playmode:"oneshot",reverse:!1,tune:0,pan:0,gain:0,hasBeenEdited:!1,isAssigned:!1,assignedKey:void 0},Pa=(a,n=!1)=>({...ib,isAssigned:n,assignedKey:n?a:void 0}),uE={file:null,audioBuffer:null,name:"",isLoaded:!1,rootNote:60,inPoint:0,outPoint:0,loopStart:0,loopEnd:0,originalBitDepth:16,originalSampleRate:44100,originalChannels:2,fileSize:0,duration:0,isFloat:!1},dE=()=>{try{const a=kn.getCookie(Sn.LAST_TAB);return a==="multisample"?"multisample":a==="feedback"?"feedback":a==="library"?"library":a==="donate"?"donate":"drum"}catch(a){return console.warn("Failed to load saved tab from cookie, defaulting to drum tab:",a),"drum"}},Ly=a=>{try{return kn.getCookie(a)==="true"}catch(n){return console.warn(`Failed to load pin state from cookie for key: ${a}`,n),!1}},fE=()=>{try{return kn.getCookie(Sn.MIDI_NOTE_MAPPING)==="C4"?"C4":"C3"}catch(a){return console.warn("Failed to load MIDI note mapping from cookie, defaulting to C3",a),"C3"}},mE={currentTab:dE(),drumSettings:oE(),multisampleSettings:sE(),drumSamples:Array.from({length:24},(a,n)=>Pa(n,!0)),multisampleFiles:[],selectedMultisample:null,isLoading:!1,error:null,isDrumKeyboardPinned:Ly(Sn.DRUM_KEYBOARD_PINNED),isMultisampleKeyboardPinned:Ly(Sn.MULTISAMPLE_KEYBOARD_PINNED),notifications:[],importedDrumPreset:lE(),importedMultisamplePreset:cE(),isSessionRestorationModalOpen:!1,sessionInfo:null,midiNoteMapping:fE()};function pE(a,n){switch(n.type){case"SET_TAB":try{kn.setCookie(Sn.LAST_TAB,n.payload,30)}catch(r){console.warn("Failed to save tab to cookie:",r)}return{...a,currentTab:n.payload};case"SET_DRUM_SAMPLE_RATE":return{...a,drumSettings:{...a.drumSettings,sampleRate:n.payload}};case"SET_DRUM_BIT_DEPTH":return{...a,drumSettings:{...a.drumSettings,bitDepth:n.payload}};case"SET_DRUM_CHANNELS":return{...a,drumSettings:{...a.drumSettings,channels:n.payload}};case"SET_DRUM_PRESET_NAME":return{...a,drumSettings:{...a.drumSettings,presetName:n.payload}};case"SET_DRUM_NORMALIZE":return{...a,drumSettings:{...a.drumSettings,normalize:n.payload}};case"SET_DRUM_NORMALIZE_LEVEL":return{...a,drumSettings:{...a.drumSettings,normalizeLevel:n.payload}};case"SET_DRUM_AUTO_ZERO_CROSSING":return{...a,drumSettings:{...a.drumSettings,autoZeroCrossing:n.payload}};case"SET_DRUM_RENAME_FILES":return{...a,drumSettings:{...a.drumSettings,renameFiles:n.payload}};case"SET_DRUM_FILENAME_SEPARATOR":return{...a,drumSettings:{...a.drumSettings,filenameSeparator:n.payload}};case"SET_DRUM_AUDIO_FORMAT":return{...a,drumSettings:{...a.drumSettings,audioFormat:n.payload}};case"SET_DRUM_PRESET_PLAYMODE":return{...a,drumSettings:{...a.drumSettings,presetSettings:{...a.drumSettings.presetSettings,playmode:n.payload}}};case"SET_DRUM_PRESET_TRANSPOSE":return{...a,drumSettings:{...a.drumSettings,presetSettings:{...a.drumSettings.presetSettings,transpose:n.payload}}};case"SET_DRUM_PRESET_VELOCITY":return{...a,drumSettings:{...a.drumSettings,presetSettings:{...a.drumSettings.presetSettings,velocity:n.payload}}};case"SET_DRUM_PRESET_VOLUME":return{...a,drumSettings:{...a.drumSettings,presetSettings:{...a.drumSettings.presetSettings,volume:n.payload}}};case"SET_DRUM_PRESET_WIDTH":return{...a,drumSettings:{...a.drumSettings,presetSettings:{...a.drumSettings.presetSettings,width:n.payload}}};case"SET_MULTISAMPLE_SAMPLE_RATE":return{...a,multisampleSettings:{...a.multisampleSettings,sampleRate:n.payload}};case"SET_MULTISAMPLE_BIT_DEPTH":return{...a,multisampleSettings:{...a.multisampleSettings,bitDepth:n.payload}};case"SET_MULTISAMPLE_CHANNELS":return{...a,multisampleSettings:{...a.multisampleSettings,channels:n.payload}};case"SET_MULTISAMPLE_PRESET_NAME":return{...a,multisampleSettings:{...a.multisampleSettings,presetName:n.payload}};case"SET_MULTISAMPLE_NORMALIZE":return{...a,multisampleSettings:{...a.multisampleSettings,normalize:n.payload}};case"SET_MULTISAMPLE_NORMALIZE_LEVEL":return{...a,multisampleSettings:{...a.multisampleSettings,normalizeLevel:n.payload}};case"SET_MULTISAMPLE_AUTO_ZERO_CROSSING":return{...a,multisampleSettings:{...a.multisampleSettings,autoZeroCrossing:n.payload}};case"SET_MULTISAMPLE_RENAME_FILES":return{...a,multisampleSettings:{...a.multisampleSettings,renameFiles:n.payload}};case"SET_MULTISAMPLE_FILENAME_SEPARATOR":return{...a,multisampleSettings:{...a.multisampleSettings,filenameSeparator:n.payload}};case"SET_MULTISAMPLE_AUDIO_FORMAT":return{...a,multisampleSettings:{...a.multisampleSettings,audioFormat:n.payload}};case"SET_MULTISAMPLE_CUT_AT_LOOP_END":return{...a,multisampleSettings:{...a.multisampleSettings,cutAtLoopEnd:n.payload}};case"SET_MULTISAMPLE_GAIN":return{...a,multisampleSettings:{...a.multisampleSettings,gain:n.payload}};case"SET_MULTISAMPLE_LOOP_ENABLED":return{...a,multisampleSettings:{...a.multisampleSettings,loopEnabled:n.payload}};case"SET_MULTISAMPLE_LOOP_ON_RELEASE":return{...a,multisampleSettings:{...a.multisampleSettings,loopOnRelease:n.payload}};case"SET_MULTISAMPLE_PLAYMODE":return{...a,multisampleSettings:{...a.multisampleSettings,playmode:n.payload}};case"SET_MULTISAMPLE_TRANSPOSE":return{...a,multisampleSettings:{...a.multisampleSettings,transpose:n.payload}};case"SET_MULTISAMPLE_VELOCITY_SENSITIVITY":return{...a,multisampleSettings:{...a.multisampleSettings,velocitySensitivity:n.payload}};case"SET_MULTISAMPLE_VOLUME":return{...a,multisampleSettings:{...a.multisampleSettings,volume:n.payload}};case"SET_MULTISAMPLE_WIDTH":return{...a,multisampleSettings:{...a.multisampleSettings,width:n.payload}};case"SET_MULTISAMPLE_HIGHPASS":return{...a,multisampleSettings:{...a.multisampleSettings,highpass:n.payload}};case"SET_MULTISAMPLE_PORTAMENTO_TYPE":return{...a,multisampleSettings:{...a.multisampleSettings,portamentoType:n.payload}};case"SET_MULTISAMPLE_PORTAMENTO_AMOUNT":return{...a,multisampleSettings:{...a.multisampleSettings,portamentoAmount:n.payload}};case"SET_MULTISAMPLE_TUNING_ROOT":return{...a,multisampleSettings:{...a.multisampleSettings,tuningRoot:n.payload}};case"SET_MULTISAMPLE_AMP_ENVELOPE":return{...a,multisampleSettings:{...a.multisampleSettings,ampEnvelope:n.payload}};case"SET_MULTISAMPLE_FILTER_ENVELOPE":return{...a,multisampleSettings:{...a.multisampleSettings,filterEnvelope:n.payload}};case"APPLY_ZERO_CROSSING_TO_DRUM_SAMPLE":{const r=n.payload,i=[...a.drumSamples],s=i[r];if(!s?.isLoaded)return console.error("Cannot apply zero-crossing to unloaded sample"),a;const c=0,d=s.audioBuffer.duration;let f=c,m=d;if(a.drumSettings.autoZeroCrossing){const h=Li(s.audioBuffer,c,d);f=h.inPoint,m=h.outPoint,h.adjustments.length>0&&console.log(`Applied zero-crossing adjustments to ${s.name}:`,h.adjustments)}return i[r]={...s,inPoint:f,outPoint:m,hasBeenEdited:!0},{...a,drumSamples:i}}case"APPLY_ZERO_CROSSING_TO_MULTISAMPLE_FILE":{const r=n.payload,i=[...a.multisampleFiles],s=i[r];if(!s?.isLoaded)return console.error("Cannot apply zero-crossing to unloaded multisample file"),a;const c=0,d=s.audioBuffer.duration,f=s.loopStart,m=s.loopEnd;let h=c,b=d,w=f,S=m;if(a.multisampleSettings.autoZeroCrossing&&s.audioBuffer){const x=Li(s.audioBuffer,c,d,f,m);h=x.inPoint,b=x.outPoint,w=x.loopStart||f,S=x.loopEnd||m,x.adjustments.length>0&&console.log(`Applied zero-crossing adjustments to ${s.name}:`,x.adjustments)}return i[r]={...s,inPoint:h,outPoint:b,loopStart:w,loopEnd:S},{...a,multisampleFiles:i}}case"APPLY_ZERO_CROSSING_TO_ALL_DRUM_SAMPLES":{const r=a.drumSamples.map(i=>{if(!i.isLoaded||!i.audioBuffer)return i;const s=0,c=i.audioBuffer.duration,d=Li(i.audioBuffer,s,c);return{...i,inPoint:d.inPoint,outPoint:d.outPoint,hasBeenEdited:!0}});return{...a,drumSamples:r}}case"APPLY_ZERO_CROSSING_TO_ALL_MULTISAMPLE_FILES":{const r=a.multisampleFiles.map(i=>{if(!i.isLoaded||!i.audioBuffer)return i;const s=0,c=i.audioBuffer.duration,d=i.loopStart,f=i.loopEnd,m=Li(i.audioBuffer,s,c,d,f);return{...i,inPoint:m.inPoint,outPoint:m.outPoint,loopStart:m.loopStart??d,loopEnd:m.loopEnd??f}});return{...a,multisampleFiles:r}}case"LOAD_DRUM_SAMPLE":{if(!n.payload.audioBuffer||typeof n.payload.audioBuffer.duration!="number")return console.error("Invalid audioBuffer provided to LOAD_DRUM_SAMPLE:",n.payload.audioBuffer),a;if(!n.payload.metadata||typeof n.payload.metadata.duration!="number")return console.error("Invalid metadata provided to LOAD_DRUM_SAMPLE:",n.payload.metadata),a;if(n.payload.index<0||n.payload.index>=24)return console.error("Invalid drum sample index:",n.payload.index),a;const r=[...a.drumSamples],i=0,s=n.payload.audioBuffer.duration,c=i,d=s;return r[n.payload.index]={...ib,file:n.payload.file,audioBuffer:n.payload.audioBuffer,name:n.payload.file.name,isLoaded:!0,inPoint:c,outPoint:d,originalBitDepth:n.payload.metadata.bitDepth,originalSampleRate:n.payload.metadata.sampleRate,originalChannels:n.payload.metadata.channels,fileSize:n.payload.file.size,duration:n.payload.audioBuffer.duration,isFloat:n.payload.metadata.isFloat,hasBeenEdited:!1,isAssigned:!0,assignedKey:n.payload.index},{...a,drumSamples:r}}case"CLEAR_DRUM_SAMPLE":{const r=[...a.drumSamples],i=n.payload<24;return r[n.payload]=Pa(n.payload,i),{...a,drumSamples:r}}case"UPDATE_DRUM_SAMPLE":{const r=[...a.drumSamples];return r[n.payload.index]={...r[n.payload.index],...n.payload.updates},{...a,drumSamples:r}}case"REORDER_DRUM_SAMPLES":{const r=[...a.drumSamples],[i]=r.splice(n.payload.fromIndex,1);return r.splice(n.payload.toIndex,0,i),{...a,drumSamples:r}}case"SWAP_DRUM_SAMPLES":{const{fromIndex:r,toIndex:i}=n.payload,s=[...a.drumSamples];return[s[r],s[i]]=[s[i],s[r]],s[r]?.isAssigned&&(s[r]={...s[r],assignedKey:r}),s[i]?.isAssigned&&(s[i]={...s[i],assignedKey:i}),{...a,drumSamples:s}}case"ADD_UNASSIGNED_DRUM_SAMPLE":{if(!n.payload.audioBuffer||typeof n.payload.audioBuffer.duration!="number")return console.error("Invalid audioBuffer provided to ADD_UNASSIGNED_DRUM_SAMPLE:",n.payload.audioBuffer),a;if(!n.payload.metadata||typeof n.payload.metadata.duration!="number")return console.error("Invalid metadata provided to ADD_UNASSIGNED_DRUM_SAMPLE:",n.payload.metadata),a;const r=0,i=n.payload.audioBuffer.duration,s=r,c=i,d={...Pa(a.drumSamples.length,!1),file:n.payload.file,audioBuffer:n.payload.audioBuffer,name:n.payload.file.name,isLoaded:!0,inPoint:s,outPoint:c,originalBitDepth:n.payload.metadata.bitDepth,originalSampleRate:n.payload.metadata.sampleRate,originalChannels:n.payload.metadata.channels,fileSize:n.payload.file.size,duration:n.payload.audioBuffer.duration,isFloat:n.payload.metadata.isFloat,hasBeenEdited:!1};return{...a,drumSamples:[...a.drumSamples,d]}}case"ASSIGN_DRUM_SAMPLE":{const{sampleIndex:r,targetKeyIndex:i}=n.payload;if(r<0||r>=a.drumSamples.length)return console.error("Invalid sample index:",r),a;if(i<0||i>=24)return console.error("Invalid target key index:",i),a;const s=[...a.drumSamples],c=s[r];if(!c?.isLoaded)return console.error("Cannot assign unloaded sample"),a;const d=s.findIndex(f=>f.isAssigned&&f.assignedKey===i);return d!==-1&&(s[d]={...s[d],isAssigned:!1,assignedKey:void 0}),s[r]={...c,isAssigned:!0,assignedKey:i},{...a,drumSamples:s}}case"UNASSIGN_DRUM_SAMPLE":{const r=n.payload;if(r<0||r>=a.drumSamples.length)return console.error("Invalid sample index:",r),a;const i=[...a.drumSamples];return i[r]={...i[r],isAssigned:!1,assignedKey:void 0},{...a,drumSamples:i}}case"CLEAR_ALL_DRUM_SAMPLES":{const r=Array.from({length:24},(i,s)=>Pa(s,!0));return{...a,drumSamples:r}}case"IMPORT_OP1_DRUM_PRESET":{const r=[...a.drumSamples],i=c=>{for(let d=0;d<24;d++){const f=c[d];if(!f||!f.isLoaded)return d}return null};for(const c of n.payload.samples){const f=c.audioBuffer.duration,m=0,h=f,b=i(r);if(b!==null)r[b]={...Pa(b,!0),file:c.file,audioBuffer:c.audioBuffer,name:c.name,isLoaded:!0,inPoint:m,outPoint:h,originalBitDepth:c.metadata.bitDepth,originalSampleRate:c.metadata.sampleRate,originalChannels:c.metadata.channels,fileSize:c.file.size,duration:c.audioBuffer.duration,isFloat:c.metadata.isFloat,hasBeenEdited:!1};else{const w={...Pa(r.length,!1),file:c.file,audioBuffer:c.audioBuffer,name:c.name,isLoaded:!0,inPoint:m,outPoint:h,originalBitDepth:c.metadata.bitDepth,originalSampleRate:c.metadata.sampleRate,originalChannels:c.metadata.channels,fileSize:c.file.size,duration:c.audioBuffer.duration,hasBeenEdited:!1};r.push(w)}}const s={...a.drumSettings,presetName:n.payload.presetName};return{...a,drumSamples:r,drumSettings:s}}case"LOAD_MULTISAMPLE_FILE":{if(!n.payload.metadata||typeof n.payload.metadata.duration!="number")return console.error("Invalid metadata provided to LOAD_MULTISAMPLE_FILE:",n.payload.metadata),a;if(a.multisampleFiles.length>=24)return a;let r=60,i="C4";if(n.payload.rootNoteOverride!==void 0)r=n.payload.rootNoteOverride,i=Lr(r,a.midiNoteMapping);else if(n.payload.metadata.midiNote>=0)r=n.payload.metadata.midiNote,i=Lr(n.payload.metadata.midiNote,a.midiNoteMapping);else try{const[y,g]=Af(n.payload.file.name,a.midiNoteMapping);g>=0&&g<=127&&(r=g,i=Lr(g,a.midiNoteMapping))}catch{i=Lr(r,a.midiNoteMapping)}const s=0,c=n.payload.metadata.duration,d=n.payload.metadata.hasLoopData?n.payload.metadata.loopStart:n.payload.metadata.duration*.2,f=n.payload.metadata.hasLoopData?n.payload.metadata.loopEnd:n.payload.metadata.duration*.8;let m=s,h=c,b=d,w=f;if(a.multisampleSettings.autoZeroCrossing&&n.payload.audioBuffer){const y=Li(n.payload.audioBuffer,s,c,d,f);m=y.inPoint,h=y.outPoint,b=y.loopStart||d,w=y.loopEnd||f,y.adjustments.length>0&&console.log(`Applied zero-crossing adjustments to ${n.payload.file.name}:`,y.adjustments)}const S={...uE,file:n.payload.file,audioBuffer:n.payload.audioBuffer,name:n.payload.file.name,isLoaded:n.payload.audioBuffer!==null,rootNote:r,note:i,inPoint:m,outPoint:h,loopStart:b,loopEnd:w,originalBitDepth:n.payload.metadata.bitDepth,originalSampleRate:n.payload.metadata.sampleRate,originalChannels:n.payload.metadata.channels,fileSize:n.payload.metadata.fileSize,duration:n.payload.metadata.duration,isFloat:n.payload.metadata.isFloat},x=[...a.multisampleFiles,S];return x.sort((y,g)=>g.rootNote-y.rootNote),{...a,multisampleFiles:x}}case"CLEAR_MULTISAMPLE_FILE":{const r=a.multisampleFiles.filter((i,s)=>s!==n.payload);return{...a,multisampleFiles:r}}case"UPDATE_MULTISAMPLE_FILE":{const r=[...a.multisampleFiles];return r[n.payload.index]={...r[n.payload.index],...n.payload.updates},"rootNote"in n.payload.updates&&r.sort((i,s)=>s.rootNote-i.rootNote),{...a,multisampleFiles:r}}case"REORDER_MULTISAMPLE_FILES":{const r=[...a.multisampleFiles],[i]=r.splice(n.payload.fromIndex,1);return r.splice(n.payload.toIndex,0,i),{...a,multisampleFiles:r}}case"SET_SELECTED_MULTISAMPLE":return{...a,selectedMultisample:n.payload};case"SET_LOADING":return{...a,isLoading:n.payload};case"SET_ERROR":return{...a,error:n.payload};case"ADD_NOTIFICATION":return{...a,notifications:[...a.notifications,n.payload]};case"REMOVE_NOTIFICATION":return{...a,notifications:a.notifications.filter(r=>r.id!==n.payload)};case"SET_IMPORTED_DRUM_PRESET":return{...a,importedDrumPreset:n.payload};case"SET_IMPORTED_MULTISAMPLE_PRESET":return{...a,importedMultisamplePreset:n.payload};case"TOGGLE_DRUM_KEYBOARD_PIN":return{...a,isDrumKeyboardPinned:!a.isDrumKeyboardPinned};case"TOGGLE_MULTISAMPLE_KEYBOARD_PIN":return{...a,isMultisampleKeyboardPinned:!a.isMultisampleKeyboardPinned};case"RESTORE_SESSION":{const r=Math.max(...n.payload.drumSamples.map(c=>c.originalIndex),23),i=Array.from({length:r+1},(c,d)=>{const f=n.payload.drumSamples.find(h=>h.originalIndex===d);if(f)return{file:f.file,audioBuffer:f.audioBuffer,name:f.name,isLoaded:f.isLoaded,isAssigned:f.isAssigned,assignedKey:f.assignedKey,inPoint:f.inPoint,outPoint:f.outPoint,playmode:f.playmode,reverse:f.reverse,tune:f.tune,pan:f.pan,gain:f.gain,hasBeenEdited:f.hasBeenEdited,originalBitDepth:f.originalBitDepth,originalSampleRate:f.originalSampleRate,originalChannels:f.originalChannels,fileSize:f.fileSize,duration:f.duration,isFloat:f.isFloat};const m=d<24;return Pa(d,m)});return{...a,drumSettings:n.payload.drumSettings,multisampleSettings:n.payload.multisampleSettings,drumSamples:i,multisampleFiles:n.payload.multisampleFiles,selectedMultisample:n.payload.selectedMultisample,isDrumKeyboardPinned:n.payload.isDrumKeyboardPinned,isMultisampleKeyboardPinned:n.payload.isMultisampleKeyboardPinned,isSessionRestorationModalOpen:!1,sessionInfo:null}}case"SET_SESSION_RESTORATION_MODAL_OPEN":return{...a,isSessionRestorationModalOpen:n.payload};case"SET_SESSION_INFO":return{...a,sessionInfo:n.payload};case"SET_MIDI_NOTE_MAPPING":{try{kn.setCookie(Sn.MIDI_NOTE_MAPPING,n.payload,30)}catch(i){console.error("Failed to save MIDI note mapping to cookie:",i)}const r=a.multisampleFiles.map(i=>({...i,note:Lr(i.rootNote,n.payload)}));return{...a,midiNoteMapping:n.payload,multisampleFiles:r}}default:return a}}const ob=L.createContext(null);function hE({children:a}){const[n,r]=L.useReducer(pE,mE);return u.jsx(ob.Provider,{value:{state:n,dispatch:r},children:a})}function un(){const a=L.useContext(ob);if(!a)throw new Error("useAppContext must be used within AppContextProvider");return a}function cs({isOpen:a,message:n,onConfirm:r,onCancel:i}){const[s,c]=ne.useState(!1),d=async()=>{c(!0);try{await r()}catch(f){console.error("Error in confirmation callback:",f)}finally{c(!1)}};return a?u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,fontFamily:'"Montserrat", "Arial", sans-serif'},onClick:i,children:u.jsxs("div",{style:{backgroundColor:"var(--color-bg-primary)",borderRadius:"6px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",maxWidth:"400px",width:"90%",margin:"0 1rem",overflow:"hidden"},onClick:f=>f.stopPropagation(),children:[u.jsx("div",{style:{padding:"1.5rem 1.5rem 1rem 1.5rem",borderBottom:"1px solid var(--color-border-subtle)"},children:u.jsxs("h3",{style:{margin:"0",fontSize:"1.25rem",fontWeight:"300",color:"var(--color-text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"var(--color-text-primary)",fontSize:"1.25rem"}}),"confirm action"]})}),u.jsx("div",{style:{padding:"1.5rem",color:"var(--color-text-secondary)",fontSize:"0.95rem",lineHeight:"1.5"},children:n}),u.jsxs("div",{style:{padding:"1rem 1.5rem 1.5rem 1.5rem",display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:i,disabled:s,style:{padding:"0.625rem 1.25rem",border:"1px solid var(--color-border-medium)",borderRadius:"3px",backgroundColor:"var(--color-bg-primary)",color:s?"var(--color-border-medium)":"var(--color-text-secondary)",fontSize:"0.875rem",fontWeight:"500",cursor:s?"not-allowed":"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px",opacity:s?.6:1},onMouseEnter:f=>{s||(f.currentTarget.style.backgroundColor="var(--color-bg-secondary)",f.currentTarget.style.borderColor="var(--color-border-medium)",f.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:f=>{s||(f.currentTarget.style.backgroundColor="var(--color-bg-primary)",f.currentTarget.style.borderColor="var(--color-border-medium)",f.currentTarget.style.color="var(--color-text-secondary)")},children:"cancel"}),u.jsxs("button",{onClick:d,disabled:s,style:{padding:"0.625rem 1.25rem",border:"none",borderRadius:"3px",backgroundColor:s?"var(--color-border-medium)":"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.875rem",fontWeight:"500",cursor:s?"not-allowed":"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px",opacity:s?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onMouseEnter:f=>{s||(f.currentTarget.style.backgroundColor="var(--color-interactive-dark)",f.currentTarget.style.transform="translateY(-1px)",f.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)")},onMouseLeave:f=>{s||(f.currentTarget.style.backgroundColor="var(--color-interactive-focus)",f.currentTarget.style.transform="translateY(0)",f.currentTarget.style.boxShadow="none")},children:[s&&u.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"0.875rem"}}),s?"processing...":"ok"]})]})]})}):null}function sb({isOpen:a,onClose:n,onSave:r,maxDuration:i=20}){const[s,c]=L.useState([]),[d,f]=L.useState(""),[m,h]=L.useState(!1),[b,w]=L.useState(!1),[S,x]=L.useState(0),[y,g]=L.useState(null),[E,R]=L.useState(""),[O,A]=L.useState(""),N=L.useRef(null),M=L.useRef(null),z=L.useRef([]),F=L.useRef(null),B=L.useRef(null),I=L.useRef(null),W=L.useRef(null),ee=L.useRef(null),C=L.useCallback(async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0}).then(q=>{q.getTracks().forEach(Ee=>Ee.stop())});const le=(await navigator.mediaDevices.enumerateDevices()).filter(q=>q.kind==="audioinput").map(q=>({deviceId:q.deviceId,label:q.label||`microphone ${q.deviceId.slice(0,8)}`}));c(le),le.length>0&&!d&&f(le[0].deviceId)}catch(Z){console.error("Error getting audio devices:",Z),R("failed to access audio devices. please check permissions."),c([{deviceId:"default",label:"default microphone"}]),f("default")}},[]);L.useEffect(()=>{a?(_(),C()):J()},[a,C]),L.useEffect(()=>{if(a){const Z=new Date,le=Z.getFullYear().toString()+(Z.getMonth()+1).toString().padStart(2,"0")+Z.getDate().toString().padStart(2,"0"),q=Z.getHours().toString().padStart(2,"0")+Z.getMinutes().toString().padStart(2,"0")+Z.getSeconds().toString().padStart(2,"0");A(`rec-sample-${le}-${q}-note`)}},[a]);const J=()=>{M.current&&(M.current.getTracks().forEach(Z=>Z.stop()),M.current=null),N.current&&(N.current=null),F.current&&(clearInterval(F.current),F.current=null),I.current&&(I.current.close(),I.current=null),ee.current&&(cancelAnimationFrame(ee.current),ee.current=null)},_=()=>{h(!1),w(!1),x(0),g(null),R(""),z.current=[],J()},K=async()=>{try{R(""),console.log("Starting recording with device:",d);const Z={audio:d&&d!=="default"?{deviceId:{exact:d}}:!0};M.current=await navigator.mediaDevices.getUserMedia(Z);const le={};MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?le.mimeType="audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")&&(le.mimeType="audio/webm"),N.current=new MediaRecorder(M.current,le),z.current=[],N.current.ondataavailable=Ee=>{Ee.data.size>0&&z.current.push(Ee.data)},N.current.onstop=async()=>{const Ee=new Blob(z.current,{type:N.current?.mimeType||"audio/webm"});await oe(Ee)},Y(),N.current.start(100),h(!0);const q=Date.now();F.current=setInterval(()=>{const Ee=(Date.now()-q)/1e3;x(Ee),Ee>=i&&P()},100)}catch(Z){console.error("Error starting recording:",Z),R("failed to start recording. please check microphone permissions.")}},P=()=>{N.current&&m&&(N.current.stop(),h(!1),F.current&&(clearInterval(F.current),F.current=null),ee.current&&(cancelAnimationFrame(ee.current),ee.current=null))},Y=()=>{if(!M.current||!B.current)return;I.current=new AudioContext,W.current=I.current.createAnalyser(),I.current.createMediaStreamSource(M.current).connect(W.current),W.current.fftSize=2048;const le=W.current.frequencyBinCount,q=new Uint8Array(le),Ee=()=>{if(!W.current||!B.current)return;const Fe=B.current,pe=Fe.getContext("2d");if(!pe)return;W.current.getByteTimeDomainData(q),pe.fillStyle="#f8f9fa",pe.fillRect(0,0,Fe.width,Fe.height),pe.lineWidth=2,pe.strokeStyle=m?"#333":"#666",pe.beginPath();const de=Fe.width/le;let Re=0;for(let me=0;me<le;me++){const Ae=q[me]/128*Fe.height/2;me===0?pe.moveTo(Re,Ae):pe.lineTo(Re,Ae),Re+=de}pe.stroke(),m&&(ee.current=requestAnimationFrame(Ee))};Ee()},oe=async Z=>{try{const le=await Z.arrayBuffer(),Ee=await new AudioContext().decodeAudioData(le);g(Ee),te(Ee)}catch(le){console.error("Error processing recorded audio:",le),R("failed to process recorded audio.")}},te=Z=>{const le=B.current;if(!le)return;const q=le.getContext("2d");if(!q)return;const Ee=le.width,Fe=le.height,pe=Z.getChannelData(0);q.fillStyle="#f8f9fa",q.fillRect(0,0,Ee,Fe);const de=Math.ceil(pe.length/Ee),Re=Fe/2;q.fillStyle="#333333",q.beginPath();for(let me=0;me<Ee;me++){let _e=1,Ae=-1;for(let T=0;T<de;T++){const G=pe[me*de+T];G<_e&&(_e=G),G>Ae&&(Ae=G)}q.rect(me,(1+_e)*Re,1,Math.max(1,(Ae-_e)*Re))}q.fill()},U=async()=>{if(y)try{const Z=new AudioContext,le=Z.createBufferSource();le.buffer=y,le.connect(Z.destination),w(!0),le.start(),le.onended=()=>{w(!1)},setTimeout(()=>{w(!1)},y.duration*1e3)}catch(Z){console.error("Error playing recording:",Z),R("failed to play recording.")}},k=()=>{y&&(r(y,O),n())},$=Z=>{const le=Math.floor(Z/60),q=Math.floor(Z%60);return`${le.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`};return a?u.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,fontFamily:'"Montserrat", "Arial", sans-serif'},onClick:n,children:[u.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",maxWidth:"500px",width:"90%",margin:"0 1rem",overflow:"hidden"},onClick:Z=>Z.stopPropagation(),children:[u.jsx("div",{style:{padding:"1.5rem 1.5rem 1rem 1.5rem",borderBottom:"1px solid #f0f0f0"},children:u.jsxs("h3",{style:{margin:"0",fontSize:"1.25rem",fontWeight:"300",color:"#222",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-microphone",style:{color:"var(--color-accent-primary)",fontSize:"1.25rem"}}),"record sample"]})}),u.jsxs("div",{style:{padding:"1.5rem",color:"#555",fontSize:"0.95rem",lineHeight:"1.5"},children:[u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#333",fontWeight:"500"},children:"input device"}),u.jsx("select",{value:d,onChange:Z=>f(Z.target.value),disabled:m,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"0.9rem",backgroundColor:"#fff",color:"#333"},children:s.length===0?u.jsx("option",{value:"",children:"loading devices..."}):s.map(Z=>u.jsx("option",{value:Z.deviceId,children:Z.label},Z.deviceId))})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#333",fontWeight:"500"},children:"filename"}),u.jsx("input",{type:"text",value:O,onChange:Z=>A(Z.target.value),disabled:m,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"0.9rem",backgroundColor:"#fff",color:"#333",boxSizing:"border-box"},placeholder:"enter filename for the recording"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"3px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[m&&u.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"var(--color-accent-primary)",borderRadius:"50%",animation:"pulse 1s infinite"}}),u.jsx("span",{style:{fontSize:"1.1rem",color:m?"var(--color-accent-primary)":"#333"},children:m?"recording...":y?"recording complete":"ready to record"})]}),u.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:m?"var(--color-accent-primary)":"#333",animation:m?"pulse 1s infinite":"none",minWidth:"60px",textAlign:"right",paddingRight:"8px"},children:$(S)})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center",marginBottom:"0.5rem"},children:[!m&&!y&&u.jsxs("button",{onClick:K,style:{padding:"0.625rem 1.25rem",border:"none",borderRadius:"3px",backgroundColor:"var(--color-accent-primary)",color:"#fff",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="var(--color-accent-primary)",Z.currentTarget.style.transform="translateY(-1px)",Z.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="var(--color-accent-primary)",Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},children:[u.jsx("i",{className:"fas fa-microphone",style:{color:"#fff"}}),"start recording"]}),m&&u.jsxs("button",{onClick:P,style:{padding:"0.625rem 1.25rem",border:"1px solid #d1d5db",borderRadius:"3px",backgroundColor:"#fff",color:"#6b7280",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#f9fafb",Z.currentTarget.style.borderColor="#9ca3af",Z.currentTarget.style.color="#374151"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#fff",Z.currentTarget.style.borderColor="#d1d5db",Z.currentTarget.style.color="#6b7280"},children:[u.jsx("i",{className:"fas fa-stop"}),"stop recording"]}),y&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:U,disabled:b,style:{padding:"0.625rem 1.25rem",border:"1px solid #d1d5db",borderRadius:"3px",backgroundColor:"#fff",color:b?"#9ca3af":"#6b7280",fontSize:"0.875rem",fontWeight:"500",cursor:b?"not-allowed":"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",gap:"0.5rem",opacity:b?.6:1},onMouseEnter:Z=>{b||(Z.currentTarget.style.backgroundColor="#f9fafb",Z.currentTarget.style.borderColor="#9ca3af",Z.currentTarget.style.color="#374151")},onMouseLeave:Z=>{b||(Z.currentTarget.style.backgroundColor="#fff",Z.currentTarget.style.borderColor="#d1d5db",Z.currentTarget.style.color="#6b7280")},children:[u.jsx("i",{className:`fas fa-${b?"pause":"play"}`}),b?"playing...":"play"]}),u.jsxs("button",{onClick:_,style:{padding:"0.625rem 1.25rem",border:"1px solid #d1d5db",borderRadius:"3px",backgroundColor:"#fff",color:"#6b7280",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#f9fafb",Z.currentTarget.style.borderColor="#9ca3af",Z.currentTarget.style.color="#374151"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#fff",Z.currentTarget.style.borderColor="#d1d5db",Z.currentTarget.style.color="#6b7280"},children:[u.jsx("i",{className:"fas fa-redo"}),"retake"]})]})]}),!m&&!y&&u.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",textAlign:"center",marginBottom:"1.5rem"},children:["maximum recording time: ",i,"s"]}),u.jsx("div",{style:{marginBottom:"1rem"},children:u.jsx("canvas",{ref:B,width:400,height:80,style:{width:"100%",height:"80px",border:"1px solid #e0e0e0",borderRadius:"3px",backgroundColor:"#fff"}})}),E&&u.jsx("div",{style:{padding:"1rem",backgroundColor:"#f5f5f5",border:"1px solid #ccc",borderRadius:"3px",color:"#333",fontSize:"0.9rem",marginBottom:"1rem"},children:E})]}),u.jsxs("div",{style:{padding:"1rem 1.5rem 1.5rem 1.5rem",display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:n,style:{padding:"0.625rem 1.25rem",border:"1px solid #d1d5db",borderRadius:"3px",backgroundColor:"#fff",color:"#6b7280",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#f9fafb",Z.currentTarget.style.borderColor="#9ca3af",Z.currentTarget.style.color="#374151"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#fff",Z.currentTarget.style.borderColor="#d1d5db",Z.currentTarget.style.color="#6b7280"},children:"cancel"}),y&&u.jsx("button",{onClick:k,style:{padding:"0.625rem 1.25rem",border:"none",borderRadius:"3px",backgroundColor:"#333",color:"#fff",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#555",Z.currentTarget.style.transform="translateY(-1px)",Z.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#333",Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},children:"save"})]})]}),u.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.3; }
          100% { opacity: 1; }
        }
      `})]}):null}function gE({sampleRate:a,bitDepth:n,channels:r,onSampleRateChange:i,onBitDepthChange:s,onChannelsChange:c,samples:d,size:f="sm",disabled:m=!1,isMobile:h=!1}){const b=L.useMemo(()=>{const S=d.filter(z=>z&&z.isLoaded&&z.originalBitDepth&&z.originalSampleRate&&z.originalChannels);if(S.length===0)return{sampleRate:{},bitDepth:{},channels:{}};let x=0,y=0,g=!1,E=!0,R=!0,O=null,A=null,N=null;for(const z of S)x=Math.max(x,z.originalBitDepth),y=Math.max(y,z.originalSampleRate),z.originalChannels>1&&(g=!0),O===null?O=z.originalBitDepth:z.originalBitDepth!==O&&(E=!1),A===null?A=z.originalSampleRate:z.originalSampleRate!==A&&(R=!1),N===null?N=z.originalChannels:z.originalChannels;const M={sampleRate:{},bitDepth:{},channels:{}};return y<48e3&&(y<44100&&(M.sampleRate[44100]=!0),y<22050&&(M.sampleRate[22050]=!0),y<11025&&(M.sampleRate[11025]=!0)),R&&A&&A!==48e3&&(M.sampleRate[A.toString()]=!0),x<=16&&(M.bitDepth[24]=!0),x<=12&&(M.bitDepth[16]=!0),x<=8&&(M.bitDepth[12]=!0),E&&O&&(M.bitDepth[O.toString()]=!0),g||(M.channels[1]=!0),M},[d]);ne.useEffect(()=>{b.sampleRate[a.toString()]&&i("0")},[b.sampleRate,a,i]),ne.useEffect(()=>{b.bitDepth[n.toString()]&&s("0")},[b.bitDepth,n,s]),ne.useEffect(()=>{b.channels[r.toString()]&&c("0")},[b.channels,r,c]);const w={display:"flex",flexDirection:h?"column":"row",gap:h?"0.75rem":"1rem",alignItems:h?"stretch":"end",width:"100%"};return u.jsxs("div",{style:w,children:[u.jsxs("div",{style:{flex:h?"none":"1",width:h?"100%":"auto"},children:[u.jsx("div",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"sample rate"}),u.jsxs(Ir,{id:"sample-rate",labelText:"",value:a.toString(),onChange:S=>i(S.target.value),size:f,disabled:m,style:{width:"100%"},children:[u.jsx(Kt,{value:"0",text:"original"}),u.jsx(Kt,{value:"44100",text:"44.1 khz",disabled:b.sampleRate[44100]}),u.jsx(Kt,{value:"22050",text:"22 khz",disabled:b.sampleRate[22050]}),u.jsx(Kt,{value:"11025",text:"11 khz",disabled:b.sampleRate[11025]})]})]}),u.jsxs("div",{style:{flex:h?"none":"1",width:h?"100%":"auto"},children:[u.jsx("div",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"bit depth"}),u.jsxs(Ir,{id:"bit-depth",labelText:"",value:n.toString(),onChange:S=>s(S.target.value),size:f,disabled:m,style:{width:"100%"},children:[u.jsx(Kt,{value:"0",text:"original"}),u.jsx(Kt,{value:"24",text:"24-bit",disabled:b.bitDepth[24]}),u.jsx(Kt,{value:"16",text:"16-bit",disabled:b.bitDepth[16]}),u.jsx(Kt,{value:"12",text:"12-bit",disabled:b.bitDepth[12]}),u.jsx(Kt,{value:"8",text:"8-bit",disabled:b.bitDepth[8]})]})]}),u.jsxs("div",{style:{flex:h?"none":"1",width:h?"100%":"auto"},children:[u.jsx("div",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"channels"}),u.jsxs(Ir,{id:"channels",labelText:"",value:r.toString(),onChange:S=>c(S.target.value),size:f,disabled:m,style:{width:"100%"},children:[u.jsx(Kt,{value:"0",text:"original"}),u.jsx(Kt,{value:"1",text:"mono",disabled:b.channels[1]})]})]})]})}const yE=({content:a,parentRef:n,isVisible:r,maxWidth:i="300px"})=>{const s=L.useRef(null),[c,d]=L.useState({top:-9999,left:-9999}),[f,m]=L.useState(!1);return L.useEffect(()=>{if(!r){m(!1);return}const h=n.current,b=s.current;!h||!b||requestAnimationFrame(()=>{const w=h.getBoundingClientRect(),S=b.getBoundingClientRect();let x=w.top-S.height-10,y=w.left+w.width/2-S.width/2;y<10&&(y=10),x<10&&(x=w.bottom+10),d({top:x,left:y}),requestAnimationFrame(()=>{m(!0)})})},[a,n,r]),S0.createPortal(u.jsxs("div",{ref:s,style:{position:"fixed",top:`${c.top}px`,left:`${c.left}px`,pointerEvents:"none",zIndex:1e4,opacity:f&&r?1:0,transition:f?"opacity 0.3s ease, transform 0.3s ease":"none",transform:f&&r?"translateY(0)":"translateY(-5px)"},className:"enhanced-tooltip-wrapper",children:[u.jsx("div",{className:"enhanced-tooltip-content",style:{maxWidth:i},children:a}),u.jsx("div",{className:"enhanced-tooltip-arrow"})]}),document.body)},Zi=({content:a,children:n,isVisible:r,maxWidth:i})=>{const s=L.useRef(null);return u.jsxs("div",{ref:s,style:{display:"inline-block"},children:[n,u.jsx(yE,{content:a,parentRef:s,isVisible:r,maxWidth:i})]})};function lb({type:a,sampleRate:n,bitDepth:r,channels:i,onSampleRateChange:s,onBitDepthChange:c,onChannelsChange:d,samples:f,normalize:m,normalizeLevel:h,onNormalizeChange:b,onNormalizeLevelChange:w,autoZeroCrossing:S,onAutoZeroCrossingChange:x,cutAtLoopEnd:y=!1,onCutAtLoopEndChange:g,onResetAudioSettingsConfirm:E,gain:R=0,onGainChange:O}){const[A,N]=L.useState(!1),[M,z]=L.useState(!1),[F,B]=L.useState(!1);L.useEffect(()=>{const ee=()=>{N(window.innerWidth<768)};return ee(),window.addEventListener("resize",ee),()=>window.removeEventListener("resize",ee)},[]);const I=n!==0||r!==0||i!==0||m!==!1||h!==0||S!==!1||a==="multisample"&&y!==!1||a==="multisample"&&R!==0,W=f.some(ee=>ee.isLoaded);return u.jsxs("div",{style:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)",borderRadius:"15px",padding:A?"1rem":"1.5rem",marginBottom:"1rem"},children:[u.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"var(--color-text-primary)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-cog",style:{fontSize:"1rem",color:"var(--color-text-secondary)"}}),"audio processing"]}),u.jsx("div",{style:{marginBottom:"1.5rem"},children:u.jsx(gE,{sampleRate:n,bitDepth:r,channels:i,onSampleRateChange:s,onBitDepthChange:c,onChannelsChange:d,samples:f})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:A?"1fr":"1fr 1fr",gap:"1rem",marginBottom:"1rem",alignItems:"start"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.25rem"},children:[u.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text-primary)"},children:"normalization"}),u.jsx("div",{style:{padding:"4px"},children:u.jsx($i,{id:"normalize-toggle",labelA:"off",labelB:"on",toggled:m,onToggle:b,size:"sm"})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[u.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.5rem",textAlign:A?"center":"left",width:"100%"},children:["normalization level: ",h.toFixed(1)," dbfs"]}),u.jsx("div",{style:{width:A?"90%":"100%",margin:A?"0 auto":void 0},children:u.jsx(vn,{id:"normalize-level",min:-6,max:0,step:.1,value:h,onChange:({value:ee})=>w(ee),hideTextInput:!0,style:{width:"100%"}})}),u.jsx("style",{children:`
            #normalize-level .cds--slider__track {
              background: linear-gradient(to right, var(--color-bg-slider-track) 0%, var(--color-interactive-secondary) 100%) !important;
            }
            #normalize-level .cds--slider__filled-track {
              background: var(--color-interactive-dark) !important;
            }
            #normalize-level .cds--slider__thumb {
              background: var(--color-interactive-dark) !important;
              border: 2px solid var(--color-interactive-dark) !important;
            }
            #normalize-level .cds--slider__thumb:hover {
              background: var(--color-text-primary) !important;
              border-color: var(--color-text-primary) !important;
            }
          `})]}),a==="multisample"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.25rem"},children:[u.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text-primary)"},children:"trim to loop end"}),u.jsx("div",{style:{padding:"4px"},children:u.jsx($i,{id:"cut-loop-toggle",labelA:"off",labelB:"on",toggled:y,onToggle:g||(()=>{}),size:"sm"})}),u.jsx("style",{children:`
                #cut-loop-toggle .cds--toggle-input__appearance {
                  background-color: var(--color-bg-slider-track) !important;
                }
                #cut-loop-toggle .cds--toggle-input__appearance:before {
                  background-color: var(--color-interactive-secondary) !important;
                }
                #cut-loop-toggle .cds--toggle-input:checked + .cds--toggle-input__appearance {
                  background-color: var(--color-interactive-dark) !important;
                }
                #cut-loop-toggle .cds--toggle-input:checked + .cds--toggle-input__appearance:before {
                  background-color: var(--color-bg-primary) !important;
                }
                #cut-loop-toggle .cds--toggle__text--off,
                #cut-loop-toggle .cds--toggle__text--on {
                  color: var(--color-interactive-secondary) !important;
                }
              `})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[u.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.5rem",textAlign:A?"center":"left",width:"100%"},children:["gain: ",R," dbfs"]}),u.jsx("div",{style:{width:A?"90%":"100%",margin:A?"0 auto":void 0},children:u.jsx(vn,{id:"gain-slider",min:-30,max:20,step:1,value:R,onChange:({value:ee})=>O?.(ee),hideTextInput:!0,style:{width:"100%"}})}),u.jsx("style",{children:`
                #gain-slider .cds--slider__track {
                  background: linear-gradient(to right, var(--color-bg-slider-track) 0%, var(--color-interactive-secondary) 100%) !important;
                }
                #gain-slider .cds--slider__filled-track {
                  background: var(--color-interactive-dark) !important;
                }
                #gain-slider .cds--slider__thumb {
                  background: var(--color-interactive-dark) !important;
                  border: 2px solid var(--color-interactive-dark) !important;
                }
                #gain-slider .cds--slider__thumb:hover {
                  background: var(--color-text-primary) !important;
                  border-color: var(--color-text-primary) !important;
                }
              `})]})]})]}),u.jsx("div",{style:{display:"flex",justifyContent:A?"center":"flex-start",marginBottom:"1rem"},children:u.jsx(Zi,{content:u.jsx("div",{children:u.jsx("p",{children:"snap all sample markers to zero crossings for cleaner audio. this does not affect future imports."})}),isVisible:M,children:u.jsxs("button",{onClick:()=>{B(!0),z(!1),x(),setTimeout(()=>B(!1),500)},disabled:!W,style:{minHeight:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:F?"var(--color-interactive-dark)":"var(--color-bg-primary)",color:W?F?"var(--color-bg-primary)":"var(--color-interactive-secondary)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:W?"pointer":"not-allowed",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:W?1:.6,width:A?"100%":"250px"},onMouseEnter:ee=>{W&&!F&&(ee.currentTarget.style.backgroundColor="var(--color-bg-secondary)",ee.currentTarget.style.borderColor="var(--color-border-medium)",ee.currentTarget.style.color="var(--color-interactive-dark)",z(!0))},onMouseLeave:ee=>{W&&!F&&(ee.currentTarget.style.backgroundColor="var(--color-bg-primary)",ee.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",ee.currentTarget.style.color="var(--color-interactive-secondary)",z(!1))},children:[u.jsx("i",{className:`fas ${F?"fa-check":"fa-wave-square"}`,style:{fontSize:"1rem"}}),F?"applied":"auto zero crossing"]})})}),E&&u.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:A?"center":"flex-end",flexDirection:A?"column":"row",marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border-light)"},children:u.jsxs("button",{onClick:I?E:void 0,disabled:!I,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:I?"var(--color-interactive-secondary)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:I?"pointer":"not-allowed",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:I?1:.6,width:A?"100%":"auto"},onMouseEnter:ee=>{I&&(ee.currentTarget.style.backgroundColor="var(--color-bg-secondary)",ee.currentTarget.style.borderColor="var(--color-border-medium)",ee.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:ee=>{I&&(ee.currentTarget.style.backgroundColor="var(--color-bg-primary)",ee.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",ee.currentTarget.style.color="var(--color-interactive-secondary)")},children:[u.jsx("i",{className:"fas fa-undo",style:{fontSize:"1rem"}}),"reset audio settings"]})})]})}function bE({type:a,className:n=""}){const{state:r}=un(),[i,s]=L.useState(0),[c,d]=L.useState(!1),f=a==="drum"?r.drumSamples.filter(S=>S&&S.audioBuffer).map(S=>S.audioBuffer):r.multisampleFiles.filter(S=>S&&S.audioBuffer).map(S=>S.audioBuffer),m=a==="drum"?r.drumSettings:r.multisampleSettings;L.useEffect(()=>{(async()=>{if(f.length===0){s(0);return}d(!0);try{const x=await eb(f,{sampleRate:m.sampleRate,bitDepth:m.bitDepth,channels:m.channels});s(x)}catch(x){console.error("Failed to calculate preset size:",x),s(0)}finally{d(!1)}})()},[f.length,m.sampleRate,m.bitDepth,m.channels]);const h=8*1024*1024,b=Math.min(100,i/h*100),w=rb(i);return u.jsxs("div",{className:`preset-size-indicator ${n}`,style:{marginBottom:"1rem",width:"100%"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--color-text-primary)"},children:"preset size estimate"}),u.jsx("span",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)"},children:c?u.jsx(H0,{description:"Calculating..."}):Mf(i)})]}),u.jsxs("div",{style:{marginBottom:"0.5rem",position:"relative"},children:[u.jsxs("div",{style:{width:"100%",height:"8px",backgroundColor:"var(--color-progress-track)",borderRadius:"4px",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{width:`${Math.min(100,b)}%`,height:"100%",backgroundColor:"var(--color-text-secondary)",borderRadius:"4px",transition:"width 0.3s ease"}}),u.jsx("div",{style:{position:"absolute",right:0,top:0,width:"2px",height:"100%",backgroundColor:"var(--color-text-secondary)",zIndex:1}})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.25rem",fontSize:"0.7rem",color:"var(--color-text-info)"},children:[u.jsx("span",{children:"0 mb"}),u.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx("i",{className:"fas fa-info-circle",style:{fontSize:"0.6rem",color:"var(--color-text-info)",cursor:"help"},title:"the OP-XY has 64mb allocated to samples across all presets. the 8mb limit per preset is recommended to prevent memory issues and note dropping. 16-bit samples load faster than 24-bit and help stay within memory constraints."}),"8.0 mb"]})]})]}),w&&u.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)",fontStyle:"italic",marginTop:"0.25rem"},children:w}),(m.sampleRate!==0||m.bitDepth!==0||m.channels!==0)&&u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)",marginTop:"0.25rem"},children:[f.length," sample",f.length!==1?"s":"",m.sampleRate!==0&&u.jsxs(u.Fragment,{children:["  ",m.sampleRate===44100?"44.1 khz":m.sampleRate===22050?"22.1 khz":m.sampleRate===11025?"11 khz":`${m.sampleRate/1e3} khz`]}),m.bitDepth!==0&&u.jsxs(u.Fragment,{children:["  ",m.bitDepth,"bit"]}),m.channels!==0&&u.jsxs(u.Fragment,{children:["  ",m.channels===1?"mono":"stereo"]})]}),b>=85&&u.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--color-text-secondary)",marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"var(--color-bg-secondary)",borderRadius:"3px",border:"1px solid var(--color-progress-track)"},children:[u.jsx("strong",{children:"optimization tips:"}),u.jsxs("ul",{style:{margin:"0.25rem 0 0 1rem",padding:0},children:[(m.sampleRate===0||m.sampleRate>22050)&&u.jsx("li",{children:"reduce sample rate to 22.1 khz for smaller size"}),(m.bitDepth===0||m.bitDepth>16)&&u.jsx("li",{children:"use 16-bit instead of 24-bit"}),(m.channels===0||m.channels===2)&&u.jsx("li",{children:"convert to mono if stereo imaging isn't needed"}),u.jsx("li",{children:"trim unused portions of samples"})]})]})]})}function vE({id:a,labelText:n,value:r,onChange:i,placeholder:s="enter preset name",disabled:c=!1,invalid:d=!1,invalidText:f,className:m}){const[h,b]=L.useState(r),[w,S]=L.useState("");L.useEffect(()=>{b(r)},[r]);const x=R=>{const O=R.target.value;if(b(O),O&&!nf(O)){const A=tb(O);S(`invalid characters: ${A.join(", ")}`);return}S(""),nf(O)&&i(O)},y=R=>{/[^a-zA-Z0-9 #\-().]/.test(R.key)&&R.preventDefault()},g=d||!!w,E=w||f;return u.jsxs(u.Fragment,{children:[u.jsx(Tf,{id:a,labelText:n,value:h,onChange:x,onKeyDown:y,placeholder:s,disabled:c,invalid:g,invalidText:E,className:m?`${m} preset-name-input-leftalign`:"preset-name-input-leftalign"}),u.jsx("style",{children:`
        .preset-name-input-leftalign .cds--label {
          text-align: left !important;
          justify-content: flex-start !important;
        }
        .preset-name-input-leftalign input.cds--text-input {
          text-align: left !important;
        }
      `})]})}function cb({leftLabel:a,rightLabel:n,isRight:r,onToggle:i,disabled:s=!1}){const c=r?19:3,d="#000",f="#999";return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.875rem",fontWeight:400,color:r?f:d,userSelect:"none",letterSpacing:0},children:a}),u.jsx("div",{onClick:s?void 0:i,style:{width:"32px",height:"16px",backgroundColor:"#393939",borderRadius:"8px",position:"relative",cursor:s?"default":"pointer",transition:"all 0.2s ease",opacity:s?.5:1},children:u.jsx("div",{style:{width:"10px",height:"10px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"3px",left:`${c}px`,transition:"left 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.3)"}})}),u.jsx("span",{style:{fontSize:"0.875rem",fontWeight:400,color:r?d:f,userSelect:"none",letterSpacing:0},children:n})]})}function ub({type:a,hasLoadedSamples:n,hasPresetName:r,canGeneratePatch:i,loadedSamplesCount:s,editedSamplesCount:c,presetName:d,onPresetNameChange:f,hasChangesFromDefaults:m,onResetAll:h,onSaveToLibrary:b,onDownloadPreset:w,onSaveSettingsAsDefault:S,inputId:x,renameFiles:y,onRenameFilesChange:g,filenameSeparator:E,onFilenameSeparatorChange:R,audioFormat:O,onAudioFormatChange:A}){const[N,M]=L.useState(!1);return L.useEffect(()=>{const z=()=>{M(window.innerWidth<768)};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",marginBottom:N?"1rem":"2rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:N?"0.5rem 1rem 0.5rem 1rem":"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"generate preset"})})}),u.jsxs("div",{style:{padding:N?"1rem":"2rem"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:N?"column":"row",alignItems:N?"stretch":"flex-start",gap:N?"1.5rem":"3rem",marginBottom:"2rem",paddingBottom:"1.5rem",borderBottom:"1px solid var(--color-border-light)"},children:[u.jsxs("div",{style:{width:N?"100%":"40%",minWidth:0},children:[u.jsx(vE,{id:x,labelText:"preset name",value:d,onChange:z=>{const F={target:{value:z},currentTarget:{value:z},preventDefault:()=>{},stopPropagation:()=>{},nativeEvent:new Event("change"),type:"change",bubbles:!0,cancelable:!0,defaultPrevented:!1,eventPhase:0,isTrusted:!0,timeStamp:Date.now(),isDefaultPrevented:()=>!1,isPropagationStopped:()=>!1,persist:()=>{}};f(F)},placeholder:"enter preset name...",className:"preset-name-input-wide"}),u.jsx("style",{children:`
              .preset-name-input-wide input.cds--text-input {
                width: 100% !important;
                min-width: 0 !important;
                max-width: none !important;
                box-sizing: border-box;
              }
            `})]}),u.jsxs("div",{style:{width:N?"100%":"60%",minWidth:0,display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx($i,{id:`rename-files-toggle-${x}`,labelText:"rename files with preset name",toggled:y,onToggle:g,size:"sm",className:"rename-files-toggle"}),u.jsx("style",{children:`
                .rename-files-toggle .cds--toggle-input__appearance {
                  background-color: var(--color-bg-slider-track) !important;
                }
                .rename-files-toggle .cds--toggle-input__appearance:before {
                  background-color: var(--color-interactive-secondary) !important;
                }
                .rename-files-toggle .cds--toggle-input:checked + .cds--toggle-input__appearance {
                  background-color: var(--color-interactive-dark) !important;
                }
                .rename-files-toggle .cds--toggle-input:checked + .cds--toggle-input__appearance:before {
                  background-color: var(--color-bg-primary) !important;
                }
                .rename-files-toggle .cds--toggle__text,
                .rename-files-toggle .cds--toggle__text--off,
                .rename-files-toggle .cds--toggle__text--on,
                .rename-files-toggle label,
                .rename-files-toggle span {
                  color: var(--color-text-primary) !important;
                  font-size: 0.9rem !important;
                  font-weight: 500 !important;
                  line-height: 1.2 !important;
                }
                .rename-files-toggle .cds--toggle {
                  font-size: 0.9rem !important;
                  font-weight: 500 !important;
                }
                .rename-files-toggle .cds--toggle * {
                  font-size: 0.9rem !important;
                  font-weight: 500 !important;
                }
              `})]}),u.jsxs("div",{style:{display:"flex",flexDirection:N?"column":"row",gap:N?"1rem":"2rem",alignItems:N?"center":"flex-start"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:N?"center":"flex-start"},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"filename separator"}),u.jsx("div",{style:{display:"flex",gap:"1rem"},children:[" ","-"].map(z=>u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.9rem",color:"var(--color-text-primary)",userSelect:"none"},children:[u.jsx("input",{type:"radio",name:`filename-separator-${x}`,value:z,checked:E===z,onChange:()=>R(z),style:{accentColor:"var(--color-interactive-focus)"}}),u.jsx("span",{children:z===" "?"space ' '":"hyphen '-'"})]},z))})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:N?"center":"flex-start"},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:"export format"}),u.jsx("div",{children:u.jsx(cb,{leftLabel:"wav",rightLabel:"aiff",isRight:O==="aiff",onToggle:()=>{A(O==="wav"?"aiff":"wav")}})})]})]})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:N?"column":"row",gap:N?"1.5rem":"2rem",alignItems:"flex-start",marginBottom:"2rem"},children:[u.jsx("div",{style:{width:N?"100%":"50%"},children:u.jsx(bE,{type:a})}),u.jsxs("div",{style:{width:N?"100%":"50%",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#222",marginBottom:"0.25rem"},children:"preset summary"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",fontSize:"0.8rem",color:"#666"},children:[!i&&!r&&u.jsxs("div",{style:{color:"#666",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[u.jsx("i",{className:"fas fa-exclamation-triangle",style:{fontSize:"0.7rem",width:"12px",textAlign:"center"}}),u.jsx("span",{children:"enter preset name to continue"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:`fas ${n?"fa-check":"fa-times"}`,style:{color:"#666",fontSize:"0.7rem",width:"12px",textAlign:"center"}}),u.jsxs("span",{children:[s," ",s===1?"sample":"samples"," loaded"]})]}),!i&&r&&!n&&u.jsxs("div",{style:{color:"#666",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[u.jsx("i",{className:"fas fa-exclamation-triangle",style:{fontSize:"0.7rem",width:"12px",textAlign:"center"}}),u.jsx("span",{children:"load samples to continue"})]}),n&&c>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-info-circle",style:{color:"#666",fontSize:"0.7rem",width:"12px",textAlign:"center"}}),u.jsxs("span",{children:[c," ",c===1?"sample":"samples"," with custom settings"]})]}),i&&u.jsxs("div",{style:{color:"#666",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.5rem"},children:[u.jsx("i",{className:"fas fa-file-archive",style:{fontSize:"0.7rem",width:"12px",textAlign:"center"}}),u.jsxs("span",{children:["saves as '",d,".preset.zip'"]})]})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:N?"center":"flex-end",flexDirection:N?"column":"row",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border-light)"},children:[u.jsxs("button",{onClick:h,disabled:!m,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:m?"var(--color-interactive-secondary)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:m?"pointer":"not-allowed",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:m?1:.6,width:N?"100%":"auto"},onMouseEnter:z=>{m&&(z.currentTarget.style.backgroundColor="var(--color-bg-secondary)",z.currentTarget.style.borderColor="var(--color-border-medium)",z.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:z=>{m&&(z.currentTarget.style.backgroundColor="var(--color-bg-primary)",z.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",z.currentTarget.style.color="var(--color-interactive-secondary)")},children:[u.jsx("i",{className:"fas fa-undo",style:{fontSize:"1rem"}}),"reset all"]}),u.jsxs("button",{onClick:S,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-secondary)",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:N?"100%":"auto"},onMouseEnter:z=>{z.currentTarget.style.backgroundColor="var(--color-bg-secondary)",z.currentTarget.style.borderColor="var(--color-border-medium)",z.currentTarget.style.color="var(--color-text-primary)"},onMouseLeave:z=>{z.currentTarget.style.backgroundColor="var(--color-bg-primary)",z.currentTarget.style.borderColor="var(--color-border-light)",z.currentTarget.style.color="var(--color-text-secondary)"},children:[u.jsx("i",{className:"fas fa-cog",style:{fontSize:"1rem"}}),"save as default"]}),u.jsxs("button",{onClick:b,disabled:!i,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:i?"var(--color-interactive-focus)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:i?"pointer":"not-allowed",opacity:i?1:.6,transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:N?"100%":"auto"},onMouseEnter:z=>{i&&(z.currentTarget.style.backgroundColor="var(--color-bg-secondary)",z.currentTarget.style.borderColor="var(--color-interactive-dark)",z.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:z=>{i&&(z.currentTarget.style.backgroundColor="var(--color-bg-primary)",z.currentTarget.style.borderColor="var(--color-interactive-focus)",z.currentTarget.style.color="var(--color-interactive-focus)")},children:[u.jsx("i",{className:"fas fa-save",style:{fontSize:"1rem"}}),"save to library"]}),u.jsxs("button",{onClick:w,disabled:!i,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",backgroundColor:i?"var(--color-interactive-focus)":"var(--color-border-medium)",color:"var(--color-white)",fontSize:"0.9rem",fontWeight:"500",cursor:i?"pointer":"not-allowed",opacity:i?1:.6,transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:N?"100%":"auto"},onMouseEnter:z=>{i&&(z.currentTarget.style.backgroundColor="var(--color-interactive-dark)")},onMouseLeave:z=>{i&&(z.currentTarget.style.backgroundColor="var(--color-interactive-focus)")},children:[u.jsx("i",{className:"fas fa-download",style:{fontSize:"1rem"}}),"download preset"]})]})]})]})}function hs(){const a=L.useRef(null),n=L.useRef(null),r=L.useRef(null),i=L.useRef({isPlaying:!1,currentTime:0,duration:0}),s=L.useRef(new Map),c=L.useRef(null),d=L.useCallback(()=>{if(a.current){try{a.current.stop()}catch{}a.current=null}n.current&&(n.current.disconnect(),n.current=null),r.current&&(r.current.disconnect(),r.current=null),i.current.isPlaying=!1},[]),f=L.useCallback(A=>{const N=A.attack/32767,M=A.decay/32767,z=A.sustain/32767,F=A.release/32767,B=Math.pow(N,2)*30,I=Math.pow(M,2)*30,W=z,ee=Math.pow(F,2)*30;return{attackTime:B,decayTime:I,sustainLevel:W,releaseTime:ee}},[]),m=L.useCallback((A,N,M,z=50)=>{const F=[];for(let B=0;B<=z;B++){const I=B/z,W=Math.exp(-M*I),ee=A+(N-A)*(1-W);F.push(ee)}return F},[]),h=L.useCallback((A,N,M,z=1)=>{const{attackTime:F,decayTime:B,sustainLevel:I}=f(N),W=I*z,ee=1*z;if(A.gain.cancelScheduledValues(M),A.gain.setValueAtTime(0,M),F>0){const _=m(0,ee,1.5);A.gain.setValueCurveAtTime(_,M,F)}else A.gain.setValueAtTime(ee,M);const C=M+F;if(B>0){const _=m(ee,W,2);A.gain.setValueCurveAtTime(_,C,B)}else A.gain.setValueAtTime(W,C);const J=C+B;return A.gain.setValueAtTime(W,J),J},[f,m]),b=L.useCallback((A,N,M)=>{const{releaseTime:z}=f(N),F=A.context.currentTime,B=Math.max(M,F+q0.AUDIO_SCHEDULE_BUFFER);if(A.gain.cancelScheduledValues(B),z>0){const I=m(A.gain.value,0,2);A.gain.setValueCurveAtTime(I,B,z)}else A.gain.setValueAtTime(0,B)},[f,m]),w=L.useCallback(A=>{const N=s.current.get(A);if(!N||N.envelopePhase==="release"||N.envelopePhase==="finished")return;const z=N.gainNode.context.currentTime;try{b(N.gainNode,N.adsr,z),N.envelopePhase="release",N.releaseTime=z}catch(B){console.warn("Error during ADSR release, falling back to instant stop:",B);try{N.source.stop()}catch{}s.current.delete(A),N.source.disconnect(),N.gainNode.disconnect(),N.envelopePhase="finished";return}const{releaseTime:F}=f(N.adsr);if(F<=0){try{N.source.stop()}catch{}setTimeout(()=>{s.current.delete(A),N.source.disconnect(),N.gainNode.disconnect(),N.envelopePhase="finished"},10)}else setTimeout(()=>{s.current.delete(A),N.source.disconnect(),N.gainNode.disconnect(),N.envelopePhase="finished"},F*1e3)},[b,f]),S=L.useCallback(async(A,N,M={})=>{try{const z=await ir.getAudioContext(),F=M.playMode||"poly",B=M.velocity||127,I=M.adsr||{attack:0,decay:0,sustain:32767,release:0};if(F==="mono"){for(const[te,U]of s.current)U.source.stop(),U.gainNode.disconnect(),s.current.delete(te);c.current=null}else if(F==="legato"&&c.current){const te=c.current;if(te.envelopePhase!=="finished")return te.source.playbackRate.value=M.playbackRate||1,N}const W=z.createBufferSource(),ee=z.createGain(),C=z.createStereoPanner();W.buffer=A,W.playbackRate.value=M.playbackRate||1;const J=M.pan!==void 0?Math.max(-1,Math.min(1,M.pan/100)):0;C.pan.value=J,W.connect(ee),ee.connect(C),C.connect(z.destination);const _=z.currentTime,K=B/127;h(ee,I,_,K);let P=M.startTime||0,Y=M.duration||A.duration-P;M.inFrame!==void 0&&M.outFrame!==void 0&&(P=M.inFrame/A.length*A.duration,Y=M.outFrame/A.length*A.duration-P),Y>0?W.start(0,P,Y):W.start(0,P);const oe={noteId:N,source:W,gainNode:ee,envelopePhase:"attack",startTime:_,currentGain:B/127,adsr:I,velocity:B};return s.current.set(N,oe),c.current=oe,N.startsWith("multisample-")&&(Array.isArray(window.opPatchstudioActiveNotes)||(window.opPatchstudioActiveNotes=[]),window.opPatchstudioActiveNotes.push(N)),W.onended=()=>{const te=s.current.get(N);if(te&&te.envelopePhase!=="release"&&(s.current.delete(N),c.current?.noteId===N&&(c.current=null),N.startsWith("multisample-"))){const U=window.opPatchstudioActiveNotes;if(Array.isArray(U)){const k=U.indexOf(N);k!==-1&&U.splice(k,1)}}},N}catch(z){return console.error("Error playing audio with ADSR:",z),null}},[h,w]),x=L.useCallback(A=>{if(A.includes("*")||A.endsWith("-")){const N=A.replace("*","").replace(/-$/,"");for(const[M]of s.current)M.startsWith(N)&&w(M)}else w(A)},[w]),y=L.useCallback(()=>{for(const[A]of s.current)w(A)},[w]),g=L.useCallback(()=>s.current.size,[]),E=L.useCallback(async(A,N={})=>{d();try{const M=await ir.getAudioContext();let z=A;if(N.reverse){const _=M.createBuffer(z.numberOfChannels,z.length,z.sampleRate);for(let K=0;K<z.numberOfChannels;K++){const P=z.getChannelData(K),Y=_.getChannelData(K);for(let oe=0,te=P.length-1;oe<P.length;oe++,te--)Y[oe]=P[te]}z=_}const F=M.createBufferSource(),B=M.createGain(),I=M.createStereoPanner();a.current=F,n.current=B,r.current=I,F.buffer=z,F.playbackRate.value=N.playbackRate||1;const W=N.gain!==void 0?Math.pow(10,N.gain/20):1;B.gain.value=W;const ee=N.pan!==void 0?Math.max(-1,Math.min(1,N.pan/100)):0;I.pan.value=ee,F.connect(B),B.connect(I),I.connect(M.destination),F.onended=()=>{i.current.isPlaying=!1,a.current=null,n.current=null,r.current=null};let C=N.startTime||0,J=N.duration||z.duration-C;return N.inFrame!==void 0&&N.outFrame!==void 0&&(C=N.inFrame/A.length*A.duration,J=N.outFrame/A.length*A.duration-C),i.current.isPlaying=!0,i.current.currentTime=C,i.current.duration=J,J>0?F.start(0,C,J):F.start(0,C),!0}catch(M){return console.error("Error playing audio:",M),i.current.isPlaying=!1,!1}},[d]),R=L.useCallback(()=>{d()},[d]),O=L.useCallback(()=>({...i.current}),[]);return{play:E,stop:R,stopCurrentPlayback:d,getState:O,playWithADSR:S,releaseNote:x,releaseAllNotes:y,getActiveNotesCount:g}}var Ge={},os={exports:{}},xE=os.exports,Iy;function SE(){return Iy||(Iy=1,function(a,n){(function(r,i){var s="1.0.40",c="",d="?",f="function",m="undefined",h="object",b="string",w="major",S="model",x="name",y="type",g="vendor",E="version",R="architecture",O="console",A="mobile",N="tablet",M="smarttv",z="wearable",F="embedded",B=500,I="Amazon",W="Apple",ee="ASUS",C="BlackBerry",J="Browser",_="Chrome",K="Edge",P="Firefox",Y="Google",oe="Huawei",te="LG",U="Microsoft",k="Motorola",$="Opera",Z="Samsung",le="Sharp",q="Sony",Ee="Xiaomi",Fe="Zebra",pe="Facebook",de="Chromium OS",Re="Mac OS",me=" Browser",_e=function(De,He){var Ie={};for(var Ve in De)He[Ve]&&He[Ve].length%2===0?Ie[Ve]=He[Ve].concat(De[Ve]):Ie[Ve]=De[Ve];return Ie},Ae=function(De){for(var He={},Ie=0;Ie<De.length;Ie++)He[De[Ie].toUpperCase()]=De[Ie];return He},T=function(De,He){return typeof De===b?G(He).indexOf(G(De))!==-1:!1},G=function(De){return De.toLowerCase()},X=function(De){return typeof De===b?De.replace(/[^\d\.]/g,c).split(".")[0]:i},j=function(De,He){if(typeof De===b)return De=De.replace(/^\s\s*/,c),typeof He===m?De:De.substring(0,B)},H=function(De,He){for(var Ie=0,Ve,Ct,$e,Je,Pe,Et;Ie<He.length&&!Pe;){var Qt=He[Ie],zt=He[Ie+1];for(Ve=Ct=0;Ve<Qt.length&&!Pe&&Qt[Ve];)if(Pe=Qt[Ve++].exec(De),Pe)for($e=0;$e<zt.length;$e++)Et=Pe[++Ct],Je=zt[$e],typeof Je===h&&Je.length>0?Je.length===2?typeof Je[1]==f?this[Je[0]]=Je[1].call(this,Et):this[Je[0]]=Je[1]:Je.length===3?typeof Je[1]===f&&!(Je[1].exec&&Je[1].test)?this[Je[0]]=Et?Je[1].call(this,Et,Je[2]):i:this[Je[0]]=Et?Et.replace(Je[1],Je[2]):i:Je.length===4&&(this[Je[0]]=Et?Je[3].call(this,Et.replace(Je[1],Je[2])):i):this[Je]=Et||i;Ie+=2}},Q=function(De,He){for(var Ie in He)if(typeof He[Ie]===h&&He[Ie].length>0){for(var Ve=0;Ve<He[Ie].length;Ve++)if(T(He[Ie][Ve],De))return Ie===d?i:Ie}else if(T(He[Ie],De))return Ie===d?i:Ie;return He.hasOwnProperty("*")?He["*"]:De},ue={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ye={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ie={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[x,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[x,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[x,E],[/opios[\/ ]+([\w\.]+)/i],[E,[x,$+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[E,[x,$+" GX"]],[/\bopr\/([\w\.]+)/i],[E,[x,$]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[E,[x,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[E,[x,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[x,E],[/quark(?:pc)?\/([-\w\.]+)/i],[E,[x,"Quark"]],[/\bddg\/([\w\.]+)/i],[E,[x,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[x,"UC"+J]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[E,[x,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[x,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[x,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[E,[x,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[E,[x,"Smart Lenovo "+J]],[/(avast|avg)\/([\w\.]+)/i],[[x,/(.+)/,"$1 Secure "+J],E],[/\bfocus\/([\w\.]+)/i],[E,[x,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[x,$+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[x,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[x,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[x,$+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[x,"MIUI"+me]],[/fxios\/([\w\.-]+)/i],[E,[x,P]],[/\bqihoobrowser\/?([\w\.]*)/i],[E,[x,"360"]],[/\b(qq)\/([\w\.]+)/i],[[x,/(.+)/,"$1Browser"],E],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[x,/(.+)/,"$1"+me],E],[/samsungbrowser\/([\w\.]+)/i],[E,[x,Z+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[E,[x,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[x,"Sogou Mobile"],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[x,E],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[x],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[E,x],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[x,pe],E],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[x,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[x,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[E,[x,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[x,_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[x,_+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[x,"Android "+J]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[x,E],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[E,[x,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[E,x],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[x,[E,Q,ue]],[/(webkit|khtml)\/([\w\.]+)/i],[x,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[x,"Netscape"],E],[/(wolvic|librewolf)\/([\w\.]+)/i],[x,E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[x,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[x,[E,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[x,[E,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[R,"amd64"]],[/(ia32(?=;))/i],[[R,G]],[/((?:i[346]|x)86)[;\)]/i],[[R,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[R,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[R,"armhf"]],[/windows (ce|mobile); ppc;/i],[[R,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[R,/ower/,c,G]],[/(sun4\w)[;\)]/i],[[R,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[R,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[S,[g,Z],[y,N]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[S,[g,Z],[y,A]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[S,[g,W],[y,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[S,[g,W],[y,N]],[/(macintosh);/i],[S,[g,W]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[S,[g,le],[y,A]],[/(?:honor)([-\w ]+)[;\)]/i],[S,[g,"Honor"],[y,A]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[S,[g,oe],[y,N]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[S,[g,oe],[y,A]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[S,/_/g," "],[g,Ee],[y,A]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[S,/_/g," "],[g,Ee],[y,N]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[S,[g,"OPPO"],[y,A]],[/\b(opd2\d{3}a?) bui/i],[S,[g,"OPPO"],[y,N]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[S,[g,"Vivo"],[y,A]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[S,[g,"Realme"],[y,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[S,[g,k],[y,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[S,[g,k],[y,N]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[S,[g,te],[y,N]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[S,[g,te],[y,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[S,[g,"Lenovo"],[y,N]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[S,/_/g," "],[g,"Nokia"],[y,A]],[/(pixel c)\b/i],[S,[g,Y],[y,N]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[S,[g,Y],[y,A]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[S,[g,q],[y,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[S,"Xperia Tablet"],[g,q],[y,N]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[S,[g,"OnePlus"],[y,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[S,[g,I],[y,N]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[S,/(.+)/g,"Fire Phone $1"],[g,I],[y,A]],[/(playbook);[-\w\),; ]+(rim)/i],[S,g,[y,N]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[S,[g,C],[y,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[S,[g,ee],[y,N]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[S,[g,ee],[y,A]],[/(nexus 9)/i],[S,[g,"HTC"],[y,N]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[S,/_/g," "],[y,A]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[S,[g,"TCL"],[y,N]],[/(itel) ((\w+))/i],[[g,G],S,[y,Q,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[S,[g,"Acer"],[y,N]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[S,[g,"Meizu"],[y,A]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[S,[g,"Ulefone"],[y,A]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[S,[g,"Energizer"],[y,A]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[S,[g,"Cat"],[y,A]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[S,[g,"Smartfren"],[y,A]],[/droid.+; (a(?:015|06[35]|142p?))/i],[S,[g,"Nothing"],[y,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,S,[y,A]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,S,[y,N]],[/(surface duo)/i],[S,[g,U],[y,N]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[S,[g,"Fairphone"],[y,A]],[/(u304aa)/i],[S,[g,"AT&T"],[y,A]],[/\bsie-(\w*)/i],[S,[g,"Siemens"],[y,A]],[/\b(rct\w+) b/i],[S,[g,"RCA"],[y,N]],[/\b(venue[\d ]{2,7}) b/i],[S,[g,"Dell"],[y,N]],[/\b(q(?:mv|ta)\w+) b/i],[S,[g,"Verizon"],[y,N]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[S,[g,"Barnes & Noble"],[y,N]],[/\b(tm\d{3}\w+) b/i],[S,[g,"NuVision"],[y,N]],[/\b(k88) b/i],[S,[g,"ZTE"],[y,N]],[/\b(nx\d{3}j) b/i],[S,[g,"ZTE"],[y,A]],[/\b(gen\d{3}) b.+49h/i],[S,[g,"Swiss"],[y,A]],[/\b(zur\d{3}) b/i],[S,[g,"Swiss"],[y,N]],[/\b((zeki)?tb.*\b) b/i],[S,[g,"Zeki"],[y,N]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],S,[y,N]],[/\b(ns-?\w{0,9}) b/i],[S,[g,"Insignia"],[y,N]],[/\b((nxa|next)-?\w{0,9}) b/i],[S,[g,"NextBook"],[y,N]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],S,[y,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],S,[y,A]],[/\b(ph-1) /i],[S,[g,"Essential"],[y,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[S,[g,"Envizen"],[y,N]],[/\b(trio[-\w\. ]+) b/i],[S,[g,"MachSpeed"],[y,N]],[/\btu_(1491) b/i],[S,[g,"Rotor"],[y,N]],[/(shield[\w ]+) b/i],[S,[g,"Nvidia"],[y,N]],[/(sprint) (\w+)/i],[g,S,[y,A]],[/(kin\.[onetw]{3})/i],[[S,/\./g," "],[g,U],[y,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[S,[g,Fe],[y,N]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[S,[g,Fe],[y,A]],[/smart-tv.+(samsung)/i],[g,[y,M]],[/hbbtv.+maple;(\d+)/i],[[S,/^/,"SmartTV"],[g,Z],[y,M]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,te],[y,M]],[/(apple) ?tv/i],[g,[S,W+" TV"],[y,M]],[/crkey/i],[[S,_+"cast"],[g,Y],[y,M]],[/droid.+aft(\w+)( bui|\))/i],[S,[g,I],[y,M]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[S,[g,le],[y,M]],[/(bravia[\w ]+)( bui|\))/i],[S,[g,q],[y,M]],[/(mitv-\w{5}) bui/i],[S,[g,Ee],[y,M]],[/Hbbtv.*(technisat) (.*);/i],[g,S,[y,M]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,j],[S,j],[y,M]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,M]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,S,[y,O]],[/droid.+; (shield) bui/i],[S,[g,"Nvidia"],[y,O]],[/(playstation [345portablevi]+)/i],[S,[g,q],[y,O]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[S,[g,U],[y,O]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[S,[g,Z],[y,z]],[/((pebble))app/i],[g,S,[y,z]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[S,[g,W],[y,z]],[/droid.+; (glass) \d/i],[S,[g,Y],[y,z]],[/droid.+; (wt63?0{2,3})\)/i],[S,[g,Fe],[y,z]],[/droid.+; (glass) \d/i],[S,[g,Y],[y,z]],[/(pico) (4|neo3(?: link|pro)?)/i],[g,S,[y,z]],[/; (quest( \d| pro)?)/i],[S,[g,pe],[y,z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[y,F]],[/(aeobc)\b/i],[S,[g,I],[y,F]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[S,[y,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[S,[y,N]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,N]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[y,A]],[/(android[-\w\. ]{0,9});.+buil/i],[S,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[x,K+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[x,E],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[x,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[x,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,x]],os:[[/microsoft (windows) (vista|xp)/i],[x,E],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[x,[E,Q,ye]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[E,Q,ye],[x,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[x,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[x,Re],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[E,x],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[x,E],[/\(bb(10);/i],[E,[x,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[x,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[x,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[x,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[E,[x,"watchOS"]],[/crkey\/([\d\.]+)/i],[E,[x,_+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[x,de],E],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[x,E],[/(sunos) ?([\w\.\d]*)/i],[[x,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[x,E]]},ge=function(De,He){if(typeof De===h&&(He=De,De=i),!(this instanceof ge))return new ge(De,He).getResult();var Ie=typeof r!==m&&r.navigator?r.navigator:i,Ve=De||(Ie&&Ie.userAgent?Ie.userAgent:c),Ct=Ie&&Ie.userAgentData?Ie.userAgentData:i,$e=He?_e(ie,He):ie,Je=Ie&&Ie.userAgent==Ve;return this.getBrowser=function(){var Pe={};return Pe[x]=i,Pe[E]=i,H.call(Pe,Ve,$e.browser),Pe[w]=X(Pe[E]),Je&&Ie&&Ie.brave&&typeof Ie.brave.isBrave==f&&(Pe[x]="Brave"),Pe},this.getCPU=function(){var Pe={};return Pe[R]=i,H.call(Pe,Ve,$e.cpu),Pe},this.getDevice=function(){var Pe={};return Pe[g]=i,Pe[S]=i,Pe[y]=i,H.call(Pe,Ve,$e.device),Je&&!Pe[y]&&Ct&&Ct.mobile&&(Pe[y]=A),Je&&Pe[S]=="Macintosh"&&Ie&&typeof Ie.standalone!==m&&Ie.maxTouchPoints&&Ie.maxTouchPoints>2&&(Pe[S]="iPad",Pe[y]=N),Pe},this.getEngine=function(){var Pe={};return Pe[x]=i,Pe[E]=i,H.call(Pe,Ve,$e.engine),Pe},this.getOS=function(){var Pe={};return Pe[x]=i,Pe[E]=i,H.call(Pe,Ve,$e.os),Je&&!Pe[x]&&Ct&&Ct.platform&&Ct.platform!="Unknown"&&(Pe[x]=Ct.platform.replace(/chrome os/i,de).replace(/macos/i,Re)),Pe},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ve},this.setUA=function(Pe){return Ve=typeof Pe===b&&Pe.length>B?j(Pe,B):Pe,this},this.setUA(Ve),this};ge.VERSION=s,ge.BROWSER=Ae([x,E,w]),ge.CPU=Ae([R]),ge.DEVICE=Ae([S,g,y,O,A,M,N,z,F]),ge.ENGINE=ge.OS=Ae([x,E]),a.exports&&(n=a.exports=ge),n.UAParser=ge;var Oe=typeof r!==m&&(r.jQuery||r.Zepto);if(Oe&&!Oe.ua){var Le=new ge;Oe.ua=Le.getResult(),Oe.ua.get=function(){return Le.getUA()},Oe.ua.set=function(De){Le.setUA(De);var He=Le.getResult();for(var Ie in He)Oe.ua[Ie]=He[Ie]}}})(typeof window=="object"?window:xE)}(os,os.exports)),os.exports}var zy;function wE(){if(zy)return Ge;zy=1,Object.defineProperty(Ge,"__esModule",{value:!0});function a(be){return be&&typeof be=="object"&&"default"in be?be.default:be}var n=oc(),r=a(n),i=SE(),s=new i,c=s.getBrowser(),d=s.getCPU(),f=s.getDevice(),m=s.getEngine(),h=s.getOS(),b=s.getUA(),w=function(re){return s.setUA(re)},S=function(re){if(!re){console.error("No userAgent string was provided");return}var ce=new i(re);return{UA:ce,browser:ce.getBrowser(),cpu:ce.getCPU(),device:ce.getDevice(),engine:ce.getEngine(),os:ce.getOS(),ua:ce.getUA(),setUserAgent:function(Ue){return ce.setUA(Ue)}}},x=Object.freeze({ClientUAInstance:s,browser:c,cpu:d,device:f,engine:m,os:h,ua:b,setUa:w,parseUserAgent:S});function y(be,re){var ce=Object.keys(be);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(be);re&&(Ce=Ce.filter(function(Ue){return Object.getOwnPropertyDescriptor(be,Ue).enumerable})),ce.push.apply(ce,Ce)}return ce}function g(be){for(var re=1;re<arguments.length;re++){var ce=arguments[re]!=null?arguments[re]:{};re%2?y(Object(ce),!0).forEach(function(Ce){N(be,Ce,ce[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(ce)):y(Object(ce)).forEach(function(Ce){Object.defineProperty(be,Ce,Object.getOwnPropertyDescriptor(ce,Ce))})}return be}function E(be){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(re){return typeof re}:E=function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},E(be)}function R(be,re){if(!(be instanceof re))throw new TypeError("Cannot call a class as a function")}function O(be,re){for(var ce=0;ce<re.length;ce++){var Ce=re[ce];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(be,Ce.key,Ce)}}function A(be,re,ce){return re&&O(be.prototype,re),be}function N(be,re,ce){return re in be?Object.defineProperty(be,re,{value:ce,enumerable:!0,configurable:!0,writable:!0}):be[re]=ce,be}function M(){return M=Object.assign||function(be){for(var re=1;re<arguments.length;re++){var ce=arguments[re];for(var Ce in ce)Object.prototype.hasOwnProperty.call(ce,Ce)&&(be[Ce]=ce[Ce])}return be},M.apply(this,arguments)}function z(be,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(re&&re.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),re&&B(be,re)}function F(be){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(ce){return ce.__proto__||Object.getPrototypeOf(ce)},F(be)}function B(be,re){return B=Object.setPrototypeOf||function(Ce,Ue){return Ce.__proto__=Ue,Ce},B(be,re)}function I(be,re){if(be==null)return{};var ce={},Ce=Object.keys(be),Ue,ct;for(ct=0;ct<Ce.length;ct++)Ue=Ce[ct],!(re.indexOf(Ue)>=0)&&(ce[Ue]=be[Ue]);return ce}function W(be,re){if(be==null)return{};var ce=I(be,re),Ce,Ue;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(be);for(Ue=0;Ue<ct.length;Ue++)Ce=ct[Ue],!(re.indexOf(Ce)>=0)&&Object.prototype.propertyIsEnumerable.call(be,Ce)&&(ce[Ce]=be[Ce])}return ce}function ee(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}function C(be,re){if(re&&(typeof re=="object"||typeof re=="function"))return re;if(re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ee(be)}function J(be,re){return _(be)||K(be,re)||P(be,re)||oe()}function _(be){if(Array.isArray(be))return be}function K(be,re){var ce=be==null?null:typeof Symbol<"u"&&be[Symbol.iterator]||be["@@iterator"];if(ce!=null){var Ce=[],Ue=!0,ct=!1,yt,Ft;try{for(ce=ce.call(be);!(Ue=(yt=ce.next()).done)&&(Ce.push(yt.value),!(re&&Ce.length===re));Ue=!0);}catch(Sr){ct=!0,Ft=Sr}finally{try{!Ue&&ce.return!=null&&ce.return()}finally{if(ct)throw Ft}}return Ce}}function P(be,re){if(be){if(typeof be=="string")return Y(be,re);var ce=Object.prototype.toString.call(be).slice(8,-1);if(ce==="Object"&&be.constructor&&(ce=be.constructor.name),ce==="Map"||ce==="Set")return Array.from(be);if(ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return Y(be,re)}}function Y(be,re){(re==null||re>be.length)&&(re=be.length);for(var ce=0,Ce=new Array(re);ce<re;ce++)Ce[ce]=be[ce];return Ce}function oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},U={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},k={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},$={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},Z=function(re){switch(re){case te.Mobile:return{isMobile:!0};case te.Tablet:return{isTablet:!0};case te.SmartTv:return{isSmartTV:!0};case te.Console:return{isConsole:!0};case te.Wearable:return{isWearable:!0};case te.Browser:return{isBrowser:!0};case te.Embedded:return{isEmbedded:!0};default:return $}},le=function(re){return w(re)},q=function(re){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return re||ce},Ee=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},Fe=function(re){var ce=Ee();return ce&&ce.platform&&(ce.platform.indexOf(re)!==-1||ce.platform==="MacIntel"&&ce.maxTouchPoints>1&&!window.MSStream)},pe=function(re,ce,Ce,Ue,ct){return{isBrowser:re,browserMajorVersion:q(ce.major),browserFullVersion:q(ce.version),browserName:q(ce.name),engineName:q(Ce.name),engineVersion:q(Ce.version),osName:q(Ue.name),osVersion:q(Ue.version),userAgent:q(ct)}},de=function(re,ce,Ce,Ue){return g({},re,{vendor:q(ce.vendor),model:q(ce.model),os:q(Ce.name),osVersion:q(Ce.version),ua:q(Ue)})},Re=function(re,ce,Ce,Ue){return{isSmartTV:re,engineName:q(ce.name),engineVersion:q(ce.version),osName:q(Ce.name),osVersion:q(Ce.version),userAgent:q(Ue)}},me=function(re,ce,Ce,Ue){return{isConsole:re,engineName:q(ce.name),engineVersion:q(ce.version),osName:q(Ce.name),osVersion:q(Ce.version),userAgent:q(Ue)}},_e=function(re,ce,Ce,Ue){return{isWearable:re,engineName:q(ce.name),engineVersion:q(ce.version),osName:q(Ce.name),osVersion:q(Ce.version),userAgent:q(Ue)}},Ae=function(re,ce,Ce,Ue,ct){return{isEmbedded:re,vendor:q(ce.vendor),model:q(ce.model),engineName:q(Ce.name),engineVersion:q(Ce.version),osName:q(Ue.name),osVersion:q(Ue.version),userAgent:q(ct)}};function T(be){var re=be?S(be):x,ce=re.device,Ce=re.browser,Ue=re.engine,ct=re.os,yt=re.ua,Ft=Z(ce.type),Sr=Ft.isBrowser,Ea=Ft.isMobile,Mc=Ft.isTablet,ti=Ft.isSmartTV,ni=Ft.isConsole,Yr=Ft.isWearable,_a=Ft.isEmbedded;if(Sr)return pe(Sr,Ce,Ue,ct,yt);if(ti)return Re(ti,Ue,ct,yt);if(ni)return me(ni,Ue,ct,yt);if(Ea||Mc)return de(Ft,ce,ct,yt);if(Yr)return _e(Yr,Ue,ct,yt);if(_a)return Ae(_a,ce,Ue,ct,yt)}var G=function(re){var ce=re.type;return ce===te.Mobile},X=function(re){var ce=re.type;return ce===te.Tablet},j=function(re){var ce=re.type;return ce===te.Mobile||ce===te.Tablet},H=function(re){var ce=re.type;return ce===te.SmartTv},Q=function(re){var ce=re.type;return ce===te.Browser},ue=function(re){var ce=re.type;return ce===te.Wearable},ye=function(re){var ce=re.type;return ce===te.Console},ie=function(re){var ce=re.type;return ce===te.Embedded},ge=function(re){var ce=re.vendor;return q(ce)},Oe=function(re){var ce=re.model;return q(ce)},Le=function(re){var ce=re.type;return q(ce,"browser")},De=function(re){var ce=re.name;return ce===k.Android},He=function(re){var ce=re.name;return ce===k.Windows},Ie=function(re){var ce=re.name;return ce===k.MAC_OS},Ve=function(re){var ce=re.name;return ce===k.WindowsPhone},Ct=function(re){var ce=re.name;return ce===k.IOS},$e=function(re){var ce=re.version;return q(ce)},Je=function(re){var ce=re.name;return q(ce)},Pe=function(re){var ce=re.name;return ce===U.Chrome},Et=function(re){var ce=re.name;return ce===U.Firefox},Qt=function(re){var ce=re.name;return ce===U.Chromium},zt=function(re){var ce=re.name;return ce===U.Edge},Nn=function(re){var ce=re.name;return ce===U.Yandex},Ur=function(re){var ce=re.name;return ce===U.Safari||ce===U.MobileSafari},Be=function(re){var ce=re.name;return ce===U.MobileSafari},Ke=function(re){var ce=re.name;return ce===U.Opera},at=function(re){var ce=re.name;return ce===U.InternetExplorer||ce===U.Ie},Xe=function(re){var ce=re.name;return ce===U.MIUI},Ye=function(re){var ce=re.name;return ce===U.SamsungBrowser},ht=function(re){var ce=re.version;return q(ce)},wt=function(re){var ce=re.major;return q(ce)},gt=function(re){var ce=re.name;return q(ce)},nn=function(re){var ce=re.name;return q(ce)},Kn=function(re){var ce=re.version;return q(ce)},sr=function(){var re=Ee(),ce=re&&re.userAgent&&re.userAgent.toLowerCase();return typeof ce=="string"?/electron/.test(ce):!1},$t=function(re){return typeof re=="string"&&re.indexOf("Edg/")!==-1},Ot=function(){var re=Ee();return re&&(/iPad|iPhone|iPod/.test(re.platform)||re.platform==="MacIntel"&&re.maxTouchPoints>1)&&!window.MSStream},ut=function(){return Fe("iPad")},On=function(){return Fe("iPhone")},Ya=function(){return Fe("iPod")},bs=function(re){return q(re)};function vs(be){var re=be||x,ce=re.device,Ce=re.browser,Ue=re.os,ct=re.engine,yt=re.ua;return{isSmartTV:H(ce),isConsole:ye(ce),isWearable:ue(ce),isEmbedded:ie(ce),isMobileSafari:Be(Ce)||ut(),isChromium:Qt(Ce),isMobile:j(ce)||ut(),isMobileOnly:G(ce),isTablet:X(ce)||ut(),isBrowser:Q(ce),isDesktop:Q(ce),isAndroid:De(Ue),isWinPhone:Ve(Ue),isIOS:Ct(Ue)||ut(),isChrome:Pe(Ce),isFirefox:Et(Ce),isSafari:Ur(Ce),isOpera:Ke(Ce),isIE:at(Ce),osVersion:$e(Ue),osName:Je(Ue),fullBrowserVersion:ht(Ce),browserVersion:wt(Ce),browserName:gt(Ce),mobileVendor:ge(ce),mobileModel:Oe(ce),engineName:nn(ct),engineVersion:Kn(ct),getUA:bs(yt),isEdge:zt(Ce)||$t(yt),isYandex:Nn(Ce),deviceType:Le(ce),isIOS13:Ot(),isIPad13:ut(),isIPhone13:On(),isIPod13:Ya(),isElectron:sr(),isEdgeChromium:$t(yt),isLegacyEdge:zt(Ce)&&!$t(yt),isWindows:He(Ue),isMacOs:Ie(Ue),isMIUI:Xe(Ce),isSamsungBrowser:Ye(Ce)}}var Qi=H(f),Br=ye(f),Za=ue(f),Pr=ie(f),Fr=Be(c)||ut(),Sa=Qt(c),Xn=j(f)||ut(),Gt=G(f),Ji=X(f)||ut(),eo=Q(f),vr=Q(f),xr=De(h),xs=Ve(h),to=Ct(h)||ut(),Ss=Pe(c),wc=Et(c),Ka=Ur(c),Xa=Ke(c),Fn=at(c),no=$e(h),ws=Je(h),Hr=ht(c),ro=wt(c),ao=gt(c),Ec=ge(f),Es=Oe(f),wn=nn(m),_s=Kn(m),_c=bs(b),Qa=zt(c)||$t(b),Ts=Nn(c),Ja=Le(f),Tc=Ot(),En=ut(),io=On(),Cs=Ya(),oo=sr(),Wr=$t(b),As=zt(c)&&!$t(b),Rs=He(h),Vr=Ie(h),Cc=Xe(c),Ms=Ye(c),ks=function(re){if(!re||typeof re!="string"){console.error("No valid user agent string was provided");return}var ce=S(re),Ce=ce.device,Ue=ce.browser,ct=ce.os,yt=ce.engine,Ft=ce.ua;return vs({device:Ce,browser:Ue,os:ct,engine:yt,ua:Ft})},so=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return xr?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},Ac=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return eo?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},Rc=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return Fn?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},ei=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return to?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},lo=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return Xn?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},co=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return Ji?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},$r=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return xs?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},Gr=function(re){var ce=re.renderWithFragment,Ce=re.children;re.viewClassName,re.style;var Ue=W(re,["renderWithFragment","children","viewClassName","style"]);return Gt?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},Ns=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return Qi?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},uo=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return Br?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},Os=function(re){var ce=re.renderWithFragment,Ce=re.children,Ue=W(re,["renderWithFragment","children"]);return Za?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",Ue,Ce):null},wa=function(re){var ce=re.renderWithFragment,Ce=re.children;re.viewClassName,re.style;var Ue=re.condition,ct=W(re,["renderWithFragment","children","viewClassName","style","condition"]);return Ue?ce?r.createElement(n.Fragment,null,Ce):r.createElement("div",ct,Ce):null};function Qn(be){return function(re){z(ce,re);function ce(Ce){var Ue;return R(this,ce),Ue=C(this,F(ce).call(this,Ce)),Ue.isEventListenerAdded=!1,Ue.handleOrientationChange=Ue.handleOrientationChange.bind(ee(Ue)),Ue.onOrientationChange=Ue.onOrientationChange.bind(ee(Ue)),Ue.onPageLoad=Ue.onPageLoad.bind(ee(Ue)),Ue.state={isLandscape:!1,isPortrait:!1},Ue}return A(ce,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var Ue=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:Ue===0,isLandscape:Ue===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":E(window))!==void 0&&Xn&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return r.createElement(be,M({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),ce}(r.Component)}function fo(){var be=n.useState(function(){var ct=window.innerWidth>window.innerHeight?90:0;return{isPortrait:ct===0,isLandscape:ct===90,orientation:ct===0?"portrait":"landscape"}}),re=J(be,2),ce=re[0],Ce=re[1],Ue=n.useCallback(function(){var ct=window.innerWidth>window.innerHeight?90:0,yt={isPortrait:ct===0,isLandscape:ct===90,orientation:ct===0?"portrait":"landscape"};ce.orientation!==yt.orientation&&Ce(yt)},[ce.orientation]);return n.useEffect(function(){return(typeof window>"u"?"undefined":E(window))!==void 0&&Xn&&(Ue(),window.addEventListener("load",Ue,!1),window.addEventListener("resize",Ue,!1)),function(){window.removeEventListener("resize",Ue,!1),window.removeEventListener("load",Ue,!1)}},[Ue]),ce}function qr(be){var re=be||window.navigator.userAgent;return S(re)}function lr(be){var re=be||window.navigator.userAgent,ce=qr(re),Ce=vs(ce);return[Ce,ce]}return Ge.AndroidView=so,Ge.BrowserTypes=U,Ge.BrowserView=Ac,Ge.ConsoleView=uo,Ge.CustomView=wa,Ge.IEView=Rc,Ge.IOSView=ei,Ge.MobileOnlyView=Gr,Ge.MobileView=lo,Ge.OsTypes=k,Ge.SmartTVView=Ns,Ge.TabletView=co,Ge.WearableView=Os,Ge.WinPhoneView=$r,Ge.browserName=ao,Ge.browserVersion=ro,Ge.deviceDetect=T,Ge.deviceType=Ja,Ge.engineName=wn,Ge.engineVersion=_s,Ge.fullBrowserVersion=Hr,Ge.getSelectorsByUserAgent=ks,Ge.getUA=_c,Ge.isAndroid=xr,Ge.isBrowser=eo,Ge.isChrome=Ss,Ge.isChromium=Sa,Ge.isConsole=Br,Ge.isDesktop=vr,Ge.isEdge=Qa,Ge.isEdgeChromium=Wr,Ge.isElectron=oo,Ge.isEmbedded=Pr,Ge.isFirefox=wc,Ge.isIE=Fn,Ge.isIOS=to,Ge.isIOS13=Tc,Ge.isIPad13=En,Ge.isIPhone13=io,Ge.isIPod13=Cs,Ge.isLegacyEdge=As,Ge.isMIUI=Cc,Ge.isMacOs=Vr,Ge.isMobile=Xn,Ge.isMobileOnly=Gt,Ge.isMobileSafari=Fr,Ge.isOpera=Xa,Ge.isSafari=Ka,Ge.isSamsungBrowser=Ms,Ge.isSmartTV=Qi,Ge.isTablet=Ji,Ge.isWearable=Za,Ge.isWinPhone=xs,Ge.isWindows=Rs,Ge.isYandex=Ts,Ge.mobileModel=Es,Ge.mobileVendor=Ec,Ge.osName=ws,Ge.osVersion=no,Ge.parseUserAgent=S,Ge.setUserAgent=le,Ge.useDeviceData=qr,Ge.useDeviceSelectors=lr,Ge.useMobileOrientation=fo,Ge.withOrientationChange=Qn,Ge}var hr=wE();function Ql({audioBuffer:a,inPoint:n=0,outPoint:r,loopStart:i,loopEnd:s,onMarkersChange:c,height:d=44,onZoomEdit:f}){const m=L.useRef(null),[h,b]=L.useState({type:null,startX:0}),w=r??(a?a.length-1:0),S=i!==void 0&&s!==void 0,x=()=>{const I=hr.isMobile||hr.isTablet,W=window.innerHeight>window.innerWidth,ee=window.innerWidth<768;return(I||ee)&&W},y={bgAlt:"var(--color-bg-secondary)",border:"var(--color-border-light)",textSecondary:"var(--color-text-secondary)"},g=(I,W,ee,C)=>{const J=Math.ceil(C.length/W),_=ee/2;I.fillStyle="#333333",I.beginPath();for(let K=0;K<W;K++){let P=1,Y=-1;for(let oe=0;oe<J;oe++){const te=C[K*J+oe];te<P&&(P=te),te>Y&&(Y=te)}I.rect(K,(1+P)*_,1,Math.max(1,(Y-P)*_))}I.fill()},E=L.useCallback(()=>{const I=m.current;if(!I||!a)return;const W=I.getContext("2d");if(!W)return;const ee=I.width/window.devicePixelRatio,C=I.height/window.devicePixelRatio;W.clearRect(0,0,ee,C);const J=Y=>a.length>1?Y/a.length*ee:0,_=J(n),K=J(w);W.fillStyle="#f0f0f0",W.fillRect(0,0,ee,C),W.fillStyle="#ffffff",W.fillRect(_,0,K-_,C);const P=a.getChannelData(0);g(W,ee,C,P),R(W,ee,C,a.length)},[a,d,n,w,i,s,S]),R=(I,W,ee,C)=>{if(!C)return;const J=oe=>C>1?oe/C*W:0,_=2,K=_/2,P=Math.max(K,Math.min(W-K,J(n))),Y=Math.max(K,Math.min(W-K,J(w)));if(I.strokeStyle="#333333",I.lineWidth=_,I.beginPath(),I.moveTo(P,0),I.lineTo(P,ee),I.moveTo(Y,0),I.lineTo(Y,ee),I.stroke(),S&&i!==void 0&&s!==void 0){const oe=Math.max(K,Math.min(W-K,J(i))),te=Math.max(K,Math.min(W-K,J(s)));I.strokeStyle="#555555",I.lineWidth=1,I.setLineDash([3,3]),I.beginPath(),I.moveTo(oe,0),I.lineTo(oe,ee),I.stroke(),I.beginPath(),I.moveTo(te,0),I.lineTo(te,ee),I.stroke(),I.setLineDash([])}},O=I=>{if(!a)return;const W=m.current;if(!W)return;const ee=W.getBoundingClientRect(),C=I.clientX-ee.left,J=a.length,_=W.width/window.devicePixelRatio,K=te=>J>1?te/J*_:0,P=[{type:"inPoint",pos:n,tolerance:10},{type:"outPoint",pos:w,tolerance:10}];S&&i!==void 0&&s!==void 0&&P.push({type:"loopStart",pos:i,tolerance:10},{type:"loopEnd",pos:s,tolerance:10});let Y=null,oe=1/0;for(const te of P){const U=K(te.pos),k=Math.abs(C-U);k<te.tolerance&&k<oe&&(Y=te.type,oe=k)}Y&&b({type:Y,startX:C})},A=I=>{if(!h.type||!a)return;const W=m.current;if(!W)return;const ee=W.width/window.devicePixelRatio,C=W.getBoundingClientRect(),J=I.clientX-C.left,_=a.length,K=Math.max(0,Math.min(_-1,Math.floor(J/ee*(_-1)))),P={inPoint:n,outPoint:w,loopStart:i,loopEnd:s};switch(h.type){case"inPoint":P.inPoint=Math.min(K,w-1);break;case"outPoint":P.outPoint=Math.max(K,n+1);break;case"loopStart":s!==void 0&&(P.loopStart=Math.min(K,s-1));break;case"loopEnd":i!==void 0&&(P.loopEnd=Math.max(K,i+1));break}c?.(P)},N=()=>{b({type:null,startX:0})};L.useEffect(()=>{E()},[E]),L.useEffect(()=>{const I=m.current;if(!I)return;const W=()=>{const J=I.parentElement;if(!J)return;const _=J.getBoundingClientRect();if(_.width>0){I.width=_.width*window.devicePixelRatio,I.height=d*window.devicePixelRatio,I.style.width=`${_.width}px`,I.style.height=`${d}px`;const K=I.getContext("2d");K&&(K.setTransform(1,0,0,1,0,0),K.scale(window.devicePixelRatio,window.devicePixelRatio)),E()}},ee=new ResizeObserver(W),C=I.parentElement;return C&&ee.observe(C),window.addEventListener("resize",W),W(),()=>{window.removeEventListener("resize",W),ee.disconnect()}},[d,E]);const M=()=>{if(f)try{if(x()){Lf(f);return}f()}catch(I){console.error("Error in handleZoomClick:",I),f()}},z=I=>{const W=I.currentTarget.getBoundingClientRect(),ee=I.clientX-W.left,C=I.clientY-W.top;ee>W.width-30&&C<30||M()},F=I=>{I.preventDefault()},B=I=>{if(!f)return;const W=I.currentTarget.getBoundingClientRect(),ee=I.changedTouches[0],C=ee.clientX-W.left,J=ee.clientY-W.top;C>W.width-30&&J<30||M()};return a?u.jsxs("div",{style:{width:"100%",position:"relative"},children:[a&&f&&u.jsx("button",{onClick:M,onTouchStart:I=>{I.preventDefault(),I.stopPropagation()},onTouchEnd:I=>{I.preventDefault(),I.stopPropagation(),M()},style:{position:"absolute",top:"2px",right:"2px",width:"24px",height:"24px",border:"none",background:"none",borderRadius:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:y.textSecondary,fontSize:"14px",zIndex:10,padding:0},title:"zoom and edit",children:u.jsx("i",{className:"fas fa-search-plus"})}),u.jsx("canvas",{ref:m,style:{width:"100%",height:d,cursor:h.type?"grabbing":f&&a?"pointer":"grab",border:`1px solid ${y.border}`,borderRadius:"3px",backgroundColor:"#ffffff",display:"block"},onMouseDown:f?void 0:O,onMouseMove:f?void 0:A,onMouseUp:f?void 0:N,onMouseLeave:f?void 0:N,onClick:z,onTouchStart:F,onTouchEnd:B})]}):u.jsx("div",{style:{height:d,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:y.bgAlt,borderRadius:"3px",border:`1px solid ${y.border}`,color:y.textSecondary,fontSize:"0.7rem"},children:"no sample"})}function kf({isOpen:a,onClose:n,audioBuffer:r,initialInPoint:i,initialOutPoint:s,initialLoopStart:c,initialLoopEnd:d,onSave:f}){const m=L.useRef(null),h=L.useRef(null),b=L.useRef(null),w=L.useRef(null),[S,x]=L.useState(0),[y,g]=L.useState(0),[E,R]=L.useState(0),[O,A]=L.useState(0),[N,M]=L.useState(!0),[z,F]=L.useState(null),[B,I]=L.useState(!1),{play:W}=hs(),ee=()=>{const pe=hr.isMobile||hr.isTablet,de=window.innerHeight>window.innerWidth;return pe&&de},C=()=>hr.isMobile||hr.isTablet,J=c!==void 0&&d!==void 0;L.useEffect(()=>{a&&ee()&&(Lf(()=>{}),n())},[a,n]);const _=pe=>r?pe/r.sampleRate:0,K=(pe,de=.01)=>{if(!r)return!1;const Re=r.getChannelData(0);return pe>=0&&pe<Re.length&&Math.abs(Re[pe])<de},P={bg:"var(--color-bg-primary)",bgAlt:"var(--color-bg-secondary)",border:"var(--color-border-light)",text:"var(--color-text-primary)",textSecondary:"var(--color-text-secondary)",action:"var(--color-interactive-focus)"};L.useEffect(()=>{if(a&&r){const pe=r.length/r.sampleRate;x(Math.floor(i/pe*r.length)),g(Math.floor(s/pe*r.length)),J?(R(Math.floor(c/pe*r.length)),A(Math.floor(d/pe*r.length))):(R(0),A(0))}a||(x(0),g(0),R(0),A(0))},[a,r,i,s,c,d,J]);const Y=L.useCallback((pe,de,Re=1e3)=>{if(!r)return pe;const me=r.getChannelData(0),_e=Math.max(0,Math.min(pe,me.length-1));let Ae=_e,T=Math.abs(me[_e]);const G=Math.min(Re,de>0?me.length-_e:_e);for(let X=1;X<=G;X++){const j=_e+X*de;if(j<0||j>=me.length)break;const H=Math.abs(me[j]);if(H<T&&(T=H,Ae=j),H<.01)break}return Ae},[r]),oe=L.useCallback(()=>{const pe=m.current;if(!pe||!r)return;const de=pe.getContext("2d");if(!de)return;const Re=pe.width,me=pe.height,_e=r.getChannelData(0);de.clearRect(0,0,Re,me);const Ae=H=>r.length>1?H/r.length*Re:0,T=Ae(S),G=Ae(y);de.fillStyle="#f0f0f0",de.fillRect(0,0,Re,me),de.fillStyle="#ffffff",de.fillRect(T,0,G-T,me),de.fillStyle="#333333";const X=Math.ceil(_e.length/Re),j=me/2;for(let H=0;H<Re;H++){let Q=1,ue=-1;for(let ye=0;ye<X;ye++){const ie=_e[H*X+ye];ie<Q&&(Q=ie),ie>ue&&(ue=ie)}de.fillRect(H,(1+Q)*j,1,Math.max(1,(ue-Q)*j))}de.strokeStyle="#333333",de.lineWidth=1,de.beginPath(),de.moveTo(0,me/2),de.lineTo(Re,me/2),de.stroke()},[r,S,y,N]),te=L.useCallback(()=>{const pe=m.current;if(!pe||!r)return;const de=pe.getContext("2d");if(!de)return;const Re=pe.width,me=pe.height,_e=r.getChannelData(0),Ae=S/_e.length*Re,T=y/_e.length*Re,G=J?E/_e.length*Re:0,X=J?O/_e.length*Re:0;de.strokeStyle="#333333",de.lineWidth=2,de.beginPath(),de.moveTo(Ae,0),de.lineTo(Ae,me),de.moveTo(T,0),de.lineTo(T,me),de.stroke(),de.fillStyle="#333333";const j=10,H=j,Q=me-H,ue=Q,ye=Q-j;de.beginPath(),de.moveTo(Ae-j/2,ue),de.lineTo(Ae+j/2,ue),de.lineTo(Ae,ye),de.closePath(),de.fill(),de.fillRect(Ae-H/2,Q,H,H),de.beginPath(),de.moveTo(T-j/2,ue),de.lineTo(T+j/2,ue),de.lineTo(T,ye),de.closePath(),de.fill(),de.fillRect(T-H/2,Q,H,H),J&&(de.fillStyle="#555555",de.strokeStyle="#555555",de.lineWidth=1,de.setLineDash([6,4]),de.beginPath(),de.moveTo(G,0),de.lineTo(G,me),de.stroke(),de.setLineDash([]),de.fillRect(G-10/2,0,10,10),de.beginPath(),de.moveTo(G-10/2,10),de.lineTo(G+10/2,10),de.lineTo(G,20),de.closePath(),de.fill(),de.setLineDash([6,4]),de.beginPath(),de.moveTo(X,0),de.lineTo(X,me),de.stroke(),de.setLineDash([]),de.fillRect(X-10/2,0,10,10),de.beginPath(),de.moveTo(X-10/2,10),de.lineTo(X+10/2,10),de.lineTo(X,20),de.closePath(),de.fill())},[r,S,y,E,O,J]);L.useEffect(()=>{if(!a||!r)return;const pe=m.current;if(!pe)return;const de=()=>{const Re=pe.parentElement;Re&&(pe.width=Re.clientWidth,pe.height=C()?120:200,oe(),te())};return de(),window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[a,r,oe,te]),L.useEffect(()=>{if(a&&r){const pe=m.current;pe&&pe.getContext("2d")&&(oe(),te())}},[S,y,E,O,a,r,oe,te]);const U=pe=>{if(!r)return;const de=m.current;if(!de)return;const Re=de.getBoundingClientRect(),me=pe.clientX-Re.left,_e=pe.clientY-Re.top,Ae=de.width,T=de.height,G=r.getChannelData(0),X=S/G.length*Ae,j=y/G.length*Ae,H=J?E/G.length*Ae:0,Q=J?O/G.length*Ae:0,ue=T*.2,ye=T*.8,ie=C()?44/2:40;let ge=[];J?_e<=ue?ge=["loopStart","loopEnd"]:_e>=ye?ge=["in","out"]:ge=["in","loopStart","loopEnd","out"]:ge=["in","out"];const Oe={in:X,loopStart:H,loopEnd:Q,out:j};let Le=!1;for(const De of ge)if(Math.abs(me-Oe[De])<ie){F(De),Le=!0;break}if(!Le){const De={};ge.forEach(Ve=>{De[Ve]=Math.abs(me-Oe[Ve])});const He=Object.keys(De).reduce((Ve,Ct)=>De[Ve]<De[Ct]?Ve:Ct);let Ie=Math.round(me/Ae*G.length);switch(N&&(Ie=Y(Ie,Ie>G.length/2?-1:1,500)),He){case"in":{const Ve=Math.max(0,Math.min(Ie,G.length-1));x(Ve),J&&Ve>=E&&R(Math.min(Ve+1,O-1));break}case"loopStart":{J&&R(Math.max(S,Math.min(Ie,O-1)));break}case"loopEnd":{J&&A(Math.max(E+1,Math.min(Ie,y)));break}case"out":{const Ve=Math.max(J?E+2:S+1,Math.min(Ie,G.length));g(Ve),J&&Ve<=O&&A(Math.max(Ve-1,E+1));break}}}},k=pe=>{if(!z||!r)return;const de=m.current;if(!de)return;const Re=de.getBoundingClientRect(),me=pe.clientX-Re.left,_e=de.width,Ae=r.getChannelData(0),T=Math.round(me/_e*Ae.length);let G=T;switch(N&&(G=Y(T,T>Ae.length/2?-1:1,500)),z){case"in":{const X=Math.max(0,Math.min(G,J?O-2:y-1,Ae.length-1));x(X),J&&X>=E&&R(Math.min(X+1,O-1));break}case"loopStart":{J&&(G<S?(x(Math.max(0,G)),R(Math.max(Math.max(0,G),Math.min(G,O-1)))):R(Math.max(S,Math.min(G,O-1))));break}case"loopEnd":{J&&A(Math.max(E+1,Math.min(G,y)));break}case"out":{const X=Math.max(J?E+2:S+1,Math.min(G,Ae.length));g(X),J&&X<=O&&A(Math.max(X-1,E+1));break}}},$=()=>{F(null)},Z=()=>{if(!r)return;const pe=r.length/r.sampleRate,de=S/r.length*pe,Re=y/r.length*pe;if(J){const me=E/r.length*pe,_e=O/r.length*pe;f(de,Re,me,_e)}else f(de,Re);n()},le=async()=>{if(r)try{await W(r,{inFrame:S,outFrame:y})}catch(pe){console.error("Error playing selection:",pe)}};L.useEffect(()=>{if(!a)return;const pe=de=>{(de.key==="p"||de.key==="P")&&(de.preventDefault(),le().catch(Re=>{console.error("Error playing selection:",Re)}))};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[a]);const q=pe=>{if(!r||!m.current)return;const Re=pe.touches[0];U({...pe,clientX:Re.clientX,clientY:Re.clientY,nativeEvent:pe.nativeEvent})},Ee=pe=>{if(!z||!r||!m.current)return;const Re=pe.touches[0];k({...pe,clientX:Re.clientX,clientY:Re.clientY,nativeEvent:pe.nativeEvent})},Fe=()=>{$()};return L.useLayoutEffect(()=>{a?(w.current=document.activeElement,setTimeout(()=>{b.current?.focus()},0)):w.current&&w.current.focus()},[a]),L.useEffect(()=>{if(!a)return;const pe=de=>{if(!h.current)return;const Re=h.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!Re.length)return;const me=Re[0],_e=Re[Re.length-1];de.key==="Tab"&&(de.shiftKey?document.activeElement===me&&(de.preventDefault(),_e.focus()):document.activeElement===_e&&(de.preventDefault(),me.focus()))};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[a]),a?u.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"waveform-zoom-modal-title",ref:h,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,fontFamily:'"Montserrat", "Arial", sans-serif'},onClick:n,children:u.jsxs("div",{style:{backgroundColor:P.bg,borderRadius:C()?"3px":"6px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",maxWidth:C()?"100%":"900px",width:C()?"100%":"90%",height:C()?"100%":"auto",margin:C()?"0":"0 1rem",overflow:"hidden",display:"flex",flexDirection:"column"},onClick:pe=>pe.stopPropagation(),children:[u.jsx("div",{style:{padding:C()?"0.75rem 1rem 0.5rem 1rem":"1.5rem 1.5rem 1rem 1.5rem",borderBottom:`1px solid ${P.border}`,flexShrink:0},children:u.jsxs("h3",{id:"waveform-zoom-modal-title",style:{margin:"0",fontSize:C()?"1rem":"1.25rem",fontWeight:"300",color:P.text,display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-search-plus",style:{color:P.textSecondary,fontSize:C()?"1rem":"1.25rem"}}),"zoom and edit markers",u.jsx(Zi,{content:u.jsxs(u.Fragment,{children:[u.jsxs("h3",{children:[u.jsx("i",{className:"fas fa-edit",style:{marginRight:"0.5rem"}}),"waveform editor"]}),u.jsx("p",{children:"drag markers to adjust positions. press 'p' to preview."})]}),isVisible:B,children:u.jsx("i",{className:"fas fa-question-circle",style:{color:P.textSecondary,fontSize:C()?"0.9rem":"1rem",cursor:"help",marginLeft:"0.25rem"},onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1)})})]})}),u.jsxs("div",{style:{padding:C()?"0.75rem 1rem":"1.5rem",color:P.textSecondary,fontSize:C()?"0.85rem":"0.95rem",lineHeight:"1.5",flex:1,overflow:"auto"},children:[u.jsx("div",{style:{marginBottom:C()?"0.75rem":"1rem"},children:u.jsx("canvas",{ref:m,"aria-label":"waveform editor: drag markers to set sample and loop points",tabIndex:0,style:{width:"100%",height:C()?"120px":"200px",border:`1px solid ${P.border}`,borderRadius:"3px",cursor:z?"grabbing":"pointer",display:"block"},onMouseDown:U,onMouseMove:k,onMouseUp:$,onMouseLeave:$,onTouchStart:q,onTouchMove:Ee,onTouchEnd:Fe})}),J?u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"auto auto",gap:C()?"1rem":"2rem",marginBottom:C()?"1rem":"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:C()?"0.25rem":"0.5rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:C()?"70px":"80px",fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,flexShrink:0},children:"sample start:"}),u.jsx("span",{style:{padding:C()?"0.2rem 0.4rem":"0.25rem 0.5rem",backgroundColor:P.bgAlt,border:`1px solid ${P.border}`,borderRadius:"3px",fontSize:C()?"0.75rem":"0.8rem",fontWeight:"500",minWidth:C()?"80px":"90px",textAlign:"right",flexShrink:0},children:r?S.toLocaleString():"0"}),u.jsxs("span",{style:{fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:["frames (",r?_(S).toFixed(3):"0.000","s)"]}),u.jsx("span",{style:{fontSize:C()?"0.65rem":"0.7rem",color:K(S)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:K(S)?" zero":" not zero"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:C()?"0.25rem":"0.5rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:C()?"70px":"80px",fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,flexShrink:0},children:"sample end:"}),u.jsx("span",{style:{padding:C()?"0.2rem 0.4rem":"0.25rem 0.5rem",backgroundColor:P.bgAlt,border:`1px solid ${P.border}`,borderRadius:"3px",fontSize:C()?"0.75rem":"0.8rem",fontWeight:"500",minWidth:C()?"80px":"90px",textAlign:"right",flexShrink:0},children:r?y.toLocaleString():"0"}),u.jsxs("span",{style:{fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:["frames (",r?_(y).toFixed(3):"0.000","s)"]}),u.jsx("span",{style:{fontSize:C()?"0.65rem":"0.7rem",color:K(y)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:K(y)?" zero":" not zero"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:C()?"0.25rem":"0.5rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:C()?"70px":"80px",fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,flexShrink:0},children:"loop start:"}),u.jsx("span",{style:{padding:C()?"0.2rem 0.4rem":"0.25rem 0.5rem",backgroundColor:P.bgAlt,border:`1px solid ${P.border}`,borderRadius:"3px",fontSize:C()?"0.75rem":"0.8rem",fontWeight:"500",minWidth:C()?"80px":"90px",textAlign:"right",flexShrink:0},children:r?E.toLocaleString():"0"}),u.jsxs("span",{style:{fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:["frames (",r?_(E).toFixed(3):"0.000","s)"]}),u.jsx("span",{style:{fontSize:C()?"0.65rem":"0.7rem",color:K(E)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:K(E)?" zero":" not zero"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:C()?"0.25rem":"0.5rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:C()?"70px":"80px",fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,flexShrink:0},children:"loop end:"}),u.jsx("span",{style:{padding:C()?"0.2rem 0.4rem":"0.25rem 0.5rem",backgroundColor:P.bgAlt,border:`1px solid ${P.border}`,borderRadius:"3px",fontSize:C()?"0.75rem":"0.8rem",fontWeight:"500",minWidth:C()?"80px":"90px",textAlign:"right",flexShrink:0},children:r?O.toLocaleString():"0"}),u.jsxs("span",{style:{fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:["frames (",r?_(O).toFixed(3):"0.000","s)"]}),u.jsx("span",{style:{fontSize:C()?"0.65rem":"0.7rem",color:K(O)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:K(O)?" zero":" not zero"})]})]}):u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:C()?"1rem":"2rem",marginBottom:C()?"1rem":"1.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:C()?"0.25rem":"0.5rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:C()?"70px":"80px",fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,flexShrink:0},children:"sample start:"}),u.jsx("span",{style:{padding:C()?"0.2rem 0.4rem":"0.25rem 0.5rem",backgroundColor:P.bgAlt,border:`1px solid ${P.border}`,borderRadius:"3px",fontSize:C()?"0.75rem":"0.8rem",fontWeight:"500",minWidth:C()?"80px":"90px",textAlign:"right",flexShrink:0},children:S.toLocaleString()}),u.jsxs("span",{style:{fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:["frames (",_(S).toFixed(3),"s)"]}),u.jsx("span",{style:{fontSize:C()?"0.65rem":"0.7rem",color:K(S)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:K(S)?" zero":" not zero"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:C()?"0.25rem":"0.5rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:C()?"70px":"80px",fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,flexShrink:0},children:"sample end:"}),u.jsx("span",{style:{padding:C()?"0.2rem 0.4rem":"0.25rem 0.5rem",backgroundColor:P.bgAlt,border:`1px solid ${P.border}`,borderRadius:"3px",fontSize:C()?"0.75rem":"0.8rem",fontWeight:"500",minWidth:C()?"80px":"90px",textAlign:"right",flexShrink:0},children:y.toLocaleString()}),u.jsxs("span",{style:{fontSize:C()?"0.7rem":"0.75rem",color:P.textSecondary,marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:["frames (",_(y).toFixed(3),"s)"]}),u.jsx("span",{style:{fontSize:C()?"0.65rem":"0.7rem",color:K(y)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:C()?"0.25rem":"0.5rem",flexShrink:0},children:K(y)?" zero":" not zero"})]})]}),u.jsx("div",{style:{borderTop:`1px solid ${P.border}`,paddingTop:C()?"0.75rem":"1rem",marginTop:C()?"0.75rem":"1rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:C()?"0.75rem":"1rem",marginBottom:C()?"0.75rem":"1rem",flexWrap:C()?"wrap":"nowrap"},children:[u.jsxs("button",{ref:b,onClick:()=>le().catch(pe=>{console.error("Error playing selection:",pe)}),style:{padding:C()?"0.75rem 1.25rem":"0.65rem 1rem",border:`1px solid ${P.border}`,borderRadius:"3px",background:"transparent",color:P.textSecondary,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:C()?"1rem":"0.875rem",fontWeight:"500",fontFamily:"inherit",minHeight:C()?"44px":void 0},children:[u.jsx("i",{className:"fas fa-play",style:{fontSize:C()?"0.75rem":"0.8rem"}}),"play selection (P)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:C()?"0.8rem":"0.875rem",fontWeight:"500",color:"var(--color-text-primary)",cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:N,onChange:pe=>M(pe.target.checked),style:{width:C()?"14px":"16px",height:C()?"14px":"16px",accentColor:"var(--color-text-primary)"}}),u.jsx("span",{style:{marginLeft:"8px",cursor:"pointer",userSelect:"none"},children:"snap to zero crossings"})]})]})})]}),u.jsxs("div",{style:{padding:C()?"0.75rem 1rem":"1rem 1.5rem",background:P.bgAlt,borderTop:`1px solid ${P.border}`,display:"flex",justifyContent:"flex-end",gap:C()?"0.75rem":"1rem",flexShrink:0},children:[u.jsx("button",{onClick:n,style:{padding:C()?"0.75rem 1.25rem":"0.65rem 1rem",border:`1px solid ${P.border}`,borderRadius:"3px",background:"transparent",color:P.textSecondary,cursor:"pointer",fontSize:C()?"1rem":"0.875rem",minHeight:C()?"44px":void 0},children:"cancel"}),u.jsx("button",{onClick:Z,style:{padding:C()?"0.75rem 1.25rem":"0.65rem 1rem",border:"none",borderRadius:"3px",background:P.action,color:"#fff",cursor:"pointer",fontSize:C()?"1rem":"0.875rem",minHeight:C()?"44px":void 0},children:"save markers"})]})]})}):null}function Jl({duration:a,fileSize:n,channels:r,bitDepth:i,sampleRate:s,isFloat:c=!1}){if(!a||!n||!r||!i||!s)return null;const d=w=>w<1?`${Math.round(w*1e3)}ms`:`${w.toFixed(2)}s`,f=w=>`${(w/1e3).toFixed(1)}khz`,m=w=>w===1?"mono":"stereo",h={display:"inline-flex",alignItems:"center",gap:"0.2rem",background:"var(--color-bg-secondary)",border:"1px solid var(--color-border-light)",borderRadius:"3px",padding:"0.1rem 0.25rem",fontSize:"0.7rem",color:"var(--color-text-secondary)",fontWeight:"500",marginRight:"0.2rem",marginBottom:"0.1rem",whiteSpace:"nowrap"},b={fontSize:"0.6rem",opacity:.8};return u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.1rem",alignItems:"center"},children:[u.jsxs("span",{style:h,children:[u.jsx("i",{className:"fa fa-hdd",style:b}),Mf(n)]}),u.jsxs("span",{style:h,children:[u.jsx("i",{className:"fa fa-clock",style:b}),d(a)]}),u.jsxs("span",{style:h,children:[u.jsx("i",{className:"fa fa-database",style:b}),i===32&&c?"32-bit float":`${i}-bit`]}),u.jsxs("span",{style:h,children:[u.jsx("i",{className:"fa fa-tachometer-alt",style:b}),f(s)]}),u.jsxs("span",{style:h,children:[u.jsx("i",{className:`fa ${r===1?"fa-volume-down":"fa-volume-up"}`,style:b}),m(r)]})]})}function EE({audioBuffer:a,inPoint:n,outPoint:r,onMarkersChange:i,height:s=80,className:c="",showSnapToZero:d=!0,showFrameDisplay:f=!0,defaultSnapToZero:m=!0}){const h=L.useRef(null),[b,w]=L.useState(m),[S,x]=L.useState(null),y=F=>F/a.sampleRate,g=(F,B=.01)=>{const I=a.getChannelData(0);return F>=0&&F<I.length&&Math.abs(I[F])<B},E=L.useCallback((F,B,I=1e3)=>{const W=a.getChannelData(0),ee=Math.max(0,Math.min(F,W.length-1));let C=ee,J=Math.abs(W[ee]);const _=Math.min(I,B>0?W.length-ee:ee);for(let K=1;K<=_;K++){const P=ee+K*B;if(P<0||P>=W.length)break;const Y=Math.abs(W[P]);if(Y<J&&(J=Y,C=P),Y<.01)break}return C},[a]),R=L.useCallback(()=>{const F=h.current;if(!F)return;const B=F.getContext("2d");if(!B)return;const I=F.width,W=F.height,ee=a.getChannelData(0);B.clearRect(0,0,I,W);const C=Y=>a.length>1?Y/a.length*I:0,J=C(n),_=C(r);B.fillStyle="#f0f0f0",B.fillRect(0,0,I,W),B.fillStyle="#ffffff",B.fillRect(J,0,_-J,W),B.fillStyle="#333333";const K=Math.ceil(ee.length/I),P=W/2;for(let Y=0;Y<I;Y++){let oe=1,te=-1;for(let U=0;U<K;U++){const k=ee[Y*K+U];k<oe&&(oe=k),k>te&&(te=k)}B.fillRect(Y,(1+oe)*P,1,Math.max(1,(te-oe)*P))}B.strokeStyle="#333333",B.lineWidth=1,B.beginPath(),B.moveTo(0,W/2),B.lineTo(I,W/2),B.stroke()},[a,n,r,b]),O=L.useCallback(()=>{const F=h.current;if(!F)return;const B=F.getContext("2d");if(!B)return;const I=F.width,W=F.height,ee=a.getChannelData(0),C=n/ee.length*I,J=r/ee.length*I;B.strokeStyle="#333333",B.lineWidth=2,B.beginPath(),B.moveTo(C,0),B.lineTo(C,W),B.moveTo(J,0),B.lineTo(J,W),B.stroke(),B.fillStyle="#333333";const _=10,K=_,P=W-K,Y=P,oe=P-_;B.beginPath(),B.moveTo(C-_/2,Y),B.lineTo(C+_/2,Y),B.lineTo(C,oe),B.closePath(),B.fill(),B.fillRect(C-K/2,P,K,K),B.beginPath(),B.moveTo(J-_/2,Y),B.lineTo(J+_/2,Y),B.lineTo(J,oe),B.closePath(),B.fill(),B.fillRect(J-K/2,P,K,K)},[a,n,r]);L.useEffect(()=>{const F=h.current;if(!F)return;const B=()=>{const I=F.parentElement;I&&(F.width=I.clientWidth,F.height=s,R(),O())};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[R,O,s]),L.useEffect(()=>{const F=h.current;F&&F.getContext("2d")&&(R(),O())},[n,r,b,R,O]);const A=F=>{const B=h.current;if(!B)return;const I=B.getBoundingClientRect(),W=F.clientX-I.left,ee=I.width,C=n/a.length*ee,J=r/a.length*ee,_=15;Math.abs(W-C)<_?x("in"):Math.abs(W-J)<_&&x("out")},N=F=>{if(!S)return;const B=h.current;if(!B)return;const I=B.getBoundingClientRect(),W=F.clientX-I.left,ee=I.width;let C=Math.floor(W/ee*a.length);if(C=Math.max(0,Math.min(a.length,C)),b&&(C=E(C,0)),S==="in"){const J=Math.min(C,r-1e3);i({inPoint:J,outPoint:r})}else if(S==="out"){const J=Math.max(C,n+1e3);i({inPoint:n,outPoint:J})}},M=()=>{x(null)},z={bgAlt:"var(--color-bg-secondary)",border:"var(--color-border-light)",textSecondary:"var(--color-text-secondary)"};return u.jsxs("div",{className:c,children:[u.jsx("canvas",{ref:h,style:{width:"100%",height:`${s}px`,border:`1px solid ${z.border}`,borderRadius:"3px",cursor:S?"grabbing":"pointer",display:"block"},onMouseDown:A,onMouseMove:N,onMouseUp:M,onMouseLeave:M}),f&&u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:"70px",fontSize:"0.7rem",color:z.textSecondary,flexShrink:0},children:"sample start:"}),u.jsx("span",{style:{padding:"0.2rem 0.4rem",backgroundColor:z.bgAlt,border:`1px solid ${z.border}`,borderRadius:"3px",fontSize:"0.75rem",fontWeight:"500",minWidth:"80px",textAlign:"right",flexShrink:0},children:n.toLocaleString()}),u.jsxs("span",{style:{fontSize:"0.7rem",color:z.textSecondary,marginLeft:"0.25rem",flexShrink:0},children:["frames (",y(n).toFixed(3),"s)"]}),u.jsx("span",{style:{fontSize:"0.65rem",color:g(n)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:"0.25rem",flexShrink:0},children:g(n)?" zero":" not zero"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",flexWrap:"nowrap"},children:[u.jsx("span",{style:{minWidth:"70px",fontSize:"0.7rem",color:z.textSecondary,flexShrink:0},children:"sample end:"}),u.jsx("span",{style:{padding:"0.2rem 0.4rem",backgroundColor:z.bgAlt,border:`1px solid ${z.border}`,borderRadius:"3px",fontSize:"0.75rem",fontWeight:"500",minWidth:"80px",textAlign:"right",flexShrink:0},children:r.toLocaleString()}),u.jsxs("span",{style:{fontSize:"0.7rem",color:z.textSecondary,marginLeft:"0.25rem",flexShrink:0},children:["frames (",y(r).toFixed(3),"s)"]}),u.jsx("span",{style:{fontSize:"0.65rem",color:g(r)?"#6b7280":"#9ca3af",fontWeight:"500",marginLeft:"0.25rem",flexShrink:0},children:g(r)?" zero":" not zero"})]})]}),d&&u.jsx("div",{style:{marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",fontWeight:"500",color:z.textSecondary,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:b,onChange:F=>w(F.target.checked),style:{width:"12px",height:"12px",accentColor:z.textSecondary}}),u.jsx("span",{children:"snap to zero"})]})})]})}function _E({isOpen:a,onClose:n,sampleIndex:r}){const{state:i,dispatch:s}=un(),{play:c,stopCurrentPlayback:d}=hs(),f=i.drumSamples[r],[m,h]=L.useState({playmode:"oneshot",reverse:!1,tune:0,gain:0,pan:0}),[b,w]=L.useState(null),[S,x]=L.useState(null),[y,g]=L.useState(!1);L.useEffect(()=>{if(a&&f?.isLoaded){h({playmode:f.playmode||"oneshot",reverse:f.reverse||!1,tune:f.tune||0,gain:f.gain||0,pan:f.pan||0});const B=f.inPoint!==void 0?f.inPoint:0,I=f.outPoint!==void 0?f.outPoint:f.audioBuffer?.duration||0;w(B),x(I),(f.inPoint===void 0||f.outPoint===void 0)&&f.audioBuffer&&s({type:"UPDATE_DRUM_SAMPLE",payload:{index:r,updates:{inPoint:0,outPoint:f.audioBuffer.duration}}})}},[a,f,r,s]);const E=()=>f?.audioBuffer?Math.floor((b!==null?b:f.inPoint||0)*f.audioBuffer.sampleRate):0,R=()=>f?.audioBuffer?Math.floor((S!==null?S:f.outPoint||f.audioBuffer.duration)*f.audioBuffer.sampleRate):0,O=B=>f?.audioBuffer?B/f.audioBuffer.sampleRate:0,A=()=>{if(f?.isLoaded){const B={playmode:f.playmode||"oneshot",reverse:f.reverse||!1,tune:f.tune||0,gain:f.gain||0,pan:f.pan||0},I=m.playmode!==B.playmode||m.reverse!==B.reverse||m.tune!==B.tune||m.gain!==B.gain||m.pan!==B.pan;s({type:"UPDATE_DRUM_SAMPLE",payload:{index:r,updates:{...m,inPoint:b!==null?b:f.inPoint,outPoint:S!==null?S:f.outPoint,hasBeenEdited:f.hasBeenEdited||I}}})}n()},N=()=>{w(null),x(null),n()},M=async()=>{if(!f?.audioBuffer)return;const B=E(),I=R();try{m.playmode==="gate"?await c(f.audioBuffer,{inFrame:B,outFrame:I,playbackRate:Math.pow(2,m.tune/12),gain:m.gain,pan:m.pan,reverse:m.reverse}):await c(f.audioBuffer,{inFrame:B,outFrame:I,playbackRate:Math.pow(2,m.tune/12),gain:m.gain,pan:m.pan,reverse:m.reverse})}catch(W){console.error("Error playing sample:",W)}},z=()=>{m.playmode==="gate"&&d()};if(TE(a,M,z,m.playmode),!a)return null;const F={bg:"var(--color-bg-primary)",bgAlt:"var(--color-bg-secondary)",border:"var(--color-border-light)",borderMedium:"var(--color-border-medium, var(--color-border-light))",text:"var(--color-text-primary)",textSecondary:"var(--color-text-secondary)",action:"var(--color-interactive-focus)",shadow:"var(--color-shadow-primary, rgba(0,0,0,0.15))",white:"var(--color-white, #fff)"};return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1050,fontFamily:"inherit",padding:"1rem",boxSizing:"border-box"},onClick:B=>{B.target===B.currentTarget&&N()},children:u.jsxs("div",{className:"drum-sample-settings-modal",style:{background:F.bg,borderRadius:"15px",boxShadow:`0 2px 8px ${F.shadow}`,width:"90%",maxWidth:"500px",maxHeight:"calc(100vh - 2rem)",minHeight:"auto",overflow:"hidden",border:`1px solid ${F.border}`,display:"flex",flexDirection:"column",position:"relative",margin:"0 1rem"},children:[u.jsxs("div",{style:{padding:"1rem 1rem 0.75rem 1rem",borderBottom:`1px solid ${F.border}`,display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[u.jsx("i",{className:"fas fa-cog",style:{color:F.textSecondary,fontSize:"1.25rem"}}),u.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:500,color:F.text,textTransform:"lowercase",letterSpacing:0},children:"sample options"})]}),u.jsxs("div",{style:{padding:"1rem",background:F.bg,overflowY:"auto",flex:1,minHeight:0,maxHeight:"calc(100vh - 200px)",WebkitOverflowScrolling:"touch"},children:[u.jsxs("div",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[u.jsx("label",{style:{minWidth:"80px",margin:0,fontSize:"0.9rem",fontWeight:500,color:F.text,textTransform:"lowercase"},children:"playmode"}),u.jsxs("select",{style:{flex:1,minWidth:"180px",padding:"0.5rem",border:`1px solid ${F.border}`,borderRadius:"6px",fontSize:"0.9rem",color:F.text,background:F.bgAlt,outline:"none",minHeight:"44px"},value:m.playmode,onChange:B=>h({...m,playmode:B.target.value}),children:[u.jsx("option",{value:"oneshot",children:"oneshot - play whole sample"}),u.jsx("option",{value:"group",children:"mute group - choke when another sample plays"}),u.jsx("option",{value:"loop",children:"loop - loop at sample end"}),u.jsx("option",{value:"gate",children:"key - play while held"})]})]}),u.jsxs("div",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[u.jsx("label",{style:{minWidth:"80px",margin:0,fontSize:"0.9rem",fontWeight:500,color:F.text,textTransform:"lowercase"},children:"direction"}),u.jsxs("button",{type:"button",style:{background:F.textSecondary,color:F.white,border:"none",minWidth:"90px",padding:"0.5rem",borderRadius:"6px",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",outline:"none",boxShadow:"none",transition:"background 0.15s",minHeight:"44px"},onClick:()=>h({...m,reverse:!m.reverse}),children:[u.jsx("i",{className:"fa fa-play",style:{transform:m.reverse?"scaleX(-1)":"",color:F.white}}),u.jsx("span",{style:{marginLeft:"0.5rem",textTransform:"lowercase"},children:m.reverse?"reverse":"forward"})]})]}),f?.audioBuffer&&u.jsxs("div",{style:{position:"relative",marginBottom:"1rem",padding:"0.5rem",width:"100%",minHeight:"60px",overflow:"hidden"},children:[u.jsx(EE,{audioBuffer:f.audioBuffer,inPoint:E(),outPoint:R(),onMarkersChange:B=>{f?.audioBuffer&&(w(O(B.inPoint)),x(O(B.outPoint)))},height:60,className:"sample-waveform",showSnapToZero:!1,showFrameDisplay:!1,defaultSnapToZero:!0}),u.jsx("button",{type:"button","aria-label":"zoom waveform",style:{position:"absolute",top:8,right:8,background:"none",border:"none",color:F.textSecondary,fontSize:"1rem",cursor:"pointer",zIndex:2,padding:0,lineHeight:1},onClick:()=>g(!0),children:u.jsx("i",{className:"fa fa-search-plus"})}),i.drumSettings.autoZeroCrossing&&u.jsxs("button",{type:"button",style:{marginTop:"0.5rem",padding:"0.5rem 1.25rem",border:"none",borderRadius:"6px",background:F.action,color:F.white,fontSize:"0.9rem",fontWeight:500,cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",gap:"0.5rem"},onClick:()=>s({type:"APPLY_ZERO_CROSSING_TO_DRUM_SAMPLE",payload:r}),children:[u.jsx("i",{className:"fas fa-wave-square",style:{fontSize:"1rem"}}),"apply zero crossing"]}),y&&u.jsx(kf,{isOpen:y,onClose:()=>g(!1),audioBuffer:f.audioBuffer,initialInPoint:b!==null?b:f.inPoint||0,initialOutPoint:S!==null?S:f.outPoint||f.audioBuffer.duration||0,onSave:(B,I)=>{w(B),x(I),g(!1)}})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:500,color:F.text,marginBottom:"0.5rem",textTransform:"lowercase"},children:["tuning: ",m.tune," semitones"]}),u.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",padding:0,margin:0},children:u.jsx(vn,{id:"sample-tuning",min:-48,max:48,step:1,value:m.tune,onChange:({value:B})=>h({...m,tune:B}),hideTextInput:!0,style:{width:"100%",maxWidth:"100%"},className:"full-width-slider"})})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:500,color:F.text,marginBottom:"0.5rem",textTransform:"lowercase"},children:["gain: ",m.gain," dbfs"]}),u.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",padding:0,margin:0},children:u.jsx(vn,{id:"sample-gain",min:-30,max:20,step:1,value:m.gain,onChange:({value:B})=>h({...m,gain:B}),hideTextInput:!0,style:{width:"100%",maxWidth:"100%"},className:"full-width-slider"})})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:500,color:F.text,textTransform:"lowercase"},children:["pan: ",m.pan]}),u.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",padding:0,margin:0},children:u.jsx(vn,{id:"sample-pan",min:-100,max:100,step:1,value:m.pan,onChange:({value:B})=>h({...m,pan:B}),hideTextInput:!0,style:{width:"100%",maxWidth:"100%"},className:"full-width-slider"})})]})]}),u.jsxs("div",{style:{padding:"0.75rem 1rem 1rem 1rem",display:"flex",gap:"0.5rem",justifyContent:"flex-end",borderTop:`1px solid ${F.border}`,background:F.bg,flexShrink:0,flexWrap:"wrap"},children:[u.jsxs("button",{type:"button",style:{padding:"0.625rem 1rem",border:`1px solid ${F.border}`,borderRadius:"6px",backgroundColor:F.bg,color:F.textSecondary,fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px",minHeight:"44px",display:"flex",alignItems:"center",gap:"0.5rem"},onClick:N,onMouseEnter:B=>{B.currentTarget.style.backgroundColor=F.bgAlt,B.currentTarget.style.borderColor=F.borderMedium,B.currentTarget.style.color=F.text},onMouseLeave:B=>{B.currentTarget.style.backgroundColor=F.bg,B.currentTarget.style.borderColor=F.border,B.currentTarget.style.color=F.textSecondary},children:[u.jsx("i",{className:"fas fa-times",style:{marginRight:"0.25rem"}}),"cancel"]}),u.jsxs("button",{type:"button",style:{padding:"0.625rem 1rem",border:"none",borderRadius:"6px",backgroundColor:F.text,color:F.white,fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px",minHeight:"44px",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseDown:()=>{m.playmode==="gate"&&M().catch(B=>{console.error("Error playing sample:",B)})},onMouseUp:()=>{m.playmode==="gate"&&z()},onClick:()=>{m.playmode!=="gate"&&M().catch(B=>{console.error("Error playing sample:",B)})},onMouseEnter:B=>{B.currentTarget.style.backgroundColor=F.textSecondary,B.currentTarget.style.transform="translateY(-1px)",B.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:B=>{B.currentTarget.style.backgroundColor=F.text,B.currentTarget.style.transform="translateY(0)",B.currentTarget.style.boxShadow="none",m.playmode==="gate"&&z()},children:[u.jsx("i",{className:"fa fa-play",style:{marginRight:"0.25rem"}}),"play (P)"]}),u.jsxs("button",{type:"button",style:{padding:"0.625rem 1rem",border:"none",borderRadius:"6px",backgroundColor:F.action,color:F.white,fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px",minHeight:"44px",display:"flex",alignItems:"center",gap:"0.5rem"},onClick:A,onMouseEnter:B=>{B.currentTarget.style.backgroundColor=F.text,B.currentTarget.style.transform="translateY(-1px)",B.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:B=>{B.currentTarget.style.backgroundColor=F.action,B.currentTarget.style.transform="translateY(0)",B.currentTarget.style.boxShadow="none"},children:[u.jsx("i",{className:"fa fa-save",style:{marginRight:"0.25rem"}}),"save"]})]})]})})}function TE(a,n,r,i){const s=ne.useRef(!1);L.useEffect(()=>{if(!a)return;const c=f=>{f.key.toLowerCase()==="p"&&!f.ctrlKey&&!f.metaKey&&!f.altKey&&(i==="gate"?s.current||(s.current=!0,n()):n(),f.preventDefault())},d=f=>{f.key.toLowerCase()==="p"&&!f.ctrlKey&&!f.metaKey&&!f.altKey&&(i==="gate"&&r&&(s.current=!1,r()),f.preventDefault())};return document.addEventListener("keydown",c),i==="gate"&&document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",c),i==="gate"&&document.removeEventListener("keyup",d)}},[a,n,r,i])}const An=({icon:a,onClick:n,title:r,disabled:i,color:s})=>u.jsx("button",{type:"button",onClick:n,title:r,disabled:i,style:{width:"44px",height:"44px",minWidth:"44px",minHeight:"44px",maxWidth:"44px",maxHeight:"44px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--color-border-light)",borderRadius:"3px",backgroundColor:"var(--color-bg-primary)",cursor:i?"not-allowed":"pointer",flexShrink:0,color:s||"var(--color-text-secondary)",opacity:i?.5:1,transition:"opacity 0.2s"},"aria-label":r,children:u.jsx("i",{className:a,style:{fontSize:"18px",pointerEvents:"none"}})}),Uy=["kick","kick alt","snare","snare alt","rim","hand clap","tambourine","shaker","closed hi-hat","clave","open hi-hat","cabasa","low tom","ride cymbal","mid-tom","crash cymbal","hi-tom","cowbell","triangle","low tom","low conga","clave","hi-conga","guiro"],it={bg:"var(--color-bg-primary)",bgAlt:"var(--color-bg-secondary)",border:"var(--color-border-light)",borderMed:"var(--color-border-medium)",borderSubtle:"var(--color-border-subtle)",text:"var(--color-text-primary)",textSecondary:"var(--color-text-secondary)",action:"var(--color-interactive-focus)"};function CE({onFileUpload:a,onClearSample:n,onRecordSample:r}){const{state:i,dispatch:s}=un(),{play:c}=hs(),d=L.useRef([]),[f,m]=L.useState(!1),[h,b]=L.useState(!1),[w,S]=L.useState(0),[x,y]=L.useState(!1),[g,E]=L.useState(null),[R,O]=L.useState(null),[A,N]=L.useState(null);L.useEffect(()=>{},[i.drumSamples]),L.useEffect(()=>{const U=()=>{m(window.innerWidth<768)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]);const M=(U,k)=>{try{a(U,k)}catch($){console.error("Error in handleFileSelect:",$)}},z=U=>{d.current[U]?.click()},F=async U=>{const k=i.drumSamples[U];if(!(!k?.isLoaded||!k.audioBuffer))try{await c(k.audioBuffer,{inFrame:k.inPoint!==void 0?Math.floor(k.inPoint*k.audioBuffer.sampleRate):0,outFrame:k.outPoint!==void 0?Math.floor(k.outPoint*k.audioBuffer.sampleRate):k.audioBuffer.length,playbackRate:Math.pow(2,(k.tune||0)/12),gain:k.gain||0,pan:k.pan||0,reverse:k.reverse||!1})}catch($){console.error("Error playing sample:",$)}},B=U=>{U.preventDefault(),U.stopPropagation()},I=(U,k)=>{U.preventDefault(),U.stopPropagation();const Z=Array.from(U.dataTransfer.files).find(le=>le.type.startsWith("audio/")||le.name.toLowerCase().endsWith(".wav"));Z&&M(k,Z)},W=(U,k)=>{i.drumSamples[k]?.isLoaded&&(O(k),U.dataTransfer.effectAllowed="move")},ee=(U,k)=>{U.preventDefault(),U.dataTransfer.dropEffect="move",N(k)},C=()=>{N(null)},J=(U,k)=>{U.preventDefault();const $=Array.from(U.dataTransfer.files);if($.length>0){const Z=$.find(le=>le.type.startsWith("audio/")||le.name.toLowerCase().endsWith(".wav"));if(Z){M(k,Z);return}}if(R!==null&&R!==k){const Z=i.drumSamples[R];k<24&&Z&&!Z.isAssigned?s({type:"ASSIGN_DRUM_SAMPLE",payload:{sampleIndex:R,targetKeyIndex:k}}):R<24&&k<24?s({type:"SWAP_DRUM_SAMPLES",payload:{fromIndex:R,toIndex:k}}):s({type:"REORDER_DRUM_SAMPLES",payload:{fromIndex:R,toIndex:k}})}O(null),N(null)},_=()=>{O(null),N(null)},K=U=>{const k=hr.isMobile||hr.isTablet,$=window.innerHeight>window.innerWidth;k&&$?Lf(()=>{S(U),b(!0)}):(S(U),b(!0))},P=()=>{b(!1)},Y=U=>{const k=i.drumSamples[U];k&&k.audioBuffer&&(E({index:U,audioBuffer:k.audioBuffer,inPoint:k.inPoint||0,outPoint:k.outPoint||k.duration||k.audioBuffer.duration}),y(!0))},oe=()=>{y(!1),E(null)},te=(U,k)=>{g&&s({type:"UPDATE_DRUM_SAMPLE",payload:{index:g.index,updates:{inPoint:U,outPoint:k,hasBeenEdited:!0}}}),oe()};return f?u.jsx("div",{style:{fontFamily:'"Montserrat", "Arial", sans-serif'},children:u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Array.from({length:24},(U,k)=>{const $=i.drumSamples[k],Z=$?.isLoaded;return u.jsxs("div",{children:[u.jsx("input",{type:"file",accept:"audio/*,.wav",style:{display:"none"},ref:le=>{d.current[k]=le},onChange:le=>{const q=le.target.files?.[0];if(q)try{M(k,q)}catch(Ee){console.error("Error in file input handler:",Ee)}le.target.value=""}}),u.jsxs("div",{style:{background:it.bg,border:`1px solid ${it.border}`,borderRadius:"3px",padding:"1rem",transition:"background 0.2s ease"},onDragOver:B,onDrop:le=>I(le,k),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:it.text,display:"flex",alignItems:"center",gap:"0.5rem"},children:[Uy[k],$?.hasBeenEdited&&u.jsx("i",{className:"fas fa-pencil-alt",style:{fontSize:"14px",color:it.textSecondary,opacity:.8},title:"edited sample"})]}),u.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[u.jsx(An,{icon:"fas fa-play",onClick:()=>F(k).catch(le=>{console.error("Error playing sample:",le)}),title:"play",color:Z?it.action:it.textSecondary,disabled:!Z}),u.jsx(An,{icon:"fas fa-times",onClick:()=>n(k),title:"clear",color:Z?it.action:it.textSecondary,disabled:!Z}),u.jsx(An,{icon:"fas fa-microphone",onClick:()=>r?.(k),title:"record",color:"var(--color-accent-primary)"}),u.jsx(An,{icon:"fas fa-cog",onClick:()=>K(k),title:"settings",color:Z?it.action:it.textSecondary,disabled:!Z})]})]}),Z?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{fontSize:"0.85rem",fontWeight:"500",color:it.text,marginBottom:"0.5rem",wordBreak:"break-word"},children:$.name}),u.jsx("div",{style:{marginBottom:"0.75rem"},children:u.jsx(Jl,{duration:$.duration,fileSize:$.fileSize,channels:$.originalChannels,bitDepth:$.originalBitDepth,sampleRate:$.originalSampleRate,isFloat:$.isFloat})}),u.jsx("div",{style:{height:"50px",marginBottom:"0.5rem"},children:$.audioBuffer?u.jsx(Ql,{audioBuffer:$.audioBuffer,height:50,inPoint:Math.round(($.inPoint||0)*$.audioBuffer.sampleRate),outPoint:Math.round(($.outPoint||$.duration||$.audioBuffer.duration)*$.audioBuffer.sampleRate),onMarkersChange:le=>{const q=Ee=>Ee/($.audioBuffer?.sampleRate||44100);s({type:"UPDATE_DRUM_SAMPLE",payload:{index:k,updates:{inPoint:q(le.inPoint),outPoint:q(le.outPoint)}}})},onZoomEdit:()=>Y(k)}):u.jsx("div",{style:{width:"100%",height:"50px",background:it.borderSubtle,borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",color:it.textSecondary,fontSize:"0.7rem"},children:"no sample"})})]}):u.jsx("button",{onClick:()=>z(k),style:{width:"100%",background:"none",border:`2px dashed ${it.borderMed}`,borderRadius:"3px",padding:"1.5rem 1rem",color:it.textSecondary,fontSize:"0.9rem",cursor:"pointer",transition:"all 0.2s ease",textAlign:"center"},onTouchStart:le=>{le.currentTarget.style.borderColor=it.textSecondary,le.currentTarget.style.color=it.action},onTouchEnd:le=>{le.currentTarget.style.borderColor=it.borderMed,le.currentTarget.style.color=it.textSecondary},children:"tap to browse for audio file"})]})]},k)})})}):u.jsxs("div",{style:{fontFamily:'"Montserrat", "Arial", sans-serif',padding:0,margin:0},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px minmax(200px, 1fr) minmax(200px, 1fr) 180px",gap:"0.5rem",padding:"0.75rem",background:it.bgAlt,borderBottom:"none",fontSize:"0.8rem",fontWeight:"bold",color:it.textSecondary},children:[u.jsx("div",{children:"drum key"}),u.jsx("div",{children:"file details"}),u.jsx("div",{style:{paddingLeft:"10px"},children:"waveform"}),u.jsx("div",{style:{paddingLeft:"10px"},children:"actions"})]}),u.jsx("div",{style:{borderTop:`1px solid ${it.border}`,borderBottom:`1px solid ${it.border}`,overflow:"hidden",padding:0,margin:0},children:i.drumSamples.map((U,k)=>{const $=U?.isLoaded;return u.jsxs("div",{children:[u.jsx("input",{type:"file",accept:"audio/*,.wav",style:{display:"none"},ref:Z=>{d.current[k]=Z},onChange:Z=>{const le=Z.target.files?.[0];le&&M(k,le),Z.target.value=""}}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px minmax(200px, 1fr) minmax(200px, 1fr) 180px",gap:"0.5rem",padding:0,background:$&&A===k&&R!==null&&R!==k?it.bgAlt:it.bg,borderBottom:k<i.drumSamples.length-1?`1px solid ${it.border}`:"none",transition:"background 0.2s ease",alignItems:"center",minHeight:"54px",opacity:R===k?.5:1,cursor:$?"move":"default"},draggable:$,onDragStart:Z=>W(Z,k),onDragOver:Z=>ee(Z,k),onDragLeave:C,onDrop:Z=>J(Z,k),onDragEnd:_,onMouseEnter:Z=>{R||(Z.currentTarget.style.background=it.bgAlt)},onMouseLeave:Z=>{R||(Z.currentTarget.style.background=it.bg)},children:[u.jsxs("div",{style:{gridColumn:"1 / 2",fontSize:"0.8rem",fontWeight:"500",color:it.text,display:"flex",alignItems:"center",gap:"0.5rem",paddingLeft:"16px"},children:[$&&u.jsx("i",{className:"fas fa-grip-lines",style:{fontSize:"12px",color:it.textSecondary,opacity:.6,cursor:"move"},title:"drag to reorder"}),k<24?Uy[k]:"unassigned",U?.hasBeenEdited&&u.jsx("i",{className:"fas fa-pencil-alt",style:{fontSize:"14px",color:it.textSecondary,opacity:.8},title:"edited sample"})]}),$?u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{gridColumn:"2 / 3",display:"flex",flexDirection:"column",gap:"0.15rem"},children:[u.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:it.text,wordBreak:"break-word",marginBottom:"0.1rem"},children:U.name}),u.jsx(Jl,{duration:U.duration,fileSize:U.fileSize,channels:U.originalChannels,bitDepth:U.originalBitDepth,sampleRate:U.originalSampleRate,isFloat:U.isFloat})]}),u.jsx("div",{style:{gridColumn:"3 / 4",height:"44px",display:"flex",alignItems:"center",paddingRight:"8px"},children:U.audioBuffer?u.jsx(Ql,{audioBuffer:U.audioBuffer,height:44,inPoint:Math.round((U.inPoint||0)*U.audioBuffer.sampleRate),outPoint:Math.round((U.outPoint||U.duration||U.audioBuffer.duration)*U.audioBuffer.sampleRate),onMarkersChange:Z=>{const le=q=>q/(U.audioBuffer?.sampleRate||44100);s({type:"UPDATE_DRUM_SAMPLE",payload:{index:k,updates:{inPoint:le(Z.inPoint),outPoint:le(Z.outPoint)}}})},onZoomEdit:()=>Y(k)}):u.jsx("div",{style:{width:"100%",height:"44px",background:it.borderSubtle,borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",color:it.textSecondary,fontSize:"0.7rem"},children:"no sample"})})]}):u.jsx("div",{style:{gridColumn:"2 / 4",paddingRight:"8px"},children:u.jsx("button",{onClick:()=>z(k),style:{width:"100%",height:"44px",background:"none",border:`2px dashed ${it.borderMed}`,borderRadius:"3px",padding:"0 1rem",color:it.textSecondary,fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Z=>{Z.currentTarget.style.borderColor=it.textSecondary,Z.currentTarget.style.color=it.action},onMouseLeave:Z=>{Z.currentTarget.style.borderColor=it.borderMed,Z.currentTarget.style.color=it.textSecondary},children:"drop sample here or click to browse"})}),u.jsxs("div",{style:{gridColumn:"4 / 5",display:"flex",gap:"0.25rem",alignItems:"center",justifyContent:"center",paddingRight:"16px"},children:[u.jsx(An,{icon:"fas fa-play",onClick:()=>F(k).catch(Z=>{console.error("Error playing sample:",Z)}),title:"play",color:$?it.action:it.textSecondary,disabled:!$}),u.jsx(An,{icon:"fas fa-times",onClick:()=>n(k),title:"clear",color:$?it.action:it.textSecondary,disabled:!$}),u.jsx(An,{icon:"fas fa-microphone",onClick:()=>r?.(k),title:"record",color:"var(--color-accent-primary)"}),u.jsx(An,{icon:"fas fa-cog",onClick:()=>K(k),title:"settings",color:$?it.action:it.textSecondary,disabled:!$})]})]})]},k)})}),u.jsx(_E,{isOpen:h,onClose:P,sampleIndex:w}),u.jsx(kf,{isOpen:x,onClose:oe,audioBuffer:g?.audioBuffer||null,initialInPoint:g?.inPoint||0,initialOutPoint:g?.outPoint||0,onSave:te})]})}function AE(a,n){try{if(!a||typeof a!="object")return{success:!1,error:"Invalid JSON format"};if(!a.type)return{success:!1,error:'Missing "type" field in JSON'};if(a.type!==n){let r="";return n==="drum"&&a.type==="multisampler"?r="This is a multisample preset, but you're trying to import it into the drum tool. Please switch to the multisample tab to import this preset.":n==="multisampler"&&a.type==="drum"?r="This is a drum preset, but you're trying to import it into the multisample tool. Please switch to the drum tab to import this preset.":r=`This preset file has type "${a.type==="drum"?"drum":a.type==="multisampler"?"multisampler":a.type}" but we expected a "${n==="drum"?"drum":"multisampler"}" preset. Please make sure you're using the correct preset file.`,{success:!1,error:r}}return!a.engine||typeof a.engine!="object"?{success:!1,error:'Missing or invalid "engine" field'}:{success:!0,data:a}}catch(r){return{success:!1,error:`JSON parsing error: ${r instanceof Error?r.message:"Unknown error"}`}}}async function db(a,n){try{if(!a.name.toLowerCase().endsWith(".json"))return{success:!1,error:"File must be a JSON file (.json)"};const r=await a.text();let i;try{i=JSON.parse(r)}catch(s){return{success:!1,error:`Invalid JSON format: ${s instanceof Error?s.message:"Parse error"}`}}return AE(i,n)}catch(r){return{success:!1,error:`File reading error: ${r instanceof Error?r.message:"Unknown error"}`}}}function Hd(a){return Math.round(a/32767*100)}function RE(a){const n=a.engine;return{presetSettings:{playmode:n.playmode||"poly",transpose:n.transpose||0,velocity:n["velocity.sensitivity"]?Hd(n["velocity.sensitivity"]):20,volume:n.volume?Hd(n.volume):69,width:n.width?Hd(n.width):0}}}function ME(){const{state:a,dispatch:n}=un(),r=L.useRef(null),[i,s]=L.useState(!1),[c,d]=L.useState({isOpen:!1,message:"",onConfirm:async()=>{}});L.useEffect(()=>{const E=()=>{s(window.innerWidth<768)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const f=E=>{n({type:"SET_DRUM_PRESET_PLAYMODE",payload:E})},m=E=>{n({type:"SET_DRUM_PRESET_TRANSPOSE",payload:E})},h=E=>{n({type:"SET_DRUM_PRESET_VELOCITY",payload:E})},b=E=>{n({type:"SET_DRUM_PRESET_VOLUME",payload:E})},w=E=>{n({type:"SET_DRUM_PRESET_WIDTH",payload:E})},S=()=>{r.current?.click()},x=()=>{d({isOpen:!0,message:"are you sure you want to reset all preset settings to default values?",onConfirm:()=>{n({type:"SET_DRUM_PRESET_PLAYMODE",payload:"poly"}),n({type:"SET_DRUM_PRESET_TRANSPOSE",payload:0}),n({type:"SET_DRUM_PRESET_VELOCITY",payload:20}),n({type:"SET_DRUM_PRESET_VOLUME",payload:69}),n({type:"SET_DRUM_PRESET_WIDTH",payload:0}),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"settings reset",message:"successfully reset preset settings to default values"}}),d({isOpen:!1,message:"",onConfirm:async()=>{}})}})},y=async E=>{const R=E.target.files?.[0];if(R){E.target.value="";try{const O=await db(R,"drum");if(O.success&&O.data){const A=O.data,N=RE(A);n({type:"SET_IMPORTED_DRUM_PRESET",payload:A}),n({type:"SET_DRUM_PRESET_PLAYMODE",payload:N.presetSettings.playmode}),n({type:"SET_DRUM_PRESET_TRANSPOSE",payload:N.presetSettings.transpose}),n({type:"SET_DRUM_PRESET_VELOCITY",payload:N.presetSettings.velocity}),n({type:"SET_DRUM_PRESET_VOLUME",payload:N.presetSettings.volume}),n({type:"SET_DRUM_PRESET_WIDTH",payload:N.presetSettings.width}),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"settings imported",message:"successfully imported drum preset settings"}})}else n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"import failed",message:O.error||"failed to import preset"}})}catch(O){n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"import error",message:`unexpected error: ${O instanceof Error?O.message:"Unknown error"}`}})}}},g=a.drumSettings.presetSettings.playmode!=="poly"||a.drumSettings.presetSettings.transpose!==0||a.drumSettings.presetSettings.velocity!==20||a.drumSettings.presetSettings.volume!==69||a.drumSettings.presetSettings.width!==0;return u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",marginBottom:"2rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:i?"0.5rem 1rem 0.5rem 1rem":"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"preset settings"})})}),u.jsx("div",{style:{padding:i?"1rem":"2rem"},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"1rem",alignItems:"center"},children:[u.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text-primary)"},children:"playmode"}),u.jsx("div",{style:{maxWidth:"200px"},children:u.jsxs(Ir,{id:"preset-playmode",labelText:"",value:a.drumSettings.presetSettings.playmode,onChange:E=>f(E.target.value),size:"sm",children:[u.jsx(Kt,{value:"poly",text:"poly"}),u.jsx(Kt,{value:"mono",text:"mono"}),u.jsx(Kt,{value:"legato",text:"legato"})]})})]}),u.jsxs("div",{className:"drum-preset-grid",children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:["transpose: ",a.drumSettings.presetSettings.transpose]}),u.jsx("div",{style:{width:"100%"},children:u.jsx(vn,{id:"preset-transpose",min:-36,max:36,step:1,value:a.drumSettings.presetSettings.transpose,onChange:({value:E})=>m(E),hideTextInput:!0})})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:["velocity: ",a.drumSettings.presetSettings.velocity,"%"]}),u.jsx("div",{style:{width:"100%"},children:u.jsx(vn,{id:"preset-velocity-sensitivity",min:0,max:100,step:1,value:a.drumSettings.presetSettings.velocity,onChange:({value:E})=>h(E),hideTextInput:!0})})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:["volume: ",a.drumSettings.presetSettings.volume,"%"]}),u.jsx("div",{style:{width:"100%"},children:u.jsx(vn,{id:"preset-volume",min:0,max:100,step:1,value:a.drumSettings.presetSettings.volume,onChange:({value:E})=>b(E),hideTextInput:!0})})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"var(--color-text-primary)",marginBottom:"0.5rem"},children:["width: ",a.drumSettings.presetSettings.width,"%"]}),u.jsx("div",{style:{width:"100%"},children:u.jsx(vn,{id:"preset-width",min:0,max:100,step:1,value:a.drumSettings.presetSettings.width,onChange:({value:E})=>w(E),hideTextInput:!0})})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:i?"center":"flex-end",flexDirection:i?"column":"row",marginTop:"2rem",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border-light)"},children:[u.jsxs("button",{onClick:x,disabled:!g,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:g?"var(--color-interactive-secondary)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:g?"pointer":"not-allowed",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:g?1:.6,width:i?"100%":"auto"},onMouseEnter:E=>{g&&(E.currentTarget.style.backgroundColor="var(--color-bg-secondary)",E.currentTarget.style.borderColor="var(--color-border-medium)",E.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:E=>{g&&(E.currentTarget.style.backgroundColor="var(--color-bg-primary)",E.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",E.currentTarget.style.color="var(--color-interactive-secondary)")},children:[u.jsx("i",{className:"fas fa-undo",style:{fontSize:"1rem"}}),"reset settings"]}),u.jsxs("button",{onClick:S,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:i?"100%":"auto"},onMouseEnter:E=>{E.currentTarget.style.backgroundColor="var(--color-interactive-dark)"},onMouseLeave:E=>{E.currentTarget.style.backgroundColor="var(--color-interactive-focus)"},children:[u.jsx("i",{className:"fas fa-upload",style:{fontSize:"1rem"}}),"import patch.json"]})]}),u.jsx("input",{ref:r,type:"file",accept:".json",onChange:y,style:{display:"none"}})]})}),u.jsx("style",{children:`
        #preset-transpose .cds--slider__track,
        #preset-velocity-sensitivity .cds--slider__track,
        #preset-volume .cds--slider__track,
        #preset-width .cds--slider__track {
          background: linear-gradient(to right, var(--color-bg-slider-track) 0%, var(--color-interactive-secondary) 100%) !important;
        }
        #preset-transpose .cds--slider__filled-track,
        #preset-velocity-sensitivity .cds--slider__filled-track,
        #preset-volume .cds--slider__filled-track,
        #preset-width .cds--slider__filled-track {
          background: var(--color-interactive-dark) !important;
        }
        #preset-transpose .cds--slider__thumb,
        #preset-velocity-sensitivity .cds--slider__thumb,
        #preset-volume .cds--slider__thumb,
        #preset-width .cds--slider__thumb {
          background: var(--color-interactive-dark) !important;
          border: 2px solid var(--color-interactive-dark) !important;
        }
        #preset-transpose .cds--slider__thumb:hover,
        #preset-velocity-sensitivity .cds--slider__thumb:hover,
        #preset-volume .cds--slider__thumb:hover,
        #preset-width .cds--slider__thumb:hover {
          background: var(--color-text-primary) !important;
          border-color: var(--color-text-primary) !important;
        }
      `}),u.jsx(cs,{isOpen:c.isOpen,message:c.message,onConfirm:c.onConfirm,onCancel:()=>d({isOpen:!1,message:"",onConfirm:async()=>{}})})]})}function kE({isOpen:a,onClose:n}){const{state:r,dispatch:i}=un(),[s,c]=L.useState({playmode:"oneshot",reverse:!1,tune:0,gain:0,pan:0}),d=r.drumSamples.filter(h=>h&&h.isLoaded).length,f=()=>{r.drumSamples.forEach((h,b)=>{if(h&&h.isLoaded){const w={playmode:h.playmode||"oneshot",reverse:h.reverse||!1,tune:h.tune||0,gain:h.gain||0,pan:h.pan||0},S=s.playmode!==w.playmode||s.reverse!==w.reverse||s.tune!==w.tune||s.gain!==w.gain||s.pan!==w.pan;i({type:"UPDATE_DRUM_SAMPLE",payload:{index:b,updates:{...s,hasBeenEdited:h.hasBeenEdited||S}}})}}),n()},m=()=>{n()};return a?u.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1050,fontFamily:'"Montserrat", "Arial", sans-serif'},onClick:h=>{h.target===h.currentTarget&&m()},children:u.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto"},children:[u.jsx("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid #e5e7eb"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:"300"},children:"bulk edit samples"})}),u.jsxs("div",{style:{padding:"2rem"},children:[u.jsxs("div",{style:{fontSize:"0.9rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"6px",padding:"1rem",marginBottom:"2rem"},children:["these settings will be applied to all ",u.jsx("strong",{children:d})," loaded ",d===1?"sample":"samples","."]}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"playmode"}),u.jsxs("select",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",backgroundColor:"#fff",color:"#374151",outline:"none"},value:s.playmode,onChange:h=>c({...s,playmode:h.target.value}),children:[u.jsx("option",{value:"oneshot",children:"oneshot - play whole sample"}),u.jsx("option",{value:"group",children:"mute group - choke when another sample plays"}),u.jsx("option",{value:"loop",children:"loop - loop at sample end"}),u.jsx("option",{value:"gate",children:"key - play while held"})]})]}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"direction"}),u.jsxs("select",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",backgroundColor:"#fff",color:"#374151",outline:"none"},value:s.reverse?"reverse":"forward",onChange:h=>c({...s,reverse:h.target.value==="reverse"}),children:[u.jsx("option",{value:"forward",children:"forward"}),u.jsx("option",{value:"reverse",children:"reverse"})]})]}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"tuning (semitones)"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("input",{type:"range",min:"-48",max:"48",value:s.tune,step:"1",style:{flex:1,height:"6px",borderRadius:"3px",background:`linear-gradient(to right, #6b7280 0%, #6b7280 ${(s.tune+48)/96*100}%, #e5e7eb ${(s.tune+48)/96*100}%, #e5e7eb 100%)`,outline:"none",appearance:"none",WebkitAppearance:"none"},onChange:h=>c({...s,tune:parseInt(h.target.value)})}),u.jsx("input",{type:"number",min:"-48",max:"48",value:s.tune,style:{width:"80px",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",backgroundColor:"#fff",color:"#374151",outline:"none"},onChange:h=>{const b=Math.max(-48,Math.min(48,parseInt(h.target.value)||0));c({...s,tune:b})}})]})]}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"gain (db)"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("input",{type:"range",min:"-30",max:"20",value:s.gain,step:"1",style:{flex:1,height:"6px",borderRadius:"3px",background:`linear-gradient(to right, #6b7280 0%, #6b7280 ${(s.gain+30)/50*100}%, #e5e7eb ${(s.gain+30)/50*100}%, #e5e7eb 100%)`,outline:"none",appearance:"none",WebkitAppearance:"none"},onChange:h=>c({...s,gain:parseInt(h.target.value)})}),u.jsx("input",{type:"number",min:"-30",max:"20",value:s.gain,style:{width:"80px",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",backgroundColor:"#fff",color:"#374151",outline:"none"},onChange:h=>{const b=Math.max(-30,Math.min(20,parseInt(h.target.value)||0));c({...s,gain:b})}})]})]}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"pan"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("input",{type:"range",min:"-100",max:"100",value:s.pan,step:"1",style:{flex:1,height:"6px",borderRadius:"3px",background:`linear-gradient(to right, #6b7280 0%, #6b7280 ${(s.pan+100)/200*100}%, #e5e7eb ${(s.pan+100)/200*100}%, #e5e7eb 100%)`,outline:"none",appearance:"none",WebkitAppearance:"none"},onChange:h=>c({...s,pan:parseInt(h.target.value)})}),u.jsx("input",{type:"number",min:"-100",max:"100",value:s.pan,step:"1",style:{width:"80px",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",backgroundColor:"#fff",color:"#374151",outline:"none"},onChange:h=>{const b=Math.max(-100,Math.min(100,parseInt(h.target.value)||0));c({...s,pan:b})}})]})]})]}),u.jsxs("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",gap:"0.75rem"},children:[u.jsxs("button",{type:"button",style:{padding:"0.625rem 1.25rem",border:"1px solid #d1d5db",borderRadius:"3px",backgroundColor:"#fff",color:"#6b7280",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},onClick:m,onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#f9fafb",h.currentTarget.style.borderColor="#9ca3af",h.currentTarget.style.color="#374151"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="#fff",h.currentTarget.style.borderColor="#d1d5db",h.currentTarget.style.color="#6b7280"},children:[u.jsx("i",{className:"fas fa-times"}),"cancel"]}),u.jsxs("button",{type:"button",style:{padding:"0.625rem 1.25rem",border:"none",borderRadius:"3px",backgroundColor:d===0?"#9ca3af":"#333",color:"#fff",fontSize:"0.9rem",fontWeight:"500",cursor:d===0?"not-allowed":"pointer",opacity:d===0?.6:1,display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},onClick:f,disabled:d===0,onMouseEnter:h=>{d>0&&(h.currentTarget.style.backgroundColor="#555",h.currentTarget.style.transform="translateY(-1px)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)")},onMouseLeave:h=>{d>0&&(h.currentTarget.style.backgroundColor="#333",h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="none")},children:[u.jsx("i",{className:"fas fa-save"}),"apply to ",d," ",d===1?"sample":"samples"]})]})]})}):null}const NE="modulepreload",OE=function(a){return"/"+a},By={},fb=function(n,r,i){let s=Promise.resolve();if(r&&r.length>0){let h=function(b){return Promise.all(b.map(w=>Promise.resolve(w).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var d=h;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");s=h(r.map(b=>{if(b=OE(b),b in By)return;By[b]=!0;const w=b.endsWith(".css"),S=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${S}`))return;const x=document.createElement("link");if(x.rel=w?"stylesheet":NE,w||(x.as="script"),x.crossOrigin="",x.href=b,m&&x.setAttribute("nonce",m),document.head.appendChild(x),w)return new Promise((y,g)=>{x.addEventListener("load",y),x.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return s.then(f=>{for(const m of f||[])m.status==="rejected"&&c(m.reason);return n().catch(c)})};function DE(a,n=0){if(a.length<n+10)throw new Error("Buffer too small to contain 80-bit float");const r=a[n]<<8|a[n+1],i=a[n+2]*16777216+(a[n+3]<<16)+(a[n+4]<<8)+a[n+5]>>>0,s=a[n+6]*16777216+(a[n+7]<<16)+(a[n+8]<<8)+a[n+9]>>>0;if(r===0&&i===0&&s===0)return 0;const c=r&32768?-1:1,d=(r&32767)-16383,m=(i*Math.pow(2,32)+s)/Math.pow(2,63);return c*m*Math.pow(2,d)}function jE(a){const n=[8e3,11025,16e3,22050,44100,48e3,88200,96e3,176400,192e3];for(const i of n){const s=i*.05;if(Math.abs(a-i)<=s)return i}if(a>7e4&&a<8e4)return console.warn(`[AIF PARSER] Unusual sample rate ${a}Hz detected, using 48000Hz`),48e3;if(a>4e4&&a<5e4)return console.warn(`[AIF PARSER] Unusual sample rate ${a}Hz detected, using 44100Hz`),44100;const r=Math.abs(a);return r<8e3||r>192e3?(console.warn(`[AIF PARSER] Invalid sample rate detected: ${a}Hz. Using fallback 44100Hz.`),44100):r}function mb(a,n,r,i,s){if(i<18)throw new Error("COMM chunk too small");const c=a.getUint16(r,!1),d=a.getUint32(r+2,!1);let f=a.getUint16(r+6,!1);const m=DE(new Uint8Array(n),r+8),h=jE(m);let b=!1,w=!1,S;if(s==="AIFC"&&i>=22)switch(S=new TextDecoder("ascii").decode(new Uint8Array(n,r+18,4)),S){case"NONE":break;case"twos":break;case"sowt":b=!0,f=16,console.log("[AIF PARSER] Detected little-endian 16-bit AIFC file (sowt)");break;case"fl32":w=!0,f=32,console.log("[AIF PARSER] Detected 32-bit float AIFC file (fl32)");break;case"fl64":w=!0,f=64,console.log("[AIF PARSER] Detected 64-bit float AIFC file (fl64)");break;case"ulaw":console.warn("[AIF PARSER] -law compression detected, may not decode correctly");break;case"alaw":console.warn("[AIF PARSER] A-law compression detected, may not decode correctly");break;default:console.warn(`[AIF PARSER] Unknown compression type: ${S}, treating as uncompressed PCM`)}return{channels:c,numSampleFrames:d,bitDepth:f,sampleRate:h,isLittleEndian:b,isFloat:w,compressionType:S}}function pb(a,n,r){const i=new TextDecoder("ascii"),s=a.getUint16(r,!1),c=[];let d=r+2;for(let f=0;f<s;f++){if(d+7>n.byteLength){console.warn(`[AIF PARSER] MARK chunk truncated at marker ${f}`);break}const m=a.getUint16(d,!1),h=a.getUint32(d+2,!1),b=a.getUint8(d+6);if(b>255){console.warn(`[AIF PARSER] Invalid marker name length: ${b}`);break}if(d+7+b>n.byteLength){console.warn("[AIF PARSER] MARK chunk truncated during marker name read");break}const w=new Uint8Array(n,d+7,b),S=i.decode(w);c.push({id:m,position:h,name:S}),d+=7+b+(b%2===0?1:0)}return c}function LE(a,n,r){const i=a.getUint8(n),s=a.getInt8(n+1),c=a.getUint16(n+10,!1),d=a.getUint16(n+12,!1);let f,m,h,b=!1;if(c>0){const w=r.find(S=>S.id===c);w&&(m=w.position,b=!0)}if(d>0){const w=r.find(S=>S.id===d);w&&(h=w.position,b=!0)}return i>0&&(f=i+Math.round(s/100)),{rootNote:f,loopStart:m,loopEnd:h,foundLoopPoints:b}}async function IE(a,n,r="C3"){try{const i=a.slice(0),s=new DataView(i),c=new TextDecoder("ascii");if(c.decode(new Uint8Array(i,0,4))!=="FORM")throw new Error("Invalid AIF file: missing FORM header");const f=c.decode(new Uint8Array(i,8,4));if(f!=="AIFF"&&f!=="AIFC")throw new Error(`Invalid AIF file: expected AIFF or AIFC format identifier, got "${f}"`);let m=12,h=2,b=0,w=16,S=44100,x=!1,y,g,E,R=0,O=0,A=!1,N=[];for(;m+8<i.byteLength;){const ee=c.decode(new Uint8Array(i,m,4)),C=s.getUint32(m+4,!1),J=m+8;if(ee==="COMM"&&C>=18){const _=mb(s,i,J,C,f);h=_.channels,b=_.numSampleFrames,w=_.bitDepth,S=_.sampleRate,x=_.isFloat,x&&console.log(`[AIF PARSER] Detected ${w}-bit float format`)}if(ee==="MARK"){N=pb(s,i,J);for(const _ of N){const K=_.name.toLowerCase();K.includes("loop start")||K.includes("start")?(y=_.position,A=!0):(K.includes("loop end")||K.includes("end"))&&(g=_.position,A=!0)}}if(ee==="INST"){const _=LE(s,J,N||[]);_.loopStart!==void 0&&(y=_.loopStart,A=!0),_.loopEnd!==void 0&&(g=_.loopEnd,A=!0),_.rootNote!==void 0&&(E=_.rootNote)}if(ee==="SSND"&&(R=J,O=C,!b)){const _=C-8;w&&h&&(b=Math.floor(_/(w/8*h)))}m+=8+C+C%2}if(!b&&N.length>0&&(b=Math.max(...N.map(ee=>ee.position))),A){const ee=b-1;y!==void 0?(y<0||y>ee)&&(console.warn(`[AIF PARSER] Invalid loop start ${y}, clamping to valid range`),y=Math.max(0,Math.min(y,ee))):y=0,g!==void 0?(g<=y||g>ee)&&(console.warn(`[AIF PARSER] Invalid loop end ${g}, clamping to valid range`),g=Math.max(y+1,Math.min(g,ee))):g=ee}else y=0,g=Math.max(0,b-1);const M=b/S;let z=null;try{z=await(await ir.getAudioContext()).decodeAudioData(a)}catch{if(R>0&&O>0)try{z=await zE(i,R,O,h,w,S,b,x)}catch(C){console.error(`[AIF PARSER] Manual AIF decoder failed for ${n}:`,C)}}let F=E||60;if(!E)try{const{parseFilename:ee}=await fb(async()=>{const{parseFilename:J}=await Promise.resolve().then(()=>ab);return{parseFilename:J}},void 0),C=ee(n,r);C&&C.length>1&&(F=C[1])}catch{}const B=y!==void 0?y/S:0,I=g!==void 0?g/S:M,W=E!==void 0?E:void 0;return{format:"aiff",sampleRate:S,bitDepth:w,channels:h,duration:M,audioBuffer:z,fileSize:i.byteLength,midiNote:F,loopStart:B,loopEnd:I,hasLoopData:A,isFloat:x,rootNote:W}}catch(i){throw new Error(`Failed to parse AIF metadata: ${i instanceof Error?i.message:"Unknown error"}`)}}async function zE(a,n,r,i,s,c,d,f=!1){const m=new DataView(a),h=m.getUint32(n,!1),b=n+8+h,w=s/8,S=w*i,y=new(window.AudioContext||window.webkitAudioContext)({sampleRate:c}).createBuffer(i,d,c);for(let g=0;g<i;g++){const E=y.getChannelData(g);for(let R=0;R<d;R++){const O=b+R*S+g*w;if(O+w<=a.byteLength){let A;if(f&&s===32)A=m.getFloat32(O,!1);else if(f&&s===64)A=m.getFloat64(O,!1);else switch(s){case 8:A=(m.getUint8(O)-128)/128;break;case 16:A=m.getInt16(O,!1)/32768;break;case 24:const N=m.getUint8(O),M=m.getUint8(O+1),z=m.getUint8(O+2),F=(N&128)!==0;let B=N<<16|M<<8|z;F&&(B=B-16777216),A=B/8388608;break;case 32:A=m.getInt32(O,!1)/2147483648;break;default:A=0,console.warn(`Unsupported bit depth: ${s}`)}E[R]=A}}}return y}async function UE(a,n,r,i="C3"){const c=await(await ir.getAudioContext()).decodeAudioData(a);let d=-1;try{const{parseFilename:f}=await fb(async()=>{const{parseFilename:h}=await Promise.resolve().then(()=>ab);return{parseFilename:h}},void 0),m=f(n,i);m&&m.length>1&&(d=m[1])}catch{}return{format:"mp3",sampleRate:c.sampleRate,bitDepth:16,channels:c.numberOfChannels,duration:c.duration,audioBuffer:c,fileSize:r,midiNote:d,loopStart:c.duration*.1,loopEnd:c.duration*.9,hasLoopData:!1,isFloat:!1}}async function rf(a,n="C3"){try{const r=await a.arrayBuffer();return await BE(r,a.name,a.size,n)}catch(r){throw new Error(`Failed to read audio metadata: ${r instanceof Error?r.message:"Unknown error"}`)}}async function BE(a,n,r,i="C3"){try{const s=PE(a,n);switch(s){case"wav":const c=await Z0(a,n,r,i);return{format:"wav",sampleRate:c.sampleRate,bitDepth:c.bitDepth,channels:c.channels,duration:c.duration,audioBuffer:c.audioBuffer,fileSize:c.fileSize,midiNote:c.midiNote,loopStart:c.loopStart,loopEnd:c.loopEnd,hasLoopData:c.hasLoopData,isFloat:!1};case"aif":case"aiff":return await IE(a,n,i);case"mp3":return await UE(a,n,r,i);default:throw new Error(`Unsupported audio format: ${s}`)}}catch(s){throw new Error(`Failed to read audio metadata: ${s instanceof Error?s.message:"Unknown error"}`)}}function PE(a,n){const r=n.toLowerCase().split(".").pop();if(a.byteLength>=4){const i=String.fromCharCode(...Array.from(new Uint8Array(a,0,4)));if(i==="RIFF")return"wav";if(i==="FORM")return"aiff";if(i==="ID3"||i==="")return"mp3"}switch(r){case"wav":return"wav";case"aif":case"aiff":return"aiff";case"mp3":return"mp3";case"m4a":return"m4a";case"ogg":return"ogg";case"flac":return"flac";default:throw new Error(`Unsupported audio format: ${r}`)}}function hb(){const{state:a,dispatch:n}=un(),r=L.useCallback(async(d,f)=>{try{n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null});const m=await rf(d,a.midiNoteMapping);n({type:"LOAD_DRUM_SAMPLE",payload:{index:f,file:d,audioBuffer:m.audioBuffer,metadata:m}})}catch(m){console.error("Error loading drum sample:",m),n({type:"SET_ERROR",payload:m instanceof Error?m.message:"Failed to load audio file"})}finally{n({type:"SET_LOADING",payload:!1})}},[n,a.midiNoteMapping]),i=L.useCallback(async(d,f)=>{try{n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null});const m=await rf(d,a.midiNoteMapping);n({type:"LOAD_MULTISAMPLE_FILE",payload:{file:d,audioBuffer:m.audioBuffer,metadata:m,rootNoteOverride:f}})}catch(m){console.error("Error loading multisample file:",m),n({type:"SET_ERROR",payload:m instanceof Error?m.message:"Failed to load audio file"})}finally{n({type:"SET_LOADING",payload:!1})}},[n,a.midiNoteMapping]),s=L.useCallback(d=>{n({type:"CLEAR_DRUM_SAMPLE",payload:d})},[n]),c=L.useCallback(d=>{n({type:"CLEAR_MULTISAMPLE_FILE",payload:d})},[n]);return{handleDrumSampleUpload:r,handleMultisampleUpload:i,clearDrumSample:s,clearMultisampleFile:c}}function Il(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wd={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Py;function FE(){return Py||(Py=1,function(a,n){(function(r){a.exports=r()})(function(){return function r(i,s,c){function d(h,b){if(!s[h]){if(!i[h]){var w=typeof Il=="function"&&Il;if(!b&&w)return w(h,!0);if(f)return f(h,!0);var S=new Error("Cannot find module '"+h+"'");throw S.code="MODULE_NOT_FOUND",S}var x=s[h]={exports:{}};i[h][0].call(x.exports,function(y){var g=i[h][1][y];return d(g||y)},x,x.exports,r,i,s,c)}return s[h].exports}for(var f=typeof Il=="function"&&Il,m=0;m<c.length;m++)d(c[m]);return d}({1:[function(r,i,s){var c=r("./utils"),d=r("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(m){for(var h,b,w,S,x,y,g,E=[],R=0,O=m.length,A=O,N=c.getTypeOf(m)!=="string";R<m.length;)A=O-R,w=N?(h=m[R++],b=R<O?m[R++]:0,R<O?m[R++]:0):(h=m.charCodeAt(R++),b=R<O?m.charCodeAt(R++):0,R<O?m.charCodeAt(R++):0),S=h>>2,x=(3&h)<<4|b>>4,y=1<A?(15&b)<<2|w>>6:64,g=2<A?63&w:64,E.push(f.charAt(S)+f.charAt(x)+f.charAt(y)+f.charAt(g));return E.join("")},s.decode=function(m){var h,b,w,S,x,y,g=0,E=0,R="data:";if(m.substr(0,R.length)===R)throw new Error("Invalid base64 input, it looks like a data url.");var O,A=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===f.charAt(64)&&A--,m.charAt(m.length-2)===f.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(O=d.uint8array?new Uint8Array(0|A):new Array(0|A);g<m.length;)h=f.indexOf(m.charAt(g++))<<2|(S=f.indexOf(m.charAt(g++)))>>4,b=(15&S)<<4|(x=f.indexOf(m.charAt(g++)))>>2,w=(3&x)<<6|(y=f.indexOf(m.charAt(g++))),O[E++]=h,x!==64&&(O[E++]=b),y!==64&&(O[E++]=w);return O}},{"./support":30,"./utils":32}],2:[function(r,i,s){var c=r("./external"),d=r("./stream/DataWorker"),f=r("./stream/Crc32Probe"),m=r("./stream/DataLengthProbe");function h(b,w,S,x,y){this.compressedSize=b,this.uncompressedSize=w,this.crc32=S,this.compression=x,this.compressedContent=y}h.prototype={getContentWorker:function(){var b=new d(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),w=this;return b.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new d(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(b,w,S){return b.pipe(new f).pipe(new m("uncompressedSize")).pipe(w.compressWorker(S)).pipe(new m("compressedSize")).withStreamInfo("compression",w)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,i,s){var c=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,i,s){var c=r("./utils"),d=function(){for(var f,m=[],h=0;h<256;h++){f=h;for(var b=0;b<8;b++)f=1&f?3988292384^f>>>1:f>>>1;m[h]=f}return m}();i.exports=function(f,m){return f!==void 0&&f.length?c.getTypeOf(f)!=="string"?function(h,b,w,S){var x=d,y=S+w;h^=-1;for(var g=S;g<y;g++)h=h>>>8^x[255&(h^b[g])];return-1^h}(0|m,f,f.length,0):function(h,b,w,S){var x=d,y=S+w;h^=-1;for(var g=S;g<y;g++)h=h>>>8^x[255&(h^b.charCodeAt(g))];return-1^h}(0|m,f,f.length,0):0}},{"./utils":32}],5:[function(r,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,i,s){var c=null;c=typeof Promise<"u"?Promise:r("lie"),i.exports={Promise:c}},{lie:37}],7:[function(r,i,s){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",d=r("pako"),f=r("./utils"),m=r("./stream/GenericWorker"),h=c?"uint8array":"array";function b(w,S){m.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=S,this.meta={}}s.magic="\b\0",f.inherits(b,m),b.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(h,w.data),!1)},b.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(S){w.push({data:S,meta:w.meta})}},s.compressWorker=function(w){return new b("Deflate",w)},s.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,i,s){function c(x,y){var g,E="";for(g=0;g<y;g++)E+=String.fromCharCode(255&x),x>>>=8;return E}function d(x,y,g,E,R,O){var A,N,M=x.file,z=x.compression,F=O!==h.utf8encode,B=f.transformTo("string",O(M.name)),I=f.transformTo("string",h.utf8encode(M.name)),W=M.comment,ee=f.transformTo("string",O(W)),C=f.transformTo("string",h.utf8encode(W)),J=I.length!==M.name.length,_=C.length!==W.length,K="",P="",Y="",oe=M.dir,te=M.date,U={crc32:0,compressedSize:0,uncompressedSize:0};y&&!g||(U.crc32=x.crc32,U.compressedSize=x.compressedSize,U.uncompressedSize=x.uncompressedSize);var k=0;y&&(k|=8),F||!J&&!_||(k|=2048);var $=0,Z=0;oe&&($|=16),R==="UNIX"?(Z=798,$|=function(q,Ee){var Fe=q;return q||(Fe=Ee?16893:33204),(65535&Fe)<<16}(M.unixPermissions,oe)):(Z=20,$|=function(q){return 63&(q||0)}(M.dosPermissions)),A=te.getUTCHours(),A<<=6,A|=te.getUTCMinutes(),A<<=5,A|=te.getUTCSeconds()/2,N=te.getUTCFullYear()-1980,N<<=4,N|=te.getUTCMonth()+1,N<<=5,N|=te.getUTCDate(),J&&(P=c(1,1)+c(b(B),4)+I,K+="up"+c(P.length,2)+P),_&&(Y=c(1,1)+c(b(ee),4)+C,K+="uc"+c(Y.length,2)+Y);var le="";return le+=`
\0`,le+=c(k,2),le+=z.magic,le+=c(A,2),le+=c(N,2),le+=c(U.crc32,4),le+=c(U.compressedSize,4),le+=c(U.uncompressedSize,4),le+=c(B.length,2),le+=c(K.length,2),{fileRecord:w.LOCAL_FILE_HEADER+le+B+K,dirRecord:w.CENTRAL_FILE_HEADER+c(Z,2)+le+c(ee.length,2)+"\0\0\0\0"+c($,4)+c(E,4)+B+K+ee}}var f=r("../utils"),m=r("../stream/GenericWorker"),h=r("../utf8"),b=r("../crc32"),w=r("../signature");function S(x,y,g,E){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=g,this.encodeFileName=E,this.streamFiles=x,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(S,m),S.prototype.push=function(x){var y=x.meta.percent||0,g=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(x):(this.bytesWritten+=x.data.length,m.prototype.push.call(this,{data:x.data,meta:{currentFile:this.currentFile,percent:g?(y+100*(g-E-1))/g:100}}))},S.prototype.openedSource=function(x){this.currentSourceOffset=this.bytesWritten,this.currentFile=x.file.name;var y=this.streamFiles&&!x.file.dir;if(y){var g=d(x,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},S.prototype.closedSource=function(x){this.accumulate=!1;var y=this.streamFiles&&!x.file.dir,g=d(x,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),y)this.push({data:function(E){return w.DATA_DESCRIPTOR+c(E.crc32,4)+c(E.compressedSize,4)+c(E.uncompressedSize,4)}(x),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},S.prototype.flush=function(){for(var x=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var g=this.bytesWritten-x,E=function(R,O,A,N,M){var z=f.transformTo("string",M(N));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(R,2)+c(R,2)+c(O,4)+c(A,4)+c(z.length,2)+z}(this.dirRecords.length,g,x,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},S.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},S.prototype.registerPrevious=function(x){this._sources.push(x);var y=this;return x.on("data",function(g){y.processChunk(g)}),x.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),x.on("error",function(g){y.error(g)}),this},S.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},S.prototype.error=function(x){var y=this._sources;if(!m.prototype.error.call(this,x))return!1;for(var g=0;g<y.length;g++)try{y[g].error(x)}catch{}return!0},S.prototype.lock=function(){m.prototype.lock.call(this);for(var x=this._sources,y=0;y<x.length;y++)x[y].lock()},i.exports=S},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,i,s){var c=r("../compressions"),d=r("./ZipFileWorker");s.generateWorker=function(f,m,h){var b=new d(m.streamFiles,h,m.platform,m.encodeFileName),w=0;try{f.forEach(function(S,x){w++;var y=function(O,A){var N=O||A,M=c[N];if(!M)throw new Error(N+" is not a valid compression method !");return M}(x.options.compression,m.compression),g=x.options.compressionOptions||m.compressionOptions||{},E=x.dir,R=x.date;x._compressWorker(y,g).withStreamInfo("file",{name:S,dir:E,date:R,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(b)}),b.entriesCount=w}catch(S){b.error(S)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,i,s){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new c;for(var f in this)typeof this[f]!="function"&&(d[f]=this[f]);return d}}(c.prototype=r("./object")).loadAsync=r("./load"),c.support=r("./support"),c.defaults=r("./defaults"),c.version="3.10.1",c.loadAsync=function(d,f){return new c().loadAsync(d,f)},c.external=r("./external"),i.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,i,s){var c=r("./utils"),d=r("./external"),f=r("./utf8"),m=r("./zipEntries"),h=r("./stream/Crc32Probe"),b=r("./nodejsUtils");function w(S){return new d.Promise(function(x,y){var g=S.decompressed.getContentWorker().pipe(new h);g.on("error",function(E){y(E)}).on("end",function(){g.streamInfo.crc32!==S.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):x()}).resume()})}i.exports=function(S,x){var y=this;return x=c.extend(x||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),b.isNode&&b.isStream(S)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",S,!0,x.optimizedBinaryString,x.base64).then(function(g){var E=new m(x);return E.load(g),E}).then(function(g){var E=[d.Promise.resolve(g)],R=g.files;if(x.checkCRC32)for(var O=0;O<R.length;O++)E.push(w(R[O]));return d.Promise.all(E)}).then(function(g){for(var E=g.shift(),R=E.files,O=0;O<R.length;O++){var A=R[O],N=A.fileNameStr,M=c.resolve(A.fileNameStr);y.file(M,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:x.createFolders}),A.dir||(y.file(M).unsafeOriginalName=N)}return E.zipComment.length&&(y.comment=E.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,i,s){var c=r("../utils"),d=r("../stream/GenericWorker");function f(m,h){d.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(h)}c.inherits(f,d),f.prototype._bindStream=function(m){var h=this;(this._stream=m).pause(),m.on("data",function(b){h.push({data:b,meta:{percent:0}})}).on("error",function(b){h.isPaused?this.generatedError=b:h.error(b)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},f.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,i,s){var c=r("readable-stream").Readable;function d(f,m,h){c.call(this,m),this._helper=f;var b=this;f.on("data",function(w,S){b.push(w)||b._helper.pause(),h&&h(S)}).on("error",function(w){b.emit("error",w)}).on("end",function(){b.push(null)})}r("../utils").inherits(d,c),d.prototype._read=function(){this._helper.resume()},i.exports=d},{"../utils":32,"readable-stream":16}],14:[function(r,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,d);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,d)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var d=new Buffer(c);return d.fill(0),d},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(r,i,s){function c(M,z,F){var B,I=f.getTypeOf(z),W=f.extend(F||{},b);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(M=R(M)),W.createFolders&&(B=E(M))&&O.call(this,B,!0);var ee=I==="string"&&W.binary===!1&&W.base64===!1;F&&F.binary!==void 0||(W.binary=!ee),(z instanceof w&&z.uncompressedSize===0||W.dir||!z||z.length===0)&&(W.base64=!1,W.binary=!0,z="",W.compression="STORE",I="string");var C=null;C=z instanceof w||z instanceof m?z:y.isNode&&y.isStream(z)?new g(M,z):f.prepareContent(M,z,W.binary,W.optimizedBinaryString,W.base64);var J=new S(M,C,W);this.files[M]=J}var d=r("./utf8"),f=r("./utils"),m=r("./stream/GenericWorker"),h=r("./stream/StreamHelper"),b=r("./defaults"),w=r("./compressedObject"),S=r("./zipObject"),x=r("./generate"),y=r("./nodejsUtils"),g=r("./nodejs/NodejsStreamInputAdapter"),E=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var z=M.lastIndexOf("/");return 0<z?M.substring(0,z):""},R=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},O=function(M,z){return z=z!==void 0?z:b.createFolders,M=R(M),this.files[M]||c.call(this,M,null,{dir:!0,createFolders:z}),this.files[M]};function A(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var z,F,B;for(z in this.files)B=this.files[z],(F=z.slice(this.root.length,z.length))&&z.slice(0,this.root.length)===this.root&&M(F,B)},filter:function(M){var z=[];return this.forEach(function(F,B){M(F,B)&&z.push(B)}),z},file:function(M,z,F){if(arguments.length!==1)return M=this.root+M,c.call(this,M,z,F),this;if(A(M)){var B=M;return this.filter(function(W,ee){return!ee.dir&&B.test(W)})}var I=this.files[this.root+M];return I&&!I.dir?I:null},folder:function(M){if(!M)return this;if(A(M))return this.filter(function(I,W){return W.dir&&M.test(I)});var z=this.root+M,F=O.call(this,z),B=this.clone();return B.root=F.name,B},remove:function(M){M=this.root+M;var z=this.files[M];if(z||(M.slice(-1)!=="/"&&(M+="/"),z=this.files[M]),z&&!z.dir)delete this.files[M];else for(var F=this.filter(function(I,W){return W.name.slice(0,M.length)===M}),B=0;B<F.length;B++)delete this.files[F[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var z,F={};try{if((F=f.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");f.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var B=F.comment||this.comment||"";z=x.generateWorker(this,F,B)}catch(I){(z=new m("error")).error(I)}return new h(z,F.type||"string",F.mimeType)},generateAsync:function(M,z){return this.generateInternalStream(M).accumulate(z)},generateNodeStream:function(M,z){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(z)}};i.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,i,s){i.exports=r("stream")},{stream:void 0}],17:[function(r,i,s){var c=r("./DataReader");function d(f){c.call(this,f);for(var m=0;m<this.data.length;m++)f[m]=255&f[m]}r("../utils").inherits(d,c),d.prototype.byteAt=function(f){return this.data[this.zero+f]},d.prototype.lastIndexOfSignature=function(f){for(var m=f.charCodeAt(0),h=f.charCodeAt(1),b=f.charCodeAt(2),w=f.charCodeAt(3),S=this.length-4;0<=S;--S)if(this.data[S]===m&&this.data[S+1]===h&&this.data[S+2]===b&&this.data[S+3]===w)return S-this.zero;return-1},d.prototype.readAndCheckSignature=function(f){var m=f.charCodeAt(0),h=f.charCodeAt(1),b=f.charCodeAt(2),w=f.charCodeAt(3),S=this.readData(4);return m===S[0]&&h===S[1]&&b===S[2]&&w===S[3]},d.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},i.exports=d},{"../utils":32,"./DataReader":18}],18:[function(r,i,s){var c=r("../utils");function d(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var m,h=0;for(this.checkOffset(f),m=this.index+f-1;m>=this.index;m--)h=(h<<8)+this.byteAt(m);return this.index+=f,h},readString:function(f){return c.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},i.exports=d},{"../utils":32}],19:[function(r,i,s){var c=r("./Uint8ArrayReader");function d(f){c.call(this,f)}r("../utils").inherits(d,c),d.prototype.readData=function(f){this.checkOffset(f);var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},i.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,i,s){var c=r("./DataReader");function d(f){c.call(this,f)}r("../utils").inherits(d,c),d.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},d.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},d.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},d.prototype.readData=function(f){this.checkOffset(f);var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},i.exports=d},{"../utils":32,"./DataReader":18}],21:[function(r,i,s){var c=r("./ArrayReader");function d(f){c.call(this,f)}r("../utils").inherits(d,c),d.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},i.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(r,i,s){var c=r("../utils"),d=r("../support"),f=r("./ArrayReader"),m=r("./StringReader"),h=r("./NodeBufferReader"),b=r("./Uint8ArrayReader");i.exports=function(w){var S=c.getTypeOf(w);return c.checkSupport(S),S!=="string"||d.uint8array?S==="nodebuffer"?new h(w):d.uint8array?new b(c.transformTo("uint8array",w)):new f(c.transformTo("array",w)):new m(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,i,s){var c=r("./GenericWorker"),d=r("../utils");function f(m){c.call(this,"ConvertWorker to "+m),this.destType=m}d.inherits(f,c),f.prototype.processChunk=function(m){this.push({data:d.transformTo(this.destType,m.data),meta:m.meta})},i.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(r,i,s){var c=r("./GenericWorker"),d=r("../crc32");function f(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(f,c),f.prototype.processChunk=function(m){this.streamInfo.crc32=d(m.data,this.streamInfo.crc32||0),this.push(m)},i.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,i,s){var c=r("../utils"),d=r("./GenericWorker");function f(m){d.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}c.inherits(f,d),f.prototype.processChunk=function(m){if(m){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+m.data.length}d.prototype.processChunk.call(this,m)},i.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(r,i,s){var c=r("../utils"),d=r("./GenericWorker");function f(m){d.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(b){h.dataIsReady=!0,h.data=b,h.max=b&&b.length||0,h.type=c.getTypeOf(b),h.isPaused||h._tickAndRepeat()},function(b){h.error(b)})}c.inherits(f,d),f.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,h);break;case"uint8array":m=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":m=this.data.slice(this.index,h)}return this.index=h,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(r,i,s){function c(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,f){return this._listeners[d].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,f){if(this._listeners[d])for(var m=0;m<this._listeners[d].length;m++)this._listeners[d][m].call(this,f)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var f=this;return d.on("data",function(m){f.processChunk(m)}),d.on("end",function(){f.end()}),d.on("error",function(m){f.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,f){return this.extraStreamInfo[d]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},i.exports=c},{}],29:[function(r,i,s){var c=r("../utils"),d=r("./ConvertWorker"),f=r("./GenericWorker"),m=r("../base64"),h=r("../support"),b=r("../external"),w=null;if(h.nodestream)try{w=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function S(y,g){return new b.Promise(function(E,R){var O=[],A=y._internalType,N=y._outputType,M=y._mimeType;y.on("data",function(z,F){O.push(z),g&&g(F)}).on("error",function(z){O=[],R(z)}).on("end",function(){try{var z=function(F,B,I){switch(F){case"blob":return c.newBlob(c.transformTo("arraybuffer",B),I);case"base64":return m.encode(B);default:return c.transformTo(F,B)}}(N,function(F,B){var I,W=0,ee=null,C=0;for(I=0;I<B.length;I++)C+=B[I].length;switch(F){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(ee=new Uint8Array(C),I=0;I<B.length;I++)ee.set(B[I],W),W+=B[I].length;return ee;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+F+"'")}}(A,O),M);E(z)}catch(F){R(F)}O=[]}).resume()})}function x(y,g,E){var R=g;switch(g){case"blob":case"arraybuffer":R="uint8array";break;case"base64":R="string"}try{this._internalType=R,this._outputType=g,this._mimeType=E,c.checkSupport(R),this._worker=y.pipe(new d(R)),y.lock()}catch(O){this._worker=new f("error"),this._worker.error(O)}}x.prototype={accumulate:function(y){return S(this,y)},on:function(y,g){var E=this;return y==="data"?this._worker.on(y,function(R){g.call(E,R.data,R.meta)}):this._worker.on(y,function(){c.delay(g,arguments,E)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},y)}},i.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var c=new ArrayBuffer(0);try{s.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(c),s.blob=d.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(r,i,s){for(var c=r("./utils"),d=r("./support"),f=r("./nodejsUtils"),m=r("./stream/GenericWorker"),h=new Array(256),b=0;b<256;b++)h[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;h[254]=h[254]=1;function w(){m.call(this,"utf-8 decode"),this.leftOver=null}function S(){m.call(this,"utf-8 encode")}s.utf8encode=function(x){return d.nodebuffer?f.newBufferFrom(x,"utf-8"):function(y){var g,E,R,O,A,N=y.length,M=0;for(O=0;O<N;O++)(64512&(E=y.charCodeAt(O)))==55296&&O+1<N&&(64512&(R=y.charCodeAt(O+1)))==56320&&(E=65536+(E-55296<<10)+(R-56320),O++),M+=E<128?1:E<2048?2:E<65536?3:4;for(g=d.uint8array?new Uint8Array(M):new Array(M),O=A=0;A<M;O++)(64512&(E=y.charCodeAt(O)))==55296&&O+1<N&&(64512&(R=y.charCodeAt(O+1)))==56320&&(E=65536+(E-55296<<10)+(R-56320),O++),E<128?g[A++]=E:(E<2048?g[A++]=192|E>>>6:(E<65536?g[A++]=224|E>>>12:(g[A++]=240|E>>>18,g[A++]=128|E>>>12&63),g[A++]=128|E>>>6&63),g[A++]=128|63&E);return g}(x)},s.utf8decode=function(x){return d.nodebuffer?c.transformTo("nodebuffer",x).toString("utf-8"):function(y){var g,E,R,O,A=y.length,N=new Array(2*A);for(g=E=0;g<A;)if((R=y[g++])<128)N[E++]=R;else if(4<(O=h[R]))N[E++]=65533,g+=O-1;else{for(R&=O===2?31:O===3?15:7;1<O&&g<A;)R=R<<6|63&y[g++],O--;1<O?N[E++]=65533:R<65536?N[E++]=R:(R-=65536,N[E++]=55296|R>>10&1023,N[E++]=56320|1023&R)}return N.length!==E&&(N.subarray?N=N.subarray(0,E):N.length=E),c.applyFromCharCode(N)}(x=c.transformTo(d.uint8array?"uint8array":"array",x))},c.inherits(w,m),w.prototype.processChunk=function(x){var y=c.transformTo(d.uint8array?"uint8array":"array",x.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var g=y;(y=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),y.set(g,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var E=function(O,A){var N;for((A=A||O.length)>O.length&&(A=O.length),N=A-1;0<=N&&(192&O[N])==128;)N--;return N<0||N===0?A:N+h[O[N]]>A?N:A}(y),R=y;E!==y.length&&(d.uint8array?(R=y.subarray(0,E),this.leftOver=y.subarray(E,y.length)):(R=y.slice(0,E),this.leftOver=y.slice(E,y.length))),this.push({data:s.utf8decode(R),meta:x.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=w,c.inherits(S,m),S.prototype.processChunk=function(x){this.push({data:s.utf8encode(x.data),meta:x.meta})},s.Utf8EncodeWorker=S},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,i,s){var c=r("./support"),d=r("./base64"),f=r("./nodejsUtils"),m=r("./external");function h(g){return g}function b(g,E){for(var R=0;R<g.length;++R)E[R]=255&g.charCodeAt(R);return E}r("setimmediate"),s.newBlob=function(g,E){s.checkSupport("blob");try{return new Blob([g],{type:E})}catch{try{var R=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return R.append(g),R.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(g,E,R){var O=[],A=0,N=g.length;if(N<=R)return String.fromCharCode.apply(null,g);for(;A<N;)E==="array"||E==="nodebuffer"?O.push(String.fromCharCode.apply(null,g.slice(A,Math.min(A+R,N)))):O.push(String.fromCharCode.apply(null,g.subarray(A,Math.min(A+R,N)))),A+=R;return O.join("")},stringifyByChar:function(g){for(var E="",R=0;R<g.length;R++)E+=String.fromCharCode(g[R]);return E},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}}()}};function S(g){var E=65536,R=s.getTypeOf(g),O=!0;if(R==="uint8array"?O=w.applyCanBeUsed.uint8array:R==="nodebuffer"&&(O=w.applyCanBeUsed.nodebuffer),O)for(;1<E;)try{return w.stringifyByChunk(g,R,E)}catch{E=Math.floor(E/2)}return w.stringifyByChar(g)}function x(g,E){for(var R=0;R<g.length;R++)E[R]=g[R];return E}s.applyFromCharCode=S;var y={};y.string={string:h,array:function(g){return b(g,new Array(g.length))},arraybuffer:function(g){return y.string.uint8array(g).buffer},uint8array:function(g){return b(g,new Uint8Array(g.length))},nodebuffer:function(g){return b(g,f.allocBuffer(g.length))}},y.array={string:S,array:h,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return f.newBufferFrom(g)}},y.arraybuffer={string:function(g){return S(new Uint8Array(g))},array:function(g){return x(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:h,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return f.newBufferFrom(new Uint8Array(g))}},y.uint8array={string:S,array:function(g){return x(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:h,nodebuffer:function(g){return f.newBufferFrom(g)}},y.nodebuffer={string:S,array:function(g){return x(g,new Array(g.length))},arraybuffer:function(g){return y.nodebuffer.uint8array(g).buffer},uint8array:function(g){return x(g,new Uint8Array(g.length))},nodebuffer:h},s.transformTo=function(g,E){if(E=E||"",!g)return E;s.checkSupport(g);var R=s.getTypeOf(E);return y[R][g](E)},s.resolve=function(g){for(var E=g.split("/"),R=[],O=0;O<E.length;O++){var A=E[O];A==="."||A===""&&O!==0&&O!==E.length-1||(A===".."?R.pop():R.push(A))}return R.join("/")},s.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":c.nodebuffer&&f.isBuffer(g)?"nodebuffer":c.uint8array&&g instanceof Uint8Array?"uint8array":c.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(g){if(!c[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(g){var E,R,O="";for(R=0;R<(g||"").length;R++)O+="\\x"+((E=g.charCodeAt(R))<16?"0":"")+E.toString(16).toUpperCase();return O},s.delay=function(g,E,R){setImmediate(function(){g.apply(R||null,E||[])})},s.inherits=function(g,E){function R(){}R.prototype=E.prototype,g.prototype=new R},s.extend=function(){var g,E,R={};for(g=0;g<arguments.length;g++)for(E in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],E)&&R[E]===void 0&&(R[E]=arguments[g][E]);return R},s.prepareContent=function(g,E,R,O,A){return m.Promise.resolve(E).then(function(N){return c.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new m.Promise(function(M,z){var F=new FileReader;F.onload=function(B){M(B.target.result)},F.onerror=function(B){z(B.target.error)},F.readAsArrayBuffer(N)}):N}).then(function(N){var M=s.getTypeOf(N);return M?(M==="arraybuffer"?N=s.transformTo("uint8array",N):M==="string"&&(A?N=d.decode(N):R&&O!==!0&&(N=function(z){return b(z,c.uint8array?new Uint8Array(z.length):new Array(z.length))}(N))),N):m.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,i,s){var c=r("./reader/readerFor"),d=r("./utils"),f=r("./signature"),m=r("./zipEntry"),h=r("./support");function b(w){this.files=[],this.loadOptions=w}b.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var S=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(S)+", expected "+d.pretty(w)+")")}},isSignature:function(w,S){var x=this.reader.index;this.reader.setIndex(w);var y=this.reader.readString(4)===S;return this.reader.setIndex(x),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),S=h.uint8array?"uint8array":"array",x=d.transformTo(S,w);this.zipComment=this.loadOptions.decodeFileName(x)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,S,x,y=this.zip64EndOfCentralSize-44;0<y;)w=this.reader.readInt(2),S=this.reader.readInt(4),x=this.reader.readData(S),this.zip64ExtensibleData[w]={id:w,length:S,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,S;for(w=0;w<this.files.length;w++)S=this.files[w],this.reader.setIndex(S.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),S.readLocalPart(this.reader),S.handleUTF8(),S.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(w=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var S=w;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var y=S-x;if(0<y)this.isSignature(S,f.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(w){this.reader=c(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,i,s){var c=r("./reader/readerFor"),d=r("./utils"),f=r("./compressedObject"),m=r("./crc32"),h=r("./utf8"),b=r("./compressions"),w=r("./support");function S(x,y){this.options=x,this.loadOptions=y}S.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(x){var y,g;if(x.skip(22),this.fileNameLength=x.readInt(2),g=x.readInt(2),this.fileName=x.readData(this.fileNameLength),x.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(E){for(var R in b)if(Object.prototype.hasOwnProperty.call(b,R)&&b[R].magic===E)return b[R];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,y,x.readData(this.compressedSize))},readCentralPart:function(x){this.versionMadeBy=x.readInt(2),x.skip(2),this.bitFlag=x.readInt(2),this.compressionMethod=x.readString(2),this.date=x.readDate(),this.crc32=x.readInt(4),this.compressedSize=x.readInt(4),this.uncompressedSize=x.readInt(4);var y=x.readInt(2);if(this.extraFieldsLength=x.readInt(2),this.fileCommentLength=x.readInt(2),this.diskNumberStart=x.readInt(2),this.internalFileAttributes=x.readInt(2),this.externalFileAttributes=x.readInt(4),this.localHeaderOffset=x.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");x.skip(y),this.readExtraFields(x),this.parseZIP64ExtraField(x),this.fileComment=x.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var x=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),x==0&&(this.dosPermissions=63&this.externalFileAttributes),x==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var x=c(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=x.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=x.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=x.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=x.readInt(4))}},readExtraFields:function(x){var y,g,E,R=x.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});x.index+4<R;)y=x.readInt(2),g=x.readInt(2),E=x.readData(g),this.extraFields[y]={id:y,length:g,value:E};x.setIndex(R)},handleUTF8:function(){var x=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var g=d.transformTo(x,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var R=d.transformTo(x,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(R)}}},findExtraFieldUnicodePath:function(){var x=this.extraFields[28789];if(x){var y=c(x.value);return y.readInt(1)!==1||m(this.fileName)!==y.readInt(4)?null:h.utf8decode(y.readData(x.length-5))}return null},findExtraFieldUnicodeComment:function(){var x=this.extraFields[25461];if(x){var y=c(x.value);return y.readInt(1)!==1||m(this.fileComment)!==y.readInt(4)?null:h.utf8decode(y.readData(x.length-5))}return null}},i.exports=S},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,i,s){function c(y,g,E){this.name=y,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=g,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var d=r("./stream/StreamHelper"),f=r("./stream/DataWorker"),m=r("./utf8"),h=r("./compressedObject"),b=r("./stream/GenericWorker");c.prototype={internalStream:function(y){var g=null,E="string";try{if(!y)throw new Error("No output type specified.");var R=(E=y.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),g=this._decompressWorker();var O=!this._dataBinary;O&&!R&&(g=g.pipe(new m.Utf8EncodeWorker)),!O&&R&&(g=g.pipe(new m.Utf8DecodeWorker))}catch(A){(g=new b("error")).error(A)}return new d(g,E,"")},async:function(y,g){return this.internalStream(y).accumulate(g)},nodeStream:function(y,g){return this.internalStream(y||"nodebuffer").toNodejsStream(g)},_compressWorker:function(y,g){if(this._data instanceof h&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new m.Utf8EncodeWorker)),h.createWorkerFrom(E,y,g)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof b?this._data:new f(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],S=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},x=0;x<w.length;x++)c.prototype[w[x]]=S;i.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,i,s){(function(c){var d,f,m=c.MutationObserver||c.WebKitMutationObserver;if(m){var h=0,b=new m(y),w=c.document.createTextNode("");b.observe(w,{characterData:!0}),d=function(){w.data=h=++h%2}}else if(c.setImmediate||c.MessageChannel===void 0)d="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var g=c.document.createElement("script");g.onreadystatechange=function(){y(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},c.document.documentElement.appendChild(g)}:function(){setTimeout(y,0)};else{var S=new c.MessageChannel;S.port1.onmessage=y,d=function(){S.port2.postMessage(0)}}var x=[];function y(){var g,E;f=!0;for(var R=x.length;R;){for(E=x,x=[],g=-1;++g<R;)E[g]();R=x.length}f=!1}i.exports=function(g){x.push(g)!==1||f||d()}}).call(this,typeof Dl<"u"?Dl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,i,s){var c=r("immediate");function d(){}var f={},m=["REJECTED"],h=["FULFILLED"],b=["PENDING"];function w(R){if(typeof R!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,R!==d&&g(this,R)}function S(R,O,A){this.promise=R,typeof O=="function"&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function x(R,O,A){c(function(){var N;try{N=O(A)}catch(M){return f.reject(R,M)}N===R?f.reject(R,new TypeError("Cannot resolve promise with itself")):f.resolve(R,N)})}function y(R){var O=R&&R.then;if(R&&(typeof R=="object"||typeof R=="function")&&typeof O=="function")return function(){O.apply(R,arguments)}}function g(R,O){var A=!1;function N(F){A||(A=!0,f.reject(R,F))}function M(F){A||(A=!0,f.resolve(R,F))}var z=E(function(){O(M,N)});z.status==="error"&&N(z.value)}function E(R,O){var A={};try{A.value=R(O),A.status="success"}catch(N){A.status="error",A.value=N}return A}(i.exports=w).prototype.finally=function(R){if(typeof R!="function")return this;var O=this.constructor;return this.then(function(A){return O.resolve(R()).then(function(){return A})},function(A){return O.resolve(R()).then(function(){throw A})})},w.prototype.catch=function(R){return this.then(null,R)},w.prototype.then=function(R,O){if(typeof R!="function"&&this.state===h||typeof O!="function"&&this.state===m)return this;var A=new this.constructor(d);return this.state!==b?x(A,this.state===h?R:O,this.outcome):this.queue.push(new S(A,R,O)),A},S.prototype.callFulfilled=function(R){f.resolve(this.promise,R)},S.prototype.otherCallFulfilled=function(R){x(this.promise,this.onFulfilled,R)},S.prototype.callRejected=function(R){f.reject(this.promise,R)},S.prototype.otherCallRejected=function(R){x(this.promise,this.onRejected,R)},f.resolve=function(R,O){var A=E(y,O);if(A.status==="error")return f.reject(R,A.value);var N=A.value;if(N)g(R,N);else{R.state=h,R.outcome=O;for(var M=-1,z=R.queue.length;++M<z;)R.queue[M].callFulfilled(O)}return R},f.reject=function(R,O){R.state=m,R.outcome=O;for(var A=-1,N=R.queue.length;++A<N;)R.queue[A].callRejected(O);return R},w.resolve=function(R){return R instanceof this?R:f.resolve(new this(d),R)},w.reject=function(R){var O=new this(d);return f.reject(O,R)},w.all=function(R){var O=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=R.length,N=!1;if(!A)return this.resolve([]);for(var M=new Array(A),z=0,F=-1,B=new this(d);++F<A;)I(R[F],F);return B;function I(W,ee){O.resolve(W).then(function(C){M[ee]=C,++z!==A||N||(N=!0,f.resolve(B,M))},function(C){N||(N=!0,f.reject(B,C))})}},w.race=function(R){var O=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=R.length,N=!1;if(!A)return this.resolve([]);for(var M=-1,z=new this(d);++M<A;)F=R[M],O.resolve(F).then(function(B){N||(N=!0,f.resolve(z,B))},function(B){N||(N=!0,f.reject(z,B))});var F;return z}},{immediate:36}],38:[function(r,i,s){var c={};(0,r("./lib/utils/common").assign)(c,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),i.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,i,s){var c=r("./zlib/deflate"),d=r("./utils/common"),f=r("./utils/strings"),m=r("./zlib/messages"),h=r("./zlib/zstream"),b=Object.prototype.toString,w=0,S=-1,x=0,y=8;function g(R){if(!(this instanceof g))return new g(R);this.options=d.assign({level:S,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:x,to:""},R||{});var O=this.options;O.raw&&0<O.windowBits?O.windowBits=-O.windowBits:O.gzip&&0<O.windowBits&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var A=c.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(A!==w)throw new Error(m[A]);if(O.header&&c.deflateSetHeader(this.strm,O.header),O.dictionary){var N;if(N=typeof O.dictionary=="string"?f.string2buf(O.dictionary):b.call(O.dictionary)==="[object ArrayBuffer]"?new Uint8Array(O.dictionary):O.dictionary,(A=c.deflateSetDictionary(this.strm,N))!==w)throw new Error(m[A]);this._dict_set=!0}}function E(R,O){var A=new g(O);if(A.push(R,!0),A.err)throw A.msg||m[A.err];return A.result}g.prototype.push=function(R,O){var A,N,M=this.strm,z=this.options.chunkSize;if(this.ended)return!1;N=O===~~O?O:O===!0?4:0,typeof R=="string"?M.input=f.string2buf(R):b.call(R)==="[object ArrayBuffer]"?M.input=new Uint8Array(R):M.input=R,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new d.Buf8(z),M.next_out=0,M.avail_out=z),(A=c.deflate(M,N))!==1&&A!==w)return this.onEnd(A),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(d.shrinkBuf(M.output,M.next_out))):this.onData(d.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&A!==1);return N===4?(A=c.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===w):N!==2||(this.onEnd(w),!(M.avail_out=0))},g.prototype.onData=function(R){this.chunks.push(R)},g.prototype.onEnd=function(R){R===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=R,this.msg=this.strm.msg},s.Deflate=g,s.deflate=E,s.deflateRaw=function(R,O){return(O=O||{}).raw=!0,E(R,O)},s.gzip=function(R,O){return(O=O||{}).gzip=!0,E(R,O)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,i,s){var c=r("./zlib/inflate"),d=r("./utils/common"),f=r("./utils/strings"),m=r("./zlib/constants"),h=r("./zlib/messages"),b=r("./zlib/zstream"),w=r("./zlib/gzheader"),S=Object.prototype.toString;function x(g){if(!(this instanceof x))return new x(g);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},g||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||g&&g.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var R=c.inflateInit2(this.strm,E.windowBits);if(R!==m.Z_OK)throw new Error(h[R]);this.header=new w,c.inflateGetHeader(this.strm,this.header)}function y(g,E){var R=new x(E);if(R.push(g,!0),R.err)throw R.msg||h[R.err];return R.result}x.prototype.push=function(g,E){var R,O,A,N,M,z,F=this.strm,B=this.options.chunkSize,I=this.options.dictionary,W=!1;if(this.ended)return!1;O=E===~~E?E:E===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof g=="string"?F.input=f.binstring2buf(g):S.call(g)==="[object ArrayBuffer]"?F.input=new Uint8Array(g):F.input=g,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new d.Buf8(B),F.next_out=0,F.avail_out=B),(R=c.inflate(F,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&I&&(z=typeof I=="string"?f.string2buf(I):S.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,R=c.inflateSetDictionary(this.strm,z)),R===m.Z_BUF_ERROR&&W===!0&&(R=m.Z_OK,W=!1),R!==m.Z_STREAM_END&&R!==m.Z_OK)return this.onEnd(R),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&R!==m.Z_STREAM_END&&(F.avail_in!==0||O!==m.Z_FINISH&&O!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=f.utf8border(F.output,F.next_out),N=F.next_out-A,M=f.buf2string(F.output,A),F.next_out=N,F.avail_out=B-N,N&&d.arraySet(F.output,F.output,A,N,0),this.onData(M)):this.onData(d.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(W=!0)}while((0<F.avail_in||F.avail_out===0)&&R!==m.Z_STREAM_END);return R===m.Z_STREAM_END&&(O=m.Z_FINISH),O===m.Z_FINISH?(R=c.inflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===m.Z_OK):O!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(F.avail_out=0))},x.prototype.onData=function(g){this.chunks.push(g)},x.prototype.onEnd=function(g){g===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Inflate=x,s.inflate=y,s.inflateRaw=function(g,E){return(E=E||{}).raw=!0,y(g,E)},s.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,i,s){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(m){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var b=h.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var w in b)b.hasOwnProperty(w)&&(m[w]=b[w])}}return m},s.shrinkBuf=function(m,h){return m.length===h?m:m.subarray?m.subarray(0,h):(m.length=h,m)};var d={arraySet:function(m,h,b,w,S){if(h.subarray&&m.subarray)m.set(h.subarray(b,b+w),S);else for(var x=0;x<w;x++)m[S+x]=h[b+x]},flattenChunks:function(m){var h,b,w,S,x,y;for(h=w=0,b=m.length;h<b;h++)w+=m[h].length;for(y=new Uint8Array(w),h=S=0,b=m.length;h<b;h++)x=m[h],y.set(x,S),S+=x.length;return y}},f={arraySet:function(m,h,b,w,S){for(var x=0;x<w;x++)m[S+x]=h[b+x]},flattenChunks:function(m){return[].concat.apply([],m)}};s.setTyped=function(m){m?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,d)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,f))},s.setTyped(c)},{}],42:[function(r,i,s){var c=r("./common"),d=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var m=new c.Buf8(256),h=0;h<256;h++)m[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function b(w,S){if(S<65537&&(w.subarray&&f||!w.subarray&&d))return String.fromCharCode.apply(null,c.shrinkBuf(w,S));for(var x="",y=0;y<S;y++)x+=String.fromCharCode(w[y]);return x}m[254]=m[254]=1,s.string2buf=function(w){var S,x,y,g,E,R=w.length,O=0;for(g=0;g<R;g++)(64512&(x=w.charCodeAt(g)))==55296&&g+1<R&&(64512&(y=w.charCodeAt(g+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),g++),O+=x<128?1:x<2048?2:x<65536?3:4;for(S=new c.Buf8(O),g=E=0;E<O;g++)(64512&(x=w.charCodeAt(g)))==55296&&g+1<R&&(64512&(y=w.charCodeAt(g+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),g++),x<128?S[E++]=x:(x<2048?S[E++]=192|x>>>6:(x<65536?S[E++]=224|x>>>12:(S[E++]=240|x>>>18,S[E++]=128|x>>>12&63),S[E++]=128|x>>>6&63),S[E++]=128|63&x);return S},s.buf2binstring=function(w){return b(w,w.length)},s.binstring2buf=function(w){for(var S=new c.Buf8(w.length),x=0,y=S.length;x<y;x++)S[x]=w.charCodeAt(x);return S},s.buf2string=function(w,S){var x,y,g,E,R=S||w.length,O=new Array(2*R);for(x=y=0;x<R;)if((g=w[x++])<128)O[y++]=g;else if(4<(E=m[g]))O[y++]=65533,x+=E-1;else{for(g&=E===2?31:E===3?15:7;1<E&&x<R;)g=g<<6|63&w[x++],E--;1<E?O[y++]=65533:g<65536?O[y++]=g:(g-=65536,O[y++]=55296|g>>10&1023,O[y++]=56320|1023&g)}return b(O,y)},s.utf8border=function(w,S){var x;for((S=S||w.length)>w.length&&(S=w.length),x=S-1;0<=x&&(192&w[x])==128;)x--;return x<0||x===0?S:x+m[w[x]]>S?x:S}},{"./common":41}],43:[function(r,i,s){i.exports=function(c,d,f,m){for(var h=65535&c|0,b=c>>>16&65535|0,w=0;f!==0;){for(f-=w=2e3<f?2e3:f;b=b+(h=h+d[m++]|0)|0,--w;);h%=65521,b%=65521}return h|b<<16|0}},{}],44:[function(r,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,i,s){var c=function(){for(var d,f=[],m=0;m<256;m++){d=m;for(var h=0;h<8;h++)d=1&d?3988292384^d>>>1:d>>>1;f[m]=d}return f}();i.exports=function(d,f,m,h){var b=c,w=h+m;d^=-1;for(var S=h;S<w;S++)d=d>>>8^b[255&(d^f[S])];return-1^d}},{}],46:[function(r,i,s){var c,d=r("../utils/common"),f=r("./trees"),m=r("./adler32"),h=r("./crc32"),b=r("./messages"),w=0,S=4,x=0,y=-2,g=-1,E=4,R=2,O=8,A=9,N=286,M=30,z=19,F=2*N+1,B=15,I=3,W=258,ee=W+I+1,C=42,J=113,_=1,K=2,P=3,Y=4;function oe(T,G){return T.msg=b[G],G}function te(T){return(T<<1)-(4<T?9:0)}function U(T){for(var G=T.length;0<=--G;)T[G]=0}function k(T){var G=T.state,X=G.pending;X>T.avail_out&&(X=T.avail_out),X!==0&&(d.arraySet(T.output,G.pending_buf,G.pending_out,X,T.next_out),T.next_out+=X,G.pending_out+=X,T.total_out+=X,T.avail_out-=X,G.pending-=X,G.pending===0&&(G.pending_out=0))}function $(T,G){f._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,G),T.block_start=T.strstart,k(T.strm)}function Z(T,G){T.pending_buf[T.pending++]=G}function le(T,G){T.pending_buf[T.pending++]=G>>>8&255,T.pending_buf[T.pending++]=255&G}function q(T,G){var X,j,H=T.max_chain_length,Q=T.strstart,ue=T.prev_length,ye=T.nice_match,ie=T.strstart>T.w_size-ee?T.strstart-(T.w_size-ee):0,ge=T.window,Oe=T.w_mask,Le=T.prev,De=T.strstart+W,He=ge[Q+ue-1],Ie=ge[Q+ue];T.prev_length>=T.good_match&&(H>>=2),ye>T.lookahead&&(ye=T.lookahead);do if(ge[(X=G)+ue]===Ie&&ge[X+ue-1]===He&&ge[X]===ge[Q]&&ge[++X]===ge[Q+1]){Q+=2,X++;do;while(ge[++Q]===ge[++X]&&ge[++Q]===ge[++X]&&ge[++Q]===ge[++X]&&ge[++Q]===ge[++X]&&ge[++Q]===ge[++X]&&ge[++Q]===ge[++X]&&ge[++Q]===ge[++X]&&ge[++Q]===ge[++X]&&Q<De);if(j=W-(De-Q),Q=De-W,ue<j){if(T.match_start=G,ye<=(ue=j))break;He=ge[Q+ue-1],Ie=ge[Q+ue]}}while((G=Le[G&Oe])>ie&&--H!=0);return ue<=T.lookahead?ue:T.lookahead}function Ee(T){var G,X,j,H,Q,ue,ye,ie,ge,Oe,Le=T.w_size;do{if(H=T.window_size-T.lookahead-T.strstart,T.strstart>=Le+(Le-ee)){for(d.arraySet(T.window,T.window,Le,Le,0),T.match_start-=Le,T.strstart-=Le,T.block_start-=Le,G=X=T.hash_size;j=T.head[--G],T.head[G]=Le<=j?j-Le:0,--X;);for(G=X=Le;j=T.prev[--G],T.prev[G]=Le<=j?j-Le:0,--X;);H+=Le}if(T.strm.avail_in===0)break;if(ue=T.strm,ye=T.window,ie=T.strstart+T.lookahead,ge=H,Oe=void 0,Oe=ue.avail_in,ge<Oe&&(Oe=ge),X=Oe===0?0:(ue.avail_in-=Oe,d.arraySet(ye,ue.input,ue.next_in,Oe,ie),ue.state.wrap===1?ue.adler=m(ue.adler,ye,Oe,ie):ue.state.wrap===2&&(ue.adler=h(ue.adler,ye,Oe,ie)),ue.next_in+=Oe,ue.total_in+=Oe,Oe),T.lookahead+=X,T.lookahead+T.insert>=I)for(Q=T.strstart-T.insert,T.ins_h=T.window[Q],T.ins_h=(T.ins_h<<T.hash_shift^T.window[Q+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[Q+I-1])&T.hash_mask,T.prev[Q&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=Q,Q++,T.insert--,!(T.lookahead+T.insert<I)););}while(T.lookahead<ee&&T.strm.avail_in!==0)}function Fe(T,G){for(var X,j;;){if(T.lookahead<ee){if(Ee(T),T.lookahead<ee&&G===w)return _;if(T.lookahead===0)break}if(X=0,T.lookahead>=I&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+I-1])&T.hash_mask,X=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),X!==0&&T.strstart-X<=T.w_size-ee&&(T.match_length=q(T,X)),T.match_length>=I)if(j=f._tr_tally(T,T.strstart-T.match_start,T.match_length-I),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=I){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+I-1])&T.hash_mask,X=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else j=f._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(j&&($(T,!1),T.strm.avail_out===0))return _}return T.insert=T.strstart<I-1?T.strstart:I-1,G===S?($(T,!0),T.strm.avail_out===0?P:Y):T.last_lit&&($(T,!1),T.strm.avail_out===0)?_:K}function pe(T,G){for(var X,j,H;;){if(T.lookahead<ee){if(Ee(T),T.lookahead<ee&&G===w)return _;if(T.lookahead===0)break}if(X=0,T.lookahead>=I&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+I-1])&T.hash_mask,X=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=I-1,X!==0&&T.prev_length<T.max_lazy_match&&T.strstart-X<=T.w_size-ee&&(T.match_length=q(T,X),T.match_length<=5&&(T.strategy===1||T.match_length===I&&4096<T.strstart-T.match_start)&&(T.match_length=I-1)),T.prev_length>=I&&T.match_length<=T.prev_length){for(H=T.strstart+T.lookahead-I,j=f._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-I),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=H&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+I-1])&T.hash_mask,X=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=I-1,T.strstart++,j&&($(T,!1),T.strm.avail_out===0))return _}else if(T.match_available){if((j=f._tr_tally(T,0,T.window[T.strstart-1]))&&$(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return _}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(j=f._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<I-1?T.strstart:I-1,G===S?($(T,!0),T.strm.avail_out===0?P:Y):T.last_lit&&($(T,!1),T.strm.avail_out===0)?_:K}function de(T,G,X,j,H){this.good_length=T,this.max_lazy=G,this.nice_length=X,this.max_chain=j,this.func=H}function Re(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*F),this.dyn_dtree=new d.Buf16(2*(2*M+1)),this.bl_tree=new d.Buf16(2*(2*z+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(B+1),this.heap=new d.Buf16(2*N+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*N+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(T){var G;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=R,(G=T.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?C:J,T.adler=G.wrap===2?0:1,G.last_flush=w,f._tr_init(G),x):oe(T,y)}function _e(T){var G=me(T);return G===x&&function(X){X.window_size=2*X.w_size,U(X.head),X.max_lazy_match=c[X.level].max_lazy,X.good_match=c[X.level].good_length,X.nice_match=c[X.level].nice_length,X.max_chain_length=c[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=I-1,X.match_available=0,X.ins_h=0}(T.state),G}function Ae(T,G,X,j,H,Q){if(!T)return y;var ue=1;if(G===g&&(G=6),j<0?(ue=0,j=-j):15<j&&(ue=2,j-=16),H<1||A<H||X!==O||j<8||15<j||G<0||9<G||Q<0||E<Q)return oe(T,y);j===8&&(j=9);var ye=new Re;return(T.state=ye).strm=T,ye.wrap=ue,ye.gzhead=null,ye.w_bits=j,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=H+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+I-1)/I),ye.window=new d.Buf8(2*ye.w_size),ye.head=new d.Buf16(ye.hash_size),ye.prev=new d.Buf16(ye.w_size),ye.lit_bufsize=1<<H+6,ye.pending_buf_size=4*ye.lit_bufsize,ye.pending_buf=new d.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=G,ye.strategy=Q,ye.method=X,_e(T)}c=[new de(0,0,0,0,function(T,G){var X=65535;for(X>T.pending_buf_size-5&&(X=T.pending_buf_size-5);;){if(T.lookahead<=1){if(Ee(T),T.lookahead===0&&G===w)return _;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var j=T.block_start+X;if((T.strstart===0||T.strstart>=j)&&(T.lookahead=T.strstart-j,T.strstart=j,$(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-ee&&($(T,!1),T.strm.avail_out===0))return _}return T.insert=0,G===S?($(T,!0),T.strm.avail_out===0?P:Y):(T.strstart>T.block_start&&($(T,!1),T.strm.avail_out),_)}),new de(4,4,8,4,Fe),new de(4,5,16,8,Fe),new de(4,6,32,32,Fe),new de(4,4,16,16,pe),new de(8,16,32,32,pe),new de(8,16,128,128,pe),new de(8,32,128,256,pe),new de(32,128,258,1024,pe),new de(32,258,258,4096,pe)],s.deflateInit=function(T,G){return Ae(T,G,O,15,8,0)},s.deflateInit2=Ae,s.deflateReset=_e,s.deflateResetKeep=me,s.deflateSetHeader=function(T,G){return T&&T.state?T.state.wrap!==2?y:(T.state.gzhead=G,x):y},s.deflate=function(T,G){var X,j,H,Q;if(!T||!T.state||5<G||G<0)return T?oe(T,y):y;if(j=T.state,!T.output||!T.input&&T.avail_in!==0||j.status===666&&G!==S)return oe(T,T.avail_out===0?-5:y);if(j.strm=T,X=j.last_flush,j.last_flush=G,j.status===C)if(j.wrap===2)T.adler=0,Z(j,31),Z(j,139),Z(j,8),j.gzhead?(Z(j,(j.gzhead.text?1:0)+(j.gzhead.hcrc?2:0)+(j.gzhead.extra?4:0)+(j.gzhead.name?8:0)+(j.gzhead.comment?16:0)),Z(j,255&j.gzhead.time),Z(j,j.gzhead.time>>8&255),Z(j,j.gzhead.time>>16&255),Z(j,j.gzhead.time>>24&255),Z(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),Z(j,255&j.gzhead.os),j.gzhead.extra&&j.gzhead.extra.length&&(Z(j,255&j.gzhead.extra.length),Z(j,j.gzhead.extra.length>>8&255)),j.gzhead.hcrc&&(T.adler=h(T.adler,j.pending_buf,j.pending,0)),j.gzindex=0,j.status=69):(Z(j,0),Z(j,0),Z(j,0),Z(j,0),Z(j,0),Z(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),Z(j,3),j.status=J);else{var ue=O+(j.w_bits-8<<4)<<8;ue|=(2<=j.strategy||j.level<2?0:j.level<6?1:j.level===6?2:3)<<6,j.strstart!==0&&(ue|=32),ue+=31-ue%31,j.status=J,le(j,ue),j.strstart!==0&&(le(j,T.adler>>>16),le(j,65535&T.adler)),T.adler=1}if(j.status===69)if(j.gzhead.extra){for(H=j.pending;j.gzindex<(65535&j.gzhead.extra.length)&&(j.pending!==j.pending_buf_size||(j.gzhead.hcrc&&j.pending>H&&(T.adler=h(T.adler,j.pending_buf,j.pending-H,H)),k(T),H=j.pending,j.pending!==j.pending_buf_size));)Z(j,255&j.gzhead.extra[j.gzindex]),j.gzindex++;j.gzhead.hcrc&&j.pending>H&&(T.adler=h(T.adler,j.pending_buf,j.pending-H,H)),j.gzindex===j.gzhead.extra.length&&(j.gzindex=0,j.status=73)}else j.status=73;if(j.status===73)if(j.gzhead.name){H=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>H&&(T.adler=h(T.adler,j.pending_buf,j.pending-H,H)),k(T),H=j.pending,j.pending===j.pending_buf_size)){Q=1;break}Q=j.gzindex<j.gzhead.name.length?255&j.gzhead.name.charCodeAt(j.gzindex++):0,Z(j,Q)}while(Q!==0);j.gzhead.hcrc&&j.pending>H&&(T.adler=h(T.adler,j.pending_buf,j.pending-H,H)),Q===0&&(j.gzindex=0,j.status=91)}else j.status=91;if(j.status===91)if(j.gzhead.comment){H=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>H&&(T.adler=h(T.adler,j.pending_buf,j.pending-H,H)),k(T),H=j.pending,j.pending===j.pending_buf_size)){Q=1;break}Q=j.gzindex<j.gzhead.comment.length?255&j.gzhead.comment.charCodeAt(j.gzindex++):0,Z(j,Q)}while(Q!==0);j.gzhead.hcrc&&j.pending>H&&(T.adler=h(T.adler,j.pending_buf,j.pending-H,H)),Q===0&&(j.status=103)}else j.status=103;if(j.status===103&&(j.gzhead.hcrc?(j.pending+2>j.pending_buf_size&&k(T),j.pending+2<=j.pending_buf_size&&(Z(j,255&T.adler),Z(j,T.adler>>8&255),T.adler=0,j.status=J)):j.status=J),j.pending!==0){if(k(T),T.avail_out===0)return j.last_flush=-1,x}else if(T.avail_in===0&&te(G)<=te(X)&&G!==S)return oe(T,-5);if(j.status===666&&T.avail_in!==0)return oe(T,-5);if(T.avail_in!==0||j.lookahead!==0||G!==w&&j.status!==666){var ye=j.strategy===2?function(ie,ge){for(var Oe;;){if(ie.lookahead===0&&(Ee(ie),ie.lookahead===0)){if(ge===w)return _;break}if(ie.match_length=0,Oe=f._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,Oe&&($(ie,!1),ie.strm.avail_out===0))return _}return ie.insert=0,ge===S?($(ie,!0),ie.strm.avail_out===0?P:Y):ie.last_lit&&($(ie,!1),ie.strm.avail_out===0)?_:K}(j,G):j.strategy===3?function(ie,ge){for(var Oe,Le,De,He,Ie=ie.window;;){if(ie.lookahead<=W){if(Ee(ie),ie.lookahead<=W&&ge===w)return _;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=I&&0<ie.strstart&&(Le=Ie[De=ie.strstart-1])===Ie[++De]&&Le===Ie[++De]&&Le===Ie[++De]){He=ie.strstart+W;do;while(Le===Ie[++De]&&Le===Ie[++De]&&Le===Ie[++De]&&Le===Ie[++De]&&Le===Ie[++De]&&Le===Ie[++De]&&Le===Ie[++De]&&Le===Ie[++De]&&De<He);ie.match_length=W-(He-De),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=I?(Oe=f._tr_tally(ie,1,ie.match_length-I),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(Oe=f._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),Oe&&($(ie,!1),ie.strm.avail_out===0))return _}return ie.insert=0,ge===S?($(ie,!0),ie.strm.avail_out===0?P:Y):ie.last_lit&&($(ie,!1),ie.strm.avail_out===0)?_:K}(j,G):c[j.level].func(j,G);if(ye!==P&&ye!==Y||(j.status=666),ye===_||ye===P)return T.avail_out===0&&(j.last_flush=-1),x;if(ye===K&&(G===1?f._tr_align(j):G!==5&&(f._tr_stored_block(j,0,0,!1),G===3&&(U(j.head),j.lookahead===0&&(j.strstart=0,j.block_start=0,j.insert=0))),k(T),T.avail_out===0))return j.last_flush=-1,x}return G!==S?x:j.wrap<=0?1:(j.wrap===2?(Z(j,255&T.adler),Z(j,T.adler>>8&255),Z(j,T.adler>>16&255),Z(j,T.adler>>24&255),Z(j,255&T.total_in),Z(j,T.total_in>>8&255),Z(j,T.total_in>>16&255),Z(j,T.total_in>>24&255)):(le(j,T.adler>>>16),le(j,65535&T.adler)),k(T),0<j.wrap&&(j.wrap=-j.wrap),j.pending!==0?x:1)},s.deflateEnd=function(T){var G;return T&&T.state?(G=T.state.status)!==C&&G!==69&&G!==73&&G!==91&&G!==103&&G!==J&&G!==666?oe(T,y):(T.state=null,G===J?oe(T,-3):x):y},s.deflateSetDictionary=function(T,G){var X,j,H,Q,ue,ye,ie,ge,Oe=G.length;if(!T||!T.state||(Q=(X=T.state).wrap)===2||Q===1&&X.status!==C||X.lookahead)return y;for(Q===1&&(T.adler=m(T.adler,G,Oe,0)),X.wrap=0,Oe>=X.w_size&&(Q===0&&(U(X.head),X.strstart=0,X.block_start=0,X.insert=0),ge=new d.Buf8(X.w_size),d.arraySet(ge,G,Oe-X.w_size,X.w_size,0),G=ge,Oe=X.w_size),ue=T.avail_in,ye=T.next_in,ie=T.input,T.avail_in=Oe,T.next_in=0,T.input=G,Ee(X);X.lookahead>=I;){for(j=X.strstart,H=X.lookahead-(I-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[j+I-1])&X.hash_mask,X.prev[j&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=j,j++,--H;);X.strstart=j,X.lookahead=I-1,Ee(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=I-1,X.match_available=0,T.next_in=ye,T.input=ie,T.avail_in=ue,X.wrap=Q,x},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,i,s){i.exports=function(c,d){var f,m,h,b,w,S,x,y,g,E,R,O,A,N,M,z,F,B,I,W,ee,C,J,_,K;f=c.state,m=c.next_in,_=c.input,h=m+(c.avail_in-5),b=c.next_out,K=c.output,w=b-(d-c.avail_out),S=b+(c.avail_out-257),x=f.dmax,y=f.wsize,g=f.whave,E=f.wnext,R=f.window,O=f.hold,A=f.bits,N=f.lencode,M=f.distcode,z=(1<<f.lenbits)-1,F=(1<<f.distbits)-1;e:do{A<15&&(O+=_[m++]<<A,A+=8,O+=_[m++]<<A,A+=8),B=N[O&z];t:for(;;){if(O>>>=I=B>>>24,A-=I,(I=B>>>16&255)===0)K[b++]=65535&B;else{if(!(16&I)){if((64&I)==0){B=N[(65535&B)+(O&(1<<I)-1)];continue t}if(32&I){f.mode=12;break e}c.msg="invalid literal/length code",f.mode=30;break e}W=65535&B,(I&=15)&&(A<I&&(O+=_[m++]<<A,A+=8),W+=O&(1<<I)-1,O>>>=I,A-=I),A<15&&(O+=_[m++]<<A,A+=8,O+=_[m++]<<A,A+=8),B=M[O&F];n:for(;;){if(O>>>=I=B>>>24,A-=I,!(16&(I=B>>>16&255))){if((64&I)==0){B=M[(65535&B)+(O&(1<<I)-1)];continue n}c.msg="invalid distance code",f.mode=30;break e}if(ee=65535&B,A<(I&=15)&&(O+=_[m++]<<A,(A+=8)<I&&(O+=_[m++]<<A,A+=8)),x<(ee+=O&(1<<I)-1)){c.msg="invalid distance too far back",f.mode=30;break e}if(O>>>=I,A-=I,(I=b-w)<ee){if(g<(I=ee-I)&&f.sane){c.msg="invalid distance too far back",f.mode=30;break e}if(J=R,(C=0)===E){if(C+=y-I,I<W){for(W-=I;K[b++]=R[C++],--I;);C=b-ee,J=K}}else if(E<I){if(C+=y+E-I,(I-=E)<W){for(W-=I;K[b++]=R[C++],--I;);if(C=0,E<W){for(W-=I=E;K[b++]=R[C++],--I;);C=b-ee,J=K}}}else if(C+=E-I,I<W){for(W-=I;K[b++]=R[C++],--I;);C=b-ee,J=K}for(;2<W;)K[b++]=J[C++],K[b++]=J[C++],K[b++]=J[C++],W-=3;W&&(K[b++]=J[C++],1<W&&(K[b++]=J[C++]))}else{for(C=b-ee;K[b++]=K[C++],K[b++]=K[C++],K[b++]=K[C++],2<(W-=3););W&&(K[b++]=K[C++],1<W&&(K[b++]=K[C++]))}break}}break}}while(m<h&&b<S);m-=W=A>>3,O&=(1<<(A-=W<<3))-1,c.next_in=m,c.next_out=b,c.avail_in=m<h?h-m+5:5-(m-h),c.avail_out=b<S?S-b+257:257-(b-S),f.hold=O,f.bits=A}},{}],49:[function(r,i,s){var c=r("../utils/common"),d=r("./adler32"),f=r("./crc32"),m=r("./inffast"),h=r("./inftrees"),b=1,w=2,S=0,x=-2,y=1,g=852,E=592;function R(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function O(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(C){var J;return C&&C.state?(J=C.state,C.total_in=C.total_out=J.total=0,C.msg="",J.wrap&&(C.adler=1&J.wrap),J.mode=y,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new c.Buf32(g),J.distcode=J.distdyn=new c.Buf32(E),J.sane=1,J.back=-1,S):x}function N(C){var J;return C&&C.state?((J=C.state).wsize=0,J.whave=0,J.wnext=0,A(C)):x}function M(C,J){var _,K;return C&&C.state?(K=C.state,J<0?(_=0,J=-J):(_=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?x:(K.window!==null&&K.wbits!==J&&(K.window=null),K.wrap=_,K.wbits=J,N(C))):x}function z(C,J){var _,K;return C?(K=new O,(C.state=K).window=null,(_=M(C,J))!==S&&(C.state=null),_):x}var F,B,I=!0;function W(C){if(I){var J;for(F=new c.Buf32(512),B=new c.Buf32(32),J=0;J<144;)C.lens[J++]=8;for(;J<256;)C.lens[J++]=9;for(;J<280;)C.lens[J++]=7;for(;J<288;)C.lens[J++]=8;for(h(b,C.lens,0,288,F,0,C.work,{bits:9}),J=0;J<32;)C.lens[J++]=5;h(w,C.lens,0,32,B,0,C.work,{bits:5}),I=!1}C.lencode=F,C.lenbits=9,C.distcode=B,C.distbits=5}function ee(C,J,_,K){var P,Y=C.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new c.Buf8(Y.wsize)),K>=Y.wsize?(c.arraySet(Y.window,J,_-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(K<(P=Y.wsize-Y.wnext)&&(P=K),c.arraySet(Y.window,J,_-K,P,Y.wnext),(K-=P)?(c.arraySet(Y.window,J,_-K,K,0),Y.wnext=K,Y.whave=Y.wsize):(Y.wnext+=P,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=P))),0}s.inflateReset=N,s.inflateReset2=M,s.inflateResetKeep=A,s.inflateInit=function(C){return z(C,15)},s.inflateInit2=z,s.inflate=function(C,J){var _,K,P,Y,oe,te,U,k,$,Z,le,q,Ee,Fe,pe,de,Re,me,_e,Ae,T,G,X,j,H=0,Q=new c.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return x;(_=C.state).mode===12&&(_.mode=13),oe=C.next_out,P=C.output,U=C.avail_out,Y=C.next_in,K=C.input,te=C.avail_in,k=_.hold,$=_.bits,Z=te,le=U,G=S;e:for(;;)switch(_.mode){case y:if(_.wrap===0){_.mode=13;break}for(;$<16;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(2&_.wrap&&k===35615){Q[_.check=0]=255&k,Q[1]=k>>>8&255,_.check=f(_.check,Q,2,0),$=k=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&k)<<8)+(k>>8))%31){C.msg="incorrect header check",_.mode=30;break}if((15&k)!=8){C.msg="unknown compression method",_.mode=30;break}if($-=4,T=8+(15&(k>>>=4)),_.wbits===0)_.wbits=T;else if(T>_.wbits){C.msg="invalid window size",_.mode=30;break}_.dmax=1<<T,C.adler=_.check=1,_.mode=512&k?10:12,$=k=0;break;case 2:for(;$<16;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(_.flags=k,(255&_.flags)!=8){C.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){C.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=k>>8&1),512&_.flags&&(Q[0]=255&k,Q[1]=k>>>8&255,_.check=f(_.check,Q,2,0)),$=k=0,_.mode=3;case 3:for(;$<32;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}_.head&&(_.head.time=k),512&_.flags&&(Q[0]=255&k,Q[1]=k>>>8&255,Q[2]=k>>>16&255,Q[3]=k>>>24&255,_.check=f(_.check,Q,4,0)),$=k=0,_.mode=4;case 4:for(;$<16;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}_.head&&(_.head.xflags=255&k,_.head.os=k>>8),512&_.flags&&(Q[0]=255&k,Q[1]=k>>>8&255,_.check=f(_.check,Q,2,0)),$=k=0,_.mode=5;case 5:if(1024&_.flags){for(;$<16;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}_.length=k,_.head&&(_.head.extra_len=k),512&_.flags&&(Q[0]=255&k,Q[1]=k>>>8&255,_.check=f(_.check,Q,2,0)),$=k=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(te<(q=_.length)&&(q=te),q&&(_.head&&(T=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),c.arraySet(_.head.extra,K,Y,q,T)),512&_.flags&&(_.check=f(_.check,K,q,Y)),te-=q,Y+=q,_.length-=q),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(te===0)break e;for(q=0;T=K[Y+q++],_.head&&T&&_.length<65536&&(_.head.name+=String.fromCharCode(T)),T&&q<te;);if(512&_.flags&&(_.check=f(_.check,K,q,Y)),te-=q,Y+=q,T)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(te===0)break e;for(q=0;T=K[Y+q++],_.head&&T&&_.length<65536&&(_.head.comment+=String.fromCharCode(T)),T&&q<te;);if(512&_.flags&&(_.check=f(_.check,K,q,Y)),te-=q,Y+=q,T)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;$<16;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(k!==(65535&_.check)){C.msg="header crc mismatch",_.mode=30;break}$=k=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),C.adler=_.check=0,_.mode=12;break;case 10:for(;$<32;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}C.adler=_.check=R(k),$=k=0,_.mode=11;case 11:if(_.havedict===0)return C.next_out=oe,C.avail_out=U,C.next_in=Y,C.avail_in=te,_.hold=k,_.bits=$,2;C.adler=_.check=1,_.mode=12;case 12:if(J===5||J===6)break e;case 13:if(_.last){k>>>=7&$,$-=7&$,_.mode=27;break}for(;$<3;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}switch(_.last=1&k,$-=1,3&(k>>>=1)){case 0:_.mode=14;break;case 1:if(W(_),_.mode=20,J!==6)break;k>>>=2,$-=2;break e;case 2:_.mode=17;break;case 3:C.msg="invalid block type",_.mode=30}k>>>=2,$-=2;break;case 14:for(k>>>=7&$,$-=7&$;$<32;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if((65535&k)!=(k>>>16^65535)){C.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&k,$=k=0,_.mode=15,J===6)break e;case 15:_.mode=16;case 16:if(q=_.length){if(te<q&&(q=te),U<q&&(q=U),q===0)break e;c.arraySet(P,K,Y,q,oe),te-=q,Y+=q,U-=q,oe+=q,_.length-=q;break}_.mode=12;break;case 17:for(;$<14;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(_.nlen=257+(31&k),k>>>=5,$-=5,_.ndist=1+(31&k),k>>>=5,$-=5,_.ncode=4+(15&k),k>>>=4,$-=4,286<_.nlen||30<_.ndist){C.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;$<3;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}_.lens[ue[_.have++]]=7&k,k>>>=3,$-=3}for(;_.have<19;)_.lens[ue[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,X={bits:_.lenbits},G=h(0,_.lens,0,19,_.lencode,0,_.work,X),_.lenbits=X.bits,G){C.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;de=(H=_.lencode[k&(1<<_.lenbits)-1])>>>16&255,Re=65535&H,!((pe=H>>>24)<=$);){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(Re<16)k>>>=pe,$-=pe,_.lens[_.have++]=Re;else{if(Re===16){for(j=pe+2;$<j;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(k>>>=pe,$-=pe,_.have===0){C.msg="invalid bit length repeat",_.mode=30;break}T=_.lens[_.have-1],q=3+(3&k),k>>>=2,$-=2}else if(Re===17){for(j=pe+3;$<j;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}$-=pe,T=0,q=3+(7&(k>>>=pe)),k>>>=3,$-=3}else{for(j=pe+7;$<j;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}$-=pe,T=0,q=11+(127&(k>>>=pe)),k>>>=7,$-=7}if(_.have+q>_.nlen+_.ndist){C.msg="invalid bit length repeat",_.mode=30;break}for(;q--;)_.lens[_.have++]=T}}if(_.mode===30)break;if(_.lens[256]===0){C.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,X={bits:_.lenbits},G=h(b,_.lens,0,_.nlen,_.lencode,0,_.work,X),_.lenbits=X.bits,G){C.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,X={bits:_.distbits},G=h(w,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,X),_.distbits=X.bits,G){C.msg="invalid distances set",_.mode=30;break}if(_.mode=20,J===6)break e;case 20:_.mode=21;case 21:if(6<=te&&258<=U){C.next_out=oe,C.avail_out=U,C.next_in=Y,C.avail_in=te,_.hold=k,_.bits=$,m(C,le),oe=C.next_out,P=C.output,U=C.avail_out,Y=C.next_in,K=C.input,te=C.avail_in,k=_.hold,$=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;de=(H=_.lencode[k&(1<<_.lenbits)-1])>>>16&255,Re=65535&H,!((pe=H>>>24)<=$);){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(de&&(240&de)==0){for(me=pe,_e=de,Ae=Re;de=(H=_.lencode[Ae+((k&(1<<me+_e)-1)>>me)])>>>16&255,Re=65535&H,!(me+(pe=H>>>24)<=$);){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}k>>>=me,$-=me,_.back+=me}if(k>>>=pe,$-=pe,_.back+=pe,_.length=Re,de===0){_.mode=26;break}if(32&de){_.back=-1,_.mode=12;break}if(64&de){C.msg="invalid literal/length code",_.mode=30;break}_.extra=15&de,_.mode=22;case 22:if(_.extra){for(j=_.extra;$<j;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}_.length+=k&(1<<_.extra)-1,k>>>=_.extra,$-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;de=(H=_.distcode[k&(1<<_.distbits)-1])>>>16&255,Re=65535&H,!((pe=H>>>24)<=$);){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if((240&de)==0){for(me=pe,_e=de,Ae=Re;de=(H=_.distcode[Ae+((k&(1<<me+_e)-1)>>me)])>>>16&255,Re=65535&H,!(me+(pe=H>>>24)<=$);){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}k>>>=me,$-=me,_.back+=me}if(k>>>=pe,$-=pe,_.back+=pe,64&de){C.msg="invalid distance code",_.mode=30;break}_.offset=Re,_.extra=15&de,_.mode=24;case 24:if(_.extra){for(j=_.extra;$<j;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}_.offset+=k&(1<<_.extra)-1,k>>>=_.extra,$-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){C.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(U===0)break e;if(q=le-U,_.offset>q){if((q=_.offset-q)>_.whave&&_.sane){C.msg="invalid distance too far back",_.mode=30;break}Ee=q>_.wnext?(q-=_.wnext,_.wsize-q):_.wnext-q,q>_.length&&(q=_.length),Fe=_.window}else Fe=P,Ee=oe-_.offset,q=_.length;for(U<q&&(q=U),U-=q,_.length-=q;P[oe++]=Fe[Ee++],--q;);_.length===0&&(_.mode=21);break;case 26:if(U===0)break e;P[oe++]=_.length,U--,_.mode=21;break;case 27:if(_.wrap){for(;$<32;){if(te===0)break e;te--,k|=K[Y++]<<$,$+=8}if(le-=U,C.total_out+=le,_.total+=le,le&&(C.adler=_.check=_.flags?f(_.check,P,le,oe-le):d(_.check,P,le,oe-le)),le=U,(_.flags?k:R(k))!==_.check){C.msg="incorrect data check",_.mode=30;break}$=k=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;$<32;){if(te===0)break e;te--,k+=K[Y++]<<$,$+=8}if(k!==(4294967295&_.total)){C.msg="incorrect length check",_.mode=30;break}$=k=0}_.mode=29;case 29:G=1;break e;case 30:G=-3;break e;case 31:return-4;case 32:default:return x}return C.next_out=oe,C.avail_out=U,C.next_in=Y,C.avail_in=te,_.hold=k,_.bits=$,(_.wsize||le!==C.avail_out&&_.mode<30&&(_.mode<27||J!==4))&&ee(C,C.output,C.next_out,le-C.avail_out)?(_.mode=31,-4):(Z-=C.avail_in,le-=C.avail_out,C.total_in+=Z,C.total_out+=le,_.total+=le,_.wrap&&le&&(C.adler=_.check=_.flags?f(_.check,P,le,C.next_out-le):d(_.check,P,le,C.next_out-le)),C.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(Z==0&&le===0||J===4)&&G===S&&(G=-5),G)},s.inflateEnd=function(C){if(!C||!C.state)return x;var J=C.state;return J.window&&(J.window=null),C.state=null,S},s.inflateGetHeader=function(C,J){var _;return C&&C.state?(2&(_=C.state).wrap)==0?x:((_.head=J).done=!1,S):x},s.inflateSetDictionary=function(C,J){var _,K=J.length;return C&&C.state?(_=C.state).wrap!==0&&_.mode!==11?x:_.mode===11&&d(1,J,K,0)!==_.check?-3:ee(C,J,K,K)?(_.mode=31,-4):(_.havedict=1,S):x},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,i,s){var c=r("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(b,w,S,x,y,g,E,R){var O,A,N,M,z,F,B,I,W,ee=R.bits,C=0,J=0,_=0,K=0,P=0,Y=0,oe=0,te=0,U=0,k=0,$=null,Z=0,le=new c.Buf16(16),q=new c.Buf16(16),Ee=null,Fe=0;for(C=0;C<=15;C++)le[C]=0;for(J=0;J<x;J++)le[w[S+J]]++;for(P=ee,K=15;1<=K&&le[K]===0;K--);if(K<P&&(P=K),K===0)return y[g++]=20971520,y[g++]=20971520,R.bits=1,0;for(_=1;_<K&&le[_]===0;_++);for(P<_&&(P=_),C=te=1;C<=15;C++)if(te<<=1,(te-=le[C])<0)return-1;if(0<te&&(b===0||K!==1))return-1;for(q[1]=0,C=1;C<15;C++)q[C+1]=q[C]+le[C];for(J=0;J<x;J++)w[S+J]!==0&&(E[q[w[S+J]]++]=J);if(F=b===0?($=Ee=E,19):b===1?($=d,Z-=257,Ee=f,Fe-=257,256):($=m,Ee=h,-1),C=_,z=g,oe=J=k=0,N=-1,M=(U=1<<(Y=P))-1,b===1&&852<U||b===2&&592<U)return 1;for(;;){for(B=C-oe,W=E[J]<F?(I=0,E[J]):E[J]>F?(I=Ee[Fe+E[J]],$[Z+E[J]]):(I=96,0),O=1<<C-oe,_=A=1<<Y;y[z+(k>>oe)+(A-=O)]=B<<24|I<<16|W|0,A!==0;);for(O=1<<C-1;k&O;)O>>=1;if(O!==0?(k&=O-1,k+=O):k=0,J++,--le[C]==0){if(C===K)break;C=w[S+E[J]]}if(P<C&&(k&M)!==N){for(oe===0&&(oe=P),z+=_,te=1<<(Y=C-oe);Y+oe<K&&!((te-=le[Y+oe])<=0);)Y++,te<<=1;if(U+=1<<Y,b===1&&852<U||b===2&&592<U)return 1;y[N=k&M]=P<<24|Y<<16|z-g|0}}return k!==0&&(y[z+k]=C-oe<<24|64<<16|0),R.bits=P,0}},{"../utils/common":41}],51:[function(r,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,i,s){var c=r("../utils/common"),d=0,f=1;function m(H){for(var Q=H.length;0<=--Q;)H[Q]=0}var h=0,b=29,w=256,S=w+1+b,x=30,y=19,g=2*S+1,E=15,R=16,O=7,A=256,N=16,M=17,z=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=new Array(2*(S+2));m(ee);var C=new Array(2*x);m(C);var J=new Array(512);m(J);var _=new Array(256);m(_);var K=new Array(b);m(K);var P,Y,oe,te=new Array(x);function U(H,Q,ue,ye,ie){this.static_tree=H,this.extra_bits=Q,this.extra_base=ue,this.elems=ye,this.max_length=ie,this.has_stree=H&&H.length}function k(H,Q){this.dyn_tree=H,this.max_code=0,this.stat_desc=Q}function $(H){return H<256?J[H]:J[256+(H>>>7)]}function Z(H,Q){H.pending_buf[H.pending++]=255&Q,H.pending_buf[H.pending++]=Q>>>8&255}function le(H,Q,ue){H.bi_valid>R-ue?(H.bi_buf|=Q<<H.bi_valid&65535,Z(H,H.bi_buf),H.bi_buf=Q>>R-H.bi_valid,H.bi_valid+=ue-R):(H.bi_buf|=Q<<H.bi_valid&65535,H.bi_valid+=ue)}function q(H,Q,ue){le(H,ue[2*Q],ue[2*Q+1])}function Ee(H,Q){for(var ue=0;ue|=1&H,H>>>=1,ue<<=1,0<--Q;);return ue>>>1}function Fe(H,Q,ue){var ye,ie,ge=new Array(E+1),Oe=0;for(ye=1;ye<=E;ye++)ge[ye]=Oe=Oe+ue[ye-1]<<1;for(ie=0;ie<=Q;ie++){var Le=H[2*ie+1];Le!==0&&(H[2*ie]=Ee(ge[Le]++,Le))}}function pe(H){var Q;for(Q=0;Q<S;Q++)H.dyn_ltree[2*Q]=0;for(Q=0;Q<x;Q++)H.dyn_dtree[2*Q]=0;for(Q=0;Q<y;Q++)H.bl_tree[2*Q]=0;H.dyn_ltree[2*A]=1,H.opt_len=H.static_len=0,H.last_lit=H.matches=0}function de(H){8<H.bi_valid?Z(H,H.bi_buf):0<H.bi_valid&&(H.pending_buf[H.pending++]=H.bi_buf),H.bi_buf=0,H.bi_valid=0}function Re(H,Q,ue,ye){var ie=2*Q,ge=2*ue;return H[ie]<H[ge]||H[ie]===H[ge]&&ye[Q]<=ye[ue]}function me(H,Q,ue){for(var ye=H.heap[ue],ie=ue<<1;ie<=H.heap_len&&(ie<H.heap_len&&Re(Q,H.heap[ie+1],H.heap[ie],H.depth)&&ie++,!Re(Q,ye,H.heap[ie],H.depth));)H.heap[ue]=H.heap[ie],ue=ie,ie<<=1;H.heap[ue]=ye}function _e(H,Q,ue){var ye,ie,ge,Oe,Le=0;if(H.last_lit!==0)for(;ye=H.pending_buf[H.d_buf+2*Le]<<8|H.pending_buf[H.d_buf+2*Le+1],ie=H.pending_buf[H.l_buf+Le],Le++,ye===0?q(H,ie,Q):(q(H,(ge=_[ie])+w+1,Q),(Oe=F[ge])!==0&&le(H,ie-=K[ge],Oe),q(H,ge=$(--ye),ue),(Oe=B[ge])!==0&&le(H,ye-=te[ge],Oe)),Le<H.last_lit;);q(H,A,Q)}function Ae(H,Q){var ue,ye,ie,ge=Q.dyn_tree,Oe=Q.stat_desc.static_tree,Le=Q.stat_desc.has_stree,De=Q.stat_desc.elems,He=-1;for(H.heap_len=0,H.heap_max=g,ue=0;ue<De;ue++)ge[2*ue]!==0?(H.heap[++H.heap_len]=He=ue,H.depth[ue]=0):ge[2*ue+1]=0;for(;H.heap_len<2;)ge[2*(ie=H.heap[++H.heap_len]=He<2?++He:0)]=1,H.depth[ie]=0,H.opt_len--,Le&&(H.static_len-=Oe[2*ie+1]);for(Q.max_code=He,ue=H.heap_len>>1;1<=ue;ue--)me(H,ge,ue);for(ie=De;ue=H.heap[1],H.heap[1]=H.heap[H.heap_len--],me(H,ge,1),ye=H.heap[1],H.heap[--H.heap_max]=ue,H.heap[--H.heap_max]=ye,ge[2*ie]=ge[2*ue]+ge[2*ye],H.depth[ie]=(H.depth[ue]>=H.depth[ye]?H.depth[ue]:H.depth[ye])+1,ge[2*ue+1]=ge[2*ye+1]=ie,H.heap[1]=ie++,me(H,ge,1),2<=H.heap_len;);H.heap[--H.heap_max]=H.heap[1],function(Ie,Ve){var Ct,$e,Je,Pe,Et,Qt,zt=Ve.dyn_tree,Nn=Ve.max_code,Ur=Ve.stat_desc.static_tree,Be=Ve.stat_desc.has_stree,Ke=Ve.stat_desc.extra_bits,at=Ve.stat_desc.extra_base,Xe=Ve.stat_desc.max_length,Ye=0;for(Pe=0;Pe<=E;Pe++)Ie.bl_count[Pe]=0;for(zt[2*Ie.heap[Ie.heap_max]+1]=0,Ct=Ie.heap_max+1;Ct<g;Ct++)Xe<(Pe=zt[2*zt[2*($e=Ie.heap[Ct])+1]+1]+1)&&(Pe=Xe,Ye++),zt[2*$e+1]=Pe,Nn<$e||(Ie.bl_count[Pe]++,Et=0,at<=$e&&(Et=Ke[$e-at]),Qt=zt[2*$e],Ie.opt_len+=Qt*(Pe+Et),Be&&(Ie.static_len+=Qt*(Ur[2*$e+1]+Et)));if(Ye!==0){do{for(Pe=Xe-1;Ie.bl_count[Pe]===0;)Pe--;Ie.bl_count[Pe]--,Ie.bl_count[Pe+1]+=2,Ie.bl_count[Xe]--,Ye-=2}while(0<Ye);for(Pe=Xe;Pe!==0;Pe--)for($e=Ie.bl_count[Pe];$e!==0;)Nn<(Je=Ie.heap[--Ct])||(zt[2*Je+1]!==Pe&&(Ie.opt_len+=(Pe-zt[2*Je+1])*zt[2*Je],zt[2*Je+1]=Pe),$e--)}}(H,Q),Fe(ge,He,H.bl_count)}function T(H,Q,ue){var ye,ie,ge=-1,Oe=Q[1],Le=0,De=7,He=4;for(Oe===0&&(De=138,He=3),Q[2*(ue+1)+1]=65535,ye=0;ye<=ue;ye++)ie=Oe,Oe=Q[2*(ye+1)+1],++Le<De&&ie===Oe||(Le<He?H.bl_tree[2*ie]+=Le:ie!==0?(ie!==ge&&H.bl_tree[2*ie]++,H.bl_tree[2*N]++):Le<=10?H.bl_tree[2*M]++:H.bl_tree[2*z]++,ge=ie,He=(Le=0)===Oe?(De=138,3):ie===Oe?(De=6,3):(De=7,4))}function G(H,Q,ue){var ye,ie,ge=-1,Oe=Q[1],Le=0,De=7,He=4;for(Oe===0&&(De=138,He=3),ye=0;ye<=ue;ye++)if(ie=Oe,Oe=Q[2*(ye+1)+1],!(++Le<De&&ie===Oe)){if(Le<He)for(;q(H,ie,H.bl_tree),--Le!=0;);else ie!==0?(ie!==ge&&(q(H,ie,H.bl_tree),Le--),q(H,N,H.bl_tree),le(H,Le-3,2)):Le<=10?(q(H,M,H.bl_tree),le(H,Le-3,3)):(q(H,z,H.bl_tree),le(H,Le-11,7));ge=ie,He=(Le=0)===Oe?(De=138,3):ie===Oe?(De=6,3):(De=7,4)}}m(te);var X=!1;function j(H,Q,ue,ye){le(H,(h<<1)+(ye?1:0),3),function(ie,ge,Oe,Le){de(ie),Z(ie,Oe),Z(ie,~Oe),c.arraySet(ie.pending_buf,ie.window,ge,Oe,ie.pending),ie.pending+=Oe}(H,Q,ue)}s._tr_init=function(H){X||(function(){var Q,ue,ye,ie,ge,Oe=new Array(E+1);for(ie=ye=0;ie<b-1;ie++)for(K[ie]=ye,Q=0;Q<1<<F[ie];Q++)_[ye++]=ie;for(_[ye-1]=ie,ie=ge=0;ie<16;ie++)for(te[ie]=ge,Q=0;Q<1<<B[ie];Q++)J[ge++]=ie;for(ge>>=7;ie<x;ie++)for(te[ie]=ge<<7,Q=0;Q<1<<B[ie]-7;Q++)J[256+ge++]=ie;for(ue=0;ue<=E;ue++)Oe[ue]=0;for(Q=0;Q<=143;)ee[2*Q+1]=8,Q++,Oe[8]++;for(;Q<=255;)ee[2*Q+1]=9,Q++,Oe[9]++;for(;Q<=279;)ee[2*Q+1]=7,Q++,Oe[7]++;for(;Q<=287;)ee[2*Q+1]=8,Q++,Oe[8]++;for(Fe(ee,S+1,Oe),Q=0;Q<x;Q++)C[2*Q+1]=5,C[2*Q]=Ee(Q,5);P=new U(ee,F,w+1,S,E),Y=new U(C,B,0,x,E),oe=new U(new Array(0),I,0,y,O)}(),X=!0),H.l_desc=new k(H.dyn_ltree,P),H.d_desc=new k(H.dyn_dtree,Y),H.bl_desc=new k(H.bl_tree,oe),H.bi_buf=0,H.bi_valid=0,pe(H)},s._tr_stored_block=j,s._tr_flush_block=function(H,Q,ue,ye){var ie,ge,Oe=0;0<H.level?(H.strm.data_type===2&&(H.strm.data_type=function(Le){var De,He=4093624447;for(De=0;De<=31;De++,He>>>=1)if(1&He&&Le.dyn_ltree[2*De]!==0)return d;if(Le.dyn_ltree[18]!==0||Le.dyn_ltree[20]!==0||Le.dyn_ltree[26]!==0)return f;for(De=32;De<w;De++)if(Le.dyn_ltree[2*De]!==0)return f;return d}(H)),Ae(H,H.l_desc),Ae(H,H.d_desc),Oe=function(Le){var De;for(T(Le,Le.dyn_ltree,Le.l_desc.max_code),T(Le,Le.dyn_dtree,Le.d_desc.max_code),Ae(Le,Le.bl_desc),De=y-1;3<=De&&Le.bl_tree[2*W[De]+1]===0;De--);return Le.opt_len+=3*(De+1)+5+5+4,De}(H),ie=H.opt_len+3+7>>>3,(ge=H.static_len+3+7>>>3)<=ie&&(ie=ge)):ie=ge=ue+5,ue+4<=ie&&Q!==-1?j(H,Q,ue,ye):H.strategy===4||ge===ie?(le(H,2+(ye?1:0),3),_e(H,ee,C)):(le(H,4+(ye?1:0),3),function(Le,De,He,Ie){var Ve;for(le(Le,De-257,5),le(Le,He-1,5),le(Le,Ie-4,4),Ve=0;Ve<Ie;Ve++)le(Le,Le.bl_tree[2*W[Ve]+1],3);G(Le,Le.dyn_ltree,De-1),G(Le,Le.dyn_dtree,He-1)}(H,H.l_desc.max_code+1,H.d_desc.max_code+1,Oe+1),_e(H,H.dyn_ltree,H.dyn_dtree)),pe(H),ye&&de(H)},s._tr_tally=function(H,Q,ue){return H.pending_buf[H.d_buf+2*H.last_lit]=Q>>>8&255,H.pending_buf[H.d_buf+2*H.last_lit+1]=255&Q,H.pending_buf[H.l_buf+H.last_lit]=255&ue,H.last_lit++,Q===0?H.dyn_ltree[2*ue]++:(H.matches++,Q--,H.dyn_ltree[2*(_[ue]+w+1)]++,H.dyn_dtree[2*$(Q)]++),H.last_lit===H.lit_bufsize-1},s._tr_align=function(H){le(H,2,3),q(H,A,ee),function(Q){Q.bi_valid===16?(Z(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)}(H)}},{"../utils/common":41}],53:[function(r,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,i,s){(function(c){(function(d,f){if(!d.setImmediate){var m,h,b,w,S=1,x={},y=!1,g=d.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(d);E=E&&E.setTimeout?E:d,m={}.toString.call(d.process)==="[object process]"?function(N){process.nextTick(function(){O(N)})}:function(){if(d.postMessage&&!d.importScripts){var N=!0,M=d.onmessage;return d.onmessage=function(){N=!1},d.postMessage("","*"),d.onmessage=M,N}}()?(w="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",A,!1):d.attachEvent("onmessage",A),function(N){d.postMessage(w+N,"*")}):d.MessageChannel?((b=new MessageChannel).port1.onmessage=function(N){O(N.data)},function(N){b.port2.postMessage(N)}):g&&"onreadystatechange"in g.createElement("script")?(h=g.documentElement,function(N){var M=g.createElement("script");M.onreadystatechange=function(){O(N),M.onreadystatechange=null,h.removeChild(M),M=null},h.appendChild(M)}):function(N){setTimeout(O,0,N)},E.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var M=new Array(arguments.length-1),z=0;z<M.length;z++)M[z]=arguments[z+1];var F={callback:N,args:M};return x[S]=F,m(S),S++},E.clearImmediate=R}function R(N){delete x[N]}function O(N){if(y)setTimeout(O,0,N);else{var M=x[N];if(M){y=!0;try{(function(z){var F=z.callback,B=z.args;switch(B.length){case 0:F();break;case 1:F(B[0]);break;case 2:F(B[0],B[1]);break;case 3:F(B[0],B[1],B[2]);break;default:F.apply(f,B)}})(M)}finally{R(N),y=!1}}}}function A(N){N.source===d&&typeof N.data=="string"&&N.data.indexOf(w)===0&&O(+N.data.slice(w.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof Dl<"u"?Dl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Wd)),Wd.exports}var HE=FE();const gb=ic(HE);function WE(a,n){if(n){if(a===32)return{type:"fl32",name:"32-bit floating point",isFloat:!0,isLittleEndian:!1,bytesPerSample:4};if(a===64)return{type:"fl64",name:"64-bit floating point",isFloat:!0,isLittleEndian:!1,bytesPerSample:8}}return{type:"NONE",name:"not compressed",isFloat:!1,isLittleEndian:!1,bytesPerSample:a===12?2:Math.ceil(a/8)}}function VE(a,n,r){if(r===0){for(let w=0;w<10;w++)a.setUint8(n+w,0);return}const i=r<0?1:0,s=Math.abs(r);let c=Math.floor(Math.log2(s))+16383,d=s/Math.pow(2,c-16383);d>=2?(d/=2,c++):d<1&&(d*=2,c--);const f=Math.round((d-1)*Math.pow(2,63)),m=i<<15|c&32767;a.setUint16(n,m,!1);const h=Math.floor(f/Math.pow(2,32)),b=f%Math.pow(2,32);a.setUint32(n+2,h,!1),a.setUint32(n+6,b,!1)}function Oi(a,n,r){const i=new TextEncoder().encode(r),s=Math.min(i.length,255);a.setUint8(n,s);let c=n+1;for(let f=0;f<s;f++)a.setUint8(c++,i[f]);return(1+s)%2===1&&a.setUint8(c++,0),c-n}function ga(a,n,r){const i=new TextEncoder().encode(r.padEnd(4).substring(0,4));for(let s=0;s<4;s++)a.setUint8(n+s,i[s])}async function $E(a,n){const r=new OfflineAudioContext(a.numberOfChannels,Math.ceil(a.length*n/a.sampleRate),n),i=r.createBufferSource();return i.buffer=a,i.connect(r.destination),i.start(),await r.startRendering()}async function GE(a,n){const r=new OfflineAudioContext(n,a.length,a.sampleRate),i=r.createBufferSource();return i.buffer=a,i.connect(r.destination),i.start(),await r.startRendering()}async function qE(a,n={}){const{rootNote:r,loopStart:i,loopEnd:s,bitDepth:c=16,isFloat:d=!1,sampleRate:f,channels:m}=n;if(![8,12,16,24,32,64].includes(c))throw new Error(`Unsupported bit depth: ${c}. Supported: 8, 12, 16, 24, 32, 64`);if(f&&![11025,22050,44100].includes(f))throw new Error(`Unsupported sample rate: ${f}. Supported: 11025, 22050, 44100`);if(m&&![1,2].includes(m))throw new Error(`Unsupported channel count: ${m}. Supported: 1 (mono), 2 (stereo)`);let h=a;f&&f!==a.sampleRate&&(h=await $E(a,f)),m&&m!==a.numberOfChannels&&(h=await GE(h,m));const b=h.numberOfChannels,w=h.length,S=h.sampleRate;if(b!==1&&b!==2)throw new Error("AIFF export supports only mono or stereo audio");const x=WE(c,d),y=x.type!=="NONE",g=y?"AIFC":"AIFF",E=i!==void 0&&s!==void 0,R=r!==void 0||E,O=y?12:0,A=Oi(new DataView(new ArrayBuffer(256)),0,x.name),N=8+(y?22+A:18);let M=0;if(E){const P=Oi(new DataView(new ArrayBuffer(256)),0,"start"),Y=Oi(new DataView(new ArrayBuffer(256)),0,"end");M=10+(6+P)+(6+Y)}const z=R?28:0,F=w*b*x.bytesPerSample,B=16+F+F%2,I=O+N+M+z+B,W=12+I,ee=new ArrayBuffer(W),C=new DataView(ee),J=new Uint8Array(ee);let _=0;ga(C,_,"FORM"),_+=4,C.setUint32(_,I+4,!1),_+=4,ga(C,_,g),_+=4,y&&(ga(C,_,"FVER"),_+=4,C.setUint32(_,4,!1),_+=4,C.setUint32(_,2726318400,!1),_+=4),ga(C,_,"COMM"),_+=4;const K=y?18+A:18;if(C.setUint32(_,K,!1),_+=4,C.setUint16(_,b,!1),_+=2,C.setUint32(_,w,!1),_+=4,C.setUint16(_,c,!1),_+=2,VE(C,_,S),_+=10,y&&(ga(C,_,x.type),_+=4,_+=Oi(C,_,x.name)),E){ga(C,_,"MARK"),_+=4;const P=M-8;C.setUint32(_,P,!1),_+=4,C.setUint16(_,2,!1),_+=2,C.setUint16(_,1,!1),_+=2,C.setUint32(_,i??0,!1),_+=4,_+=Oi(C,_,"start"),C.setUint16(_,2,!1),_+=2,C.setUint32(_,(s??w-1)-1,!1),_+=4,_+=Oi(C,_,"end")}return R&&(ga(C,_,"INST"),_+=4,C.setUint32(_,20,!1),_+=4,C.setUint8(_,r??60),_+=1,C.setInt8(_,0),_+=1,C.setUint8(_,0),_+=1,C.setUint8(_,127),_+=1,C.setUint8(_,1),_+=1,C.setUint8(_,127),_+=1,C.setInt16(_,0,!1),_+=2,C.setUint16(_,E?1:0,!1),_+=2,C.setUint16(_,E?1:0,!1),_+=2,C.setUint16(_,E?2:0,!1),_+=2,C.setUint16(_,0,!1),_+=2,C.setUint16(_,0,!1),_+=2,C.setUint16(_,0,!1),_+=2),ga(C,_,"SSND"),_+=4,C.setUint32(_,8+F,!1),_+=4,C.setUint32(_,0,!1),_+=4,C.setUint32(_,0,!1),_+=4,YE(J,_,h,x,c),new Blob([ee],{type:"audio/aiff"})}function YE(a,n,r,i,s){const c=r.numberOfChannels,d=r.length,f=i.bytesPerSample,m=[];for(let h=0;h<c;h++)m.push(r.getChannelData(h));if(i.isFloat){const h=new DataView(a.buffer,n);let b=0;for(let w=0;w<d;w++)for(let S=0;S<c;S++){const x=m[S][w];f===4?(h.setFloat32(b,x,!1),b+=4):f===8&&(h.setFloat64(b,x,!1),b+=8)}}else{const h=new DataView(a.buffer,n);let b=0;for(let w=0;w<d;w++)for(let S=0;S<c;S++){let x=m[S][w];if(x=Math.min(1,Math.max(-1,x)),f===1){const y=Math.round((x+1)*127.5);h.setUint8(b,y),b+=1}else if(f===2){let y;s===12?y=Math.round(x*2047)<<4:y=Math.round(x*32767),h.setInt16(b,y,!1),b+=2}else if(f===3){const y=Math.round(x*8388607);h.setUint8(b,y>>16&255),h.setUint8(b+1,y>>8&255),h.setUint8(b+2,y&255),b+=3}else if(f===4){const y=Math.round(x*2147483647);h.setInt32(b,y,!1),b+=4}}}}async function ec(a,n){const{format:r,bitDepth:i=16,isFloat:s=!1,rootNote:c,loopStart:d,loopEnd:f,sampleRate:m,channels:h}=n,b={rootNote:c,loopStart:d,loopEnd:f,sampleRate:m,channels:h};switch(r){case"wav":return await ls(a,i,b);case"aiff":return await qE(a,{...b,bitDepth:i,isFloat:s});default:throw new Error(`Unsupported audio format: ${r}`)}}function af(a){switch(a){case"wav":return"wav";case"aiff":return"aif";default:throw new Error(`Unsupported audio format: ${a}`)}}const ZE={engine:{bendrange:8191,highpass:0,modulation:{aftertouch:{amount:16383,target:0},modwheel:{amount:16383,target:0},pitchbend:{amount:16383,target:0},velocity:{amount:16383,target:0}},params:Array(8).fill(16384),playmode:"poly","portamento.amount":0,"portamento.type":32767,transpose:0,"tuning.root":0,"tuning.scale":0,"velocity.sensitivity":19660,volume:18348,width:0},envelope:{amp:{attack:0,decay:0,release:1e3,sustain:32767},filter:{attack:0,decay:3276,release:23757,sustain:983}},fx:{active:!1,params:[22014,0,30285,11880,0,32767,0,0],type:"ladder"},lfo:{active:!1,params:[20309,5679,19114,15807,0,0,0,12287],type:"random"},octave:0,platform:"OP-XY",regions:[],type:"drum",version:4},KE={engine:{bendrange:13653,highpass:0,modulation:{aftertouch:{amount:30719,target:4096},modwheel:{amount:32767,target:10240},pitchbend:{amount:16383,target:0},velocity:{amount:16383,target:0}},params:[16384,16384,16384,16384,16384,16384,16384,16384],playmode:"poly","portamento.amount":0,"portamento.type":32767,transpose:0,"tuning.root":0,"tuning.scale":0,"velocity.sensitivity":10240,volume:16466,width:3072},envelope:{amp:{attack:0,decay:20295,release:16383,sustain:14989},filter:{attack:0,decay:16895,release:19968,sustain:16896}},fx:{active:!1,params:[19661,0,7391,24063,0,32767,0,0],type:"svf"},lfo:{active:!1,params:[19024,32255,4048,17408,0,0,0,0],type:"element"},octave:0,platform:"OP-XY",regions:[],type:"multisampler",version:4};function va(a){return Math.round(a/100*32767)}function Nf(a,n){for(const r in n)n[r]&&typeof n[r]=="object"&&!Array.isArray(n[r])?((!a[r]||typeof a[r]!="object")&&(a[r]={}),Nf(a[r],n[r])):a[r]=n[r]}function XE(a,n){if(!n)return;["engine","envelope","fx","lfo","octave"].forEach(i=>{n[i]&&(a[i]||(a[i]={}),Nf(a[i],n[i]))})}function QE(a,n){if(!n)return;["engine","envelope","fx","lfo","octave"].forEach(i=>{n[i]&&(a[i]||(a[i]={}),Nf(a[i],n[i]))})}function JE(a,n,r,i){r!==n&&(console.warn(`Frame count mismatch for ${a}:`,{expected:n,actual:r,difference:r-n}),i.framecount=r,i["sample.end"]!==void 0&&(i["sample.end"]=r))}async function yb(a,n="drum_patch",r,i,s,c="wav"){const d=new gb,f=Va(n),m=JSON.parse(JSON.stringify(ZE));if(m.name=f,m.regions=[],XE(m,a.importedDrumPresetJson),m.engine&&a.drumSettings.presetSettings){const S=a.drumSettings.presetSettings;S.playmode&&(m.engine.playmode=S.playmode),isNaN(S.transpose)||(m.engine.transpose=S.transpose),isNaN(S.velocity)||(m.engine["velocity.sensitivity"]=va(S.velocity)),isNaN(S.volume)||(m.engine.volume=va(S.volume)),isNaN(S.width)||(m.engine.width=va(S.width))}const h=[],b=a.drumSamples.map((S,x)=>({...S,originalIndex:x})).filter(S=>S.isLoaded&&S.file&&S.audioBuffer&&(S.isAssigned&&typeof S.assignedKey=="number"&&S.assignedKey>=0&&S.assignedKey<24||S.originalIndex<24&&S.isAssigned!==!1)).sort((S,x)=>{const y=S.assignedKey??S.originalIndex,g=x.assignedKey??x.originalIndex;return y-g}).slice(0,24);let w=53;for(let S=0;S<b.length;S++){const x=b[S],y=x.assignedKey??x.originalIndex,g=af(c),E=a.drumSettings.renameFiles?Xl(a.drumSettings.presetName,a.drumSettings.filenameSeparator,"drum",y,x.file.name,a.midiNoteMapping,g):Va(x.file.name).replace(/\.[^/.]+$/,`.${g}`),R=x.originalSampleRate||x.audioBuffer.sampleRate,O=x.audioBuffer.duration,A=w++,M=Math.floor(O*(r||R)),z=(W,ee,C)=>Math.max(ee,Math.min(W,C)),F=0,B=z(M,1,M),I={"fade.in":0,"fade.out":0,framecount:M,hikey:A,lokey:A,pan:0,"pitch.keycenter":60,playmode:"oneshot",reverse:!1,sample:E,transpose:0,tune:0,"sample.start":F,"sample.end":B};m.regions.push(I)}for(let S=0;S<a.drumSamples.length;S++){const x=a.drumSamples[S];if(!x.isLoaded||!x.file||!x.audioBuffer)continue;const y=af(c),g=a.drumSettings.renameFiles?Xl(a.drumSettings.presetName,a.drumSettings.filenameSeparator,"drum",x.assignedKey??S,x.file.name,a.midiNoteMapping,y):Va(x.file.name).replace(/\.[^/.]+$/,`.${y}`),E=x.originalSampleRate||x.audioBuffer.sampleRate,R=x.audioBuffer.duration;r&&E!==r||i&&i!==x.originalBitDepth||s==="mono"&&x.audioBuffer.numberOfChannels>1||a.drumSettings.normalize?h.push((async()=>{try{const A=await Cf(x.audioBuffer,{sampleRate:r||E,bitDepth:i||x.originalBitDepth||16,channels:s==="mono"?1:x.audioBuffer.numberOfChannels,normalize:a.drumSettings.normalize,normalizeLevel:a.drumSettings.normalizeLevel,sampleName:x.name}),N=ec(A,{format:c,bitDepth:i||16,isFloat:c==="aiff"&&i===32,rootNote:60,loopStart:0,loopEnd:Math.floor(R*(r||E))-1});d.file(g,N)}catch(A){console.error(`Failed to convert sample ${x.name}:`,A)}})()):h.push((async()=>{try{const A=ec(x.audioBuffer,{format:c,bitDepth:i||x.originalBitDepth||16,isFloat:c==="aiff"&&(i===32||x.originalBitDepth===32),rootNote:60,loopStart:0,loopEnd:Math.floor(R*E)-1});d.file(g,A)}catch(A){throw new Error(`Failed to create audio file with metadata for ${x.name}: ${A instanceof Error?A.message:A}`)}})())}return await Promise.all(h),d.file("patch.json",JSON.stringify(m,null,2)),await d.generateAsync({type:"blob"})}async function bb(a,n="multisample_patch",r,i,s,c=0,d="wav"){const f=new gb,m=Va(n),h=JSON.parse(JSON.stringify(KE));h.name=m,h.regions=[],QE(h,a.importedMultisamplePreset);const b=[],w=[],S=a.multisampleFiles.map((y,g)=>({...y,originalIndex:g})).filter(y=>y.file&&y.audioBuffer);S.sort((y,g)=>{const E=y.rootNote>=0?y.rootNote:60+y.originalIndex,R=g.rootNote>=0?g.rootNote:60+g.originalIndex;return E-R});let x=0;for(let y=0;y<S.length;y++){const g=S[y];if(!g.file||!g.audioBuffer)continue;const E=af(d),R=a.multisampleSettings.renameFiles?Xl(a.multisampleSettings.presetName,a.multisampleSettings.filenameSeparator,"multisample",g.rootNote,g.file.name,a.midiNoteMapping,E):Va(g.file.name).replace(/\.[^/.]+$/,`.${E}`),O=g.originalSampleRate||g.audioBuffer.sampleRate,A=g.audioBuffer.duration,N=g.rootNote>=0?g.rootNote:60+g.originalIndex,M=r||O,z=Math.floor(A*M),F=x,B=N;x=N+1;const I=(q,Ee,Fe)=>Math.max(Ee,Math.min(q,Fe)),W=(q,Ee)=>typeof q=="number"?q:Ee,ee=g.duration||A,C=Math.floor(ee*O),J=W(g.loopStart,ee*.1)*O,_=W(g.loopEnd,ee*.9)*O,K=I(Math.floor(J),0,C-1),P=I(Math.floor(_),K+1,C),Y=M/O,oe=Math.floor(K*Y),te=Math.floor(P*Y),U=I(Math.floor(z*(W(g.inPoint,0)/A)),0,z-1),k=I(Math.floor(z*(W(g.outPoint,A)/A)),U+1,z),$=a.multisampleSettings.cutAtLoopEnd?te+Kl:z,Z={framecount:$,gain:c,hikey:B,lokey:F,"loop.crossfade":0,"loop.end":te,"loop.onrelease":a.multisampleSettings.loopOnRelease,"loop.enabled":a.multisampleSettings.loopEnabled,"loop.start":oe,"pitch.keycenter":N,reverse:!1,sample:R,"sample.end":a.multisampleSettings.cutAtLoopEnd?$:k,"sample.start":U,tune:0};r&&O!==r||i&&i!==g.originalBitDepth||s==="mono"&&g.audioBuffer.numberOfChannels>1||a.multisampleSettings.normalize||a.multisampleSettings.cutAtLoopEnd||c!==0?b.push((async()=>{try{const q=await Cf(g.audioBuffer,{sampleRate:r||O,bitDepth:i||g.originalBitDepth||16,channels:s==="mono"?1:g.audioBuffer.numberOfChannels,normalize:a.multisampleSettings.normalize,normalizeLevel:a.multisampleSettings.normalizeLevel,gain:c,cutAtLoopEnd:a.multisampleSettings.cutAtLoopEnd,loopEnd:P,sampleName:g.name}),Ee=a.multisampleSettings.cutAtLoopEnd?te+Kl:Math.floor(A*M);JE(g.name,Ee,q.length,Z);const Fe=ec(q,{format:d,bitDepth:i||16,isFloat:d==="aiff"&&i===32,rootNote:N,loopStart:oe,loopEnd:te});f.file(R,Fe),w[y]=Z}catch(q){throw new Error(`Failed to convert sample ${g.name} to audio file: ${q instanceof Error?q.message:q}`)}})()):b.push((async()=>{try{const q=ec(g.audioBuffer,{format:d,bitDepth:i||g.originalBitDepth||16,isFloat:d==="aiff"&&(i===32||g.originalBitDepth===32),rootNote:N,loopStart:oe,loopEnd:te});f.file(R,q),w[y]=Z}catch(q){throw new Error(`Failed to create WAV with metadata for ${g.name}: ${q instanceof Error?q.message:q}`)}})())}return await Promise.all(b),h.regions=w.filter(y=>y!==void 0),h.regions.length>0&&(h.regions[h.regions.length-1].hikey=127),f.file("patch.json",JSON.stringify(h,null,2)),await f.generateAsync({type:"blob"})}function tc(a,n){const r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}function vb(){const{state:a,dispatch:n}=un(),r=L.useCallback(async s=>{try{if(n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null}),a.drumSamples.filter(w=>w.isLoaded).length===0)throw new Error("No samples loaded");const d=s||a.drumSettings.presetName||`drum_patch_${Date.now()}`,f=a.drumSettings.sampleRate||void 0,m=a.drumSettings.bitDepth||void 0,h=a.drumSettings.channels===1?"mono":"keep",b=await yb(a,d,f,m,h,a.drumSettings.audioFormat);tc(b,`${d}.preset.zip`),console.log(`Generated drum patch: ${d}.preset.zip`)}catch(c){console.error("Error generating drum patch:",c),n({type:"SET_ERROR",payload:c instanceof Error?c.message:"Failed to generate patch"})}finally{n({type:"SET_LOADING",payload:!1})}},[a,n]),i=L.useCallback(async s=>{try{if(n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null}),a.multisampleFiles.length===0)throw new Error("No samples loaded");const c=s||a.multisampleSettings.presetName||`multisample_patch_${Date.now()}`,d=a.multisampleSettings.sampleRate||void 0,f=a.multisampleSettings.bitDepth||void 0,m=a.multisampleSettings.channels===1?"mono":"keep",h=a.multisampleSettings.gain||0,b=await bb(a,c,d,f,m,h,a.multisampleSettings.audioFormat);tc(b,`${c}.preset.zip`),console.log(`Generated multisample patch: ${c}.preset.zip`)}catch(c){console.error("Error generating multisample patch:",c),n({type:"SET_ERROR",payload:c instanceof Error?c.message:"Failed to generate patch"})}finally{n({type:"SET_LOADING",payload:!1})}},[a,n]);return{generateDrumPatchFile:r,generateMultisamplePatchFile:i}}class rr{constructor(n=!1){this.eventMap={},this.eventsSuspended=n==!0}addListener(n,r,i={}){if(typeof n=="string"&&n.length<1||n instanceof String&&n.length<1||typeof n!="string"&&!(n instanceof String)&&n!==rr.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof r!="function")throw new TypeError("The callback must be a function.");const s=new Fy(n,this,r,i);return this.eventMap[n]||(this.eventMap[n]=[]),i.prepend?this.eventMap[n].unshift(s):this.eventMap[n].push(s),s}addOneTimeListener(n,r,i={}){i.remaining=1,this.addListener(n,r,i)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(n,r){return n===void 0?this.eventMap[rr.ANY_EVENT]&&this.eventMap[rr.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,i])=>i.length>0):this.eventMap[n]&&this.eventMap[n].length>0?r instanceof Fy?this.eventMap[n].filter(s=>s===r).length>0:typeof r=="function"?this.eventMap[n].filter(s=>s.callback===r).length>0:r==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(n){return this.eventMap[n]||[]}suspendEvent(n){this.getListeners(n).forEach(r=>{r.suspended=!0})}unsuspendEvent(n){this.getListeners(n).forEach(r=>{r.suspended=!1})}getListenerCount(n){return this.getListeners(n).length}emit(n,...r){if(typeof n!="string"&&!(n instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let i=[],s=this.eventMap[rr.ANY_EVENT]||[];return this.eventMap[n]&&(s=s.concat(this.eventMap[n])),s.forEach(c=>{if(c.suspended)return;let d=[...r];Array.isArray(c.arguments)&&(d=d.concat(c.arguments)),c.remaining>0&&(i.push(c.callback.apply(c.context,d)),c.count++),--c.remaining<1&&c.remove()}),i}removeListener(n,r,i={}){if(n===void 0){this.eventMap={};return}else if(!this.eventMap[n])return;let s=this.eventMap[n].filter(c=>r&&c.callback!==r||i.remaining&&i.remaining!==c.remaining||i.context&&i.context!==c.context);s.length?this.eventMap[n]=s:delete this.eventMap[n]}async waitFor(n,r={}){return r.duration=parseInt(r.duration),(isNaN(r.duration)||r.duration<=0)&&(r.duration=1/0),new Promise((i,s)=>{let c,d=this.addListener(n,()=>{clearTimeout(c),i()},{remaining:1});r.duration!==1/0&&(c=setTimeout(()=>{d.remove(),s("The duration expired before the event was emitted.")},r.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Fy{constructor(n,r,i,s={}){if(typeof n!="string"&&!(n instanceof String)&&n!==rr.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!r)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof i!="function")throw new TypeError("The 'callback' must be a function.");s.arguments!==void 0&&!Array.isArray(s.arguments)&&(s.arguments=[s.arguments]),s=Object.assign({context:r,remaining:1/0,arguments:void 0,duration:1/0},s),s.duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=i,this.context=s.context,this.count=0,this.event=n,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=r}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Ne{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),Ne.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),Ne.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),Ne.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),Ne.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Ui{constructor(n,r={}){this.duration=ze.defaults.note.duration,this.attack=ze.defaults.note.attack,this.release=ze.defaults.note.release,r.duration!=null&&(this.duration=r.duration),r.attack!=null&&(this.attack=r.attack),r.rawAttack!=null&&(this.attack=We.from7bitToFloat(r.rawAttack)),r.release!=null&&(this.release=r.release),r.rawRelease!=null&&(this.release=We.from7bitToFloat(r.rawRelease)),Number.isInteger(n)?this.identifier=We.toNoteIdentifier(n):this.identifier=n}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(n){const r=We.getNoteDetails(n);if(ze.validation&&!n)throw new Error("Invalid note identifier");this._name=r.name,this._accidental=r.accidental,this._octave=r.octave}get name(){return this._name}set name(n){if(ze.validation&&(n=n.toUpperCase(),!["C","D","E","F","G","A","B"].includes(n)))throw new Error("Invalid name value");this._name=n}get accidental(){return this._accidental}set accidental(n){if(ze.validation&&(n=n.toLowerCase(),!["#","##","b","bb"].includes(n)))throw new Error("Invalid accidental value");this._accidental=n}get octave(){return this._octave}set octave(n){if(ze.validation&&(n=parseInt(n),isNaN(n)))throw new Error("Invalid octave value");this._octave=n}get duration(){return this._duration}set duration(n){if(ze.validation&&(n=parseFloat(n),isNaN(n)||n===null||n<0))throw new RangeError("Invalid duration value.");this._duration=n}get attack(){return this._attack}set attack(n){if(ze.validation&&(n=parseFloat(n),isNaN(n)||!(n>=0&&n<=1)))throw new RangeError("Invalid attack value.");this._attack=n}get release(){return this._release}set release(n){if(ze.validation&&(n=parseFloat(n),isNaN(n)||!(n>=0&&n<=1)))throw new RangeError("Invalid release value.");this._release=n}get rawAttack(){return We.fromFloatTo7Bit(this._attack)}set rawAttack(n){this._attack=We.from7bitToFloat(n)}get rawRelease(){return We.fromFloatTo7Bit(this._release)}set rawRelease(n){this._release=We.from7bitToFloat(n)}get number(){return We.toNoteNumber(this.identifier)}getOffsetNumber(n=0,r=0){return ze.validation&&(n=parseInt(n)||0,r=parseInt(r)||0),Math.min(Math.max(this.number+n*12+r,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class We{static toNoteNumber(n,r=0){if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid 'octaveOffset' value");typeof n!="string"&&(n="");const i=this.getNoteDetails(n);if(!i)throw new TypeError("Invalid note identifier");const s={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let c=(i.octave+1+r)*12;if(c+=s[i.name],i.accidental&&(i.accidental.startsWith("b")?c-=i.accidental.length:c+=i.accidental.length),c<0||c>127)throw new RangeError("Invalid octaveOffset value");return c}static getNoteDetails(n){Number.isInteger(n)&&(n=this.toNoteIdentifier(n));const r=n.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!r)throw new TypeError("Invalid note identifier");const i=r[1].toUpperCase(),s=parseInt(r[3]);let c=r[2].toLowerCase();return c=c===""?void 0:c,{accidental:c,identifier:i+(c||"")+s,name:i,octave:s}}static sanitizeChannels(n){let r;if(ze.validation){if(n==="all")r=["all"];else if(n==="none")return[]}return Array.isArray(n)?r=n:r=[n],r.indexOf("all")>-1&&(r=Ne.MIDI_CHANNEL_NUMBERS),r.map(function(i){return parseInt(i)}).filter(function(i){return i>=1&&i<=16})}static toTimestamp(n){let r=!1;const i=parseFloat(n);return isNaN(i)?!1:(typeof n=="string"&&n.substring(0,1)==="+"?i>=0&&(r=ze.time+i):i>=0&&(r=i),r)}static guessNoteNumber(n,r){r=parseInt(r)||0;let i=!1;if(Number.isInteger(n)&&n>=0&&n<=127)i=parseInt(n);else if(parseInt(n)>=0&&parseInt(n)<=127)i=parseInt(n);else if(typeof n=="string"||n instanceof String)try{i=this.toNoteNumber(n.trim(),r)}catch{return!1}return i}static toNoteIdentifier(n,r){if(n=parseInt(n),isNaN(n)||n<0||n>127)throw new RangeError("Invalid note number");if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid octaveOffset value");const i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(n/12-1)+r;return i[n%12]+s.toString()}static buildNote(n,r={}){if(r.octaveOffset=parseInt(r.octaveOffset)||0,n instanceof Ui)return n;let i=this.guessNoteNumber(n,r.octaveOffset);if(i===!1)throw new TypeError(`The input could not be parsed as a note (${n})`);return r.octaveOffset=void 0,new Ui(i,r)}static buildNoteArray(n,r={}){let i=[];return Array.isArray(n)||(n=[n]),n.forEach(s=>{i.push(this.buildNote(s,r))}),i}static from7bitToFloat(n){return n===1/0&&(n=127),n=parseInt(n)||0,Math.min(Math.max(n/127,0),1)}static fromFloatTo7Bit(n){return n===1/0&&(n=1),n=parseFloat(n)||0,Math.min(Math.max(Math.round(n*127),0),127)}static fromMsbLsbToFloat(n,r=0){ze.validation&&(n=Math.min(Math.max(parseInt(n)||0,0),127),r=Math.min(Math.max(parseInt(r)||0,0),127));const i=((n<<7)+r)/16383;return Math.min(Math.max(i,0),1)}static fromFloatToMsbLsb(n){ze.validation&&(n=Math.min(Math.max(parseFloat(n)||0,0),1));const r=Math.round(n*16383);return{msb:r>>7,lsb:r&127}}static offsetNumber(n,r=0,i=0){if(ze.validation){if(n=parseInt(n),isNaN(n))throw new Error("Invalid note number");r=parseInt(r)||0,i=parseInt(i)||0}return Math.min(Math.max(n+r*12+i,0),127)}static getPropertyByValue(n,r){return Object.keys(n).find(i=>n[i]===r)}static getCcNameByNumber(n){if(!(ze.validation&&(n=parseInt(n),!(n>=0&&n<=127))))return Ne.CONTROL_CHANGE_MESSAGES[n].name}static getCcNumberByName(n){let r=Ne.CONTROL_CHANGE_MESSAGES.find(i=>i.name===n);return r?r.number:Ne.MIDI_CONTROL_CHANGE_MESSAGES[n]}static getChannelModeByNumber(n){if(!(n>=120&&n<=127))return!1;for(let r in Ne.CHANNEL_MODE_MESSAGES)if(Ne.CHANNEL_MODE_MESSAGES.hasOwnProperty(r)&&n===Ne.CHANNEL_MODE_MESSAGES[r])return r;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class e2 extends rr{constructor(n,r){super(),this._output=n,this._number=r,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(n,r={time:0}){return this.output.send(n,r),this}sendKeyAftertouch(n,r,i={}){if(ze.validation){if(i.useRawValue&&(i.rawValue=i.useRawValue),isNaN(parseFloat(r)))throw new RangeError("Invalid key aftertouch value.");if(i.rawValue){if(!(r>=0&&r<=127&&Number.isInteger(r)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(r>=0&&r<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}i.rawValue||(r=We.fromFloatTo7Bit(r));const s=ze.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(n)||(n=[n]),We.buildNoteArray(n).forEach(c=>{this.send([(Ne.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),c.getOffsetNumber(s),r],{time:We.toTimestamp(i.time)})}),this}sendControlChange(n,r,i={}){if(typeof n=="string"&&(n=We.getCcNumberByName(n)),Array.isArray(r)||(r=[r]),ze.validation){if(n===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(r=r.map(s=>{const c=Math.min(Math.max(parseInt(s),0),127);if(isNaN(c))throw new TypeError("Values must be integers between 0 and 127");return c}),r.length===2&&n>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return r.forEach((s,c)=>{this.send([(Ne.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),n+c*32,r[c]],{time:We.toTimestamp(i.time)})}),this}_selectNonRegisteredParameter(n,r={}){return this.sendControlChange(99,n[0],r),this.sendControlChange(98,n[1],r),this}_deselectRegisteredParameter(n={}){return this.sendControlChange(101,127,n),this.sendControlChange(100,127,n),this}_deselectNonRegisteredParameter(n={}){return this.sendControlChange(101,127,n),this.sendControlChange(100,127,n),this}_selectRegisteredParameter(n,r={}){return this.sendControlChange(101,n[0],r),this.sendControlChange(100,n[1],r),this}_setCurrentParameter(n,r={}){return n=[].concat(n),this.sendControlChange(6,n[0],r),n.length<2?this:(this.sendControlChange(38,n[1],r),this)}sendRpnDecrement(n,r={}){if(Array.isArray(n)||(n=Ne.REGISTERED_PARAMETERS[n]),ze.validation){if(n===void 0)throw new TypeError("The specified registered parameter is invalid.");let i=!1;if(Object.getOwnPropertyNames(Ne.REGISTERED_PARAMETERS).forEach(s=>{Ne.REGISTERED_PARAMETERS[s][0]===n[0]&&Ne.REGISTERED_PARAMETERS[s][1]===n[1]&&(i=!0)}),!i)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(n,r),this.sendControlChange(97,0,r),this._deselectRegisteredParameter(r),this}sendRpnIncrement(n,r={}){if(Array.isArray(n)||(n=Ne.REGISTERED_PARAMETERS[n]),ze.validation){if(n===void 0)throw new TypeError("The specified registered parameter is invalid.");let i=!1;if(Object.getOwnPropertyNames(Ne.REGISTERED_PARAMETERS).forEach(s=>{Ne.REGISTERED_PARAMETERS[s][0]===n[0]&&Ne.REGISTERED_PARAMETERS[s][1]===n[1]&&(i=!0)}),!i)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(n,r),this.sendControlChange(96,0,r),this._deselectRegisteredParameter(r),this}playNote(n,r={}){this.sendNoteOn(n,r);const i=Array.isArray(n)?n:[n];for(let s of i)if(parseInt(s.duration)>0){const c={time:(We.toTimestamp(r.time)||ze.time)+parseInt(s.duration),release:s.release,rawRelease:s.rawRelease};this.sendNoteOff(s,c)}else if(parseInt(r.duration)>0){const c={time:(We.toTimestamp(r.time)||ze.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(s,c)}return this}sendNoteOff(n,r={}){if(ze.validation){if(r.rawRelease!=null&&!(r.rawRelease>=0&&r.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(r.release!=null&&!(r.release>=0&&r.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");r.rawVelocity&&(r.rawRelease=r.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),r.velocity&&(r.release=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let i=64;r.rawRelease!=null?i=r.rawRelease:isNaN(r.release)||(i=Math.round(r.release*127));const s=ze.octaveOffset+this.output.octaveOffset+this.octaveOffset;return We.buildNoteArray(n,{rawRelease:parseInt(i)}).forEach(c=>{this.send([(Ne.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),c.getOffsetNumber(s),c.rawRelease],{time:We.toTimestamp(r.time)})}),this}stopNote(n,r={}){return this.sendNoteOff(n,r)}sendNoteOn(n,r={}){if(ze.validation){if(r.rawAttack!=null&&!(r.rawAttack>=0&&r.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(r.attack!=null&&!(r.attack>=0&&r.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");r.rawVelocity&&(r.rawAttack=r.velocity,r.rawRelease=r.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),r.velocity&&(r.attack=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let i=64;r.rawAttack!=null?i=r.rawAttack:isNaN(r.attack)||(i=Math.round(r.attack*127));const s=ze.octaveOffset+this.output.octaveOffset+this.octaveOffset;return We.buildNoteArray(n,{rawAttack:i}).forEach(c=>{this.send([(Ne.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),c.getOffsetNumber(s),c.rawAttack],{time:We.toTimestamp(r.time)})}),this}sendChannelMode(n,r=0,i={}){if(typeof n=="string"&&(n=Ne.CHANNEL_MODE_MESSAGES[n]),ze.validation){if(n===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(n)||!(n>=120&&n<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(r))||r<0||r>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(Ne.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),n,r],{time:We.toTimestamp(i.time)}),this}sendOmniMode(n,r={}){return n===void 0||n?this.sendChannelMode("omnimodeon",0,r):this.sendChannelMode("omnimodeoff",0,r),this}sendChannelAftertouch(n,r={}){if(ze.validation){if(isNaN(parseFloat(n)))throw new RangeError("Invalid channel aftertouch value.");if(r.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return r.rawValue||(n=We.fromFloatTo7Bit(n)),this.send([(Ne.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(n)],{time:We.toTimestamp(r.time)}),this}sendMasterTuning(n,r={}){if(n=parseFloat(n)||0,ze.validation&&!(n>-65&&n<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let i=Math.floor(n)+64,s=n-Math.floor(n);s=Math.round((s+1)/2*16383);let c=s>>7&127,d=s&127;return this.sendRpnValue("channelcoarsetuning",i,r),this.sendRpnValue("channelfinetuning",[c,d],r),this}sendModulationRange(n,r,i={}){if(ze.validation){if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(r!=null&&(!Number.isInteger(r)||!(r>=0&&r<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return r>=0&&r<=127||(r=0),this.sendRpnValue("modulationrange",[n,r],i),this}sendNrpnValue(n,r,i={}){if(r=[].concat(r),ze.validation){if(!Array.isArray(n)||!Number.isInteger(n[0])||!Number.isInteger(n[1]))throw new TypeError("The specified NRPN is invalid.");if(!(n[0]>=0&&n[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(n[1]>=0&&n[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");r.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(n,i),this._setCurrentParameter(r,i),this._deselectNonRegisteredParameter(i),this}sendPitchBend(n,r={}){if(ze.validation)if(r.rawValue&&Array.isArray(n)){if(!(n[0]>=0&&n[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(n[1]>=0&&n[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(r.rawValue&&!Array.isArray(n)){if(!(n>=0&&n<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(n)||n===null)throw new RangeError("Invalid pitch bend value.");if(!(n>=-1&&n<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let i=0,s=0;if(r.rawValue&&Array.isArray(n))i=n[0],s=n[1];else if(r.rawValue&&!Array.isArray(n))i=n;else{const c=We.fromFloatToMsbLsb((n+1)/2);i=c.msb,s=c.lsb}return this.send([(Ne.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,i],{time:We.toTimestamp(r.time)}),this}sendPitchBendRange(n,r,i={}){if(ze.validation){if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(r)||!(r>=0&&r<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[n,r],i),this}sendProgramChange(n,r={}){if(n=parseInt(n)||0,ze.validation&&!(n>=0&&n<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(Ne.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),n],{time:We.toTimestamp(r.time)}),this}sendRpnValue(n,r,i={}){if(Array.isArray(n)||(n=Ne.REGISTERED_PARAMETERS[n]),ze.validation){if(!Number.isInteger(n[0])||!Number.isInteger(n[1]))throw new TypeError("The specified NRPN is invalid.");if(!(n[0]>=0&&n[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(n[1]>=0&&n[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(r).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(n,i),this._setCurrentParameter(r,i),this._deselectRegisteredParameter(i),this}sendTuningBank(n,r={}){if(ze.validation&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",n,r),this}sendTuningProgram(n,r={}){if(ze.validation&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",n,r),this}sendLocalControl(n,r={}){return n?this.sendChannelMode("localcontrol",127,r):this.sendChannelMode("localcontrol",0,r)}sendAllNotesOff(n={}){return this.sendChannelMode("allnotesoff",0,n)}sendAllSoundOff(n={}){return this.sendChannelMode("allsoundoff",0,n)}sendResetAllControllers(n={}){return this.sendChannelMode("resetallcontrollers",0,n)}sendPolyphonicMode(n,r={}){return n==="mono"?this.sendChannelMode("monomodeon",0,r):this.sendChannelMode("polymodeon",0,r)}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class of extends rr{constructor(n){super(),this._midiOutput=n,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new e2(this,r);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(n=>n.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(n){let r={timestamp:ze.time};n.port.connection==="open"?(r.type="opened",r.target=this,r.port=r.target,this.emit("opened",r)):n.port.connection==="closed"&&n.port.state==="connected"?(r.type="closed",r.target=this,r.port=r.target,this.emit("closed",r)):n.port.connection==="closed"&&n.port.state==="disconnected"?(r.type="disconnected",r.port={connection:n.port.connection,id:n.port.id,manufacturer:n.port.manufacturer,name:n.port.name,state:n.port.state,type:n.port.type},this.emit("disconnected",r)):n.port.connection==="pending"&&n.port.state==="disconnected"||console.warn("This statechange event was not caught:",n.port.connection,n.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(n){return Promise.reject(n)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(n,r={time:0},i=0){if(n instanceof xb&&(n=We.isNode?n.data:n.rawData),n instanceof Uint8Array&&We.isNode&&(n=Array.from(n)),ze.validation){if(!Array.isArray(n)&&!(n instanceof Uint8Array)&&(n=[n],Array.isArray(r)&&(n=n.concat(r)),r=isNaN(i)?{time:0}:{time:i}),!(parseInt(n[0])>=128&&parseInt(n[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");n.slice(1).forEach(s=>{if(s=parseInt(s),!(s>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),r||(r={time:0})}return this._midiOutput.send(n,We.toTimestamp(r.time)),this}sendSysex(n,r=[],i={}){if(n=[].concat(n),r instanceof Uint8Array){const s=new Uint8Array(1+n.length+r.length+1);s[0]=Ne.SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(n),1),s.set(r,1+n.length),s[s.length-1]=Ne.SYSTEM_MESSAGES.sysexend,this.send(s,{time:i.time})}else{const s=n.concat(r,Ne.SYSTEM_MESSAGES.sysexend);this.send([Ne.SYSTEM_MESSAGES.sysex].concat(s),{time:i.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():ze.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(n,r={}){if(ze.validation&&(n=parseInt(n),isNaN(n)||!(n>=0&&n<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([Ne.SYSTEM_MESSAGES.timecode,n],{time:r.time}),this}sendSongPosition(n=0,r={}){n=Math.floor(n)||0;var i=n>>7&127,s=n&127;return this.send([Ne.SYSTEM_MESSAGES.songposition,i,s],{time:r.time}),this}sendSongSelect(n=0,r={}){if(ze.validation&&(n=parseInt(n),isNaN(n)||!(n>=0&&n<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([Ne.SYSTEM_MESSAGES.songselect,n],{time:r.time}),this}sendTuneRequest(n={}){return this.send([Ne.SYSTEM_MESSAGES.tunerequest],{time:n.time}),this}sendClock(n={}){return this.send([Ne.SYSTEM_MESSAGES.clock],{time:n.time}),this}sendStart(n={}){return this.send([Ne.SYSTEM_MESSAGES.start],{time:n.time}),this}sendContinue(n={}){return this.send([Ne.SYSTEM_MESSAGES.continue],{time:n.time}),this}sendStop(n={}){return this.send([Ne.SYSTEM_MESSAGES.stop],{time:n.time}),this}sendActiveSensing(n={}){return this.send([Ne.SYSTEM_MESSAGES.activesensing],{time:n.time}),this}sendReset(n={}){return this.send([Ne.SYSTEM_MESSAGES.reset],{time:n.time}),this}sendTuningRequest(n={}){return ze.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(n)}sendKeyAftertouch(n,r,i={}){return i.channels==null&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(n,r,i)}),this}sendControlChange(n,r,i={},s={}){if(ze.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const c=i;i=s,i.channels=c,i.channels==="all"&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).forEach(c=>{this.channels[c].sendControlChange(n,r,i)}),this}sendPitchBendRange(n=0,r=0,i={}){return i.channels==null&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).forEach(s=>{this.channels[s].sendPitchBendRange(n,r,i)}),this}setPitchBendRange(n=0,r=0,i="all",s={}){return ze.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=i,s.channels==="all"&&(s.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(n,r,s)}sendRpnValue(n,r,i={}){return i.channels==null&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).forEach(s=>{this.channels[s].sendRpnValue(n,r,i)}),this}setRegisteredParameter(n,r=[],i="all",s={}){return ze.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=i,s.channels==="all"&&(s.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(n,r,s)}sendChannelAftertouch(n,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(n,r)}),this}sendPitchBend(n,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBend(n,r)}),this}sendProgramChange(n=0,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendProgramChange(n,r)}),this}sendModulationRange(n,r,i={}){return i.channels==null&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).forEach(s=>{this.channels[s].sendModulationRange(n,r,i)}),this}setModulationRange(n=0,r=0,i="all",s={}){return ze.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=i,s.channels==="all"&&(s.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(n,r,s)}sendMasterTuning(n,r={}){return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendMasterTuning(n,r)}),this}setMasterTuning(n,r={},i={}){return ze.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),i.channels=r,i.channels==="all"&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(n,i)}sendTuningProgram(n,r={}){return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendTuningProgram(n,r)}),this}setTuningProgram(n,r="all",i={}){return ze.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),i.channels=r,i.channels==="all"&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(n,i)}sendTuningBank(n=0,r={}){return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendTuningBank(n,r)}),this}setTuningBank(n,r="all",i={}){return ze.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),i.channels=r,i.channels==="all"&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(n,i)}sendChannelMode(n,r=0,i={},s={}){if(ze.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const c=i;i=s,i.channels=c,i.channels==="all"&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).forEach(c=>{this.channels[c].sendChannelMode(n,r,i)}),this}sendAllSoundOff(n={}){return n.channels==null&&(n.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendAllSoundOff(n)}),this}sendAllNotesOff(n={}){return n.channels==null&&(n.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendAllNotesOff(n)}),this}sendResetAllControllers(n={},r={}){if(ze.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=Ne.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendResetAllControllers(n)}),this}sendPolyphonicMode(n,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(n,r)}),this}sendLocalControl(n,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendLocalControl(n,r)}),this}sendOmniMode(n,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendOmniMode(n,r)}),this}sendNrpnValue(n,r,i={}){return i.channels==null&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).forEach(s=>{this.channels[s].sendNrpnValue(n,r,i)}),this}setNonRegisteredParameter(n,r=[],i="all",s={}){return ze.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=i,s.channels==="all"&&(s.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(n,r,s)}sendRpnIncrement(n,r={}){return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendRpnIncrement(n,r)}),this}incrementRegisteredParameter(n,r="all",i={}){return ze.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),i.channels=r,i.channels==="all"&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(n,i)}sendRpnDecrement(n,r={}){return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendRpnDecrement(n,r)}),this}decrementRegisteredParameter(n,r="all",i={}){return ze.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),i.channels=r,i.channels==="all"&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(n,i)}sendNoteOff(n,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOff(n,r)}),this}stopNote(n,r){return this.sendNoteOff(n,r)}playNote(n,r={},i={}){if(ze.validation&&(r.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),r.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].playNote(n,r)}),this}sendNoteOn(n,r={},i={}){if(ze.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const s=r;r=i,r.channels=s,r.channels==="all"&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNoteOn(n,r)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Hy{constructor(n=[],r={}){this.destinations=[],this.types=[...Object.keys(Ne.SYSTEM_MESSAGES),...Object.keys(Ne.CHANNEL_MESSAGES)],this.channels=Ne.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(n)||(n=[n]),r.types&&!Array.isArray(r.types)&&(r.types=[r.types]),r.channels&&!Array.isArray(r.channels)&&(r.channels=[r.channels]),ze.validation&&(n.forEach(i=>{if(!(i instanceof of))throw new TypeError("Destinations must be of type 'Output'.")}),r.types!==void 0&&r.types.forEach(i=>{if(!Ne.SYSTEM_MESSAGES.hasOwnProperty(i)&&!Ne.CHANNEL_MESSAGES.hasOwnProperty(i))throw new TypeError("Type must be a valid message type.")}),r.channels!==void 0&&r.channels.forEach(i=>{if(!Ne.MIDI_CHANNEL_NUMBERS.includes(i))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=n,r.types&&(this.types=r.types),r.channels&&(this.channels=r.channels)}forward(n){this.suspended||this.types.includes(n.type)&&(n.channel&&!this.channels.includes(n.channel)||this.destinations.forEach(r=>{ze.validation&&!(r instanceof of)||r.send(n)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class t2 extends rr{constructor(n,r){super(),this._input=n,this._number=r,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(n){const r=Object.assign({},n);r.port=this.input,r.target=this,r.type="midimessage",this.emit(r.type,r),this._parseEventForStandardMessages(r)}_parseEventForStandardMessages(n){const r=Object.assign({},n);r.type=r.message.type||"unknownmessage";const i=n.message.dataBytes[0],s=n.message.dataBytes[1];if(r.type==="noteoff"||r.type==="noteon"&&s===0)this.notesState[i]=!1,r.type="noteoff",r.note=new Ui(We.offsetNumber(i,this.octaveOffset+this.input.octaveOffset+ze.octaveOffset),{rawAttack:0,rawRelease:s}),r.value=We.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.release,r.rawVelocity=r.note.rawRelease;else if(r.type==="noteon")this.notesState[i]=!0,r.note=new Ui(We.offsetNumber(i,this.octaveOffset+this.input.octaveOffset+ze.octaveOffset),{rawAttack:s}),r.value=We.from7bitToFloat(s),r.rawValue=s,r.velocity=r.note.attack,r.rawVelocity=r.note.rawAttack;else if(r.type==="keyaftertouch")r.note=new Ui(We.offsetNumber(i,this.octaveOffset+this.input.octaveOffset+ze.octaveOffset)),r.value=We.from7bitToFloat(s),r.rawValue=s,r.identifier=r.note.identifier,r.key=r.note.number,r.rawKey=i;else if(r.type==="controlchange"){r.controller={number:i,name:Ne.CONTROL_CHANGE_MESSAGES[i].name,description:Ne.CONTROL_CHANGE_MESSAGES[i].description,position:Ne.CONTROL_CHANGE_MESSAGES[i].position},r.subtype=r.controller.name||"controller"+i,r.value=We.from7bitToFloat(s),r.rawValue=s;const c=Object.assign({},r);c.type=`${r.type}-controller${i}`,delete c.subtype,this.emit(c.type,c);const d=Object.assign({},r);d.type=`${r.type}-`+Ne.CONTROL_CHANGE_MESSAGES[i].name,delete d.subtype,d.type.indexOf("controller")!==0&&this.emit(d.type,d),r.message.dataBytes[0]>=120&&this._parseChannelModeMessage(r),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(r.message.dataBytes[0])&&this._parseEventForParameterNumber(r)}else r.type==="programchange"?(r.value=i,r.rawValue=r.value):r.type==="channelaftertouch"?(r.value=We.from7bitToFloat(i),r.rawValue=i):r.type==="pitchbend"?(r.value=((s<<7)+i-8192)/8192,r.rawValue=(s<<7)+i):r.type="unknownmessage";this.emit(r.type,r)}_parseChannelModeMessage(n){const r=Object.assign({},n);r.type=r.controller.name,r.type==="localcontrol"&&(r.value=r.message.data[2]===127,r.rawValue=r.message.data[2]),r.type==="omnimodeon"?(r.type="omnimode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="omnimodeoff"&&(r.type="omnimode",r.value=!1,r.rawValue=r.message.data[2]),r.type==="monomodeon"?(r.type="monomode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="polymodeon"&&(r.type="monomode",r.value=!1,r.rawValue=r.message.data[2]),this.emit(r.type,r)}_parseEventForParameterNumber(n){const r=n.message.dataBytes[0],i=n.message.dataBytes[1];r===99||r===101?(this._nrpnBuffer=[],this._rpnBuffer=[],r===99?this._nrpnBuffer=[n.message]:i!==127&&(this._rpnBuffer=[n.message])):r===98||r===100?r===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(n.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&i!==127?this._rpnBuffer.push(n.message):this._rpnBuffer=[]):(r===6||r===38||r===96||r===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],n):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],n):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(n){return n===6||n===38||n===96||n===97||n===98||n===99||n===100||n===101}_dispatchParameterNumberEvent(n,r,i,s){n=n==="nrpn"?"nrpn":"rpn";const c={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:r,parameterLsb:i,value:We.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};n==="rpn"?c.parameter=Object.keys(Ne.REGISTERED_PARAMETERS).find(m=>Ne.REGISTERED_PARAMETERS[m][0]===r&&Ne.REGISTERED_PARAMETERS[m][1]===i):c.parameter=(r<<7)+i;const d=Ne.CONTROL_CHANGE_MESSAGES[s.message.dataBytes[0]].name;c.type=`${n}-${d}`,this.emit(c.type,c);const f=Object.assign({},c);f.type==="nrpn-dataincrement"?f.type="nrpn-databuttonincrement":f.type==="nrpn-datadecrement"?f.type="nrpn-databuttondecrement":f.type==="rpn-dataincrement"?f.type="rpn-databuttonincrement":f.type==="rpn-datadecrement"&&(f.type="rpn-databuttondecrement"),this.emit(f.type,f),c.type=n,c.subtype=d,this.emit(c.type,c)}getChannelModeByNumber(n){return ze.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),n=Math.floor(n)),We.getChannelModeByNumber(n)}getCcNameByNumber(n){if(ze.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),n=parseInt(n),!(n>=0&&n<=127)))throw new RangeError("Invalid control change number.");return We.getCcNameByNumber(n)}getNoteState(n){n instanceof Ui&&(n=n.identifier);const r=We.guessNoteNumber(n,ze.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[r]}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(n){this.validation&&(n=!!n),this.parameterNumberEventsEnabled=n}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class xb{constructor(n){this.rawData=n,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=We.getPropertyByValue(Ne.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=We.getPropertyByValue(Ne.SYSTEM_MESSAGES,this.command)),this.statusByte===Ne.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class n2 extends rr{constructor(n){super(),this._midiInput=n,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new t2(this,r);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(n=>n.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(n){let r={timestamp:ze.time,target:this,port:this};n.port.connection==="open"?(r.type="opened",this.emit("opened",r)):n.port.connection==="closed"&&n.port.state==="connected"?(r.type="closed",this.emit("closed",r)):n.port.connection==="closed"&&n.port.state==="disconnected"?(r.type="disconnected",r.port={connection:n.port.connection,id:n.port.id,manufacturer:n.port.manufacturer,name:n.port.name,state:n.port.state,type:n.port.type},this.emit("disconnected",r)):n.port.connection==="pending"&&n.port.state==="disconnected"||console.warn("This statechange event was not caught: ",n.port.connection,n.port.state)}_onMidiMessage(n){const r=new xb(n.data),i={port:this,target:this,message:r,timestamp:n.timeStamp,type:"midimessage",data:r.data,rawData:r.data,statusByte:r.data[0],dataBytes:r.dataBytes};this.emit("midimessage",i),r.isSystemMessage?this._parseEvent(i):r.isChannelMessage&&this.channels[r.channel]._processMidiMessageEvent(i),this._forwarders.forEach(s=>s.forward(r))}_parseEvent(n){const r=Object.assign({},n);r.type=r.message.type||"unknownmidimessage",r.type==="songselect"&&(r.song=n.data[1]+1,r.value=n.data[1],r.rawValue=r.value),this.emit(r.type,r)}async open(){try{await this._midiInput.open()}catch(n){return Promise.reject(n)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(n){return Promise.reject(n)}return Promise.resolve(this)}getChannelModeByNumber(){ze.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(n,r,i={}){if(ze.validation&&typeof i=="function"){let s=r!=null?[].concat(r):void 0;r=i,i={channels:s}}if(Ne.CHANNEL_EVENTS.includes(n)){i.channels===void 0&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS);let s=[];return We.sanitizeChannels(i.channels).forEach(c=>{s.push(this.channels[c].addListener(n,r,i))}),s}else return super.addListener(n,r,i)}addOneTimeListener(n,r,i={}){return i.remaining=1,this.addListener(n,r,i)}on(n,r,i,s){return this.addListener(n,r,i,s)}hasListener(n,r,i={}){if(ze.validation&&typeof i=="function"){let s=[].concat(r);r=i,i={channels:s}}return Ne.CHANNEL_EVENTS.includes(n)?(i.channels===void 0&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),We.sanitizeChannels(i.channels).every(s=>this.channels[s].hasListener(n,r))):super.hasListener(n,r)}removeListener(n,r,i={}){if(ze.validation&&typeof i=="function"){let s=[].concat(r);r=i,i={channels:s}}if(i.channels===void 0&&(i.channels=Ne.MIDI_CHANNEL_NUMBERS),n==null)return We.sanitizeChannels(i.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();Ne.CHANNEL_EVENTS.includes(n)?We.sanitizeChannels(i.channels).forEach(s=>{this.channels[s].removeListener(n,r,i)}):super.removeListener(n,r,i)}addForwarder(n,r={}){let i;return n instanceof Hy?i=n:i=new Hy(n,r),this._forwarders.push(i),i}removeForwarder(n){this._forwarders=this._forwarders.filter(r=>r!==n)}hasForwarder(n){return this._forwarders.includes(n)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return ze.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class r2 extends rr{constructor(){super(),this.defaults={note:{attack:We.from7bitToFloat(64),release:We.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(n={},r=!1){if(We.isNode)try{window.navigator}catch{let f=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,f)}if(this.validation=n.validation!==!1,this.validation&&(typeof n=="function"&&(n={callback:n,sysex:r}),r&&(n.sysex=!0)),this.enabled)return typeof n.callback=="function"&&n.callback(),Promise.resolve();const i={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},c={timestamp:this.time,target:this,type:"enabled"};try{typeof n.requestMIDIAccessFunction=="function"?this.interface=await n.requestMIDIAccessFunction({sysex:n.sysex,software:n.software}):this.interface=await navigator.requestMIDIAccess({sysex:n.sysex,software:n.software})}catch(d){return i.error=d,this.emit("error",i),typeof n.callback=="function"&&n.callback(d),Promise.reject(d)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(d){return i.error=d,this.emit("error",i),typeof n.callback=="function"&&n.callback(d),Promise.reject(d)}return this.emit("enabled",c),typeof n.callback=="function"&&n.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let n={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",n),this.removeListener()})}getInputById(n,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(r.disconnected){for(let i=0;i<this._disconnectedInputs.length;i++)if(this._disconnectedInputs[i].id===n.toString())return this._disconnectedInputs[i]}else for(let i=0;i<this.inputs.length;i++)if(this.inputs[i].id===n.toString())return this.inputs[i]}getInputByName(n,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(r.disconnected){for(let i=0;i<this._disconnectedInputs.length;i++)if(~this._disconnectedInputs[i].name.indexOf(n))return this._disconnectedInputs[i]}else for(let i=0;i<this.inputs.length;i++)if(~this.inputs[i].name.indexOf(n))return this.inputs[i]}getOutputByName(n,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(r.disconnected){for(let i=0;i<this._disconnectedOutputs.length;i++)if(~this._disconnectedOutputs[i].name.indexOf(n))return this._disconnectedOutputs[i]}else for(let i=0;i<this.outputs.length;i++)if(~this.outputs[i].name.indexOf(n))return this.outputs[i]}getOutputById(n,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(r.disconnected){for(let i=0;i<this._disconnectedOutputs.length;i++)if(this._disconnectedOutputs[i].id===n.toString())return this._disconnectedOutputs[i]}else for(let i=0;i<this.outputs.length;i++)if(this.outputs[i].id===n.toString())return this.outputs[i]}noteNameToNumber(n){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),We.toNoteNumber(n,this.octaveOffset)}getOctave(n){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),n=parseInt(n)),!isNaN(n)&&n>=0&&n<=127?We.getNoteDetails(We.offsetNumber(n,this.octaveOffset)).octave:!1}sanitizeChannels(n){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),We.sanitizeChannels(n)}toMIDIChannels(n){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),We.sanitizeChannels(n)}guessNoteNumber(n){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),We.guessNoteNumber(n,this.octaveOffset)}getValidNoteArray(n,r={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),We.buildNoteArray(n,r)}convertToTimestamp(n){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),We.toTimestamp(n)}async _destroyInputsAndOutputs(){let n=[];return this.inputs.forEach(r=>n.push(r.destroy())),this.outputs.forEach(r=>n.push(r.destroy())),Promise.all(n).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(n){this._updateInputsAndOutputs();let r={timestamp:n.timeStamp,type:n.port.state,target:this};if(n.port.state==="connected"&&n.port.connection==="open"){n.port.type==="output"?r.port=this.getOutputById(n.port.id):n.port.type==="input"&&(r.port=this.getInputById(n.port.id)),this.emit(n.port.state,r);const i=Object.assign({},r);i.type="portschanged",this.emit(i.type,i)}else if(n.port.state==="disconnected"&&n.port.connection==="pending"){n.port.type==="input"?r.port=this.getInputById(n.port.id,{disconnected:!0}):n.port.type==="output"&&(r.port=this.getOutputById(n.port.id,{disconnected:!0})),this.emit(n.port.state,r);const i=Object.assign({},r);i.type="portschanged",this.emit(i.type,i)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let r=this._inputs.length-1;r>=0;r--){const i=this._inputs[r];Array.from(this.interface.inputs.values()).find(c=>c===i._midiInput)||(this._disconnectedInputs.push(i),this._inputs.splice(r,1))}let n=[];return this.interface.inputs.forEach(r=>{if(!this._inputs.find(i=>i._midiInput===r)){let i=this._disconnectedInputs.find(s=>s._midiInput===r);i||(i=new n2(r)),this._inputs.push(i),n.push(i.open())}}),Promise.all(n)}async _updateOutputs(){if(!this.interface)return;for(let r=this._outputs.length-1;r>=0;r--){const i=this._outputs[r];Array.from(this.interface.outputs.values()).find(c=>c===i._midiOutput)||(this._disconnectedOutputs.push(i),this._outputs.splice(r,1))}let n=[];return this.interface.outputs.forEach(r=>{if(!this._outputs.find(i=>i._midiOutput===r)){let i=this._disconnectedOutputs.find(s=>s._midiOutput===r);i||(i=new of(r)),this._outputs.push(i),n.push(i.open())}}),Promise.all(n)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),We.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),We.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.12"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),Ne.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),Ne.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),Ne.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),Ne.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),Ne.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const ze=new r2;ze.constructor=null;function pc(){const[a,n]=L.useState({isSupported:ze.supported,isInitialized:ze.enabled,devices:[],isConnecting:!1,error:null});L.useEffect(()=>{if(ze.enabled&&a.devices.length===0){const b=i();n(w=>({...w,devices:b}))}},[]);const r=L.useCallback(async()=>{n(b=>({...b,isConnecting:!0,error:null}));try{if(ze.enabled){const w=i();return n(S=>({...S,isInitialized:!0,isConnecting:!1,devices:w,error:null})),!0}await ze.enable();const b=i();return n(w=>({...w,isInitialized:!0,isConnecting:!1,devices:b,error:null})),!0}catch(b){const w=b instanceof Error?b.message:"Unknown error";return n(S=>({...S,isConnecting:!1,error:w})),!1}},[]);L.useEffect(()=>{if(ze.enabled&&!a.isInitialized){const w=i();n(S=>({...S,isInitialized:!0,devices:w,error:null}))}const b=setInterval(()=>{if(ze.enabled){const w=i();n(S=>w.length!==S.devices.length||w.some((y,g)=>!S.devices[g]||S.devices[g].state!==y.state||S.devices[g].id!==y.id)?{...S,devices:w}:S)}},8e3);return()=>clearInterval(b)},[a.isInitialized]);const i=()=>{const b=[];return ze.inputs.forEach(w=>{let S="disconnected";w.connection==="open"?S="connected":w.connection==="closed"?S="disconnected":w.connection==="pending"?S="connected":S="error",b.push({id:w.id,name:w.name||"Unknown Input",manufacturer:w.manufacturer||"Unknown",type:"input",state:S})}),ze.outputs.forEach(w=>{let S="disconnected";w.connection==="open"?S="connected":w.connection==="closed"?S="disconnected":w.connection==="pending"?S="connected":S="error",b.push({id:w.id,name:w.name||"Unknown Output",manufacturer:w.manufacturer||"Unknown",type:"output",state:S})}),b};L.useEffect(()=>{const b=()=>{n(S=>({...S,devices:i(),isInitialized:ze.enabled}))};ze.enabled&&ze.addListener("portschanged",b);const w=()=>{ze.addListener("portschanged",b),n(S=>({...S,devices:i(),isInitialized:!0}))};return ze.addListener("enabled",w),()=>{ze.enabled&&ze.removeListener("portschanged",b),ze.removeListener("enabled",w)}},[]);const s=L.useCallback((b,w)=>{const S=x=>{const y=w??x.message?.channel??(x.target&&"number"in x.target?x.target.number:void 0),g={type:x.type,note:x.note.number,velocity:x.rawValue||0,channel:y,timestamp:x.timestamp};b(g)};return ze.inputs.forEach(x=>{if(w&&w>=1&&w<=16){const y=x.channels[w];y.addListener("noteon",S),y.addListener("noteoff",S)}else x.addListener("noteon",S),x.addListener("noteoff",S)}),()=>{ze.inputs.forEach(x=>{if(w&&w>=1&&w<=16){const y=x.channels[w];y.removeListener("noteon",S),y.removeListener("noteoff",S)}else x.removeListener("noteon",S),x.removeListener("noteoff",S)})}},[]),c=L.useCallback(()=>{console.warn("[useWebMidi] offMidiEvent is not fully implemented. Use the cleanup function from onMidiEvent.")},[]),d=L.useCallback((b,w=127,S=1)=>{ze.outputs.forEach(x=>{x.channels[S]?.sendNoteOn(b,{rawAttack:w})})},[]),f=L.useCallback((b,w=0,S=1)=>{ze.outputs.forEach(x=>{x.channels[S]?.sendNoteOff(b,{rawRelease:w})})},[]),m=L.useCallback((b,w,S=1)=>{ze.outputs.forEach(x=>{x.channels[S]?.sendControlChange(b,w)})},[]),h=L.useCallback(()=>{if(ze.enabled){const b=i();n(w=>({...w,devices:b}))}},[]);return{state:a,initialize:r,refreshDevices:h,onMidiEvent:s,offMidiEvent:c,sendNoteOn:d,sendNoteOff:f,sendControlChange:m}}const Vd=[{W:{label:"KD2",idx:1},E:{label:"SD2",idx:3},R:{label:"CLP",idx:5},Y:{label:"CH",idx:8},U:{label:"OH",idx:10},A:{label:"KD1",idx:0},S:{label:"SD1",idx:2},D:{label:"RIM",idx:4},F:{label:"TB",idx:6},G:{label:"SH",idx:7},H:{label:"CL",idx:9},J:{label:"CAB",idx:11}},{W:{label:"RC",idx:12},E:{label:"CC",idx:13},R:{label:"COW",idx:15},Y:{label:"LC",idx:18},U:{label:"HC",idx:19},A:{label:"LT",idx:14},S:{label:"MT",idx:16},D:{label:"HT",idx:17},F:{label:"TRI",idx:20},G:{label:"LT",idx:21},H:{label:"WS",idx:22},J:{label:"GUI",idx:23}}];function a2({onFileUpload:a,selectedMidiChannel:n,midiState:r,onMidiEventExternal:i}={}){const{state:s}=un(),[c,d]=L.useState(0),[f,m]=L.useState(new Set),h=L.useRef(null),[b,w]=L.useState(null),[S,x]=L.useState(window.innerWidth<=768),[y,g]=L.useState(!1),{play:E}=hs(),R=pc(),O=i??R.onMidiEvent,A=r??R.state,N=L.useRef(null),M=L.useRef(null),z=50,F=L.useRef(null),[B,I]=L.useState(0);L.useEffect(()=>{if(!localStorage.getItem("drum-keyboard-swipe-hint-seen")&&S){g(!0);const _e=setTimeout(()=>{g(!1),localStorage.setItem("drum-keyboard-swipe-hint-seen","true")},3e3);return()=>clearTimeout(_e)}},[S]);const W=me=>{N.current=me.touches[0].clientX,M.current=me.touches[0].clientX},ee=me=>{M.current=me.touches[0].clientX},C=me=>{if(!N.current||!M.current)return;if(Math.abs(N.current-M.current)>z){const Ae=N.current-M.current>0;Ae&&c===0?d(1):!Ae&&c===1&&d(0)}else{const Ae=me.changedTouches[0],G=document.elementFromPoint(Ae.clientX,Ae.clientY)?.closest("button[data-keychar]");if(G){const X=G.getAttribute("data-keychar"),j=G.getAttribute("data-octave");if(X&&j){const H=parseInt(j,10),Q=Vd[H]?.[X];if(Q){s.drumSamples[Q.idx]?.isLoaded?U(Q.idx):$(Q.idx);const ye=`${X}:${H}`;m(ie=>new Set(ie).add(ye)),setTimeout(()=>{m(ie=>{const ge=new Set(ie);return ge.delete(ye),ge})},Y0.VISUAL_FEEDBACK_TIMEOUT)}}}}N.current=null,M.current=null};L.useEffect(()=>{const me=()=>x(window.innerWidth<=768);return window.addEventListener("resize",me),()=>window.removeEventListener("resize",me)},[]),L.useEffect(()=>{if(!S)return;const me=()=>{F.current&&I(F.current.offsetWidth)};me(),window.addEventListener("resize",me);let _e=null;return F.current&&"ResizeObserver"in window&&(_e=new ResizeObserver(()=>me()),_e.observe(F.current)),()=>{window.removeEventListener("resize",me),_e&&F.current&&_e.disconnect()}},[S]);const J=1,_=7,K=J*(_-1),P=B,Y=S&&B>0?Math.floor((P-K)/_):56,oe=A.devices.filter(me=>me.type==="input"&&me.state==="connected"),te=A.isInitialized&&oe.length>0,U=async me=>{const _e=s.drumSamples[me];if(!(!_e?.isLoaded||!_e.audioBuffer))try{await E(_e.audioBuffer,{inFrame:_e.inPoint!==void 0?Math.floor(_e.inPoint*_e.audioBuffer.sampleRate):0,outFrame:_e.outPoint!==void 0?Math.floor(_e.outPoint*_e.audioBuffer.sampleRate):_e.audioBuffer.length,playbackRate:Math.pow(2,(_e.tune||0)/12),gain:_e.gain||0,pan:_e.pan||0,reverse:_e.reverse||!1})}catch(Ae){console.error("Error playing sample:",Ae)}},k=me=>{const _e=Vd[c][me];return _e?_e.idx:null},$=me=>{w(me),h.current?.click()},Z=me=>{const _e=me.target.files?.[0];_e&&b!==null&&a&&(a(b,_e),w(null)),h.current&&(h.current.value="")};L.useEffect(()=>{const me=Ae=>{const T=document.activeElement;if(T&&(T.tagName==="INPUT"||T.tagName==="TEXTAREA"||T.contentEditable==="true"))return;const X=Ae.key.toUpperCase();if(X==="Z"){d(0);return}if(X==="X"){d(1);return}const j=k(X);j!==null&&s.drumSamples[j]&&(U(j),m(H=>new Set(H).add(`${X}:${c}`)))},_e=Ae=>{const T=Ae.key.toUpperCase();m(G=>{const X=new Set(G);return X.delete(`${T}:0`),X.delete(`${T}:1`),X})};return document.addEventListener("keydown",me),document.addEventListener("keyup",_e),()=>{document.removeEventListener("keydown",me),document.removeEventListener("keyup",_e)}},[c,s.drumSamples]);const le=L.useCallback(me=>{if(me.type==="noteon"&&me.velocity>0){const _e=me.note,Ae=q(_e);if(Ae!==null){const T=Ae>=12;T&&c!==1?d(1):!T&&c!==0&&d(0),U(Ae);const G=Ee(Ae);if(G){const X=T?1:0;m(j=>new Set([...j,`${G}:${X}`]))}}}else if(me.type==="noteoff"){const _e=me.note,Ae=q(_e);if(Ae!==null){const T=Ee(Ae);if(T){const G=Ae>=12?1:0;m(X=>{const j=new Set(X);return j.delete(`${T}:${G}`),j})}}}},[U,c]),q=me=>{const _e={53:0,54:1,55:2,56:3,57:4,58:5,59:6,60:7,61:8,62:9,63:10,64:11},Ae={65:14,66:12,67:16,68:13,69:17,70:15,71:20,72:21,73:18,74:22,75:19,76:23};return _e[me]??Ae[me]??null},Ee=me=>{const _e={0:"A",1:"W",2:"S",3:"E",4:"D",5:"R",6:"F",7:"G",8:"Y",9:"H",10:"U",11:"J"},Ae={12:"W",13:"E",14:"A",15:"R",16:"S",17:"D",18:"Y",19:"U",20:"F",21:"G",22:"H",23:"J"};return _e[me]??Ae[me]??null};L.useEffect(()=>{if(s.currentTab==="drum"&&te&&n){const me=O(le,n);return()=>{me()}}},[te,n,O,le,A.devices,s.currentTab]);const Fe=(me,_e,Ae=!1,T="center")=>{const G=Vd[_e][me];return{keyChar:me,mapping:G,octave:_e,isPressed:f.has(`${me}:${_e}`),isLarge:Ae,circleOffset:T,isActiveOctave:c===_e,showKeyboardLabels:c===_e&&!te,isMobile:S,keyWidth:Y}},pe=(me,_e)=>Fe(me,_e,!1,"center"),de=(me,_e,Ae)=>Fe(me,_e,!0,Ae),Re=({keyChar:me,mapping:_e,octave:Ae,isPressed:T,isLarge:G=!1,circleOffset:X="center",isActiveOctave:j=!0,showKeyboardLabels:H=!0,isMobile:Q=!1,keyWidth:ue=56})=>{const ie=_e&&s.drumSamples[_e.idx]?.isLoaded,ge=()=>{_e&&(ie?U(_e.idx):$(_e.idx))},Oe=ue,Le=G?Oe*1.5+(me==="W"||me==="U"?1:0):Oe,De=Oe,He=Oe*(35/56),Ie=Oe*(52/56);let Ve={position:"absolute",width:`${He}px`,height:`${He}px`,borderRadius:"50%",background:ie?T&&j?"var(--color-text-secondary)":"var(--color-interactive-dark)":"var(--color-key-inactive-black-bg)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1,top:"50%",transform:"translateY(-50%)",left:"50%",marginLeft:`-${He/2}px`};const Ct={fontSize:"0.7rem",fontWeight:"bold",color:"var(--color-text-secondary)",textAlign:"center",lineHeight:"1",userSelect:"none",pointerEvents:"none"};return G&&X!=="center"&&(X==="right"?Ve={...Ve,left:"auto",right:"2px",marginLeft:"0",transform:"translateY(-50%)"}:X==="left"&&(Ve={...Ve,left:"2px",marginLeft:"0",transform:"translateY(-50%)"})),u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0px"},children:u.jsxs("button",{"data-keychar":me,"data-octave":Ae,onClick:$e=>{$e.preventDefault()},onPointerDown:$e=>{$e.pointerType==="mouse"&&(ge(),m(Je=>new Set(Je).add(`${me}:${Ae}`)))},onPointerUp:$e=>{$e.pointerType==="mouse"&&m(Je=>{const Pe=new Set(Je);return Pe.delete(`${me}:${Ae}`),Pe})},onMouseLeave:$e=>{$e.buttons===1&&m(Je=>{const Pe=new Set(Je);return Pe.delete(`${me}:${Ae}`),Pe})},onKeyDown:$e=>{($e.key==="Enter"||$e.key===" ")&&($e.preventDefault(),ge(),m(Je=>new Set(Je).add(`${me}:${Ae}`)))},onKeyUp:$e=>{($e.key==="Enter"||$e.key===" ")&&($e.preventDefault(),m(Je=>{const Pe=new Set(Je);return Pe.delete(`${me}:${Ae}`),Pe}))},tabIndex:0,role:"button","aria-label":`${_e?_e.label:"Empty"} drum key ${me.toUpperCase()}`,"aria-pressed":T,"aria-describedby":_e?`drum-key-${_e.idx}-${Ae}`:void 0,onDragOver:$e=>{$e.preventDefault(),$e.stopPropagation(),$e.currentTarget.style.background="var(--color-key-inactive-black-bg)",$e.currentTarget.style.transform="scale(1.05)",$e.currentTarget.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.3)",$e.currentTarget.style.borderColor="var(--color-black)"},onDragLeave:$e=>{$e.preventDefault(),$e.stopPropagation(),$e.currentTarget.style.background=ie?T?"#bdbdbd":"var(--color-keyboard-key-active-bg)":"var(--color-key-inactive-white-bg)",$e.currentTarget.style.transform="scale(1)",$e.currentTarget.style.boxShadow=ie?"0 4px 12px rgba(0, 0, 0, 0.18)":"0 2px 6px rgba(0, 0, 0, 0.1)",$e.currentTarget.style.borderColor=ie?"var(--color-black)":"var(--color-key-inactive-border)"},onDrop:$e=>{$e.preventDefault(),$e.stopPropagation(),$e.currentTarget.style.background=ie?T?"#bdbdbd":"var(--color-keyboard-key-active-bg)":"var(--color-key-inactive-white-bg)",$e.currentTarget.style.transform="scale(1)",$e.currentTarget.style.boxShadow=ie?"0 4px 12px rgba(0, 0, 0, 0.18)":"0 2px 6px rgba(0, 0, 0, 0.1)",$e.currentTarget.style.borderColor=ie?"var(--color-black)":"var(--color-key-inactive-border)";const Pe=Array.from($e.dataTransfer.files).find(Et=>Et.type.startsWith("audio/")||Et.name.toLowerCase().endsWith(".wav"));Pe&&_e&&a&&a(_e.idx,Pe)},style:{position:"relative",width:`${Le}px`,height:`${De}px`,margin:"0",padding:"0",border:"none",borderRadius:"3px",cursor:"pointer",transition:"all 0.1s ease",background:ie?T?"#bdbdbd":"var(--color-keyboard-key-active-bg)":"var(--color-key-inactive-white-bg)",boxShadow:ie?"0 4px 12px rgba(0, 0, 0, 0.18)":"0 2px 6px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onFocus:$e=>{$e.currentTarget.style.outline="2px solid var(--color-interactive-focus)",$e.currentTarget.style.outlineOffset="2px"},onBlur:$e=>{$e.currentTarget.style.outline="none"},children:[u.jsx("div",{style:{...Ve,width:`${Ie}px`,height:`${Ie}px`,background:"transparent",border:ie?"1px solid var(--color-black)":"1px solid var(--color-key-inactive-border)",marginLeft:Ve.marginLeft==="0"?"0":`-${Ie/2}px`},children:u.jsx("div",{style:{width:`${He}px`,height:`${He}px`,borderRadius:"50%",background:ie?"var(--color-black)":"var(--color-key-inactive-black-bg)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:H&&!Q&&u.jsx("div",{style:{...Ct,color:ie?"#fff":"var(--color-text-secondary)"},children:me.toUpperCase()})})}),_e&&u.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",right:"2px",bottom:"2px",display:"flex",alignItems:"flex-start",justifyContent:"flex-start",pointerEvents:"none",zIndex:2},children:u.jsx("div",{id:`drum-key-${_e.idx}-${Ae}`,style:{backgroundColor:"var(--color-border-primary)",color:"#fff",fontSize:`${Oe*(9/56)}px`,fontWeight:"600",padding:`${Oe*(2/56)}px ${Oe*(4/56)}px`,borderRadius:"2px",lineHeight:"1",letterSpacing:"0.5px"},children:_e.label})})]})})};return u.jsxs("div",{role:"group","aria-label":"Drum keyboard",style:{fontFamily:'"Montserrat", "Arial", sans-serif',userSelect:"none"},children:[u.jsx("input",{ref:h,type:"file",accept:"audio/*,.wav",style:{display:"none"},onChange:Z}),S?u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"3px",background:"transparent",border:"1px solid #ddd",borderRadius:"6px",boxSizing:"border-box",width:"100%",boxShadow:"0 2px 8px var(--color-shadow-primary)",position:"relative",marginBottom:"8px"},onTouchStart:W,onTouchMove:ee,onTouchEnd:C,children:[y&&u.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:20,borderRadius:"6px"},children:u.jsxs("div",{style:{background:"var(--color-bg-primary)",padding:"16px",borderRadius:"6px",textAlign:"center",maxWidth:"280px",margin:"0 16px"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:u.jsx("span",{style:{color:"var(--color-text-primary)",fontSize:"0.875rem",fontWeight:"500"},children:"swipe to change octaves"})}),u.jsx("button",{onClick:()=>{g(!1),localStorage.setItem("drum-keyboard-swipe-hint-seen","true")},style:{background:"var(--color-interactive-focus)",color:"var(--color-bg-primary)",border:"none",padding:"8px 16px",borderRadius:"3px",fontSize:"0.75rem",fontWeight:"500",cursor:"pointer"},children:"got it"})]})}),u.jsx("div",{ref:F,style:{position:"relative",overflow:"hidden",width:"100%",background:"transparent"},children:u.jsxs("div",{style:{display:"flex",width:"200%",transform:`translateX(${c===0?"0":"-50%"})`,transition:"transform 0.3s ease-out"},children:[u.jsx("div",{role:"group","aria-label":"Lower octave drum keys",style:{width:"50%",flexShrink:0},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1px"},children:[u.jsxs("div",{style:{display:"flex",gap:"1px"},children:[u.jsx(Re,{...de("W",0,"right")}),u.jsx(Re,{...pe("E",0)}),u.jsx(Re,{...de("R",0,"left")}),u.jsx(Re,{...de("Y",0,"left")}),u.jsx(Re,{...de("U",0,"right")})]}),u.jsx("div",{style:{display:"flex",gap:"1px"},children:["A","S","D","F","G","H","J"].map(me=>u.jsx(Re,{...pe(me,0)},`octave0-mobile-${me}`))})]})}),u.jsx("div",{role:"group","aria-label":"Upper octave drum keys",style:{width:"50%",flexShrink:0},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1px"},children:[u.jsxs("div",{style:{display:"flex",gap:"1px"},children:[u.jsx(Re,{...de("W",1,"right")}),u.jsx(Re,{...pe("E",1)}),u.jsx(Re,{...de("R",1,"left")}),u.jsx(Re,{...de("Y",1,"left")}),u.jsx(Re,{...de("U",1,"right")})]}),u.jsx("div",{style:{display:"flex",gap:"1px"},children:["A","S","D","F","G","H","J"].map(me=>u.jsx(Re,{...pe(me,1)},`octave1-mobile-${me}`))})]})})]})})]}),u.jsxs("div",{style:{position:"relative",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"-2px",marginBottom:"0px",zIndex:1},children:[u.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:c===0?"var(--color-text-secondary)":"var(--color-border-light)",transition:"background-color 0.3s ease",margin:"0 4px"}}),u.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:c===1?"var(--color-text-secondary)":"var(--color-border-light)",transition:"background-color 0.3s ease",margin:"0 4px"}})]})]}):u.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"1px",width:"calc(100% - 2px)",padding:"1rem"},children:u.jsxs("div",{style:{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"1px",padding:"3px",background:"#f8f9fa",border:"1px solid #ddd",borderRadius:"6px",overflow:"hidden",boxSizing:"border-box",boxShadow:"0 2px 8px var(--color-shadow-primary)"},children:[u.jsxs("div",{role:"group","aria-label":"Lower octave drum keys",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1px",position:"relative"},children:[u.jsxs("div",{style:{display:"flex",gap:"1px",alignItems:"flex-end",width:"100%",maxWidth:"100%",justifyContent:"center",overflow:"hidden"},children:[u.jsx(Re,{...de("W",0,"right")}),u.jsx(Re,{...pe("E",0)}),u.jsx(Re,{...de("R",0,"left")}),u.jsx(Re,{...de("Y",0,"left")}),u.jsx(Re,{...de("U",0,"right")})]}),u.jsx("div",{style:{display:"flex",gap:"1px",alignItems:"flex-start",width:"100%",maxWidth:"100%",justifyContent:"center",overflow:"hidden"},children:["A","S","D","F","G","H","J"].map(me=>u.jsx(Re,{...pe(me,0)},`octave0-${me}`))})]}),u.jsxs("div",{role:"group","aria-label":"Upper octave drum keys",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1px",position:"relative"},children:[u.jsxs("div",{style:{display:"flex",gap:"1px",alignItems:"flex-end",width:"100%",maxWidth:"100%",justifyContent:"center",overflow:"hidden"},children:[u.jsx(Re,{...de("W",1,"right")}),u.jsx(Re,{...pe("E",1)}),u.jsx(Re,{...de("R",1,"left")}),u.jsx(Re,{...de("Y",1,"left")}),u.jsx(Re,{...de("U",1,"right")})]}),u.jsx("div",{style:{display:"flex",gap:"1px",alignItems:"flex-start",width:"100%",maxWidth:"100%",justifyContent:"center",overflow:"hidden"},children:["A","S","D","F","G","H","J"].map(me=>u.jsx(Re,{...pe(me,1)},`octave1-${me}`))})]})]})})]})}function i2({selectedChannel:a,onChannelChange:n}){return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem"},children:[u.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"channel:"}),u.jsx("select",{value:a,onChange:r=>n(parseInt(r.target.value)),style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)",borderRadius:"3px",padding:"0.25rem 0.5rem",fontSize:"0.75rem",color:"var(--color-text-primary)",fontFamily:'"Montserrat", "Arial", sans-serif',cursor:"pointer",minWidth:"60px"},children:Array.from({length:16},(r,i)=>u.jsx("option",{value:i+1,children:i+1},i))})]})}function Sb({className:a="",showInputsOnly:n=!1,showOutputsOnly:r=!1,onChannelChange:i}){const{state:s,initialize:c,refreshDevices:d}=pc(),[f,m]=L.useState(1),h=async()=>{if(!s.isSupported){alert("WebMIDI is not supported in this browser. Please use Chrome, Edge, or another Chromium-based browser.");return}await c(),setTimeout(()=>{d()},100)},b=s.devices.filter(x=>n?x.type==="input":r?x.type==="output":!0),w=b.filter(x=>x.type==="input"),S=b.filter(x=>x.type==="output");return s.isSupported?s.isInitialized?u.jsx("div",{className:`midi-device-selector ${a}`,style:{background:"var(--color-bg-primary)",overflow:"hidden",height:"60px"},children:u.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexShrink:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--color-text-primary)"},children:[u.jsx("i",{className:"fas fa-music",style:{fontSize:"0.75rem"}}),"midi devices"]}),u.jsx(i2,{selectedChannel:f,onChannelChange:x=>{m(x),i?.(x)}})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"0.75rem",color:"var(--color-text-secondary)",flexShrink:0},children:[u.jsxs("span",{children:[b.length," connected"]}),u.jsx("button",{onClick:d,disabled:s.isConnecting,title:"Rescan MIDI devices",style:{background:"none",border:"none",color:"var(--color-text-secondary)",cursor:s.isConnecting?"not-allowed":"pointer",padding:"0.25rem",fontSize:"0.875rem",lineHeight:1,opacity:s.isConnecting?.6:1,transition:"color 0.2s ease"},onMouseEnter:x=>{s.isConnecting||(x.currentTarget.style.color="var(--color-text-primary)")},onMouseLeave:x=>{s.isConnecting||(x.currentTarget.style.color="var(--color-text-secondary)")},children:s.isConnecting?u.jsx("i",{className:"fas fa-spinner fa-spin"}):u.jsx("i",{className:"fas fa-sync-alt"})})]}),u.jsx("div",{style:{flex:1,minWidth:0},children:b.length===0?u.jsxs("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",fontSize:"0.75rem"},children:[u.jsx("i",{className:"fas fa-search",style:{marginRight:"0.5rem"}}),"no midi devices detected"]}):u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[w.length>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.7rem",color:"var(--color-text-secondary)",fontWeight:500,textTransform:"uppercase"},children:"in:"}),w.map(x=>u.jsx(Wy,{device:x},x.id))]}),S.length>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.7rem",color:"var(--color-text-secondary)",fontWeight:500,textTransform:"uppercase"},children:"out:"}),S.map(x=>u.jsx(Wy,{device:x},x.id))]})]})})]})}):u.jsxs("div",{className:`midi-device-selector ${a}`,style:{background:"var(--color-bg-primary)",overflow:"hidden",height:"60px"},children:[u.jsxs("div",{style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--color-text-primary)",flexShrink:0},children:[u.jsx("i",{className:"fas fa-music",style:{fontSize:"0.75rem"}}),"midi devices"]}),u.jsx("div",{style:{marginLeft:"auto"},children:u.jsx("button",{onClick:h,disabled:s.isConnecting,style:{background:"var(--color-interactive-focus)",color:"var(--color-white)",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.875rem",cursor:s.isConnecting?"not-allowed":"pointer",opacity:s.isConnecting?.6:1,transition:"all 0.2s ease",fontFamily:'"Montserrat", "Arial", sans-serif',fontWeight:500,height:"36px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onMouseEnter:x=>{s.isConnecting||(x.currentTarget.style.backgroundColor="var(--color-interactive-dark)")},onMouseLeave:x=>{s.isConnecting||(x.currentTarget.style.backgroundColor="var(--color-interactive-focus)")},children:s.isConnecting?u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"0.75rem"}}),"connecting..."]}):u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-plug",style:{fontSize:"0.75rem"}}),"connect midi devices"]})})})]}),s.error&&u.jsx("div",{style:{color:"var(--color-text-error)",fontSize:"0.75rem",marginTop:"0.5rem",padding:"0 1rem 0.75rem 1rem"},children:s.error})]}):u.jsx("div",{className:`midi-device-selector ${a}`,style:{padding:"0.75rem 1rem",background:"var(--color-bg-primary)",borderRadius:"6px",border:"1px solid var(--color-border-light)",textAlign:"center"},children:u.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem"},children:[u.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"0.5rem"}}),"webmidi not supported"]})})}function Wy({device:a}){const n=a.state==="connected";return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.5rem",background:n?"var(--color-bg-secondary)":"var(--color-bg-primary)",borderRadius:"3px",border:`1px solid ${n?"var(--color-border-light)":"var(--color-border-subtle)"}`,transition:"all 0.2s ease",fontSize:"0.7rem"},children:[u.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:n?"var(--color-interactive-focus)":"var(--color-text-secondary)",flexShrink:0,transition:"all 0.2s ease"}}),u.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:a.name}),u.jsx("span",{style:{fontSize:"0.65rem",color:n?"var(--color-text-primary)":"var(--color-text-secondary)",textTransform:"uppercase",fontWeight:600,flexShrink:0},children:a.type})]})}const o2=({onFileUpload:a})=>{const{state:n}=un(),r=L.useRef(null),i=L.useRef(null),[s,c]=L.useState(!1),[d,f]=L.useState(!1),[m,h]=L.useState({}),[b,w]=L.useState(0),[S,x]=L.useState(window.innerWidth<=768),[y,g]=L.useState(()=>{const _=localStorage.getItem("midi-channel"),K=_?parseInt(_,10):NaN;return K>=1&&K<=16?K:1});L.useEffect(()=>{y>=1&&y<=16&&localStorage.setItem("midi-channel",y.toString())},[y]);const[E,R]=L.useState(()=>kn.getCookie(Sn.DRUM_KEYBOARD_PINNED)==="true"),{onMidiEvent:O,state:A,initialize:N,refreshDevices:M}=pc(),[z,F]=L.useState(!1);L.useEffect(()=>{!A.isInitialized&&!A.isConnecting&&N()},[A.isInitialized,A.isConnecting,N]),L.useEffect(()=>{const _=()=>{!document.hidden&&A.isInitialized&&M()};return document.addEventListener("visibilitychange",_),()=>{document.removeEventListener("visibilitychange",_)}},[A.isInitialized,M]);const B=()=>{F(!1);const _=document.querySelector(".midi-device-selector");_&&(_.style.display="none")};L.useEffect(()=>{const K=O(P=>{P.type==="noteon"&&P.velocity>0&&B()});return()=>K()},[O]);const I=n.drumSamples.filter(_=>_&&_.isLoaded).length,W=()=>{const _=!E;R(_),!_&&d&&(h({}),f(!1))};L.useEffect(()=>{try{kn.setCookie(Sn.DRUM_KEYBOARD_PINNED,E.toString(),365)}catch(_){console.warn("Failed to save drum keyboard pin state to cookie:",_)}},[E]);const ee="18px",C=S?u.jsxs(u.Fragment,{children:[u.jsx("h3",{children:"keyboard controls"}),u.jsxs("p",{children:[u.jsx("strong",{children:"load:"})," tap empty keys to browse and select files"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"play:"})," tap keys to play loaded samples"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"pin:"})," use the pin icon to keep the keyboard at the top of the screen"]})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{children:"keyboard controls"}),u.jsxs("p",{children:[u.jsx("strong",{children:"load:"})," click empty keys to browse files or drag and drop audio files directly onto any key"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"play:"})," use keyboard keys (",u.jsx("strong",{children:"A-J, W, E, R, Y, U"}),") to trigger samples and ",u.jsx("strong",{children:"Z"})," / ",u.jsx("strong",{children:"X"})," to switch octaves"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"pin:"})," use the pin icon to keep the keyboard at the top of the screen"]})]});L.useEffect(()=>{const _=()=>x(window.innerWidth<=768);return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),L.useEffect(()=>{const _=r.current,K=i.current,P=()=>{if(!(!E||!_||!K))if(d)K.getBoundingClientRect().top>10&&(h({}),f(!1));else{const Y=_.getBoundingClientRect();Y.top<=10&&(w(Y.height),h({left:`${Y.left}px`,width:`${Y.width}px`}),f(!0))}};return window.addEventListener("scroll",P,{passive:!0}),()=>window.removeEventListener("scroll",P)},[E,d]),L.useEffect(()=>{const _=K=>{K.target.closest("[data-tooltip]")||c(!1)};return document.addEventListener("click",_),()=>document.removeEventListener("click",_)},[]);const J={border:"1px solid var(--color-border-subtle)",borderRadius:"15px",backgroundColor:"var(--color-bg-primary)",boxShadow:"0 2px 8px var(--color-shadow-primary)",overflow:"hidden",position:d?"fixed":"relative",top:d?"10px":void 0,zIndex:d?1e3:void 0,...m};return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:i,style:{display:d?"block":"none",height:`${b}px`,background:"#fff"}}),u.jsxs("div",{ref:r,className:`virtual-midi-keyboard ${E?"pinned":""}`,style:J,children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:S?"0.5rem 1rem 0.5rem 1rem":"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"load and play samples"}),u.jsx(Zi,{isVisible:s,content:C,children:u.jsx("span",{style:{display:"flex"},onClick:_=>{_.stopPropagation(),c(!s)},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:u.jsx("i",{className:"fas fa-question-circle",style:{fontSize:ee,color:"var(--color-text-secondary)",cursor:"help"}})})})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:[!S&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:500},children:[u.jsx("i",{className:"fas fa-check-circle",style:{color:"var(--color-text-secondary)",fontSize:ee}}),I," / 24 loaded"]}),u.jsxs("button",{onClick:()=>{F(!z);const _=document.querySelector(".midi-device-selector");_&&(_.style.display=z?"none":"block")},style:{background:z?"var(--color-interactive-focus)":A.devices.filter(_=>_.type==="input"&&_.state==="connected").length>0?"var(--color-text-primary)":"var(--color-text-secondary)",border:"none",cursor:"pointer",padding:"0.25rem 0.5rem",borderRadius:"3px",display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.875rem",color:"var(--color-white)",transition:"all 0.2s ease",fontFamily:'"Montserrat", "Arial", sans-serif',fontWeight:500,minHeight:"32px"},onMouseEnter:_=>{const K=A.devices.filter(P=>P.type==="input"&&P.state==="connected").length>0;_.currentTarget.style.backgroundColor=z?"var(--color-interactive-dark)":"var(--color-interactive-focus)"},onMouseLeave:_=>{const K=A.devices.filter(P=>P.type==="input"&&P.state==="connected").length>0;_.currentTarget.style.backgroundColor=z?"var(--color-interactive-focus)":K?"var(--color-text-primary)":"var(--color-text-secondary)"},title:"connect midi devices",children:[u.jsx("i",{className:"fas fa-plug",style:{fontSize:"0.75rem"}}),u.jsx("span",{children:"midi"})]})]}),u.jsx("button",{onClick:W,className:"pin-button",style:{background:"none",border:"none",cursor:"pointer",padding:4,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:E?"Unpin keyboard":"Pin keyboard to top",children:u.jsx("i",{className:"fas fa-thumbtack",style:{fontSize:ee}})})]})]}),u.jsx("div",{className:"midi-device-selector",style:{display:z?"block":"none",padding:"0.75rem 1rem",backgroundColor:"var(--color-bg-primary)",borderBottom:"1px solid var(--color-border-light)"},children:u.jsx(Sb,{onChannelChange:_=>{g(_)},showInputsOnly:!0},A.devices.length.toString())}),u.jsx(a2,{onFileUpload:a,selectedMidiChannel:y,midiState:A,onMidiEventExternal:O})]})]})},s2="op-patchstudio-db",l2=1,kt={SESSIONS:"sessions",SAMPLES:"samples",PRESETS:"presets",METADATA:"metadata"};class Bi{db=null;static instance;constructor(){}static getInstance(){return Bi.instance||(Bi.instance=new Bi),Bi.instance}async init(){return new Promise((n,r)=>{const i=window.indexedDB.open(s2,l2);i.onerror=()=>{console.error("Failed to open IndexedDB:",i.error),r(i.error)},i.onsuccess=()=>{this.db=i.result,console.log("IndexedDB initialized successfully"),n()},i.onupgradeneeded=s=>{const c=s.target.result;if(!c.objectStoreNames.contains(kt.SESSIONS)){const d=c.createObjectStore(kt.SESSIONS,{keyPath:"id"});d.createIndex("timestamp","timestamp",{unique:!1}),d.createIndex("name","name",{unique:!1})}if(!c.objectStoreNames.contains(kt.SAMPLES)){const d=c.createObjectStore(kt.SAMPLES,{keyPath:"id"});d.createIndex("name","name",{unique:!1}),d.createIndex("type","type",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1}),d.createIndex("tags","tags",{unique:!1,multiEntry:!0})}if(!c.objectStoreNames.contains(kt.PRESETS)){const d=c.createObjectStore(kt.PRESETS,{keyPath:"id"});d.createIndex("name","name",{unique:!1}),d.createIndex("type","type",{unique:!1}),d.createIndex("createdAt","createdAt",{unique:!1})}c.objectStoreNames.contains(kt.METADATA)||c.createObjectStore(kt.METADATA,{keyPath:"key"}),console.log("IndexedDB schema created/updated")}})}async ensureInit(){this.db||await this.init()}async add(n,r){return await this.ensureInit(),new Promise((i,s)=>{const f=this.db.transaction([n],"readwrite").objectStore(n).add(r);f.onsuccess=()=>i(),f.onerror=()=>s(f.error)})}async get(n,r){return await this.ensureInit(),new Promise((i,s)=>{const f=this.db.transaction([n],"readonly").objectStore(n).get(r);f.onsuccess=()=>i(f.result||null),f.onerror=()=>s(f.error)})}async update(n,r){return await this.ensureInit(),new Promise((i,s)=>{const f=this.db.transaction([n],"readwrite").objectStore(n).put(r);f.onsuccess=()=>i(),f.onerror=()=>s(f.error)})}async delete(n,r){return await this.ensureInit(),new Promise((i,s)=>{const f=this.db.transaction([n],"readwrite").objectStore(n).delete(r);f.onsuccess=()=>i(),f.onerror=()=>s(f.error)})}async getAll(n){return await this.ensureInit(),new Promise((r,i)=>{const d=this.db.transaction([n],"readonly").objectStore(n).getAll();d.onsuccess=()=>r(d.result),d.onerror=()=>i(d.error)})}async getByIndex(n,r,i){return await this.ensureInit(),new Promise((s,c)=>{const h=this.db.transaction([n],"readonly").objectStore(n).index(r).getAll(i);h.onsuccess=()=>s(h.result),h.onerror=()=>c(h.error)})}async saveSession(n){await this.update(kt.SESSIONS,n)}async getSession(n){return this.get(kt.SESSIONS,n)}async getAllSessions(){return this.getAll(kt.SESSIONS)}async deleteSession(n){await this.delete(kt.SESSIONS,n)}async saveSample(n){await this.update(kt.SAMPLES,n)}async getSample(n){return this.get(kt.SAMPLES,n)}async getAllSamples(){return this.getAll(kt.SAMPLES)}async deleteSample(n){await this.delete(kt.SAMPLES,n)}async getSamplesByType(n){return this.getByIndex(kt.SAMPLES,"type",n)}async savePreset(n){await this.update(kt.PRESETS,n)}async getPreset(n){return this.get(kt.PRESETS,n)}async getAllPresets(){return this.getAll(kt.PRESETS)}async deletePreset(n){await this.delete(kt.PRESETS,n)}async getPresetsByType(n){return this.getByIndex(kt.PRESETS,"type",n)}async clearAll(){await this.ensureInit();const n=Object.values(kt);for(const r of n){const s=this.db.transaction([r],"readwrite").objectStore(r);await new Promise((c,d)=>{const f=s.clear();f.onsuccess=()=>c(),f.onerror=()=>d(f.error)})}}async getDatabaseSize(){const n=await this.getAllSessions(),r=await this.getAllSamples();let i=0;return n.forEach(s=>{i+=JSON.stringify(s).length}),r.forEach(s=>{i+=s.data.size,i+=JSON.stringify(s.metadata).length}),i}}const It=Bi.getInstance(),$d="op-patchstudio-current-session",Zn="current-session";class Pi{static instance;constructor(){}static getInstance(){return Pi.instance||(Pi.instance=new Pi),Pi.instance}async saveSession(n){const r=Date.now();await this.clearAllSamples();const i=[],s=[];for(let m=0;m<n.drumSamples.length;m++){const h=n.drumSamples[m];if(h&&h.isLoaded&&h.file&&h.audioBuffer){const b=`drum-${m}-${r}`;i[m]=b;const w=await h.file.arrayBuffer(),S=new Blob([w],{type:h.file.type}),x={id:b,name:h.file.name,type:h.file.type,size:h.file.size,data:S,metadata:{sampleRate:h.audioBuffer.sampleRate,bitDepth:h.originalBitDepth||16,channels:h.audioBuffer.numberOfChannels,duration:h.audioBuffer.duration,midiNote:void 0},createdAt:r};await It.saveSample(x)}}for(let m=0;m<n.multisampleFiles.length;m++){const h=n.multisampleFiles[m];if(h.file&&h.audioBuffer){const b=`multisample-${m}-${r}`;s[m]=b;const w=h.audioBuffer,S=[];for(let y=0;y<w.numberOfChannels;y++){const g=w.getChannelData(y);S.push(new Float32Array(g))}const x={id:b,name:h.file.name,type:h.file.type,size:h.file.size,data:new Blob([JSON.stringify({sampleRate:w.sampleRate,numberOfChannels:w.numberOfChannels,length:w.length,duration:w.duration,channelData:S.map(y=>Array.from(y))})],{type:"application/json"}),metadata:{sampleRate:w.sampleRate,bitDepth:h.originalBitDepth||16,channels:w.numberOfChannels,duration:w.duration,midiNote:h.rootNote,note:h.note},createdAt:r};await It.saveSample(x)}}const c=n.drumSamples.map((m,h)=>{if(m&&m.isLoaded&&m.file){const b=i[h];if(b)return{originalIndex:h,sampleId:b,isAssigned:m.isAssigned,assignedKey:m.assignedKey,settings:{inPoint:m.inPoint,outPoint:m.outPoint,playmode:m.playmode,reverse:m.reverse,tune:m.tune,pan:m.pan,gain:m.gain,hasBeenEdited:m.hasBeenEdited}}}return null}).filter(Boolean),d=n.multisampleFiles.map((m,h)=>{if(m.file){const b=s[h];if(b)return{sampleId:b,fileName:m.file.name,rootNote:m.rootNote,note:m.note,inPoint:m.inPoint,outPoint:m.outPoint,loopStart:m.loopStart,loopEnd:m.loopEnd}}return null}).filter(Boolean),f={id:Zn,timestamp:r,version:1,drumSettings:n.drumSettings,multisampleSettings:n.multisampleSettings,drumSamples:c,multisampleFiles:d,selectedMultisample:n.selectedMultisample,isDrumKeyboardPinned:n.isDrumKeyboardPinned,isMultisampleKeyboardPinned:n.isMultisampleKeyboardPinned,savedToLibrary:!1};return await It.saveSession(f),localStorage.setItem($d,Zn),Zn}async loadSession(){try{const n=await It.getSession(Zn);return n?this.migrateSessionData(n):null}catch(n){return console.error("Failed to load session from IndexedDB:",n),null}}migrateSessionData(n){const i=n.version||0;return i===1?n:(console.log(`Migrating session from version ${i} to 1`),{...n,version:1})}getCurrentSessionId(){return Zn}async hasPreviousSession(){try{const n=await It.getSession(Zn);if(!n)return!1;const r=n.drumSamples&&n.drumSamples.length>0,i=n.multisampleFiles&&n.multisampleFiles.length>0;return r||i}catch(n){return console.error("Error checking for previous session:",n),!1}}async getCurrentSession(){try{const n=await It.getSession(Zn);if(!n)return null;const r=n.drumSamples&&n.drumSamples.length>0,i=n.multisampleFiles&&n.multisampleFiles.length>0;return!r&&!i?null:n}catch(n){return console.error("Error getting current session:",n),null}}async clearCurrentSession(){try{await this.clearAllSamples(),await It.deleteSession(Zn),localStorage.removeItem($d)}catch(n){console.error("Failed to clear current session:",n)}}async clearAllSessionData(){try{await this.clearAllSamples(),await It.deleteSession(Zn),localStorage.removeItem($d)}catch(n){console.error("Failed to clear all session data:",n)}}async markSessionAsSavedToLibrary(){try{const n=await It.getSession(Zn);n&&(n.savedToLibrary=!0,await It.saveSession(n))}catch(n){console.error("Failed to mark session as saved to library:",n)}}async resetSavedToLibraryFlag(){try{const n=await It.getSession(Zn);n&&(n.savedToLibrary=!1,await It.saveSession(n))}catch(n){console.error("Failed to reset saved to library flag:",n)}}async clearAllSamples(){try{const n=await It.getAllSamples();for(const r of n)await It.deleteSample(r.id)}catch(n){console.error("Failed to clear samples:",n)}}async clearCorruptedData(){try{const n=await It.getSession(Zn);if(!n)return;const r=[];for(const i of n.drumSamples||[])try{const s=await It.getSample(i.sampleId);if(!s)r.push(i.sampleId);else try{await new File([s.data],s.name,{type:s.type}).arrayBuffer()}catch{r.push(i.sampleId)}}catch{r.push(i.sampleId)}for(const i of n.multisampleFiles||[])try{const s=await It.getSample(i.sampleId);if(!s)r.push(i.sampleId);else try{await new File([s.data],s.name,{type:s.type}).arrayBuffer()}catch{r.push(i.sampleId)}}catch{r.push(i.sampleId)}r.length>0&&(n.drumSamples&&(n.drumSamples=n.drumSamples.filter(i=>!r.includes(i.sampleId))),n.multisampleFiles&&(n.multisampleFiles=n.multisampleFiles.filter(i=>!r.includes(i.sampleId))),await It.saveSession(n));for(const i of r)try{await It.deleteSample(i)}catch(s){console.error(`Failed to delete corrupted sample ${i}:`,s)}}catch(n){console.error("Failed to clear corrupted data:",n)}}async arrayBufferToFile(n,r,i){return new File([n],r,{type:i})}async arrayBufferToAudioBuffer(n){return await new(window.AudioContext||window.webkitAudioContext)().decodeAudioData(n)}async loadSampleFromSession(n){try{const r=await It.getSample(n);if(!r)return null;let i,s;if(r.data.type==="application/json"){const c=await r.data.arrayBuffer(),d=new TextDecoder().decode(c),f=JSON.parse(d);i=new(window.AudioContext||window.webkitAudioContext)().createBuffer(f.numberOfChannels,f.length,f.sampleRate);for(let h=0;h<f.numberOfChannels;h++){const b=i.getChannelData(h),w=f.channelData[h];b.set(w)}s=new File([],r.name,{type:r.type})}else{const c=await r.data.arrayBuffer();s=await this.arrayBufferToFile(c,r.name,r.type),i=await this.arrayBufferToAudioBuffer(c)}return{file:s,audioBuffer:i,metadata:{...r.metadata,fileSize:r.size}}}catch(r){return console.error("Failed to load sample from session:",r),console.error("Error details:",{name:r instanceof Error?r.name:"Unknown",message:r instanceof Error?r.message:String(r),stack:r instanceof Error?r.stack:void 0}),null}}}const Zt=Pi.getInstance();async function wb(a){return await ls(a)}async function Eb(a,n){try{const r=await a.arrayBuffer(),i=await n.decodeAudioData(r);if(!i||typeof i.duration!="number"||i.duration<=0)throw new Error("Invalid audio buffer: missing or invalid duration");return i}catch(r){throw console.error("Failed to convert blob to AudioBuffer:",r),r}}async function c2(a){if(!Array.isArray(a))return[];const n=[];for(let r=0;r<a.length;r++){const i=a[r];if(i&&i.isLoaded&&i.audioBuffer){const s=await wb(i.audioBuffer),{audioBuffer:c,...d}=i;n.push({...d,audioBlob:s,originalIndex:r,metadata:{duration:i.duration,bitDepth:i.originalBitDepth,sampleRate:i.originalSampleRate,channels:i.originalChannels,fileSize:i.fileSize}})}}return n}async function u2(a){return Array.isArray(a)?Promise.all(a.map(async n=>{if(n&&n.isLoaded&&n.audioBuffer){const r=await wb(n.audioBuffer),{audioBuffer:i,...s}=n;return{...s,audioBlob:r,metadata:{duration:n.duration,bitDepth:n.originalBitDepth,sampleRate:n.originalSampleRate,channels:n.originalChannels,fileSize:n.fileSize,midiNote:n.rootNote,hasLoopData:!0,loopStart:n.loopStart,loopEnd:n.loopEnd,format:"PCM",dataLength:n.fileSize||0}}}return n})):[]}async function _b(a,n,r){try{if(!n.trim())return{success:!1,error:"please enter a preset name before saving"};const i=await c2(a.drumSamples),s=await u2(a.multisampleFiles),c={drumSettings:a.drumSettings,multisampleSettings:a.multisampleSettings,drumSamples:i,multisampleFiles:s,importedDrumPreset:a.importedDrumPreset,importedMultisamplePreset:a.importedMultisamplePreset},d={id:`${Date.now()}-${Math.random().toString(36).slice(2,11)}`,name:n,type:r,data:c,createdAt:Date.now(),updatedAt:Date.now(),isFavorite:!1,sampleCount:r==="drum"?i.length:s.filter(f=>f&&f.isLoaded).length};return await It.add(kt.PRESETS,d),await Zt.markSessionAsSavedToLibrary(),{success:!0}}catch(i){return console.error("Failed to save preset:",i),{success:!1,error:"failed to save preset to library"}}}async function d2(a,n){try{const r=new DataView(a),i=new TextDecoder("ascii"),s=n.replace(/\.(aif|aiff)$/i,"");if(i.decode(new Uint8Array(a,0,4))!=="FORM")throw new Error("Invalid AIFF file: missing FORM header");const d=i.decode(new Uint8Array(a,8,4));if(d!=="AIFF"&&d!=="AIFC")throw new Error(`Invalid AIFF file: expected AIFF or AIFC format identifier, got "${d}"`);let f=12,m=2,h=0,b=16,w=44100,S=0,x=!1;const y=[];for(;f+8<a.byteLength;){const M=i.decode(new Uint8Array(a,f,4)),z=r.getUint32(f+4,!1),F=f+8;if(M==="COMM"){const B=mb(r,a,F,z,d);m=B.channels,h=B.numSampleFrames,b=B.bitDepth,w=B.sampleRate,x=B.isLittleEndian}if(M==="SSND"&&(S=F),M==="OP1D"||M==="OP1F"){const B=r.getUint16(F,!1);let I=F+2;for(let W=0;W<B;W++){const ee=r.getUint8(I),C=r.getUint32(I+1,!1),J=r.getUint32(I+5,!1),_=r.getUint8(I+9),K=new Uint8Array(a,I+10,_),P=i.decode(K);y.push({keyIndex:ee,startSample:C,endSample:J,name:P||`${s} sample ${W+1}`}),I+=10+_}}if(M==="APPL"&&y.length===0)try{const B=new Uint8Array(a,F,z),I=i.decode(B);if(I.startsWith("op-1")){const W=I.indexOf("{");if(W!==-1){const ee=I.substring(W),C=JSON.parse(ee);if(C.type==="drum"&&C.drum_version&&C.start&&C.end&&Array.isArray(C.start)&&Array.isArray(C.end)){const J=Math.min(C.start.length,C.end.length,24);for(let _=0;_<J;_++){const K=C.start[_],P=C.end[_];K!==void 0&&P!==void 0&&P>K&&y.push({keyIndex:_,startSample:K,endSample:P,name:`${s} sample ${_+1}`})}}}}}catch(B){console.warn("Failed to parse APPL chunk:",B)}if(M==="MARK"&&y.length===0){const B=pb(r,a,F);for(const I of B){let W=f2(I.id,I.name);W===null&&(W=B.indexOf(I)),W>=0&&W<24&&y.push({keyIndex:W,startSample:I.position,endSample:0,name:I.name||`${s} sample ${W+1}`})}for(let I=0;I<y.length;I++)I<y.length-1?y[I].endSample=y[I+1].startSample:y[I].endSample=h}f+=8+z+(z%2===1?1:0)}if(y.length===0)throw new Error("No sample metadata found in OP-1 drum preset file");let g=!1;if(y.length>0&&h>0){const M=10*h;(y[0].startSample>M||y[0].endSample>M)&&(g=!0)}let E=0,R=0;if(S>0){const M=r.getUint32(S,!1);E=S+8+M,R=a.byteLength-E}const O=m*(b/8);if(g&&y.length>0&&R>0){const M=Math.max(...y.map(z=>z.endSample));if(M>R)for(const z of y)z.startSample=Math.round(z.startSample/M*R),z.endSample=Math.round(z.endSample/M*R)}const A=[],N=await ir.getAudioContext();for(const[M,z]of y.entries())if(z.keyIndex>=0&&z.keyIndex<24){let F=0,B=0,I=0;if(g){const ee=E+z.startSample,C=E+z.endSample;F=ee+ee%2,I=C+C%2,B=I-F}else F=E+z.startSample*O,I=E+z.endSample*O,B=(z.endSample-z.startSample)*O;const W=g?Math.floor(B/O):z.endSample-z.startSample;if(W>0&&B>0&&F<I&&F+B<=a.byteLength&&m>=1){if(W<=0||m<=0||w<=0){console.warn(`Skipping sample ${M}: Invalid AudioBuffer params (sampleLength=${W}, channels=${m}, sampleRate=${w})`);continue}const ee=N.createBuffer(m,W,w);if(!ee){console.warn(`Skipping sample ${M}: audioBuffer creation failed (sampleLength=${W}, channels=${m}, sampleRate=${w})`);continue}const C=new Uint8Array(a,F,B);if(b===16)for(let _=0;_<m;_++){const K=ee.getChannelData(_);for(let P=0;P<W;P++){const Y=(P*m+_)*2,oe=C[Y],te=C[Y+1];let U;x?U=te<<8|oe:U=oe<<8|te;const k=U&32768?U-65536:U;K[P]=k/32768}}else if(b===24)for(let _=0;_<m;_++){const K=ee.getChannelData(_);for(let P=0;P<W;P++){const Y=(P*m+_)*3,oe=C[Y]<<16|C[Y+1]<<8|C[Y+2],te=oe>=8388608?oe-16777216:oe;K[P]=te/8388608}}const J={format:"aiff",sampleRate:w,bitDepth:b,channels:m,duration:W/w,audioBuffer:ee,fileSize:B,midiNote:60+z.keyIndex,loopStart:0,loopEnd:0,hasLoopData:!1};A.push({keyIndex:z.keyIndex,startSample:z.startSample,endSample:z.endSample,duration:W/w,name:z.name,audioBuffer:ee,metadata:J})}else continue}return{name:n.replace(/\.(aif|aiff)$/i,""),samples:A,totalDuration:h/w,sampleRate:w,channels:m,bitDepth:b}}catch(r){throw console.error("Error parsing OP-1 drum preset:",r),new Error(`Failed to parse OP-1 drum preset: ${r instanceof Error?r.message:"Unknown error"}`)}}function f2(a,n){const r=n.match(/(\d+)/);if(r){const c=parseInt(r[1],10);if(c>=0&&c<24)return c}if(a>=0&&a<24)return a;const i={kick:0,"kick alt":1,snare:2,"snare alt":3,rim:4,"hand clap":5,tambourine:6,shaker:7,"closed hi-hat":8,clave:9,"open hi-hat":10,cabasa:11,"low tom":12,"ride cymbal":13,"mid-tom":14,"crash cymbal":15,"hi-tom":16,cowbell:17,triangle:18,"low conga":20,"hi-conga":22,guiro:23},s=n.toLowerCase();for(const[c,d]of Object.entries(i))if(s.includes(c))return d;return null}function m2(a){try{const n=new TextDecoder("ascii");if(n.decode(new Uint8Array(a,0,4))!=="FORM")return!1;const i=n.decode(new Uint8Array(a,8,4));if(i!=="AIFF"&&i!=="AIFC")return!1;const s=new DataView(a);let c=12,d=!1,f=0;for(;c+8<a.byteLength;){const m=n.decode(new Uint8Array(a,c,4)),h=s.getUint32(c+4,!1);if(m==="OP1D"||m==="OP1F")return!0;if(m==="APPL")try{const b=new Uint8Array(a,c+8,h),w=n.decode(b);if(w.startsWith("op-1")){const S=w.indexOf("{");if(S!==-1){const x=w.substring(S),y=JSON.parse(x);if(y.type==="drum"&&y.drum_version)return!0}}}catch{}if(m==="MARK"&&(d=!0,f=s.getUint16(c+8,!1),f>0&&f<=24))return!0;c+=8+h+(h%2===1?1:0)}return!!(d&&f>0)}catch{return!1}}function p2(){const{state:a,dispatch:n}=un(),{handleDrumSampleUpload:r,clearDrumSample:i}=hb(),{generateDrumPatchFile:s}=vb(),[c,d]=L.useState(!1),[f,m]=L.useState({isOpen:!1,message:"",onConfirm:async()=>{}}),[h,b]=L.useState({isOpen:!1,targetIndex:null}),[w,S]=L.useState(!1);L.useEffect(()=>{const k=()=>{d(window.innerWidth<768)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const x=k=>{n({type:"SET_DRUM_SAMPLE_RATE",payload:parseInt(k)})},y=k=>{n({type:"SET_DRUM_BIT_DEPTH",payload:parseInt(k)})},g=k=>{n({type:"SET_DRUM_CHANNELS",payload:parseInt(k)})},E=k=>{n({type:"SET_DRUM_PRESET_NAME",payload:k.target.value})},R=k=>{n({type:"SET_DRUM_NORMALIZE",payload:k})},O=k=>{n({type:"SET_DRUM_NORMALIZE_LEVEL",payload:k})},A=()=>{m({isOpen:!0,message:"are you sure you want to reset all audio processing settings to defaults?",onConfirm:()=>{n({type:"SET_DRUM_SAMPLE_RATE",payload:0}),n({type:"SET_DRUM_BIT_DEPTH",payload:0}),n({type:"SET_DRUM_CHANNELS",payload:0}),n({type:"SET_DRUM_NORMALIZE",payload:!1}),n({type:"SET_DRUM_NORMALIZE_LEVEL",payload:0}),m({isOpen:!1,message:"",onConfirm:async()=>{}})}})},N=async(k,$)=>{try{if(!$||$.size===0)throw new Error("Invalid file: file is empty or null");if(!($.type.startsWith("audio/")||$.name.toLowerCase().endsWith(".wav")||$.name.toLowerCase().endsWith(".aif")||$.name.toLowerCase().endsWith(".aiff")||$.name.toLowerCase().endsWith(".mp3")||$.name.toLowerCase().endsWith(".m4a")||$.name.toLowerCase().endsWith(".ogg")||$.name.toLowerCase().endsWith(".flac")))throw new Error(`Unsupported file type: ${$.type}. Please upload a WAV, AIF, AIFF, MP3, M4A, OGG, or FLAC file.`);await r($,k)}catch(Z){console.error("Error uploading file:",Z)}},M=async k=>{try{n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null});const $=await k.arrayBuffer();if(!m2($))throw new Error("This file does not appear to be a valid OP-1 drum preset");const Z=await d2($,k.name),le=await Promise.all(Z.samples.map(async q=>{const Ee=await ls(q.audioBuffer),Fe=new File([Ee],`${q.name}.wav`,{type:"audio/wav"});return{keyIndex:q.keyIndex,file:Fe,audioBuffer:q.audioBuffer,metadata:q.metadata,name:q.name}}));n({type:"IMPORT_OP1_DRUM_PRESET",payload:{samples:le,presetName:Z.name}}),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"OP-1 preset imported",message:`"${Z.name}" loaded with ${Z.samples.length} samples`}})}catch($){console.error("Error importing OP-1 preset:",$),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"import failed",message:$ instanceof Error?$.message:"failed to import OP-1 preset"}})}finally{n({type:"SET_LOADING",payload:!1})}},z=k=>{m({isOpen:!0,message:"are you sure you want to clear this sample?",onConfirm:async()=>{i(k),m({isOpen:!1,message:"",onConfirm:async()=>{}})}})},F=async k=>{try{n({type:"SET_LOADING",payload:!0}),n({type:"SET_ERROR",payload:null});const $=await rf(k,a.midiNoteMapping);n({type:"ADD_UNASSIGNED_DRUM_SAMPLE",payload:{file:k,audioBuffer:$.audioBuffer,metadata:$}}),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"sample added",message:`"${k.name}" added as unassigned sample`}})}catch($){console.error("Error adding unassigned sample:",$),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"upload failed",message:$ instanceof Error?$.message:"failed to add sample"}})}finally{n({type:"SET_LOADING",payload:!1})}},B=async()=>{try{const k=await _b(a,a.drumSettings.presetName,"drum");k.success?(n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"preset saved",message:`"${a.drumSettings.presetName}" saved to library`}}),window.dispatchEvent(new CustomEvent("library-refresh"))):n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"save failed",message:k.error||"failed to save preset to library"}})}catch(k){console.error("Error saving to library:",k),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"save failed",message:"failed to save preset to library"}})}},I=async()=>{try{const k=a.drumSettings.presetName.trim()||"drum_patch";await s(k)}catch(k){console.error("Error downloading preset:",k)}},W=()=>{try{aE(a.drumSettings,a.importedDrumPreset),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"settings saved",message:"drum settings saved as default"}})}catch(k){console.error("Error saving settings as default:",k),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"save failed",message:"failed to save settings as default"}})}},ee=async()=>{m({isOpen:!0,message:"are you sure you want to clear all loaded samples?",onConfirm:async()=>{n({type:"CLEAR_ALL_DRUM_SAMPLES"}),await Zt.resetSavedToLibraryFlag(),m({isOpen:!1,message:"",onConfirm:async()=>{}})}})},C=async()=>{m({isOpen:!0,message:"are you sure you want to reset everything to defaults? this will clear all samples, reset preset name, audio settings and preset settings.",onConfirm:async()=>{n({type:"CLEAR_ALL_DRUM_SAMPLES"}),n({type:"SET_DRUM_PRESET_NAME",payload:""}),n({type:"SET_DRUM_SAMPLE_RATE",payload:0}),n({type:"SET_DRUM_BIT_DEPTH",payload:0}),n({type:"SET_DRUM_CHANNELS",payload:0}),n({type:"SET_DRUM_NORMALIZE",payload:!1}),n({type:"SET_DRUM_NORMALIZE_LEVEL",payload:-.1}),n({type:"SET_DRUM_RENAME_FILES",payload:!1}),n({type:"SET_DRUM_FILENAME_SEPARATOR",payload:" "}),n({type:"SET_DRUM_PRESET_PLAYMODE",payload:"poly"}),n({type:"SET_DRUM_PRESET_TRANSPOSE",payload:0}),n({type:"SET_DRUM_PRESET_VELOCITY",payload:20}),n({type:"SET_DRUM_PRESET_VOLUME",payload:69}),n({type:"SET_DRUM_PRESET_WIDTH",payload:0}),await Zt.resetSavedToLibraryFlag(),m({isOpen:!1,message:"",onConfirm:async()=>{}})}})},J=(k=null)=>{b({isOpen:!0,targetIndex:k})},_=()=>{b({isOpen:!1,targetIndex:null})},K=async(k,$)=>{try{const Z=k.numberOfChannels,le=k.length,q=k.sampleRate,Ee=new OfflineAudioContext(Z,le,q),Fe=Ee.createBufferSource();Fe.buffer=k,Fe.connect(Ee.destination),Fe.start();const pe=await Ee.startRendering(),de=await ls(pe,16,{rootNote:60,loopStart:0,loopEnd:pe.length-1}),Re=$.trim()||"recorded_sample",me=new File([de],`${Re}.wav`,{type:"audio/wav"});if(h.targetIndex!==null)await N(h.targetIndex,me);else{const _e=a.drumSamples.findIndex(Ae=>!Ae||!Ae.isLoaded);_e!==-1?await N(_e,me):console.warn("All drum slots are full")}}catch(Z){console.error("Error saving recording:",Z)}},P=a.drumSamples.some(k=>k&&k.isLoaded),Y=a.drumSamples.filter(k=>k&&k.isLoaded).length>1,oe=a.drumSettings.presetName.trim().length>0,te=P&&oe,U=P||oe||a.drumSettings.sampleRate!==0||a.drumSettings.bitDepth!==0||a.drumSettings.channels!==0||a.drumSettings.normalize!==!1||a.drumSettings.normalizeLevel!==0||a.drumSettings.renameFiles!==!1||a.drumSettings.filenameSeparator!==" "||a.drumSettings.presetSettings.playmode!=="poly"||a.drumSettings.presetSettings.transpose!==0||a.drumSettings.presetSettings.velocity!==20||a.drumSettings.presetSettings.volume!==69||a.drumSettings.presetSettings.width!==0||a.drumSamples.some(k=>k&&k.hasBeenEdited);return u.jsxs("div",{style:{fontFamily:'"Montserrat", "Arial", sans-serif',display:"flex",flexDirection:"column",height:"100%"},children:[u.jsx("div",{style:{padding:c?"1rem 0.5rem":"2rem 2rem"},children:u.jsx(o2,{onFileUpload:N})}),u.jsx("div",{style:{flex:1,padding:c?"0 0.5rem":"0 2rem",marginBottom:"1rem"},children:u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",marginBottom:"1rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:c?"0.5rem 1rem 0.5rem 1rem":"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"sample management"})})}),u.jsxs("div",{style:{padding:c?"1rem":"0"},children:[u.jsx(CE,{onFileUpload:N,onClearSample:z,onRecordSample:J}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",alignItems:"center",padding:"1.75rem",flexDirection:c?"column":"row"},children:[u.jsx("input",{type:"file",accept:".aif,.aiff",style:{display:"none"},onChange:k=>{const $=k.target.files?.[0];$&&M($),k.target.value=""},ref:k=>{k&&(window.op1PresetInput=k)}}),u.jsx("input",{type:"file",accept:"audio/*,.wav,.aif,.aiff,.mp3,.m4a,.ogg,.flac",style:{display:"none"},onChange:k=>{const $=k.target.files?.[0];$&&F($),k.target.value=""},ref:k=>{k&&(window.unassignedSampleInput=k)}}),u.jsxs("button",{onClick:ee,disabled:!P,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:P?"var(--color-interactive-secondary)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:P?"pointer":"not-allowed",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:P?1:.6,width:c?"100%":"auto"},onMouseEnter:k=>{P&&(k.currentTarget.style.backgroundColor="var(--color-bg-secondary)",k.currentTarget.style.borderColor="var(--color-border-medium)",k.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:k=>{P&&(k.currentTarget.style.backgroundColor="var(--color-bg-primary)",k.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",k.currentTarget.style.color="var(--color-interactive-secondary)")},children:[u.jsx("i",{className:"fas fa-trash",style:{fontSize:"1rem"}}),"clear all"]}),u.jsxs("button",{onClick:()=>window.op1PresetInput?.click(),style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:c?"100%":"auto"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="var(--color-interactive-dark)"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="var(--color-interactive-focus)"},children:[u.jsx("i",{className:"fas fa-upload",style:{fontSize:"1rem"}}),"import OP-1 preset"]}),u.jsxs("button",{onClick:()=>S(!0),disabled:!Y,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",backgroundColor:Y?"var(--color-interactive-focus)":"var(--color-border-medium)",color:"var(--color-white)",fontSize:"0.9rem",fontWeight:"500",cursor:Y?"pointer":"not-allowed",opacity:Y?1:.6,transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:c?"100%":"auto"},onMouseEnter:k=>{Y&&(k.currentTarget.style.backgroundColor="var(--color-interactive-dark)")},onMouseLeave:k=>{Y&&(k.currentTarget.style.backgroundColor="var(--color-interactive-focus)")},children:[u.jsx("i",{className:"fas fa-pencil",style:{fontSize:"1rem"}}),"bulk edit"]}),u.jsxs("button",{onClick:()=>window.unassignedSampleInput?.click(),style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:c?"100%":"auto"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="var(--color-interactive-dark)"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="var(--color-interactive-focus)"},children:[u.jsx("i",{className:"fas fa-folder-open",style:{fontSize:"1rem"}}),"browse"]})]})]})]})}),u.jsx("div",{style:{padding:c?"0 0.5rem":"0 2rem",marginTop:"0.25rem"},children:u.jsx(ME,{})}),u.jsx("div",{style:{padding:c?"0 0.5rem":"0 2rem",marginTop:"0.25rem"},children:u.jsx(lb,{type:"drum",sampleRate:a.drumSettings.sampleRate,bitDepth:a.drumSettings.bitDepth,channels:a.drumSettings.channels,onSampleRateChange:x,onBitDepthChange:y,onChannelsChange:g,samples:a.drumSamples,normalize:a.drumSettings.normalize,normalizeLevel:a.drumSettings.normalizeLevel,onNormalizeChange:R,onNormalizeLevelChange:O,autoZeroCrossing:a.drumSettings.autoZeroCrossing,onAutoZeroCrossingChange:()=>{n({type:"APPLY_ZERO_CROSSING_TO_ALL_DRUM_SAMPLES"})},onResetAudioSettingsConfirm:A})}),u.jsx("div",{style:{padding:c?"0 0.5rem":"0 2rem",marginTop:"0.25rem"},children:u.jsx(ub,{type:"drum",hasLoadedSamples:P,hasPresetName:oe,canGeneratePatch:te,loadedSamplesCount:a.drumSamples.filter(k=>k&&k.isLoaded).length,editedSamplesCount:a.drumSamples.filter(k=>k&&k.hasBeenEdited).length,presetName:a.drumSettings.presetName,onPresetNameChange:E,hasChangesFromDefaults:U,onResetAll:C,onSaveToLibrary:B,onDownloadPreset:I,onSaveSettingsAsDefault:W,inputId:"preset-name",renameFiles:a.drumSettings.renameFiles,onRenameFilesChange:k=>n({type:"SET_DRUM_RENAME_FILES",payload:k}),filenameSeparator:a.drumSettings.filenameSeparator,onFilenameSeparatorChange:k=>n({type:"SET_DRUM_FILENAME_SEPARATOR",payload:k}),audioFormat:a.drumSettings.audioFormat,onAudioFormatChange:k=>n({type:"SET_DRUM_AUDIO_FORMAT",payload:k})})}),u.jsx(cs,{isOpen:f.isOpen,message:f.message,onConfirm:f.onConfirm,onCancel:()=>m({isOpen:!1,message:"",onConfirm:async()=>{}})}),u.jsx(sb,{isOpen:h.isOpen,onClose:_,onSave:K,maxDuration:20}),u.jsx(kE,{isOpen:w,onClose:()=>S(!1)})]})}function h2({message:a,style:n}){if(!a)return null;const r={background:"var(--color-bg-panel)",border:"1px solid var(--color-border-light)",borderRadius:"3px",padding:"1rem",marginBottom:"1rem",color:"var(--color-text-secondary)",fontSize:"0.9rem",...n};return u.jsxs("div",{style:r,children:[u.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"0.5rem",color:"var(--color-text-secondary)"}}),a]})}const ot={bg:"var(--color-bg-primary)",bgAlt:"var(--color-bg-secondary)",border:"var(--color-border-light)",borderMed:"var(--color-border-medium)",borderSubtle:"var(--color-border-subtle)",text:"var(--color-text-primary)",textSecondary:"var(--color-text-secondary)",action:"var(--color-interactive-focus)"},ya={width:"44px",height:"44px",minWidth:"44px",minHeight:"44px",maxWidth:"44px",maxHeight:"44px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${ot.borderMed}`,borderRadius:"3px",backgroundColor:ot.bg,cursor:"pointer",flexShrink:0};function g2({onFileUpload:a,onClearSample:n,onRecordSample:r,onFilesSelected:i,onBrowseFilesRef:s}){const{state:c,dispatch:d}=un(),[f,m]=L.useState(null),[h,b]=L.useState(null),[w,S]=L.useState(!1),[x,y]=L.useState(!1),[g,E]=L.useState(0),[R,O]=L.useState({}),A=L.useRef({}),N=L.useRef(null),[M,z]=L.useState(!1),[F,B]=L.useState(!1);ne.useEffect(()=>{const T=()=>{z(window.innerWidth<768)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const I=T=>{const G=T.trim().toUpperCase();if(/^\d+$/.test(G)){const X=parseInt(G);return X>=0&&X<=127?X:-1}return Rf(G,c.midiNoteMapping)},W=T=>{T.preventDefault(),T.stopPropagation(),T.dataTransfer.types.includes("Files")&&S(!0)},ee=T=>{T.preventDefault(),T.stopPropagation(),T.currentTarget.contains(T.relatedTarget)||S(!1)},C=async T=>{T.preventDefault(),T.stopPropagation(),S(!1);const G=[];if(T.dataTransfer.items&&T.dataTransfer.items.length>0){const ue=Array.from(T.dataTransfer.items).map(ye=>{const ie=ye.webkitGetAsEntry();return ie?J(ie,G):Promise.resolve()});await Promise.all(ue)}else T.dataTransfer.files&&T.dataTransfer.files.length>0&&G.push(...Array.from(T.dataTransfer.files));const X=G.filter(Q=>Q.type.startsWith("audio/")||Q.name.toLowerCase().endsWith(".wav")||Q.name.toLowerCase().endsWith(".aif")||Q.name.toLowerCase().endsWith(".aiff")||Q.name.toLowerCase().endsWith(".mp3")||Q.name.toLowerCase().endsWith(".m4a")||Q.name.toLowerCase().endsWith(".ogg")||Q.name.toLowerCase().endsWith(".flac")),j=24-c.multisampleFiles.length,H=X.slice(0,j);H.length>0&&(X.length>j&&d({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"info",title:"file limit reached",message:`loaded ${H.length} files (${X.length-j} additional files skipped)`}}),i(H))},J=async(T,G)=>{try{if(T.isFile){const X=await new Promise((j,H)=>{T.file(Q=>{Q?j(Q):H(new Error("Failed to get file from entry"))})});G.push(X)}else if(T.isDirectory){const X=T.createReader(),j=()=>new Promise((ue,ye)=>{X.readEntries(ie=>{ie&&ie.length>0?ue(ie):ue([])},ie=>{console.error("Error reading directory entries:",ie),ye(ie)})});let H=[],Q=!0;for(;Q;){const ue=await j();ue.length===0?Q=!1:H=H.concat(ue)}await Promise.all(H.map(ue=>J(ue,G)))}}catch(X){console.error("Error processing entry:",T?.name,X)}},_=()=>{N.current?.click()};ne.useEffect(()=>{s&&(s.current=_)},[s]);const K=async T=>{const G=Array.from(T.target.files||[]);if(G.length>0){const X=await P(G),j=24-c.multisampleFiles.length,H=X.slice(0,j);H.length>0?(X.length>j&&d({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"info",title:"file limit reached",message:`loaded ${H.length} files (${X.length-j} additional files skipped)`}}),i(H)):console.log("No audio files found in selected files")}T.target.value=""},P=async T=>{const G=[];for(const X of T)(X.type.startsWith("audio/")||X.name.toLowerCase().endsWith(".wav")||X.name.toLowerCase().endsWith(".aif")||X.name.toLowerCase().endsWith(".aiff")||X.name.toLowerCase().endsWith(".mp3")||X.name.toLowerCase().endsWith(".m4a")||X.name.toLowerCase().endsWith(".ogg")||X.name.toLowerCase().endsWith(".flac"))&&G.push(X);return G},Y=()=>{c.multisampleFiles.length===0&&N.current?.click()},oe=async(T,G)=>{const X=G.target.files?.[0];X&&await a(T,X),G.target.value=""},te=(T,G)=>{O(X=>({...X,[T]:G}))},U=T=>{const G=R[T];if(G!==void 0){const X=I(G);X>=0&&X<=127&&d({type:"UPDATE_MULTISAMPLE_FILE",payload:{index:T,updates:{rootNote:X}}}),O(j=>{const H={...j};return delete H[T],H})}},k=(T,G)=>{G.key==="Enter"&&(U(T),G.target.blur())},$=(T,G)=>{m(G),T.dataTransfer.effectAllowed="move"},Z=(T,G)=>{T.preventDefault(),T.dataTransfer.dropEffect="move",b(G)},le=()=>{b(null)},q=(T,G)=>{T.preventDefault(),f!==null&&f!==G&&d({type:"REORDER_MULTISAMPLE_FILES",payload:{fromIndex:f,toIndex:G}}),m(null),b(null)},Ee=()=>{m(null),b(null)},Fe=async T=>{const G=c.multisampleFiles[T];if(!(!G?.isLoaded||!G.audioBuffer))try{const X=await ir.getAudioContext(),j=X.createBufferSource();j.buffer=G.audioBuffer,j.connect(X.destination),j.start(0)}catch(X){console.error("Error playing sample:",X)}},pe=T=>{A.current[T]?.click()},de=T=>{T.preventDefault(),T.stopPropagation()},Re=(T,G)=>{T.preventDefault(),T.stopPropagation();const j=Array.from(T.dataTransfer.files).find(H=>H.type.startsWith("audio/")||H.name.toLowerCase().endsWith(".wav")||H.name.toLowerCase().endsWith(".aif")||H.name.toLowerCase().endsWith(".aiff")||H.name.toLowerCase().endsWith(".mp3")||H.name.toLowerCase().endsWith(".m4a")||H.name.toLowerCase().endsWith(".ogg")||H.name.toLowerCase().endsWith(".flac"));j&&oe(G,{target:{files:[j]}})},me=T=>{E(T),y(!0)},_e=()=>{y(!1)},Ae=(T,G,X,j)=>{d({type:"UPDATE_MULTISAMPLE_FILE",payload:{index:g,updates:{inPoint:T,outPoint:G,loopStart:X||0,loopEnd:j||(c.multisampleFiles[g]?.audioBuffer?c.multisampleFiles[g].audioBuffer.duration:0)}}})};return M?u.jsxs("div",{style:{fontFamily:'"Montserrat", "Arial", sans-serif'},children:[u.jsx("input",{ref:N,type:"file",accept:"audio/*,.wav",multiple:!0,onChange:K,style:{display:"none"}}),c.multisampleFiles.length===0?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",color:"#9ca3af",textAlign:"center",minHeight:"200px",cursor:"pointer",transition:"all 0.2s ease",border:`2px dashed ${ot.borderMed}`,borderRadius:"6px",backgroundColor:ot.bg},onClick:Y,onDragOver:W,onDragLeave:ee,onDrop:C,children:[u.jsx("i",{className:"fas fa-music",style:{fontSize:"3rem",marginBottom:"1rem",opacity:.5}}),u.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"1.1rem",fontWeight:"500"},children:"no samples loaded"}),u.jsx("p",{style:{margin:"0",fontSize:"0.9rem"},children:"drag and drop audio files or folders here, or click to browse"})]}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[...c.multisampleFiles].reverse().map((T,G)=>{const X=c.multisampleFiles.length-1-G;return u.jsxs("div",{children:[u.jsx("input",{type:"file",accept:"audio/*,.wav",style:{display:"none"},ref:j=>{A.current[X]=j},onChange:j=>oe(X,j)}),u.jsxs("div",{style:{background:ot.bg,border:`1px solid ${ot.border}`,borderRadius:"3px",padding:"1rem",transition:"background 0.2s ease"},onDragOver:de,onDrop:j=>Re(j,X),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[T?.isLoaded?u.jsxs("div",{style:{textAlign:"left"},children:[u.jsx("input",{type:"text",value:R[X]??Lr(T.rootNote||60,c.midiNoteMapping),onChange:j=>te(X,j.target.value),onBlur:()=>U(X),onKeyDown:j=>k(X,j),onFocus:j=>j.target.select(),onClick:j=>{j.stopPropagation(),j.target.select()},onMouseDown:j=>j.stopPropagation(),placeholder:"C4 or 60",style:{width:"80px",padding:"0.25rem 0.375rem",border:`1px solid ${ot.border}`,borderRadius:"3px",fontSize:"0.875rem",fontFamily:"monospace",textAlign:"center",marginBottom:"0.125rem",fontWeight:"600"}}),u.jsxs("div",{style:{fontSize:"0.7rem",color:ot.textSecondary,textAlign:"center"},children:["midi ",T.rootNote||60]})]}):u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:ot.textSecondary},children:"empty slot"}),u.jsx("div",{style:{display:"flex",gap:"0.25rem"},children:T?.isLoaded?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Fe(X).catch(j=>{console.error("Error playing sample:",j)}),style:ya,title:"play",children:u.jsx("i",{className:"fas fa-play",style:{fontSize:"18px"}})}),u.jsx("button",{onClick:()=>n(X),style:ya,title:"clear",children:u.jsx("i",{className:"fas fa-times",style:{fontSize:"18px"}})})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>pe(X),style:ya,title:"browse",children:u.jsx("i",{className:"fas fa-upload",style:{fontSize:"18px"}})}),u.jsx("button",{onClick:()=>r(X),style:ya,title:"record",children:u.jsx("i",{className:"fas fa-microphone",style:{fontSize:"18px"}})})]})})]}),T?.isLoaded?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{fontWeight:"500",color:ot.text,marginBottom:"0.1rem",fontSize:"0.8rem",wordBreak:"break-word"},children:T.name}),u.jsx("div",{style:{marginBottom:"0.1rem"},children:u.jsx(Jl,{duration:T.duration,fileSize:T.fileSize,channels:T.originalChannels,bitDepth:T.originalBitDepth,sampleRate:T.originalSampleRate,isFloat:T.isFloat})}),u.jsx("div",{style:{height:"44px",marginBottom:"0.1rem"},children:T.audioBuffer?u.jsx(Ql,{audioBuffer:T.audioBuffer,height:44,inPoint:Math.floor((T.inPoint||0)*T.audioBuffer.sampleRate),outPoint:Math.floor((T.outPoint||T.audioBuffer.duration)*T.audioBuffer.sampleRate),loopStart:Math.floor((T.loopStart||0)*T.audioBuffer.sampleRate),loopEnd:Math.floor((T.loopEnd||T.audioBuffer.duration)*T.audioBuffer.sampleRate),onMarkersChange:j=>{const H=T.audioBuffer;if(!H)return;const Q=ue=>ue/H.sampleRate;d({type:"UPDATE_MULTISAMPLE_FILE",payload:{index:X,updates:{inPoint:Q(j.inPoint),outPoint:Q(j.outPoint),loopStart:Q(j.loopStart||0),loopEnd:Q(j.loopEnd||H.duration)}}})},onZoomEdit:()=>me(X)}):u.jsx("div",{style:{width:"100%",height:"44px",background:ot.borderSubtle,borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",color:ot.textSecondary,fontSize:"0.7rem"},children:"no sample"})})]}):u.jsx("button",{onClick:()=>pe(X),style:{width:"100%",background:ot.bg,border:`2px dashed ${ot.borderMed}`,borderRadius:"3px",padding:"1.5rem 1rem",color:ot.textSecondary,fontSize:"0.9rem",cursor:"pointer",transition:"all 0.2s ease",textAlign:"center"},children:"tap to browse for audio file"})]})]},X)})})]}):u.jsxs("div",{style:{fontFamily:'"Montserrat", "Arial", sans-serif',padding:0,margin:0},children:[u.jsx("input",{ref:N,type:"file",accept:"audio/*,.wav",multiple:!0,onChange:K,style:{display:"none"}}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px minmax(200px, 1fr) minmax(200px, 1fr) 120px",gap:"0.5rem",padding:"0.75rem",background:ot.bgAlt,borderBottom:"none",fontSize:"0.8rem",fontWeight:"bold",color:ot.textSecondary,position:"relative"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:["key",u.jsx(Zi,{isVisible:F,content:u.jsxs(u.Fragment,{children:[u.jsxs("h3",{children:[u.jsx("i",{className:"fas fa-music",style:{marginRight:"0.5rem"}}),"note editing"]}),u.jsx("p",{children:u.jsx("strong",{children:"click to edit note:"})}),u.jsxs("p",{children:[" musical notes: ",u.jsx("strong",{children:"C5"}),", ",u.jsx("strong",{children:"A#2"}),", ",u.jsx("strong",{children:"Bb3"})]}),u.jsxs("p",{children:[" midi numbers: ",u.jsx("strong",{children:"60"}),", ",u.jsx("strong",{children:"72"}),", ",u.jsx("strong",{children:"48"})]}),u.jsxs("p",{children:[" press ",u.jsx("strong",{children:"enter"})," or click away to save"]})]}),children:u.jsx("span",{style:{display:"flex"},onClick:T=>{T.stopPropagation(),B(!F)},onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),children:u.jsx("i",{className:"fas fa-question-circle",style:{fontSize:"14px",color:ot.textSecondary,cursor:"help"}})})})]}),u.jsx("div",{children:"file details"}),u.jsx("div",{style:{paddingLeft:"10px"},children:"waveform"}),u.jsx("div",{style:{paddingLeft:"25px"},children:"actions"})]}),u.jsx("div",{style:{borderTop:`1px solid ${ot.border}`,borderBottom:`1px solid ${ot.border}`,overflow:"hidden",padding:0,margin:0},children:c.multisampleFiles.length===0?u.jsx("div",{style:{minHeight:"300px",padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:w?ot.bgAlt:ot.bg,transition:"background 0.2s ease",position:"relative"},onDragOver:W,onDragLeave:ee,onDrop:C,onClick:Y,children:u.jsxs("div",{style:{border:`3px dashed ${w?ot.textSecondary:ot.borderMed}`,borderRadius:"15px",padding:"3rem",width:"100%",maxWidth:"500px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",color:w?ot.action:ot.textSecondary},children:[u.jsx("i",{className:"fas fa-music",style:{fontSize:"3rem",marginBottom:"1rem",opacity:.5}}),u.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem",fontWeight:"300"},children:w?"drop files here":"no samples loaded"}),u.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:"drag and drop wav files here or click to browse"})]})}):[...c.multisampleFiles].reverse().map((T,G)=>{const X=c.multisampleFiles.length-1-G,j=f===X,H=h===X&&f!==null&&f!==X;return u.jsxs("div",{children:[u.jsx("input",{type:"file",accept:"audio/*,.wav",style:{display:"none"},ref:Q=>{A.current[X]=Q},onChange:Q=>oe(X,Q)}),u.jsxs("div",{draggable:T?.isLoaded,onDragStart:Q=>$(Q,X),onDragOver:Q=>Z(Q,X),onDragLeave:le,onDrop:Q=>q(Q,X),onDragEnd:Ee,style:{display:"grid",gridTemplateColumns:"100px minmax(200px, 1fr) minmax(200px, 1fr) 120px",gap:"0.5rem",padding:0,background:H?ot.bgAlt:ot.bg,borderBottom:G<c.multisampleFiles.length-1?`1px solid ${ot.border}`:"none",transition:"background 0.2s ease",alignItems:"center",minHeight:"54px",opacity:j?.5:1,cursor:T?.isLoaded?"move":"default"},onMouseEnter:Q=>{j||(Q.currentTarget.style.background=ot.bgAlt)},onMouseLeave:Q=>{j||(Q.currentTarget.style.background=ot.bg)},children:[u.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingLeft:"16px"},children:T?.isLoaded?u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("input",{type:"text",value:R[X]??Lr(T.rootNote||60,c.midiNoteMapping),onChange:Q=>te(X,Q.target.value),onBlur:()=>U(X),onKeyDown:Q=>k(X,Q),onFocus:Q=>Q.target.select(),onClick:Q=>{Q.stopPropagation(),Q.target.select()},onMouseDown:Q=>Q.stopPropagation(),placeholder:"C4 or 60",style:{width:"80px",padding:"0.25rem 0.375rem",border:`1px solid ${ot.border}`,borderRadius:"3px",fontSize:"0.875rem",fontFamily:"monospace",textAlign:"center",marginBottom:"0.125rem",fontWeight:"600"}}),u.jsxs("div",{style:{fontSize:"0.7rem",color:ot.textSecondary},children:["midi ",T.rootNote||60]})]}):u.jsx("div",{style:{textAlign:"center",color:ot.textSecondary},children:"-"})}),T?.isLoaded?u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.15rem"},children:[u.jsx("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:ot.text,wordBreak:"break-word",marginBottom:"0.1rem"},children:T.name}),u.jsx(Jl,{duration:T.duration,fileSize:T.fileSize,channels:T.originalChannels,bitDepth:T.originalBitDepth,sampleRate:T.originalSampleRate,isFloat:T.isFloat})]}),u.jsx("div",{style:{height:"44px",display:"flex",alignItems:"center",paddingRight:"8px"},children:T.audioBuffer?u.jsx(Ql,{audioBuffer:T.audioBuffer,height:44,inPoint:Math.floor((T.inPoint||0)*T.audioBuffer.sampleRate),outPoint:Math.floor((T.outPoint||T.audioBuffer.duration)*T.audioBuffer.sampleRate),loopStart:Math.floor((T.loopStart||0)*T.audioBuffer.sampleRate),loopEnd:Math.floor((T.loopEnd||T.audioBuffer.duration)*T.audioBuffer.sampleRate),onMarkersChange:Q=>{const ue=T.audioBuffer;if(!ue)return;const ye=ie=>ie/ue.sampleRate;d({type:"UPDATE_MULTISAMPLE_FILE",payload:{index:X,updates:{inPoint:ye(Q.inPoint),outPoint:ye(Q.outPoint),loopStart:ye(Q.loopStart||0),loopEnd:ye(Q.loopEnd||ue.duration)}}})},onZoomEdit:()=>me(X)}):u.jsx("div",{style:{width:"100%",height:"44px",background:ot.borderSubtle,borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",color:ot.textSecondary,fontSize:"0.7rem"},children:"no sample"})})]}):u.jsx("div",{style:{gridColumn:"span 2",paddingRight:"8px"},children:u.jsx("button",{onClick:()=>pe(X),style:{width:"100%",height:"44px",background:"none",border:`2px dashed ${ot.borderMed}`,borderRadius:"3px",padding:"0 1rem",color:ot.textSecondary,fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:Q=>{Q.currentTarget.style.borderColor=ot.textSecondary,Q.currentTarget.style.color=ot.action},onMouseLeave:Q=>{Q.currentTarget.style.borderColor=ot.borderMed,Q.currentTarget.style.color=ot.textSecondary},children:"drop sample here or click to browse"})}),u.jsx("div",{style:{display:"flex",gap:"0.25rem",justifyContent:"center",alignItems:"center",paddingRight:"16px"},children:T?.isLoaded?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Fe(X).catch(Q=>{console.error("Error playing sample:",Q)}),style:ya,title:"play",children:u.jsx("i",{className:"fas fa-play",style:{fontSize:"18px"}})}),u.jsx("button",{onClick:()=>n(X),style:ya,title:"clear",children:u.jsx("i",{className:"fas fa-times",style:{fontSize:"18px"}})})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>pe(X),style:ya,title:"browse",children:u.jsx("i",{className:"fas fa-upload",style:{fontSize:"18px"}})}),u.jsx("button",{onClick:()=>r(X),onKeyDown:Q=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),r(X))},"aria-label":`record sample for slot ${X+1}`,style:{...ya,backgroundColor:"var(--color-surface-primary)",border:"1px solid var(--color-interactive-primary)",outline:"none"},title:"record",onFocus:Q=>{Q.currentTarget.style.outline="2px solid var(--color-interactive-focus)",Q.currentTarget.style.outlineOffset="2px"},onBlur:Q=>{Q.currentTarget.style.outline="none"},children:u.jsx("i",{className:"fas fa-microphone",style:{fontSize:"18px",color:"var(--color-accent-primary)"},"aria-hidden":"true"})})]})})]})]},X)})}),u.jsx(kf,{isOpen:x,onClose:_e,audioBuffer:c.multisampleFiles[g]?.audioBuffer||null,initialInPoint:c.multisampleFiles[g]?.inPoint||0,initialOutPoint:c.multisampleFiles[g]?.outPoint||(c.multisampleFiles[g]?.audioBuffer?c.multisampleFiles[g].audioBuffer.length/c.multisampleFiles[g].audioBuffer.sampleRate:0),initialLoopStart:c.multisampleFiles[g]?.loopStart||0,initialLoopEnd:c.multisampleFiles[g]?.loopEnd||(c.multisampleFiles[g]?.audioBuffer?c.multisampleFiles[g].audioBuffer.length/c.multisampleFiles[g].audioBuffer.sampleRate:0),onSave:Ae})]})}const y2=({knobs:a,onValueChange:n,title:r})=>{const[i,s]=L.useState(null),c=L.useRef(null),d=L.useCallback((m,h)=>{m.preventDefault(),s(h);const b="clientY"in m?m.clientY:m.touches[0].clientY,w=a[h].value,S=y=>{const g="clientY"in y?y.clientY:y.touches[0].clientY,O=(b-g)*.5,A=Math.max(0,Math.min(100,w+O));n(h,Math.round(A))},x=()=>{s(null),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S),document.removeEventListener("mouseup",x),document.removeEventListener("touchend",x)};document.addEventListener("mousemove",S),document.addEventListener("touchmove",S),document.addEventListener("mouseup",x),document.addEventListener("touchend",x)},[a,n]),f=L.useCallback((m,h)=>{const b=i===h,S=(y=>{switch(y){case"black":return"var(--color-knob-black)";case"dark":return"var(--color-knob-dark)";case"light":return"var(--color-knob-light)";case"white":return"var(--color-knob-white)";default:return"var(--color-knob-black)"}})(m.color),x=m.color==="white";return u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",border:"1px solid var(--color-border-primary)",backgroundColor:"var(--color-surface-primary)",cursor:b?"grabbing":"grab",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transform:b?"scale(1.05)":"scale(1)",transition:b?"none":"transform 0.1s ease"},onMouseDown:y=>d(y,h),onTouchStart:y=>d(y,h),children:u.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--color-border-primary)",backgroundColor:"transparent",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx("div",{style:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:S,border:x?"1px solid var(--color-border-primary)":"none"}})})}),u.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",userSelect:"none"},children:m.label}),u.jsxs("span",{style:{fontSize:"0.7rem",color:"var(--color-text-tertiary)",userSelect:"none"},children:[Math.round(m.value),"%"]})]},h)},[i,d]);return u.jsxs("div",{ref:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r&&u.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:r}),u.jsx("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",padding:"0 1rem"},children:a.map((m,h)=>f(m,h))})]})},b2={bass:{amp:{attack:1e3,decay:12e3,sustain:28e3,release:15e3},filter:{attack:0,decay:8e3,sustain:2e4,release:12e3}},pad:{amp:{attack:15e3,decay:2e4,sustain:3e4,release:25e3},filter:{attack:4e3,decay:15e3,sustain:25e3,release:2e4}},keys:{amp:{attack:500,decay:6e3,sustain:22e3,release:12e3},filter:{attack:0,decay:5e3,sustain:18e3,release:1e4}},pluck:{amp:{attack:0,decay:2e3,sustain:8e3,release:5e3},filter:{attack:0,decay:3e3,sustain:12e3,release:8e3}},lead:{amp:{attack:800,decay:8e3,sustain:2e4,release:12e3},filter:{attack:0,decay:6e3,sustain:18e3,release:1e4}}},Di=()=>({attack:Math.floor(Math.random()*32767),decay:Math.floor(Math.random()*32767),sustain:Math.floor(Math.random()*32767),release:Math.floor(Math.random()*32767)}),ba=a=>Math.round(a/32767*100),ji=a=>Math.round(a/100*32767),v2=(a,n,r,i,s,c=20)=>{const d=[];for(let f=0;f<=c;f++){const m=f/c,h=a+(n-a)*m,b=Math.exp(-1.5*m),w=r+(i-r)*(1-b);d.push({x:h,y:w})}return d},x2=({ampEnvelope:a,filterEnvelope:n,onAmpEnvelopeChange:r,onFilterEnvelopeChange:i,width:s=480,height:c=194})=>{const d=ne.useRef(null),[f,m]=L.useState("amp"),[h,b]=L.useState(null),[w,S]=L.useState("random"),x=f==="amp"?a:n,y=f==="amp"?n:a;L.useEffect(()=>{if(a.attack===0&&a.decay===0&&a.sustain===0&&a.release===0&&n.attack===0&&n.decay===0&&n.sustain===0&&n.release===0){const I=Di(),W=Di();r(I),i(W)}},[a,n,r,i]);const g=L.useCallback(B=>{if(S(B),B==="random"){const I=Di(),W=Di();r(I),i(W)}else{const I=b2[B];r(I.amp),i(I.filter)}},[r,i]),E=L.useCallback((B,I)=>{const W=ji(I),C={...f==="amp"?a:n};switch(B){case 0:C.attack=W;break;case 1:C.decay=W;break;case 2:C.sustain=W;break;case 3:C.release=W;break}f==="amp"?r(C):i(C)},[f,a,n,r,i]),R=L.useCallback(B=>{const I=Math.round(425.7),W=Math.round(25*7.74),ee=Math.round(46*7.74),C=Math.round(20*7.74),J=(s-I)/2,_=0,K=(I-ee)/2,P=(W-C)/2,Y=J+K,oe=_+P,te=oe,U=oe+C,k=ba(B.sustain),$=U-k/100*(U-te),Z=ba(B.attack),le=Y+ee*.28,q=Y+Z/100*(le-Y),Ee=ba(B.decay),Fe=ee*.26,pe=q+Ee/100*Fe,de=ba(B.release),Re=Y+ee-ee*.28,me=Re+(100-de)/100*(Y+ee-Re);return{start:{x:Y,y:U},attack:{x:q,y:te},decay:{x:pe,y:$},release:{x:me,y:$},releaseEnd:{x:Y+ee,y:U}}},[s]),O=L.useCallback(B=>{const I=R(B);return{attack:I.attack,decay:I.decay,release:I.release}},[R]),A=L.useCallback(B=>{const I=B.attack===0&&B.decay===0&&B.release===0&&B.sustain===0?{attack:8e3,decay:1e4,sustain:2e4,release:12e3}:B,W=R(I),C=(W.start.y-W.attack.y)/.79,J=W.start.y-C,_=v2(W.start.x,W.attack.x,W.start.y,J,1.5,25).map(oe=>({x:oe.x,y:Math.max(W.attack.y,oe.y)}));let K=`M ${W.start.x} ${W.start.y}`;_.forEach((oe,te)=>{te>0&&(K+=` L ${oe.x} ${oe.y}`)}),K+=` L ${W.attack.x} ${W.attack.y}`;const P=W.decay.x-W.attack.x;if(P>0){const U={x:W.attack.x+P*.07,y:W.attack.y+(W.decay.y-W.attack.y)*.8},k={x:W.decay.x-P*.25,y:W.decay.y};K+=` C ${U.x} ${U.y}, ${k.x} ${k.y}, ${W.decay.x} ${W.decay.y}`}else K+=` L ${W.decay.x} ${W.decay.y}`;K+=` L ${W.release.x} ${W.decay.y}`;const Y=W.releaseEnd.x-W.release.x;if(Y>0){const U={x:W.release.x+Y*.07,y:W.release.y+(W.releaseEnd.y-W.release.y)*.8},k={x:W.releaseEnd.x-Y*.25,y:W.releaseEnd.y};K+=` C ${U.x} ${U.y}, ${k.x} ${k.y}, ${W.releaseEnd.x} ${W.releaseEnd.y}`}else K+=` L ${W.releaseEnd.x} ${W.releaseEnd.y}`;return K},[R]),N=L.useCallback(B=>{const I=d.current;if(!I)return;const W="clientX"in B?B.clientX:B.touches[0].clientX,ee="clientY"in B?B.clientY:B.touches[0].clientY,C=I.createSVGPoint();C.x=W,C.y=ee;const J=I.getScreenCTM();if(!J)return;const _=C.matrixTransform(J.inverse()),K=_.x,P=_.y,Y=O(x),oe=20;for(const[te,U]of Object.entries(Y))if(Math.abs(K-U.x)<=oe&&Math.abs(P-U.y)<=oe){b(te);const k=Z=>{if(!I)return;const le="clientX"in Z?Z.clientX:Z.touches[0].clientX,q="clientY"in Z?Z.clientY:Z.touches[0].clientY,Ee=I.createSVGPoint();Ee.x=le,Ee.y=q;const Fe=I.getScreenCTM();if(!Fe)return;const pe=Ee.matrixTransform(Fe.inverse()),de=pe.x,Re=pe.y,me={...x},_e=Math.round(55*7.74),Ae=Math.round(25*7.74),T=Math.round(46*7.74),G=Math.round(20*7.74),X=(s-_e)/2,j=0,H=(_e-T)/2,Q=(Ae-G)/2,ue=X+H,ye=j+Q,ie=ye,ge=ye+G;if(te==="attack"){const Oe=ue+T*.28,De=(Math.max(ue,Math.min(Oe,de))-ue)/(Oe-ue)*100;me.attack=ji(De)}else if(te==="decay"){const Oe=R(x),Le=T*.26,De=Oe.attack.x+Le,He=Math.max(Oe.attack.x,Math.min(De,de)),Ie=Le===0?0:(He-Oe.attack.x)/Le*100;me.decay=ji(Ie);const Ve=Math.max(0,Math.min(100,(1-(Re-ie)/(ge-ie))*100));me.sustain=ji(Ve)}else if(te==="release"){const Oe=ue+T-T*.28,Le=ue+T,He=100-(Math.max(Oe,Math.min(Le,de))-Oe)/(Le-Oe)*100;me.release=ji(He);const Ie=Math.max(0,Math.min(100,(1-(Re-ie)/(ge-ie))*100));me.sustain=ji(Ie)}f==="amp"?r(me):i(me)},$=()=>{b(null),document.removeEventListener("mousemove",k),document.removeEventListener("touchmove",k),document.removeEventListener("mouseup",$),document.removeEventListener("touchend",$)};document.addEventListener("mousemove",k),document.addEventListener("touchmove",k),document.addEventListener("mouseup",$),document.addEventListener("touchend",$);break}},[x,O,f,s,r,i,R]),M=L.useCallback(()=>{},[]),z=L.useCallback(()=>{b(null)},[]),F=L.useCallback((B,I=!0)=>{const W=O(B),ee=4,C=20;return Object.entries(W).map(([J,_])=>u.jsxs("g",{children:[u.jsx("circle",{cx:Math.round(_.x),cy:Math.round(_.y),r:C,fill:"transparent",style:{cursor:"grab"}}),u.jsx("rect",{x:Math.round(_.x-ee),y:Math.round(_.y-ee),width:ee*2,height:ee*2,rx:"3",ry:"3",fill:I?"#333333":"#999999",style:{cursor:"grab",pointerEvents:"none"}})]},J))},[O]);return u.jsxs("div",{className:"adsr-envelope-container",style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:"envelopes"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"0.875rem",color:f==="amp"?"#000":"#999"},children:"amp"}),u.jsx("div",{onClick:()=>m(f==="amp"?"filter":"amp"),style:{width:"32px",height:"16px",backgroundColor:"#393939",borderRadius:"8px",position:"relative",cursor:"pointer",transition:"all 0.2s ease"},children:u.jsx("div",{style:{width:"10px",height:"10px",backgroundColor:"#fff",borderRadius:"50%",position:"absolute",top:"3px",left:f==="filter"?"19px":"3px",transition:"left 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.3)"}})}),u.jsx("span",{style:{fontSize:"0.875rem",color:f==="filter"?"#000":"#999"},children:"filter"})]})]}),u.jsxs("svg",{ref:d,width:"100%",height:c,viewBox:`0 0 ${s} ${c}`,preserveAspectRatio:"xMidYMid meet",style:{cursor:h?"grabbing":"crosshair"},onMouseDown:N,onTouchStart:N,onMouseMove:M,onMouseUp:z,onMouseLeave:z,children:[u.jsx("line",{x1:(s-Math.round(55*7.74))/2+(Math.round(55*7.74)-Math.round(46*7.74))/2,y1:(Math.round(25*7.74)-Math.round(20*7.74))/2+Math.round(20*7.74),x2:(s-Math.round(55*7.74))/2+(Math.round(55*7.74)-Math.round(46*7.74))/2+Math.round(46*7.74),y2:(Math.round(25*7.74)-Math.round(20*7.74))/2+Math.round(20*7.74),stroke:"#ddd",strokeWidth:"4"}),(()=>{const B=R(x),W=(c-Math.round(25*7.74))/2+(Math.round(25*7.74)-Math.round(20*7.74))/2+Math.round(20*7.74);return u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:B.attack.x,y1:B.attack.y,x2:B.attack.x,y2:W,stroke:"#ddd",strokeWidth:"4",opacity:"0.5"}),u.jsx("line",{x1:B.decay.x,y1:B.decay.y,x2:B.decay.x,y2:W,stroke:"#ddd",strokeWidth:"4",opacity:"0.5"}),u.jsx("line",{x1:B.release.x,y1:B.release.y,x2:B.release.x,y2:W,stroke:"#ddd",strokeWidth:"4",opacity:"0.5"})]})})(),u.jsx("path",{d:A(y),fill:"none",stroke:"#cccccc",strokeWidth:"4",opacity:"0.5"}),u.jsx("path",{d:A(x),fill:"none",stroke:"#333333",strokeWidth:"4"}),F(x,!0),(()=>{const B=O(a),I=O(n);return u.jsxs(u.Fragment,{children:[u.jsx("text",{x:B.release.x-19,y:B.release.y-6,fontSize:"12",fontWeight:"500",fill:f==="amp"?"#333":"#999",textAnchor:"middle",style:{userSelect:"none",pointerEvents:"none"},children:"amp"}),u.jsx("text",{x:I.release.x-19,y:I.release.y-6,fontSize:"12",fontWeight:"500",fill:f==="filter"?"#333":"#999",textAnchor:"middle",style:{userSelect:"none",pointerEvents:"none"},children:"filter"})]})})()]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[u.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text-primary)",userSelect:"none"},children:"preset"}),u.jsxs("div",{style:{display:"flex",alignItems:"stretch",gap:"0.25rem",width:"100%"},children:[u.jsxs("select",{value:w,onChange:B=>g(B.target.value),style:{padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border-light)",borderRadius:"3px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",cursor:"pointer",flex:1,height:"36px",minHeight:"36px",maxHeight:"36px",boxSizing:"border-box"},children:[u.jsx("option",{value:"random",children:"random"}),u.jsx("option",{value:"bass",children:"bass"}),u.jsx("option",{value:"keys",children:"keys"}),u.jsx("option",{value:"lead",children:"lead"}),u.jsx("option",{value:"pad",children:"pad"}),u.jsx("option",{value:"pluck",children:"pluck"})]}),u.jsx("button",{onClick:()=>{S("random");const B=Di(),I=Di();r(B),i(I)},style:{width:"36px",height:"36px",minWidth:"36px",minHeight:"36px",maxWidth:"36px",maxHeight:"36px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--color-border-medium)",borderRadius:"3px",backgroundColor:"var(--color-bg-primary)",cursor:"pointer",flexShrink:0},title:"generate new random values",children:u.jsx("i",{className:"fas fa-dice",style:{fontSize:"18px",color:"var(--color-text-secondary)"}})})]})]}),u.jsx(y2,{knobs:[{label:"attack",value:ba(x.attack),color:"black"},{label:"decay",value:ba(x.decay),color:"dark"},{label:"sustain",value:ba(x.sustain),color:"light"},{label:"release",value:ba(x.release),color:"white"}],onValueChange:E})]})},Vy={keys:{amp:{attack:500,decay:6e3,sustain:22e3,release:12e3},filter:{attack:0,decay:5e3,sustain:18e3,release:1e4}}},$y=()=>({playmode:"poly",loopEnabled:!0,loopOnRelease:!0,transpose:0,velocitySensitivity:20,volume:69,width:0,highpass:0,portamentoType:"linear",portamentoAmount:0,tuningRoot:0,ampEnvelope:Vy.keys.amp,filterEnvelope:Vy.keys.filter});function S2(){const{state:a,dispatch:n}=un(),r=L.useRef(null),[i,s]=L.useState(!1),c=()=>({playmode:a.multisampleSettings.playmode,loopEnabled:a.multisampleSettings.loopEnabled,loopOnRelease:a.multisampleSettings.loopOnRelease,transpose:a.multisampleSettings.transpose,velocitySensitivity:a.multisampleSettings.velocitySensitivity,volume:a.multisampleSettings.volume,width:a.multisampleSettings.width,highpass:a.multisampleSettings.highpass,portamentoType:a.multisampleSettings.portamentoType,portamentoAmount:a.multisampleSettings.portamentoAmount,tuningRoot:a.multisampleSettings.tuningRoot,ampEnvelope:a.multisampleSettings.ampEnvelope,filterEnvelope:a.multisampleSettings.filterEnvelope}),[d,f]=L.useState(c()),[m,h]=L.useState({basic:!0,sound:!1,envelopes:!0});L.useEffect(()=>{const M=()=>{s(window.innerWidth<768)};return M(),window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),L.useEffect(()=>{const M=c();f(M)},[a.multisampleSettings.playmode,a.multisampleSettings.loopEnabled,a.multisampleSettings.loopOnRelease,a.multisampleSettings.transpose,a.multisampleSettings.velocitySensitivity,a.multisampleSettings.volume,a.multisampleSettings.width,a.multisampleSettings.highpass,a.multisampleSettings.portamentoType,a.multisampleSettings.portamentoAmount,a.multisampleSettings.tuningRoot,a.multisampleSettings.ampEnvelope,a.multisampleSettings.filterEnvelope]);const b=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],w=()=>{r.current?.click()},S=async M=>{const z=M.target.files?.[0];if(z){M.target.value="";try{const F=await db(z,"multisampler");if(F.success&&F.data){const B=F.data;n({type:"SET_IMPORTED_MULTISAMPLE_PRESET",payload:B}),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"settings imported",message:"successfully imported multisample preset settings"}})}else n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"import failed",message:F.error||"failed to import preset"}})}catch(F){n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"import error",message:`unexpected error: ${F instanceof Error?F.message:"Unknown error"}`}})}}},x=()=>{const M=$y();f(M),g(M)},y=(M,z)=>{f(F=>{const B={...F,[M]:z};return g(B),B})},g=M=>{n({type:"SET_MULTISAMPLE_PLAYMODE",payload:M.playmode}),n({type:"SET_MULTISAMPLE_TRANSPOSE",payload:M.transpose}),n({type:"SET_MULTISAMPLE_VELOCITY_SENSITIVITY",payload:M.velocitySensitivity}),n({type:"SET_MULTISAMPLE_VOLUME",payload:M.volume}),n({type:"SET_MULTISAMPLE_WIDTH",payload:M.width}),n({type:"SET_MULTISAMPLE_HIGHPASS",payload:M.highpass}),n({type:"SET_MULTISAMPLE_PORTAMENTO_TYPE",payload:M.portamentoType}),n({type:"SET_MULTISAMPLE_PORTAMENTO_AMOUNT",payload:M.portamentoAmount}),n({type:"SET_MULTISAMPLE_TUNING_ROOT",payload:M.tuningRoot}),n({type:"SET_MULTISAMPLE_AMP_ENVELOPE",payload:M.ampEnvelope}),n({type:"SET_MULTISAMPLE_FILTER_ENVELOPE",payload:M.filterEnvelope}),n({type:"SET_MULTISAMPLE_LOOP_ENABLED",payload:M.loopEnabled}),n({type:"SET_MULTISAMPLE_LOOP_ON_RELEASE",payload:M.loopOnRelease});const z={engine:{playmode:M.playmode,transpose:M.transpose,"velocity.sensitivity":va(M.velocitySensitivity),volume:va(M.volume),width:va(M.width),highpass:va(M.highpass),"portamento.amount":va(M.portamentoAmount),"portamento.type":M.portamentoType==="linear"?32767:0,"tuning.root":M.tuningRoot},envelope:{amp:{attack:M.ampEnvelope.attack,decay:M.ampEnvelope.decay,sustain:M.ampEnvelope.sustain,release:M.ampEnvelope.release},filter:{attack:M.filterEnvelope.attack,decay:M.filterEnvelope.decay,sustain:M.filterEnvelope.sustain,release:M.filterEnvelope.release}},regions:[]};n({type:"SET_IMPORTED_MULTISAMPLE_PRESET",payload:z})},E=M=>{f(z=>{const F={...z,ampEnvelope:M};return g(F),F})},R=M=>{f(z=>{const F={...z,filterEnvelope:M};return g(F),F})},O=M=>{h(z=>({...z,[M]:!z[M]}))},A=$y(),N=d.playmode!==A.playmode||d.loopEnabled!==A.loopEnabled||d.loopOnRelease!==A.loopOnRelease||d.transpose!==A.transpose||d.velocitySensitivity!==A.velocitySensitivity||d.volume!==A.volume||d.width!==A.width||d.highpass!==A.highpass||d.portamentoType!==A.portamentoType||d.portamentoAmount!==A.portamentoAmount||d.tuningRoot!==A.tuningRoot||d.ampEnvelope.attack!==A.ampEnvelope.attack||d.ampEnvelope.decay!==A.ampEnvelope.decay||d.ampEnvelope.sustain!==A.ampEnvelope.sustain||d.ampEnvelope.release!==A.ampEnvelope.release||d.filterEnvelope.attack!==A.filterEnvelope.attack||d.filterEnvelope.decay!==A.filterEnvelope.decay||d.filterEnvelope.sustain!==A.filterEnvelope.sustain||d.filterEnvelope.release!==A.filterEnvelope.release;return u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",marginBottom:"1rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:i?"0.5rem 1rem 0.5rem 1rem":"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"preset settings"})})}),u.jsxs("div",{style:{padding:i?"1rem":"2rem"},children:[u.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[u.jsxs("section",{style:{border:"1px solid var(--color-border-light)",borderRadius:"6px",marginBottom:"0.75rem",overflow:"hidden",background:"var(--color-bg-primary)"},children:[u.jsxs("div",{onClick:()=>O("basic"),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.25rem",background:"var(--color-bg-secondary)",cursor:"pointer",userSelect:"none",borderBottom:m.basic?"1px solid var(--color-border-light)":"none",transition:"background 0.2s",borderRadius:"6px 6px 0 0",overflow:"hidden"},children:[u.jsx("h4",{style:{margin:0,color:"var(--color-text-primary)",fontWeight:"500",fontSize:"1rem",letterSpacing:"0.01em"},children:"basic"}),u.jsx("i",{className:"fas fa-chevron-right",style:{color:"var(--color-text-secondary)",fontSize:"1rem",transition:"transform 0.2s cubic-bezier(0.4,0,0.2,1)",transform:m.basic?"rotate(90deg)":"rotate(0deg)"}})]}),m.basic&&u.jsx("div",{style:{padding:"1.25rem"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"repeat(3, 1fr)",gap:i?"1.5rem":"2rem",alignItems:"start",justifyContent:i?"center":"start"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:i?"center":"flex-start",textAlign:i?"center":"left"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"playmode"}),u.jsx("div",{style:{width:"100%",maxWidth:"150px"},children:u.jsxs(Ir,{id:"playmode",labelText:"",value:d.playmode,onChange:M=>y("playmode",M.target.value),size:"sm",children:[u.jsx(Kt,{value:"poly",text:"poly"}),u.jsx(Kt,{value:"mono",text:"mono"}),u.jsx(Kt,{value:"legato",text:"legato"})]})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:i?"center":"flex-start",textAlign:i?"center":"left"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"loop enabled"}),u.jsx("div",{style:{padding:"4px"},children:u.jsx($i,{id:"multisample-loop-enabled",labelA:"off",labelB:"on",toggled:d.loopEnabled,onToggle:M=>y("loopEnabled",M),size:"sm"})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:i?"center":"flex-start",textAlign:i?"center":"left"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"loop on release"}),u.jsx("div",{style:{padding:"4px"},children:u.jsx($i,{id:"multisample-loop-onrelease",labelA:"off",labelB:"on",toggled:d.loopOnRelease,onToggle:M=>y("loopOnRelease",M),size:"sm"})})]})]})})]}),u.jsxs("section",{style:{border:"1px solid var(--color-border-light)",borderRadius:"6px",marginBottom:"0.75rem",overflow:"hidden",background:"var(--color-bg-primary)"},children:[u.jsxs("div",{onClick:()=>O("sound"),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.25rem",background:"var(--color-bg-secondary)",cursor:"pointer",userSelect:"none",borderBottom:m.sound?"1px solid var(--color-border-light)":"none",transition:"background 0.2s",borderRadius:"6px 6px 0 0",overflow:"hidden"},children:[u.jsx("h4",{style:{margin:0,color:"var(--color-text-primary)",fontWeight:"500",fontSize:"1rem",letterSpacing:"0.01em"},children:"advanced"}),u.jsx("i",{className:"fas fa-chevron-right",style:{color:"var(--color-text-secondary)",fontSize:"1rem",transition:"transform 0.2s cubic-bezier(0.4,0,0.2,1)",transform:m.sound?"rotate(90deg)":"rotate(0deg)"}})]}),m.sound&&u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:i?"1.5rem":"2rem",padding:"1rem",backgroundColor:"var(--color-bg-primary)",width:"100%",boxSizing:"border-box",overflowX:"auto"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:i?"column":"row",gap:i?"0.5rem":"2rem",alignItems:"flex-start"},children:[u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"tuning root"}),u.jsx("div",{style:{maxWidth:"150px"},children:u.jsx(Ir,{id:"tuning-root",labelText:"",value:d.tuningRoot.toString(),onChange:M=>y("tuningRoot",parseInt(M.target.value)),size:"sm",children:b.map((M,z)=>u.jsx(Kt,{value:z.toString(),text:M},z))})})]}),u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start",paddingLeft:i?0:"0.5rem"},children:[u.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:["transpose: ",d.transpose]}),u.jsx(vn,{id:"multisample-transpose",min:-36,max:36,step:1,value:d.transpose,onChange:({value:M})=>y("transpose",M),hideTextInput:!0})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:i?"column":"row",gap:i?"0.5rem":"2rem",alignItems:"flex-start"},children:[u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[u.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:["width: ",d.width,"%"]}),u.jsx(vn,{id:"multisample-width",min:0,max:100,step:1,value:d.width,onChange:({value:M})=>y("width",M),hideTextInput:!0})]}),u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start",paddingLeft:i?0:"0.5rem"},children:[u.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:["highpass: ",d.highpass,"%"]}),u.jsx(vn,{id:"multisample-highpass",min:0,max:100,step:1,value:d.highpass,onChange:({value:M})=>y("highpass",M),hideTextInput:!0})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:i?"column":"row",gap:i?"0.5rem":"2rem",alignItems:"flex-start"},children:[u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[u.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:["velocity sensitivity: ",d.velocitySensitivity,"%"]}),u.jsx(vn,{id:"multisample-velocity-sensitivity",min:0,max:100,step:1,value:d.velocitySensitivity,onChange:({value:M})=>y("velocitySensitivity",M),hideTextInput:!0})]}),u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start",paddingLeft:i?0:"0.5rem"},children:[u.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:["volume: ",d.volume,"%"]}),u.jsx(vn,{id:"multisample-volume",min:0,max:100,step:1,value:d.volume,onChange:({value:M})=>y("volume",M),hideTextInput:!0})]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:i?"column":"row",gap:i?"0.5rem":"2rem",alignItems:"flex-start"},children:[u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:"portamento type"}),u.jsx("div",{style:{maxWidth:"150px"},children:u.jsxs(Ir,{id:"portamento-type",labelText:"",value:d.portamentoType,onChange:M=>y("portamentoType",M.target.value),size:"sm",children:[u.jsx(Kt,{value:"linear",text:"linear"}),u.jsx(Kt,{value:"exponential",text:"exponential"})]})})]}),u.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",alignItems:"flex-start",paddingLeft:i?0:"0.5rem"},children:[u.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem",color:"var(--color-text-primary)"},children:["portamento amount: ",d.portamentoAmount,"%"]}),u.jsx(vn,{id:"multisample-portamento-amount",min:0,max:100,step:1,value:d.portamentoAmount,onChange:({value:M})=>y("portamentoAmount",M),hideTextInput:!0})]})]})]})]}),u.jsxs("section",{style:{border:"1px solid var(--color-border-light)",borderRadius:"6px",marginBottom:"0.75rem",overflow:"hidden",background:"var(--color-bg-primary)"},children:[u.jsxs("div",{onClick:()=>O("envelopes"),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.25rem",background:"var(--color-bg-secondary)",cursor:"pointer",userSelect:"none",borderBottom:m.envelopes?"1px solid var(--color-border-light)":"none",transition:"background 0.2s",borderRadius:"6px 6px 0 0",overflow:"hidden"},children:[u.jsx("h4",{style:{margin:0,color:"var(--color-text-primary)",fontWeight:"500",fontSize:"1rem",letterSpacing:"0.01em"},children:"envelopes and filters"}),u.jsx("i",{className:"fas fa-chevron-right",style:{color:"var(--color-text-secondary)",fontSize:"1rem",transition:"transform 0.2s cubic-bezier(0.4,0,0.2,1)",transform:m.envelopes?"rotate(90deg)":"rotate(0deg)"}})]}),m.envelopes&&u.jsxs("div",{style:{display:"flex",flexDirection:i?"column":"row",gap:i?"1.5rem":"3rem",padding:"1rem",border:"1px solid var(--color-border-light)"},children:[u.jsx("div",{style:{flex:i?"1":"1 1 50%",minWidth:0},children:u.jsx(x2,{ampEnvelope:d.ampEnvelope,filterEnvelope:d.filterEnvelope,onAmpEnvelopeChange:E,onFilterEnvelopeChange:R})}),u.jsxs("div",{style:{flex:i?"1":"1 1 50%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:i?"200px":"300px",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-panel)",color:"var(--color-text-secondary)"},children:[u.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"500",marginBottom:"0.5rem",textAlign:"center"},children:"filters"}),u.jsx("div",{style:{fontSize:"0.9rem",opacity:.7,textAlign:"center"},children:"coming soon"})]})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:i?"center":"flex-end",flexDirection:i?"column":"row",marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid var(--color-border-light)"},children:[u.jsxs("button",{onClick:x,disabled:!N,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:N?"var(--color-interactive-secondary)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:N?"pointer":"not-allowed",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:N?1:.6,width:i?"100%":"auto"},onMouseEnter:M=>{N&&(M.currentTarget.style.backgroundColor="var(--color-bg-secondary)",M.currentTarget.style.borderColor="var(--color-border-medium)",M.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:M=>{N&&(M.currentTarget.style.backgroundColor="var(--color-bg-primary)",M.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",M.currentTarget.style.color="var(--color-interactive-secondary)")},children:[u.jsx("i",{className:"fas fa-undo",style:{fontSize:"1rem"}}),"reset settings"]}),u.jsxs("button",{onClick:w,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",width:i?"100%":"auto"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="var(--color-interactive-dark)"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="var(--color-interactive-focus)"},children:[u.jsx("i",{className:"fas fa-upload",style:{fontSize:"1rem"}}),"import patch.json"]})]}),u.jsx("input",{ref:r,type:"file",accept:".json",onChange:S,style:{display:"none"}})]}),u.jsx("style",{children:`
        #multisample-transpose .cds--slider__track,
        #multisample-velocity-sensitivity .cds--slider__track,
        #multisample-volume .cds--slider__track,
        #multisample-width .cds--slider__track,
        #multisample-highpass .cds--slider__track,
        #multisample-portamento-amount .cds--slider__track {
          background: linear-gradient(to right, var(--color-bg-slider-track) 0%, var(--color-interactive-secondary) 100%) !important;
        }
        #multisample-transpose .cds--slider__filled-track,
        #multisample-velocity-sensitivity .cds--slider__filled-track,
        #multisample-volume .cds--slider__filled-track,
        #multisample-width .cds--slider__filled-track,
        #multisample-highpass .cds--slider__filled-track,
        #multisample-portamento-amount .cds--slider__filled-track {
          background: var(--color-interactive-dark) !important;
        }
        #multisample-transpose .cds--slider__thumb,
        #multisample-velocity-sensitivity .cds--slider__thumb,
        #multisample-volume .cds--slider__thumb,
        #multisample-width .cds--slider__thumb,
        #multisample-highpass .cds--slider__thumb,
        #multisample-portamento-amount .cds--slider__thumb {
          background: var(--color-interactive-dark) !important;
          border: 2px solid var(--color-interactive-dark) !important;
        }
        #multisample-transpose .cds--slider__thumb:hover,
        #multisample-velocity-sensitivity .cds--slider__thumb:hover,
        #multisample-volume .cds--slider__thumb:hover,
        #multisample-width .cds--slider__thumb:hover,
        #multisample-highpass .cds--slider__thumb:hover,
        #multisample-portamento-amount .cds--slider__thumb:hover {
          background: var(--color-text-primary) !important;
          border-color: var(--color-text-primary) !important;
        }
      `})]})}function w2({assignedNotes:a=[],onKeyClick:n,onKeyRelease:r,onUnassignedKeyClick:i,onKeyDrop:s,className:c="",loadedSamplesCount:d=0,isPinned:f,onTogglePin:m,selectedMidiChannel:h,onMidiChannelChange:b,isActive:w=!0}){const{state:S}=un(),x=L.useRef(null),y=L.useRef(null),g=L.useRef(null),[E,R]=L.useState(null),[O,A]=L.useState(null),[N,M]=L.useState(!1),[z,F]=L.useState({}),[B,I]=L.useState(0),[W,ee]=L.useState(!1),[C,J]=L.useState(window.innerWidth<=768),[_,K]=L.useState(4),[P,Y]=L.useState(new Set),[oe,te]=L.useState(null),{onMidiEvent:U,state:k,initialize:$,refreshDevices:Z}=pc(),[le,q]=L.useState(!1),[Ee,Fe]=L.useState(h||1),[pe,de]=L.useState(new Set),[Re,me]=L.useState(new Set);L.useEffect(()=>{!k.isInitialized&&!k.isConnecting&&$()},[k.isInitialized,k.isConnecting,$]),L.useEffect(()=>{const Be=()=>{!document.hidden&&k.isInitialized&&Z()};return document.addEventListener("visibilitychange",Be),()=>{document.removeEventListener("visibilitychange",Be)}},[k.isInitialized,Z]);const _e=k.devices.filter(Be=>Be.type==="input"&&Be.state==="connected"),Ae=k.isInitialized&&_e.length>0,[T,G]=L.useState(!1),[X,j]=L.useState(0),[H,Q]=L.useState(0),ue={a:0,s:2,d:4,f:5,g:7,h:9,j:11,w:1,e:3,t:6,y:8,u:10},ye=L.useCallback(Be=>{K(Ke=>Be==="up"&&Ke<8?Ke+1:Be==="down"&&Ke>-2?Ke-1:Ke)},[]),ie=L.useCallback(()=>{const Be=g.current;if(!Be)return;const Ke=7*24,Xe=(_+1)*Ke,Ye=Be.clientWidth,ht=Xe-Ye/2+Ke/2;Be.scrollTo({left:Math.max(0,ht),behavior:"smooth"})},[_]);L.useEffect(()=>{const Be=()=>{const Xe=document.activeElement;return Xe&&(Xe.tagName==="INPUT"||Xe.tagName==="TEXTAREA"||Xe.hasAttribute("contenteditable"))},Ke=Xe=>{if(Be())return;const Ye=Xe.key.toLowerCase();if((Ye in ue||Ye==="z"||Ye==="x")&&Xe.preventDefault(),Ye==="z"){Y(ht=>new Set([...ht,Ye])),ye("down");return}if(Ye==="x"){Y(ht=>new Set([...ht,Ye])),ye("up");return}if(Ye in ue&&!P.has(Ye)&&!pe.has(Ye)){const ht=ue[Ye],wt=_*12+24+ht;wt>=0&&wt<=127&&a.includes(wt)&&(Y(gt=>new Set([...gt,Ye])),n?.(wt))}},at=Xe=>{if(Be())return;const Ye=Xe.key.toLowerCase();if((Ye in ue||Ye==="z"||Ye==="x")&&(Y(ht=>{const wt=new Set(ht);return wt.delete(Ye),wt}),Ye in ue)){const ht=ue[Ye],wt=_*12+24+ht;wt>=0&&wt<=127&&a.includes(wt)&&r?.(wt)}};return document.addEventListener("keydown",Ke),document.addEventListener("keyup",at),()=>{document.removeEventListener("keydown",Ke),document.removeEventListener("keyup",at)}},[_,P,ue,ye,a,n,r,i]);const ge=L.useCallback(Be=>{if(Math.floor((Be-24)/12)!==_)return null;const at=(Be-24)%12;for(const[Xe,Ye]of Object.entries(ue))if(Ye===at)return Xe.toUpperCase();return null},[_,ue]),Oe=()=>{q(!1);const Be=document.querySelector(".virtual-midi-keyboard .midi-device-selector");Be&&(Be.style.display="none")},Le=L.useCallback(Be=>{if(Be.type==="noteon"||Be.type==="noteoff"){const Ke=Be.note;if(Be.type==="noteon"&&Be.velocity>0){a.includes(Ke)&&n?.(Ke),Oe(),me(Xe=>new Set([...Xe,Ke]));const at=ge(Ke);if(at){const Xe=at.toLowerCase();de(Ye=>new Set([...Ye,Xe])),Y(Ye=>new Set([...Ye,Xe]))}setTimeout(()=>{me(Xe=>{const Ye=new Set(Xe);return Ye.delete(Ke),Ye}),at&&setTimeout(()=>{Y(Xe=>{const Ye=new Set(Xe);return Ye.delete(at.toLowerCase()),Ye}),de(Xe=>{const Ye=new Set(Xe);return Ye.delete(at.toLowerCase()),Ye})},50)},Y0.VISUAL_FEEDBACK_TIMEOUT)}else{me(Xe=>{const Ye=new Set(Xe);return Ye.delete(Ke),Ye}),a.includes(Ke)&&r?.(Ke);const at=ge(Ke);if(at){const Xe=at.toLowerCase();Y(Ye=>{const ht=new Set(Ye);return ht.delete(Xe),ht}),de(Ye=>{const ht=new Set(Ye);return ht.delete(Xe),ht})}}}},[a,n,i,ge,Oe]);L.useEffect(()=>{if(k.isInitialized&&w&&Ae&&Ee){const Be=U(Le,Ee);return()=>{Be()}}},[Ae,Ee,U,Le,w]),L.useEffect(()=>{ie()},[_,ie]),L.useEffect(()=>{!f&&N&&(F({}),M(!1))},[f,N]),L.useEffect(()=>{const Be=x.current,Ke=y.current,at=()=>{if(!(!f||!Be||!Ke))if(N)Ke.getBoundingClientRect().top>10&&(F({}),M(!1));else{const Xe=Be.getBoundingClientRect();if(Xe.top<=10){const{height:Ye,left:ht,width:wt}=Xe;I(Ye),F({left:`${ht}px`,width:`${wt}px`}),M(!0)}}};return window.addEventListener("scroll",at,{passive:!0}),!f&&N&&(F({}),M(!1)),()=>window.removeEventListener("scroll",at)},[f,N]),L.useEffect(()=>{const Be=()=>J(window.innerWidth<=768);return window.addEventListener("resize",Be),()=>window.removeEventListener("resize",Be)},[]);const De="18px",He=C?u.jsxs(u.Fragment,{children:[u.jsxs("h3",{children:[u.jsx("i",{className:"fas fa-keyboard",style:{marginRight:"0.5rem"}}),"keyboard controls"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"load:"})," tap empty keys to browse and select files"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"play:"})," tap keys to play loaded samples"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"pin:"})," use the pin icon to keep the keyboard at the top of the screen"]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("h3",{children:[u.jsx("i",{className:"fas fa-keyboard",style:{marginRight:"0.5rem"}}),"keyboard controls"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"load:"})," click empty keys to browse files or drag & drop audio onto any key"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"play:"})," use keyboard keys (",u.jsx("strong",{children:"A-J, W, E, T, Y, U"}),") & ",u.jsx("strong",{children:"Z/X"})," to change octave"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"pin:"})," keep the keyboard fixed using the pin icon"]})]}),Ie={border:"1px solid var(--color-border-subtle)",borderRadius:"15px",backgroundColor:"var(--color-bg-primary)",boxShadow:"0 2px 8px var(--color-shadow-primary)",overflow:"hidden",position:N?"fixed":"relative",top:N?"10px":void 0,zIndex:N?1e3:void 0,...z},Ve=L.useCallback(Be=>{R(Be)},[]),Ct=L.useCallback(()=>{R(null)},[]),$e=L.useCallback((Be,Ke)=>{Be.preventDefault(),Be.stopPropagation(),Be.dataTransfer.types.includes("Files")&&A(Ke)},[]),Je=L.useCallback(Be=>{Be.preventDefault(),Be.stopPropagation(),A(null)},[]),Pe=L.useCallback((Be,Ke)=>{Be.preventDefault(),Be.stopPropagation(),A(null);const Xe=Array.from(Be.dataTransfer.files).filter(Ye=>Ye.type==="audio/wav"||Ye.name.toLowerCase().endsWith(".wav"));Xe.length>0&&s?.(Ke,Xe)},[s]),Et=L.useCallback(Be=>{const Ke=a.includes(Be);return{onMouseDown:()=>{T||(te(Be),Ke?n?.(Be):i?.(Be))},onMouseUp:()=>{te(null),Ke&&r?.(Be)},onMouseLeave:()=>{te(null),Ct(),Ke&&r?.(Be)},onTouchStart:()=>{Ke?n?.(Be):i?.(Be)},onTouchEnd:()=>{Ke&&r?.(Be)},onMouseEnter:()=>Ve(Be),onDragOver:at=>$e(at,Be),onDragLeave:Je,onDrop:at=>Pe(at,Be)}},[a,T,n,r,i,Ct,Ve,$e,Je,Pe]),Qt=L.useCallback(Be=>{G(!0),j(Be.clientX),Q(g.current?.scrollLeft||0),Be.preventDefault()},[]),zt=L.useCallback(()=>{G(!1)},[]),Nn=L.useCallback(()=>{G(!1)},[]);L.useEffect(()=>{const Be=()=>{G(!1)},Ke=at=>{if(!T||!g.current)return;const Xe=at.clientX-X;g.current.scrollLeft=H-Xe,at.preventDefault()};if(T)return document.addEventListener("mouseup",Be),document.addEventListener("mousemove",Ke),()=>{document.removeEventListener("mouseup",Be),document.removeEventListener("mousemove",Ke)}},[T,X,H]);const Ur=()=>{const Be=[];for(let Ke=-2;Ke<=8;Ke++){const at=[],Xe=[0,2,4,5,7,9,11];for(let ht=0;ht<Xe.length;ht++){const wt=Xe[ht],gt=Ke*12+24+wt;if(gt<0||gt>127)continue;const nn=a.includes(gt),Kn=E===gt,sr=O===gt,$t=ge(gt),Ot=$t&&P.has($t.toLowerCase())||oe===gt||Re.has(gt),ut={base:nn?"var(--color-bg-primary)":"var(--color-key-inactive-white-bg)",hover:"var(--color-surface-secondary)",pressed:Ot?"linear-gradient(to top, var(--color-border-subtle) 0%, var(--color-bg-primary) 70%, var(--color-bg-primary) 100%)":"var(--color-interactive-secondary)",dragOver:"var(--color-interactive-focus-ring)"},On=Et(gt);at.push(u.jsx("div",{className:"midi-key white-key",style:{position:"relative",width:"24px",height:"120px",...sr?{backgroundColor:ut.dragOver}:Ot&&ut.pressed.startsWith("linear-gradient")?{background:ut.pressed}:Ot?{backgroundColor:ut.pressed}:Kn?{backgroundColor:ut.hover}:{backgroundColor:ut.base},border:sr?"2px solid var(--color-text-secondary)":`1px solid ${nn?"var(--color-black)":"var(--color-key-inactive-border)"}`,borderRadius:"0 0 4px 4px",cursor:"pointer",display:"flex",alignItems:"flex-end",justifyContent:"center",fontSize:"9px",fontWeight:"500",color:nn?"var(--color-black)":"var(--color-key-inactive-white-bg)",padding:"2px",transition:"all 0.1s ease",userSelect:"none",boxShadow:Kn?"0 2px 4px rgba(0,0,0,0.1)":"0 2px 6px rgba(0,0,0,0.3)"},...On,children:wt===0&&u.jsxs("span",{style:{fontSize:"10px",fontWeight:"600",color:nn?"var(--color-black)":"var(--color-text-secondary)"},children:["C",S.midiNoteMapping==="C4"?Ke+1:Ke]})},`white-${gt}`))}const Ye=[{noteInOctave:1,position:17},{noteInOctave:3,position:41},{noteInOctave:6,position:89},{noteInOctave:8,position:113},{noteInOctave:10,position:137}];for(const{noteInOctave:ht,position:wt}of Ye){const gt=Ke*12+24+ht;if(gt<0||gt>127)continue;const nn=a.includes(gt),Kn=E===gt,sr=O===gt,$t=ge(gt),Ot=$t&&P.has($t.toLowerCase())||oe===gt||Re.has(gt),ut={base:nn?"var(--color-interactive-dark)":"var(--color-key-inactive-black-bg)",hover:"var(--color-interactive-dark)",pressed:Ot?"linear-gradient(to top, var(--color-key-inactive-black-bg) 0%, var(--color-interactive-dark) 70%, var(--color-interactive-dark) 100%)":"var(--color-interactive-secondary)",dragOver:"var(--color-interactive-secondary)"},On=Et(gt);at.push(u.jsx("div",{className:"midi-key black-key",style:{position:"absolute",left:`${wt}px`,top:"0",width:"14px",height:"75px",...sr?{backgroundColor:ut.dragOver}:Ot&&ut.pressed.startsWith("linear-gradient")?{background:ut.pressed}:Ot?{backgroundColor:ut.pressed}:Kn?{backgroundColor:ut.hover}:{backgroundColor:ut.base},border:sr?"2px solid var(--color-text-secondary)":`1px solid ${nn?"var(--color-interactive-focus)":"var(--color-key-inactive-border)"}`,borderRadius:"0 0 2px 2px",cursor:"pointer",zIndex:2,userSelect:"none",boxShadow:Kn?"0 3px 8px rgba(0,0,0,0.5)":"0 2px 4px rgba(0,0,0,0.3)"},...On},`black-${gt}`))}Be.push(u.jsx("div",{style:{position:"relative",display:"flex"},children:at},`octave-${Ke}`))}return Be};return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:y,style:{display:N?"block":"none",height:`${B}px`,background:"var(--color-surface-primary)"}}),u.jsxs("div",{ref:x,className:`virtual-midi-keyboard ${f?"pinned":""} ${c}`,style:Ie,children:[u.jsx("div",{style:{position:"absolute",left:0,top:"60px",bottom:0,width:"30px",background:"linear-gradient(to right, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))",zIndex:10,pointerEvents:"none"}}),u.jsx("div",{style:{position:"absolute",right:0,top:"60px",bottom:0,width:"30px",background:"linear-gradient(to left, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))",zIndex:10,pointerEvents:"none"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[u.jsx("h3",{style:{margin:0,color:"var(--color-text-primary)",fontSize:"1.25rem",fontWeight:300},children:"load and play samples"}),u.jsx(Zi,{isVisible:W,content:He,children:u.jsx("span",{style:{display:"flex"},onClick:Be=>{Be.stopPropagation(),ee(!W)},onMouseEnter:()=>ee(!0),onMouseLeave:()=>ee(!1),children:u.jsx("i",{className:"fas fa-question-circle",style:{fontSize:De,color:"var(--color-text-secondary)",cursor:"help"}})})})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:[!C&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:500},children:[u.jsx("i",{className:"fas fa-check-circle",style:{color:"var(--color-text-secondary)",fontSize:De}}),d," / 24 loaded"]}),u.jsxs("button",{onClick:()=>{q(!le);const Be=document.querySelector(".virtual-midi-keyboard .midi-device-selector");Be&&(Be.style.display=le?"none":"block")},style:{background:le?"var(--color-interactive-focus)":k.devices.filter(Be=>Be.type==="input"&&Be.state==="connected").length>0?"var(--color-text-primary)":"var(--color-text-secondary)",border:"none",cursor:"pointer",padding:"0.25rem 0.5rem",borderRadius:"3px",display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.875rem",color:"var(--color-white)",transition:"all 0.2s ease",fontFamily:'"Montserrat", "Arial", sans-serif',fontWeight:500,minHeight:"32px"},onMouseEnter:Be=>{const Ke=k.devices.filter(at=>at.type==="input"&&at.state==="connected").length>0;Be.currentTarget.style.backgroundColor=le?"var(--color-interactive-dark)":"var(--color-interactive-focus)"},onMouseLeave:Be=>{const Ke=k.devices.filter(at=>at.type==="input"&&at.state==="connected").length>0;Be.currentTarget.style.backgroundColor=le?"var(--color-interactive-focus)":Ke?"var(--color-text-primary)":"var(--color-text-secondary)"},title:"connect midi devices",children:[u.jsx("i",{className:"fas fa-plug",style:{fontSize:"0.75rem"}}),u.jsx("span",{children:"midi"})]})]}),u.jsx("button",{onClick:m,className:"pin-button",style:{background:"none",border:"none",cursor:"pointer",padding:4,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:f?"Unpin keyboard":"Pin keyboard to top",children:u.jsx("i",{className:"fas fa-thumbtack",style:{fontSize:De}})})]})]}),u.jsx("div",{className:"midi-device-selector",style:{display:le?"block":"none",padding:"0.75rem 1rem",backgroundColor:"var(--color-bg-primary)",borderBottom:"1px solid var(--color-border-light)"},children:u.jsx(Sb,{showInputsOnly:!0,onChannelChange:Be=>{Fe(Be),localStorage.setItem("midi-channel",Be.toString()),b?.(Be)}})}),u.jsx("div",{ref:g,className:"hide-scrollbar",style:{backgroundColor:"#fff",border:"none",borderRadius:"0",padding:"1rem",overflowX:"auto",overflowY:"hidden",position:"relative",cursor:T?"grabbing":"grab",userSelect:"none"},onMouseDown:Qt,onMouseUp:zt,onMouseLeave:Nn,children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",minWidth:"1400px",height:"120px",position:"relative"},children:[Ur(),!C&&!Ae&&(()=>{let ht,wt,gt,nn;return _===-2?(ht=0,wt=192,gt=0,nn=168):_>=8?(ht=10*168-24,wt=144,gt=24,nn=120):(ht=(_+2)*168-24,wt=168+2*24,gt=24,nn=168),u.jsxs("div",{style:{position:"absolute",left:`${ht}px`,top:"10px",width:`${wt}px`,height:"24px",backgroundColor:"#fff",border:"2px solid #000",borderRadius:"3px",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.4)",zIndex:15,pointerEvents:"none",opacity:d>0?1:0,transition:"left 0.3s ease-in-out, width 0.3s ease-in-out, opacity 0.75s ease-in-out"},children:[u.jsxs("div",{style:{position:"absolute",left:`${gt}px`,width:`${nn}px`,height:"100%"},children:[u.jsx("div",{style:{position:"absolute",left:"9px",top:"65%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("a")?"700":"600",color:P.has("a")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("a")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"A"}),u.jsx("div",{style:{position:"absolute",left:"24px",top:"35%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("w")?"700":"600",color:P.has("w")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("w")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"W"}),u.jsx("div",{style:{position:"absolute",left:"36px",top:"65%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("s")?"700":"600",color:P.has("s")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("s")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"S"}),u.jsx("div",{style:{position:"absolute",left:"48px",top:"35%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("e")?"700":"600",color:P.has("e")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("e")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"E"}),u.jsx("div",{style:{position:"absolute",left:"63px",top:"65%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("d")?"700":"600",color:P.has("d")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("d")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"D"}),u.jsx("div",{style:{position:"absolute",left:"81px",top:"65%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("f")?"700":"600",color:P.has("f")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("f")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"F"}),u.jsx("div",{style:{position:"absolute",left:"96px",top:"35%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("t")?"700":"600",color:P.has("t")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("t")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"T"}),u.jsx("div",{style:{position:"absolute",left:"108px",top:"65%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("g")?"700":"600",color:P.has("g")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("g")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"G"}),_<8&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"absolute",left:"120px",top:"35%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("y")?"700":"600",color:P.has("y")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("y")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"Y"}),u.jsx("div",{style:{position:"absolute",left:"132px",top:"65%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("h")?"700":"600",color:P.has("h")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("h")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"H"}),u.jsx("div",{style:{position:"absolute",left:"144px",top:"35%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("u")?"700":"600",color:P.has("u")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("u")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"U"}),u.jsx("div",{style:{position:"absolute",left:"159px",top:"65%",transform:"translate(-50%, -50%)",fontSize:"10px",fontWeight:P.has("j")?"700":"600",color:P.has("j")?"var(--color-interactive-secondary)":"#000",letterSpacing:"0.5px",lineHeight:"1",textShadow:P.has("j")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"J"})]})]})," ",_>-2&&u.jsx("div",{style:{position:"absolute",left:"4px",top:"50%",transform:"translateY(-50%)",fontSize:"10px",fontWeight:P.has("z")?"700":"600",color:P.has("z")?"var(--color-interactive-secondary)":"#000",letterSpacing:"-0.5px",lineHeight:"1",textShadow:P.has("z")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:"Z "}),_<8&&u.jsx("div",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",fontSize:"10px",fontWeight:P.has("x")?"700":"600",color:P.has("x")?"var(--color-interactive-secondary)":"#000",letterSpacing:"-0.5px",lineHeight:"1",textShadow:P.has("x")?"0 0 2px rgba(51, 51, 51, 0.8)":"none",transition:"all 0.1s ease, opacity 1.5s ease-in-out"},children:" X"})]})})()]})})]})]})}function E2(){const{state:a,dispatch:n}=un(),{handleMultisampleUpload:r,clearMultisampleFile:i}=hb(),{generateMultisamplePatchFile:s}=vb(),{playWithADSR:c,releaseNote:d}=hs(),f=L.useRef(null),m=L.useRef(null),[h,b]=L.useState(!1),[w,S]=L.useState({isOpen:!1,message:"",onConfirm:async()=>{}}),[x,y]=L.useState({isOpen:!1,targetIndex:null}),[g,E]=L.useState(null),[R,O]=L.useState(()=>{const G=localStorage.getItem("midi-channel");return G?parseInt(G,10):1}),{isMultisampleKeyboardPinned:A}=a,N=L.useCallback(()=>{n({type:"TOGGLE_MULTISAMPLE_KEYBOARD_PIN"})},[n]);L.useEffect(()=>{try{kn.setCookie(Sn.MULTISAMPLE_KEYBOARD_PINNED,String(A))}catch(G){console.warn("Failed to save multisample keyboard pin state to cookie:",G)}},[A]);const M=L.useMemo(()=>{const G=new Map;if(a.multisampleFiles.length===0)return G;for(let X=0;X<=127;X++){const j=a.multisampleFiles.find(H=>H.rootNote>=X);j&&G.set(X,{rootNote:j.rootNote,pitchOffset:X-j.rootNote})}return G},[a.multisampleFiles]);L.useEffect(()=>{const G=()=>{b(window.innerWidth<768)};return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]);const z=G=>{n({type:"SET_MULTISAMPLE_SAMPLE_RATE",payload:parseInt(G,10)})},F=G=>{n({type:"SET_MULTISAMPLE_BIT_DEPTH",payload:parseInt(G,10)})},B=G=>{n({type:"SET_MULTISAMPLE_CHANNELS",payload:parseInt(G,10)})},I=G=>{n({type:"SET_MULTISAMPLE_PRESET_NAME",payload:G.target.value})},W=G=>{n({type:"SET_MULTISAMPLE_NORMALIZE",payload:G})},ee=G=>{n({type:"SET_MULTISAMPLE_NORMALIZE_LEVEL",payload:G})},C=G=>{n({type:"SET_MULTISAMPLE_GAIN",payload:G})},J=G=>{n({type:"SET_MULTISAMPLE_CUT_AT_LOOP_END",payload:G})},_=()=>{S({isOpen:!0,message:"are you sure you want to reset all audio processing settings to defaults?",onConfirm:()=>{n({type:"SET_MULTISAMPLE_SAMPLE_RATE",payload:0}),n({type:"SET_MULTISAMPLE_BIT_DEPTH",payload:0}),n({type:"SET_MULTISAMPLE_CHANNELS",payload:0}),n({type:"SET_MULTISAMPLE_NORMALIZE",payload:!1}),n({type:"SET_MULTISAMPLE_NORMALIZE_LEVEL",payload:-6}),n({type:"SET_MULTISAMPLE_CUT_AT_LOOP_END",payload:!1}),n({type:"SET_MULTISAMPLE_GAIN",payload:0}),n({type:"SET_MULTISAMPLE_LOOP_ENABLED",payload:!0}),n({type:"SET_MULTISAMPLE_LOOP_ON_RELEASE",payload:!0}),S({isOpen:!1,message:"",onConfirm:async()=>{}})}})},K=async G=>{for(const X of G)await r(X)},P=async(G,X)=>{try{await r(X)}catch(j){console.error("Error uploading file:",j)}},Y=G=>{S({isOpen:!0,message:"are you sure you want to clear this sample?",onConfirm:async()=>{i(G),S({isOpen:!1,message:"",onConfirm:async()=>{}})}})},oe=async()=>{try{const G=await _b(a,a.multisampleSettings.presetName,"multisample");G.success?(n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"preset saved",message:`"${a.multisampleSettings.presetName}" saved to library`}}),window.dispatchEvent(new CustomEvent("library-refresh"))):n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"save failed",message:G.error||"failed to save preset to library"}})}catch(G){console.error("Error saving to library:",G),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"save failed",message:"failed to save preset to library"}})}},te=async()=>{try{const G=a.multisampleSettings.presetName.trim()||"multisample_patch";await s(G)}catch(G){console.error("Error downloading preset:",G)}},U=()=>{try{iE(a.multisampleSettings,a.importedMultisamplePreset),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"settings saved",message:"multisample settings saved as default"}})}catch(G){console.error("Error saving settings as default:",G),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"save failed",message:"failed to save settings as default"}})}},k=async()=>{S({isOpen:!0,message:"are you sure you want to clear all loaded samples?",onConfirm:async()=>{for(let G=a.multisampleFiles.length-1;G>=0;G--)i(G);await Zt.resetSavedToLibraryFlag(),S({isOpen:!1,message:"",onConfirm:async()=>{}})}})},$=async()=>{S({isOpen:!0,message:"are you sure you want to reset everything to defaults? this will clear all samples, reset preset name and audio settings.",onConfirm:async()=>{for(let G=a.multisampleFiles.length-1;G>=0;G--)i(G);n({type:"SET_MULTISAMPLE_PRESET_NAME",payload:""}),n({type:"SET_MULTISAMPLE_SAMPLE_RATE",payload:0}),n({type:"SET_MULTISAMPLE_BIT_DEPTH",payload:0}),n({type:"SET_MULTISAMPLE_CHANNELS",payload:0}),n({type:"SET_MULTISAMPLE_NORMALIZE",payload:!1}),n({type:"SET_MULTISAMPLE_NORMALIZE_LEVEL",payload:-6}),n({type:"SET_MULTISAMPLE_CUT_AT_LOOP_END",payload:!1}),n({type:"SET_MULTISAMPLE_GAIN",payload:0}),n({type:"SET_MULTISAMPLE_LOOP_ENABLED",payload:!0}),n({type:"SET_MULTISAMPLE_LOOP_ON_RELEASE",payload:!0}),n({type:"SET_MULTISAMPLE_RENAME_FILES",payload:!1}),n({type:"SET_MULTISAMPLE_FILENAME_SEPARATOR",payload:" "}),await Zt.resetSavedToLibraryFlag(),S({isOpen:!1,message:"",onConfirm:async()=>{}})}})},Z=(G=null)=>{y({isOpen:!0,targetIndex:G})},le=()=>{y({isOpen:!1,targetIndex:null})},q=async(G,X)=>{try{const j=await ls(G,16,{rootNote:g??60,loopStart:0,loopEnd:G.length-1}),H=new File([j],`${X}.wav`,{type:"audio/wav"});g!==null?await r(H,g):await r(H),E(null)}catch(j){console.error("Error saving recording:",j)}},Ee=async G=>{const X=G.target.files?.[0];if(X&&(G.target.value="",g!==null))try{await r(X,g),E(null)}catch(j){console.error("Error uploading file for MIDI note assignment:",j),E(null)}},Fe=L.useCallback(async G=>{const X=M.get(G);if(!X)return;const{rootNote:j,pitchOffset:H}=X,Q=a.multisampleFiles.find(ue=>ue.rootNote===j);if(Q&&Q.audioBuffer)try{const ue=Math.pow(2,H/12),ye=a.importedMultisamplePreset?.envelope?.amp||{attack:0,decay:0,sustain:32767,release:0},ie=a.importedMultisamplePreset?.engine?.playmode||"poly",ge=`multisample-${G}-${Date.now()}`;await c(Q.audioBuffer,ge,{playbackRate:ue,gain:a.multisampleSettings.gain||0,pan:0,adsr:ye,playMode:ie,velocity:127})}catch(ue){console.error("Error playing pitched sample:",ue)}},[M,a.multisampleFiles,c,a.multisampleSettings.gain,a.importedMultisamplePreset]),pe=L.useCallback(G=>{const X=window.opPatchstudioActiveNotes||[];Array.isArray(X)?X.filter(j=>j.startsWith(`multisample-${G}`)).forEach(j=>d(j)):d(`multisample-${G}-`)},[d]),de=L.useCallback(G=>{E(G),f.current?.click()},[]),Re=L.useCallback(async(G,X)=>{if(X.length>0&&a.multisampleFiles.length<24){const j=X[0];await r(j,G)}},[a.multisampleFiles.length,r]),me=a.multisampleFiles.length>0,_e=a.multisampleSettings.presetName.trim().length>0,Ae=me&&_e,T=me||_e||a.multisampleSettings.sampleRate!==0||a.multisampleSettings.bitDepth!==0||a.multisampleSettings.channels!==0||a.multisampleSettings.normalize!==!1||a.multisampleSettings.normalizeLevel!==-6||a.multisampleSettings.renameFiles!==!1||a.multisampleSettings.filenameSeparator!==" "||a.multisampleSettings.cutAtLoopEnd!==!1;return u.jsxs("div",{style:{fontFamily:'"Montserrat", "Arial", sans-serif',display:"flex",flexDirection:"column",height:"100%"},children:[u.jsx("input",{ref:f,type:"file",accept:"audio/*,.wav",onChange:Ee,style:{display:"none"}}),u.jsxs("div",{style:{padding:h?"1rem 0.5rem":"2rem 2rem"},children:[u.jsx(h2,{message:a.error||""}),u.jsx("div",{style:{position:"relative"},children:u.jsx(w2,{assignedNotes:Array.from(M.keys()),onKeyClick:Fe,onKeyRelease:pe,onUnassignedKeyClick:de,onKeyDrop:Re,loadedSamplesCount:a.multisampleFiles.length,isPinned:A,onTogglePin:N,selectedMidiChannel:R,onMidiChannelChange:G=>{O(G),localStorage.setItem("midi-channel",G.toString())},isActive:a.currentTab==="multisample"})})]}),u.jsx("div",{style:{flex:1,padding:h?"0 0.5rem":"0 2rem",marginBottom:"1rem"},children:u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",marginBottom:"1rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:h?"0.5rem 1rem 0.5rem 1rem":"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:[u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300,textTransform:"lowercase",letterSpacing:0},children:"sample management"})}),u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:u.jsx(cb,{leftLabel:"c3=60",rightLabel:"c4=60",isRight:a.midiNoteMapping==="C4",onToggle:()=>{n({type:"SET_MIDI_NOTE_MAPPING",payload:a.midiNoteMapping==="C3"?"C4":"C3"})}})})]}),u.jsxs("div",{style:{padding:0},children:[u.jsx(g2,{onFileUpload:P,onClearSample:Y,onRecordSample:Z,onFilesSelected:K,onBrowseFilesRef:m}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",background:"var(--color-bg-primary)",borderTop:"1px solid var(--color-border-light)",padding:"1.75rem",margin:0,width:"100%",boxSizing:"border-box"},children:[u.jsxs("button",{onClick:k,disabled:!me,style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:me?"var(--color-interactive-secondary)":"var(--color-border-medium)",fontSize:"0.9rem",fontWeight:"500",cursor:me?"pointer":"not-allowed",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",opacity:me?1:.6,marginRight:"1rem"},onMouseEnter:G=>{me&&(G.currentTarget.style.backgroundColor="var(--color-bg-secondary)",G.currentTarget.style.borderColor="var(--color-border-medium)",G.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:G=>{me&&(G.currentTarget.style.backgroundColor="var(--color-bg-primary)",G.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",G.currentTarget.style.color="var(--color-interactive-secondary)")},children:[u.jsx("i",{className:"fas fa-trash",style:{fontSize:"1rem"}}),"clear all"]}),u.jsxs("button",{onClick:()=>y({isOpen:!0,targetIndex:null}),style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"1px solid var(--color-interactive-focus-ring)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-interactive-secondary)",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",marginRight:"1rem"},onMouseEnter:G=>{G.currentTarget.style.backgroundColor="var(--color-bg-secondary)",G.currentTarget.style.borderColor="var(--color-border-medium)",G.currentTarget.style.color="var(--color-interactive-dark)"},onMouseLeave:G=>{G.currentTarget.style.backgroundColor="var(--color-bg-primary)",G.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",G.currentTarget.style.color="var(--color-interactive-secondary)"},children:[u.jsx("i",{className:"fas fa-microphone",style:{fontSize:"1rem",color:"var(--color-accent-primary)"}}),"record"]}),u.jsxs("button",{onClick:()=>{m.current&&m.current()},style:{minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},onMouseEnter:G=>{G.currentTarget.style.backgroundColor="var(--color-interactive-dark)"},onMouseLeave:G=>{G.currentTarget.style.backgroundColor="var(--color-interactive-focus)"},children:[u.jsx("i",{className:"fas fa-folder-open",style:{fontSize:"1rem"}}),"browse"]})]})]})]})}),u.jsx("div",{style:{padding:h?"0 0.5rem":"0 2rem",marginTop:"0.25rem"},children:u.jsx(S2,{})}),u.jsx("div",{style:{padding:h?"0 0.5rem":"0 2rem",marginTop:"0.25rem"},children:u.jsx(lb,{type:"multisample",sampleRate:a.multisampleSettings.sampleRate,bitDepth:a.multisampleSettings.bitDepth,channels:a.multisampleSettings.channels,onSampleRateChange:z,onBitDepthChange:F,onChannelsChange:B,samples:a.multisampleFiles,normalize:a.multisampleSettings.normalize,normalizeLevel:a.multisampleSettings.normalizeLevel,onNormalizeChange:W,onNormalizeLevelChange:ee,autoZeroCrossing:a.multisampleSettings.autoZeroCrossing,onAutoZeroCrossingChange:()=>{n({type:"APPLY_ZERO_CROSSING_TO_ALL_MULTISAMPLE_FILES"})},gain:a.multisampleSettings.gain,onGainChange:C,cutAtLoopEnd:a.multisampleSettings.cutAtLoopEnd,onCutAtLoopEndChange:J,onResetAudioSettingsConfirm:_})}),u.jsx("div",{style:{padding:h?"0 0.5rem":"0 2rem",marginTop:"0.25rem"},children:u.jsx(ub,{type:"multisample",hasLoadedSamples:me,hasPresetName:_e,canGeneratePatch:Ae,loadedSamplesCount:a.multisampleFiles.length,editedSamplesCount:0,presetName:a.multisampleSettings.presetName,onPresetNameChange:I,hasChangesFromDefaults:T,onResetAll:$,onSaveToLibrary:oe,onDownloadPreset:te,onSaveSettingsAsDefault:U,inputId:"preset-name-multi",renameFiles:a.multisampleSettings.renameFiles,onRenameFilesChange:G=>n({type:"SET_MULTISAMPLE_RENAME_FILES",payload:G}),filenameSeparator:a.multisampleSettings.filenameSeparator,onFilenameSeparatorChange:G=>n({type:"SET_MULTISAMPLE_FILENAME_SEPARATOR",payload:G}),audioFormat:a.multisampleSettings.audioFormat,onAudioFormatChange:G=>n({type:"SET_MULTISAMPLE_AUDIO_FORMAT",payload:G})})}),u.jsx(cs,{isOpen:w.isOpen,message:w.message,onConfirm:w.onConfirm,onCancel:()=>S({isOpen:!1,message:"",onConfirm:async()=>{}})}),u.jsx(sb,{isOpen:x.isOpen,onClose:le,onSave:q,maxDuration:20})]})}function _2({title:a,titleTooltip:n,headerContent:r,footerContent:i,style:s,headerStyle:c,contentStyle:d,footerStyle:f,isLoading:m,loadingState:h,emptyState:b,tableContent:w}){const[S,x]=L.useState(!1),y={bg:"var(--color-bg-primary)",bgAlt:"var(--color-bg-secondary)",border:"var(--color-border-light)",textSecondary:"var(--color-text-secondary)"};return u.jsxs("div",{style:{backgroundColor:y.bg,borderRadius:"15px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:`1px solid ${y.border}`,overflow:"hidden",fontFamily:'"Montserrat", "Arial", sans-serif',...s},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",padding:"1rem",background:y.bgAlt,borderBottom:`1px solid ${y.border}`,alignItems:"center",position:"relative",...c},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("h2",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:a}),n&&u.jsx(Zi,{content:n,isVisible:S,children:u.jsx("div",{onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{cursor:"help",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-text-secondary)",fontSize:"18px",transition:"all 0.2s ease"},onMouseOver:g=>{g.currentTarget.style.color="var(--color-text-primary)"},onMouseOut:g=>{g.currentTarget.style.color="var(--color-text-secondary)"},children:u.jsx("i",{className:"fas fa-question-circle"})})})]}),r&&u.jsx("div",{style:{justifySelf:"end"},children:r})]}),u.jsx("div",{style:{minHeight:"400px",...d},children:m?h||u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:y.textSecondary},children:[u.jsx("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"0.5rem"}}),"loading..."]}):w&&w?w:b||u.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"200px",color:y.textSecondary,textAlign:"center"},children:[u.jsx("i",{className:"fas fa-folder-open",style:{fontSize:"2rem",marginBottom:"1rem"}}),u.jsx("p",{children:"no data found"})]})}),i&&u.jsx("div",{style:{padding:"0",background:y.bgAlt,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"0.75rem",...f},children:i})]})}function T2({searchTerm:a,onSearchChange:n,filterType:r,onFilterTypeChange:i,filterFavorites:s,onFilterFavoritesChange:c,selectedPresets:d,onBulkDelete:f,onClearSelection:m,isMobile:h}){return h?u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"100%"},children:u.jsx("input",{type:"text",placeholder:"search presets...",value:a,onChange:b=>n(b.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",fontSize:"1rem"}})}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[u.jsxs("select",{value:r,onChange:b=>i(b.target.value),style:{padding:"0.75rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",fontSize:"0.9rem",flex:1},children:[u.jsx("option",{value:"all",children:"all types"}),u.jsx("option",{value:"drum",children:"drum"}),u.jsx("option",{value:"multisample",children:"multisample"})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.9rem",color:"var(--color-text-secondary)",padding:"0.75rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",whiteSpace:"nowrap"},children:[u.jsx("input",{type:"checkbox",checked:s,onChange:b=>c(b.target.checked),style:{margin:0,width:"16px",height:"16px"}}),"favorites"]})]}),d.size>0&&u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsxs("button",{onClick:f,style:{padding:"0.75rem 1rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",cursor:"pointer",fontSize:"0.9rem",flex:1},children:["delete selected (",d.size,")"]}),u.jsx("button",{onClick:m,style:{padding:"0.75rem 1rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-secondary)",cursor:"pointer",fontSize:"0.9rem"},children:"clear"})]})]}):u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("div",{style:{minWidth:"200px"},children:u.jsx("input",{type:"text",placeholder:"search presets...",value:a,onChange:b=>n(b.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",fontSize:"0.9rem"}})}),u.jsxs("select",{value:r,onChange:b=>i(b.target.value),style:{padding:"0.5rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-primary)",fontSize:"0.9rem"},children:[u.jsx("option",{value:"all",children:"all types"}),u.jsx("option",{value:"drum",children:"drum"}),u.jsx("option",{value:"multisample",children:"multisample"})]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.9rem",color:"var(--color-text-secondary)"},children:[u.jsx("input",{type:"checkbox",checked:s,onChange:b=>c(b.target.checked),style:{margin:0}}),"favorites"]}),u.jsx("button",{onClick:f,disabled:d.size===0,style:{padding:"0.5rem 1rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:d.size===0?"var(--color-text-secondary)":"var(--color-text-primary)",cursor:d.size===0?"not-allowed":"pointer",fontSize:"0.85rem",opacity:d.size===0?.5:1,transition:"opacity 0.2s"},children:"delete"})]})}function C2({presets:a,selectedPresets:n,onToggleSelection:r,onSelectAll:i,onClearSelection:s,onToggleFavorite:c,onLoadPreset:d,onDownloadPreset:f,onDeletePreset:m,sortBy:h,sortOrder:b,onSort:w,isMobile:S,formatDate:x}){return S?u.jsx(u.Fragment,{children:a.map((y,g)=>u.jsxs("div",{style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)",borderTop:g===0?"1px solid var(--color-border-light)":"none",borderBottom:"1px solid var(--color-border-light)",borderRadius:0,boxShadow:"none",marginBottom:0,padding:"1.25rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:600,fontSize:"1.1rem",color:"var(--color-text-primary)",marginBottom:"0.25rem"},children:y.name}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--color-text-secondary)",fontSize:"0.9rem"},children:[u.jsx("i",{className:`fas fa-${y.type==="drum"?"drum":"keyboard"}`}),y.type]})]}),u.jsx(An,{icon:y.isFavorite?"fas fa-star":"far fa-star",onClick:()=>c(y),title:y.isFavorite?"remove from favorites":"add to favorites",color:y.isFavorite?"var(--color-text-primary)":"var(--color-text-secondary)"})]}),y.description&&u.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"0.85rem",lineHeight:"1.4"},children:y.description}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.8rem",color:"var(--color-text-secondary)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-music"}),y.sampleCount!==void 0?`${y.sampleCount} samples`:"no samples"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-clock"}),x(y.updatedAt)]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[u.jsx("button",{onClick:()=>d(y),style:{fontSize:"0.9rem",padding:"0.75rem 1rem",borderRadius:"6px",border:"none",background:"var(--color-interactive-focus)",color:"var(--color-white)",cursor:"pointer",flex:1,fontWeight:"500"},children:"load"}),u.jsx("button",{onClick:()=>f(y),style:{fontSize:"0.9rem",padding:"0.75rem 1rem",borderRadius:"6px",border:"1px solid var(--color-border-light)",background:"var(--color-bg-secondary)",color:"var(--color-text-primary)",cursor:"pointer",flex:1},children:"download"}),u.jsx(An,{icon:"fas fa-trash",onClick:()=>m(y),title:"delete preset",color:"var(--color-text-secondary)"})]})]},y.id))}):u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--color-bg-primary)",borderBottom:"1px solid #000"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border-light)"},children:[u.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"500",color:"var(--color-text-primary)"},scope:"col",children:u.jsx("input",{type:"checkbox",checked:a.length>0&&a.every(y=>n.has(y.id)),onChange:y=>y.target.checked?i():s(),style:{margin:0,width:"16px",height:"16px",accentColor:"var(--color-text-secondary)",cursor:"pointer"}})}),u.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"500",color:"var(--color-text-primary)",cursor:"pointer"},onClick:()=>w("name"),scope:"col",children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{children:"name"}),h==="name"?u.jsx("i",{className:`fas fa-sort-${b==="asc"?"up":"down"}`}):u.jsx("i",{className:"fas fa-sort",style:{color:"var(--color-text-secondary)",opacity:.5}})]})}),u.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.85rem",fontWeight:"500",color:"var(--color-text-primary)"},onClick:()=>w("type"),scope:"col",children:u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{children:"type"}),h==="type"?u.jsx("i",{className:`fas fa-sort-${b==="asc"?"up":"down"}`}):u.jsx("i",{className:"fas fa-sort",style:{color:"var(--color-text-secondary)",opacity:.5}})]})}),u.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.85rem",fontWeight:"500",color:"var(--color-text-primary)"},scope:"col",children:"samples"}),u.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"500",color:"var(--color-text-primary)",cursor:"pointer"},onClick:()=>w("date"),scope:"col",children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{children:"updated"}),h==="date"?u.jsx("i",{className:`fas fa-sort-${b==="asc"?"up":"down"}`}):u.jsx("i",{className:"fas fa-sort",style:{color:"var(--color-text-secondary)",opacity:.5}})]})}),u.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.85rem",fontWeight:"500",color:"var(--color-text-primary)"},scope:"col",children:"actions"})]})}),u.jsx("tbody",{children:a.map(y=>u.jsxs("tr",{style:{backgroundColor:n.has(y.id)?"var(--color-bg-secondary)":"var(--color-bg-primary)",borderBottom:"1px solid var(--color-border-light)",transition:"all 0.2s ease"},children:[u.jsx("td",{style:{padding:"0.75rem",verticalAlign:"top"},children:u.jsx("input",{type:"checkbox",checked:n.has(y.id),onChange:()=>r(y.id),style:{margin:0,width:"16px",height:"16px",accentColor:"var(--color-text-secondary)",cursor:"pointer"}})}),u.jsx("td",{style:{padding:"0.75rem",verticalAlign:"top"},children:u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:400,color:"var(--color-text-primary)",display:"flex",alignItems:"center",gap:"0.5rem",fontFamily:"Montserrat, Arial, sans-serif"},children:y.name})}),u.jsx("td",{style:{padding:"0.75rem",verticalAlign:"top",textAlign:"center"},children:u.jsx("i",{className:`fas fa-${y.type==="drum"?"drum":"keyboard"}`,style:{fontSize:"1.2rem",color:"var(--color-text-secondary)"},title:y.type})}),u.jsx("td",{style:{padding:"0.75rem",verticalAlign:"top",fontSize:"0.85rem",color:"var(--color-text-secondary)",textAlign:"center"},children:y.sampleCount!==void 0?u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center"},children:[u.jsx("i",{className:"fas fa-music"}),y.sampleCount]}):"-"}),u.jsx("td",{style:{padding:"0.75rem",verticalAlign:"top",fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:x(y.updatedAt)}),u.jsx("td",{style:{padding:"0.75rem",verticalAlign:"top"},children:u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[u.jsx(An,{icon:y.isFavorite?"fas fa-star":"far fa-star",onClick:()=>c(y),title:y.isFavorite?"remove from favorites":"add to favorites",color:y.isFavorite?"var(--color-text-primary)":"var(--color-text-secondary)"}),u.jsx(An,{icon:"fas fa-folder-open",onClick:()=>d(y),title:"load preset",color:"var(--color-interactive-focus)"}),u.jsx(An,{icon:"fas fa-download",onClick:()=>f(y),title:"download preset",color:"var(--color-text-secondary)"}),u.jsx(An,{icon:"fas fa-trash",onClick:()=>m(y),title:"delete preset",color:"var(--color-text-secondary)"})]})})]},y.id))})]})})}function Gy({currentPage:a,totalPages:n,onPageChange:r,isMobile:i}){const s={minHeight:"44px",minWidth:"44px",padding:"0.75rem 1.5rem",borderRadius:"6px",fontSize:"1rem",fontWeight:500,fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",transition:"all 0.2s ease",cursor:"pointer",boxSizing:"border-box"},c={...s,backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",border:"none",opacity:1},d=w=>({...s,backgroundColor:"var(--color-bg-primary)",color:"var(--color-interactive-secondary)",border:"1px solid var(--color-interactive-focus-ring)",opacity:w?.6:1,cursor:w?"not-allowed":"pointer"}),f=()=>{a>1&&r(a-1)},m=()=>{a<n&&r(a+1)},h=a===1,b=a===n||n===0;return i?u.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",margin:"1rem 0"},children:[u.jsx("button",{onClick:f,disabled:h,style:d(h||!1),onMouseEnter:w=>{h||(w.currentTarget.style.backgroundColor="var(--color-bg-secondary)",w.currentTarget.style.borderColor="var(--color-border-medium)",w.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:w=>{h||(w.currentTarget.style.backgroundColor="var(--color-bg-primary)",w.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",w.currentTarget.style.color="var(--color-interactive-secondary)")},children:"Previous"}),u.jsxs("span",{style:{alignSelf:"center",color:"var(--color-text-secondary)",fontSize:"1rem"},children:["Page ",a," of ",n]}),u.jsx("button",{onClick:m,disabled:b,style:c,onMouseEnter:w=>{b||(w.currentTarget.style.backgroundColor="var(--color-interactive-dark)")},onMouseLeave:w=>{b||(w.currentTarget.style.backgroundColor="var(--color-interactive-focus)")},children:"Next"})]}):u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",background:"var(--color-bg-primary)",borderTop:"1px solid var(--color-border-light)",padding:"1.75rem",minHeight:0,margin:0,width:"100%",boxSizing:"border-box"},children:[u.jsx("button",{onClick:f,disabled:h,style:d(h),onMouseEnter:w=>{h||(w.currentTarget.style.backgroundColor="var(--color-bg-secondary)",w.currentTarget.style.borderColor="var(--color-border-medium)",w.currentTarget.style.color="var(--color-interactive-dark)")},onMouseLeave:w=>{h||(w.currentTarget.style.backgroundColor="var(--color-bg-primary)",w.currentTarget.style.borderColor="var(--color-interactive-focus-ring)",w.currentTarget.style.color="var(--color-interactive-secondary)")},children:"Previous"}),u.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"1rem",margin:"0 1.5rem"},children:["Page ",a," of ",n]}),u.jsx("button",{onClick:m,disabled:b,style:c,onMouseEnter:w=>{b||(w.currentTarget.style.backgroundColor="var(--color-interactive-dark)")},onMouseLeave:w=>{b||(w.currentTarget.style.backgroundColor="var(--color-interactive-focus)")},children:"Next"})]})}const qy={sampleRate:44100,bitDepth:16,channels:2,presetName:"",normalize:!1,normalizeLevel:-.1,presetSettings:{playmode:"poly",transpose:0,velocity:20,volume:69,width:0}},Yy={sampleRate:44100,bitDepth:16,channels:2,presetName:"",normalize:!1,normalizeLevel:-.1,cutAtLoopEnd:!1,gain:0,loopEnabled:!0,loopOnRelease:!0},A2={file:null,audioBuffer:null,name:"",isLoaded:!1,inPoint:0,outPoint:0,playmode:"oneshot",reverse:!1,tune:0,pan:0,gain:0,hasBeenEdited:!1};async function Zy(a,n){const r=[];for(const i of a)if(i&&i.audioBlob&&typeof i.originalIndex=="number")try{const s=await Eb(i.audioBlob,n),{audioBlob:c,originalIndex:d,...f}=i;if(!f.metadata||typeof f.metadata.duration!="number"){console.error("Missing or invalid metadata for drum sample:",i.name,f.metadata);continue}r.push({...f,audioBuffer:s,originalIndex:d,file:new File([i.audioBlob],i.name,{type:"audio/wav"}),isAssigned:!0,assignedKey:i.originalIndex})}catch(s){console.error("Failed to restore audio buffer for drum sample:",i.name,s)}return r}async function Ky(a,n){return Promise.all(a.map(async r=>{if(r&&r.audioBlob)try{const i=await Eb(r.audioBlob,n),{audioBlob:s,...c}=r;return!c.metadata||typeof c.metadata.duration!="number"?(console.error("Missing or invalid metadata for multisample file:",r.name,c.metadata),null):{...c,audioBuffer:i,file:new File([r.audioBlob],r.name,{type:"audio/wav"})}}catch(i){return console.error("Failed to restore audio buffer for multisample file:",r.name,i),null}return null})).then(r=>r.filter(i=>i!==null))}function R2(){const{state:a,dispatch:n}=un(),[r,i]=L.useState([]),[s,c]=L.useState([]),[d,f]=L.useState(""),[m,h]=L.useState("all"),[b,w]=L.useState(!1),[S,x]=L.useState("date"),[y,g]=L.useState("desc"),[E,R]=L.useState(new Set),[O,A]=L.useState(!0),[N,M]=L.useState(null),[z,F]=L.useState(!1),[B,I]=L.useState(1),W=window.innerWidth<768,ee=W?10:15,[C,J]=L.useState(!1),[_,K]=L.useState(null),P=L.useRef(a);P.current=a;const Y=L.useRef([]);L.useEffect(()=>{Y.current.length>0&&a.multisampleFiles.length>0&&(Y.current.forEach(({file:j,updates:H})=>{const Q=a.multisampleFiles.findIndex(ue=>ue&&ue.name===j.file.name&&ue.rootNote===j.rootNote);Q!==-1?n({type:"UPDATE_MULTISAMPLE_FILE",payload:{index:Q,updates:H}}):console.warn(`Could not find multisample file to update settings for file ${j.file.name} with rootNote ${j.rootNote}`)}),Y.current=[])},[a.multisampleFiles,n]);const oe=s.slice((B-1)*ee,B*ee),te=Math.max(1,Math.ceil(s.length/ee)),U=L.useCallback(async()=>{try{A(!0);const j=await It.getAll(kt.PRESETS);i(j)}catch(j){console.error("Failed to load presets:",j),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"load failed",message:"failed to load presets from library"}})}finally{A(!1)}},[n]);L.useEffect(()=>{U()},[U]),L.useEffect(()=>{if(a.currentTab==="library"){const j=setTimeout(()=>{U()},100);return()=>clearTimeout(j)}},[a.currentTab,U]),L.useEffect(()=>{const j=()=>{a.currentTab==="library"&&U()};return window.addEventListener("library-refresh",j),()=>{window.removeEventListener("library-refresh",j)}},[a.currentTab,U]),L.useEffect(()=>{let j=r;d&&(j=j.filter(H=>H.name.toLowerCase().includes(d.toLowerCase())||H.description?.toLowerCase().includes(d.toLowerCase())||H.tags?.some(Q=>Q.toLowerCase().includes(d.toLowerCase())))),m!=="all"&&(j=j.filter(H=>H.type===m)),b&&(j=j.filter(H=>H.isFavorite)),j.sort((H,Q)=>{let ue=0;switch(S){case"name":ue=H.name.localeCompare(Q.name);break;case"date":ue=H.updatedAt-Q.updatedAt;break;case"type":ue=H.type.localeCompare(Q.type);break}return y==="asc"?ue:-ue}),c(j)},[r,d,m,b,S,y]);const k=j=>{S===j?g(y==="asc"?"desc":"asc"):(x(j),g(j==="date"?"desc":"asc"))},$=a.drumSamples.some(j=>j.isLoaded)||a.multisampleFiles.length>0,Z=async j=>{if($){K(j),J(!0);return}await le(j)},le=async j=>{try{window.sessionStorage.setItem("loading-preset","true"),Y.current=[],await Zt.clearCurrentSession(),await Zt.resetSavedToLibraryFlag(),n({type:"SET_TAB",payload:j.type});const H=j.data,Q=window.AudioContext?new window.AudioContext:new window.webkitAudioContext;if(j.type==="drum"){const ue=H.drumSettings||qy;n({type:"SET_DRUM_SAMPLE_RATE",payload:ue.sampleRate}),n({type:"SET_DRUM_BIT_DEPTH",payload:ue.bitDepth}),n({type:"SET_DRUM_CHANNELS",payload:ue.channels}),n({type:"SET_DRUM_PRESET_NAME",payload:ue.presetName}),n({type:"SET_DRUM_NORMALIZE",payload:ue.normalize}),n({type:"SET_DRUM_NORMALIZE_LEVEL",payload:ue.normalizeLevel}),n({type:"SET_DRUM_PRESET_PLAYMODE",payload:ue.presetSettings.playmode}),n({type:"SET_DRUM_PRESET_TRANSPOSE",payload:ue.presetSettings.transpose}),n({type:"SET_DRUM_PRESET_VELOCITY",payload:ue.presetSettings.velocity}),n({type:"SET_DRUM_PRESET_VOLUME",payload:ue.presetSettings.volume}),n({type:"SET_DRUM_PRESET_WIDTH",payload:ue.presetSettings.width});let ye=[];try{ye=await Zy(H.drumSamples||[],Q)}catch(ie){console.error("Failed to restore drum samples:",ie),ye=[]}for(let ie=0;ie<24;ie++)n({type:"CLEAR_DRUM_SAMPLE",payload:ie});ye.forEach(ie=>{ie&&ie.file&&ie.audioBuffer&&ie.audioBuffer.duration&&ie.metadata&&typeof ie.metadata.duration=="number"&&typeof ie.originalIndex=="number"&&ie.originalIndex>=0&&ie.originalIndex<24?(n({type:"LOAD_DRUM_SAMPLE",payload:{index:ie.originalIndex,file:ie.file,audioBuffer:ie.audioBuffer,metadata:ie.metadata}}),n({type:"UPDATE_DRUM_SAMPLE",payload:{index:ie.originalIndex,updates:{inPoint:ie.inPoint,outPoint:ie.outPoint,playmode:ie.playmode,reverse:ie.reverse,tune:ie.tune,pan:ie.pan,gain:ie.gain,hasBeenEdited:ie.hasBeenEdited}}})):console.warn("Skipping invalid drum sample:",ie)}),Zt.markSessionAsSavedToLibrary()}else if(j.type==="multisample"){const ue=H.multisampleSettings||Yy;n({type:"SET_MULTISAMPLE_SAMPLE_RATE",payload:ue.sampleRate}),n({type:"SET_MULTISAMPLE_BIT_DEPTH",payload:ue.bitDepth}),n({type:"SET_MULTISAMPLE_CHANNELS",payload:ue.channels}),n({type:"SET_MULTISAMPLE_PRESET_NAME",payload:ue.presetName}),n({type:"SET_MULTISAMPLE_NORMALIZE",payload:ue.normalize}),n({type:"SET_MULTISAMPLE_NORMALIZE_LEVEL",payload:ue.normalizeLevel}),n({type:"SET_MULTISAMPLE_CUT_AT_LOOP_END",payload:ue.cutAtLoopEnd}),n({type:"SET_MULTISAMPLE_GAIN",payload:ue.gain}),n({type:"SET_MULTISAMPLE_LOOP_ENABLED",payload:ue.loopEnabled}),n({type:"SET_MULTISAMPLE_LOOP_ON_RELEASE",payload:ue.loopOnRelease});let ye=[];try{ye=await Ky(H.multisampleFiles||[],Q)}catch(ge){console.error("Failed to restore multisample files:",ge),ye=[]}for(let ge=a.multisampleFiles.length-1;ge>=0;ge--)n({type:"CLEAR_MULTISAMPLE_FILE",payload:ge});ye.filter(ge=>ge&&ge.file&&ge.audioBuffer&&ge.audioBuffer.duration&&ge.metadata&&typeof ge.metadata.duration=="number").forEach(ge=>{try{const Oe={...ge.metadata,duration:ge.metadata.duration,bitDepth:ge.metadata.bitDepth,sampleRate:ge.metadata.sampleRate,channels:ge.metadata.channels,fileSize:ge.metadata.fileSize,midiNote:ge.rootNote,hasLoopData:!0,loopStart:ge.loopStart||ge.audioBuffer.duration*.2,loopEnd:ge.loopEnd||ge.audioBuffer.duration*.8,format:"PCM",dataLength:ge.metadata.fileSize||0};n({type:"LOAD_MULTISAMPLE_FILE",payload:{file:ge.file,audioBuffer:ge.audioBuffer,metadata:Oe,rootNoteOverride:ge.rootNote}}),Y.current.push({file:ge,updates:{inPoint:ge.inPoint||0,outPoint:ge.outPoint||ge.audioBuffer.duration,loopStart:ge.loopStart||ge.audioBuffer.duration*.2,loopEnd:ge.loopEnd||ge.audioBuffer.duration*.8}})}catch(Oe){console.error("Failed to load multisample file:",ge.file.name,Oe)}}),Zt.markSessionAsSavedToLibrary()}n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"preset loaded",message:`loaded "${j.name}" preset`}})}catch(H){console.error("Failed to load preset:",H),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"load failed",message:"failed to load preset"}})}finally{window.sessionStorage.removeItem("loading-preset")}},q=async j=>{try{const H=j.data,Q=window.AudioContext?new window.AudioContext:new window.webkitAudioContext;if(j.type==="drum"){const ue=await Zy(H.drumSamples||[],Q),ye=Array.from({length:24},()=>({...A2,isAssigned:!1,assignedKey:void 0}));ue.forEach(Oe=>{Oe&&typeof Oe.originalIndex=="number"&&Oe.originalIndex>=0&&Oe.originalIndex<24&&(ye[Oe.originalIndex]={...Oe,isLoaded:!0,isAssigned:!0,assignedKey:Oe.originalIndex})});const ie={...a,drumSettings:H.drumSettings||qy,drumSamples:ye},ge=await yb(ie,j.name);tc(ge,`${j.name}.opxydrum`)}else if(j.type==="multisample"){const ue=await Ky(H.multisampleFiles||[],Q),ye={...a,multisampleSettings:H.multisampleSettings||Yy,multisampleFiles:ue},ie=await bb(ye,j.name);tc(ie,`${j.name}.opxymulti`)}n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"preset downloaded",message:`downloaded "${j.name}" preset`}})}catch(H){console.error("Failed to download preset:",H),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"download failed",message:"failed to download preset"}})}},Ee=async j=>{try{const H={...j,isFavorite:!j.isFavorite};await It.update(kt.PRESETS,H),i(Q=>Q.map(ue=>ue.id===j.id?H:ue)),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:H.isFavorite?"added to favorites":"removed from favorites",message:`"${j.name}" ${H.isFavorite?"added to":"removed from"} favorites`}})}catch(H){console.error("Failed to toggle favorite:",H),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"update failed",message:"failed to update favorite status"}})}},Fe=j=>{M(j),F(!0)},pe=()=>{M({id:"bulk",name:"Selected Presets"}),F(!0)},de=async()=>{try{if(N?.id==="bulk"){const j=Array.from(E);await Promise.all(j.map(H=>It.delete(kt.PRESETS,H))),R(new Set),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"presets deleted",message:`deleted ${j.length} presets`}})}else N&&(await It.delete(kt.PRESETS,N.id),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"success",title:"preset deleted",message:`deleted "${N.name}" preset`}}));U()}catch(j){console.error("Failed to delete preset(s):",j),n({type:"ADD_NOTIFICATION",payload:{id:Date.now().toString(),type:"error",title:"delete failed",message:"failed to delete preset(s)"}})}finally{F(!1),M(null)}},Re=()=>{F(!1),M(null)},me=async()=>{_&&(J(!1),await le(_),K(null))},_e=()=>{J(!1),K(null)},Ae=j=>{const H=new Date(j),ue=(new Date().getTime()-H.getTime())/(1e3*60*60);return ue<24?H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):ue<168?H.toLocaleDateString([],{weekday:"short"}):H.toLocaleDateString([],{month:"short",day:"numeric"})},T=j=>{const H=new Set(E);H.has(j)?H.delete(j):H.add(j),R(H)},G=()=>{R(new Set(s.map(j=>j.id)))},X=()=>{R(new Set)};return u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-bg-primary)",padding:window.innerWidth<768?"0.5rem":"1.25rem 2rem",maxWidth:"1400px",margin:"0 auto",marginTop:"0.7rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:u.jsxs("div",{children:[u.jsx(_2,{title:"presets",titleTooltip:u.jsxs(u.Fragment,{children:[u.jsxs("h3",{children:[u.jsx("i",{className:"fas fa-shield-alt",style:{marginRight:"0.5rem"}}),"privacy & data"]}),u.jsx("p",{children:"all data is stored locally on your device. no data is sent to external servers or shared with third parties."}),u.jsx("p",{style:{fontSize:"0.8rem",opacity:.8},children:"your presets, samples, and settings remain private and secure."})]}),headerContent:u.jsx(T2,{searchTerm:d,onSearchChange:f,filterType:m,onFilterTypeChange:h,filterFavorites:b,onFilterFavoritesChange:w,selectedPresets:E,onBulkDelete:pe,onClearSelection:X,isMobile:W}),isLoading:O,emptyState:u.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"200px",color:"var(--color-text-secondary)",textAlign:"center"},children:[u.jsx("i",{className:"fas fa-folder-open",style:{fontSize:"2rem",marginBottom:"1rem"}}),u.jsx("p",{children:"no presets found"}),u.jsx("p",{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:d||m!=="all"||b?"try adjusting your search or filters":"create your first preset by saving from the drum or multisample tools"})]}),tableContent:u.jsx(C2,{presets:oe,selectedPresets:E,onToggleSelection:T,onSelectAll:G,onClearSelection:X,onToggleFavorite:Ee,onLoadPreset:Z,onDownloadPreset:q,onDeletePreset:Fe,sortBy:S,sortOrder:y,onSort:k,isMobile:W,formatDate:Ae}),footerContent:!W&&u.jsx(Gy,{currentPage:B,totalPages:te,onPageChange:I,isMobile:W})}),W&&s.length>ee&&u.jsx(Gy,{currentPage:B,totalPages:te,onPageChange:I,isMobile:W})]})}),u.jsx(cs,{isOpen:z,onConfirm:de,onCancel:Re,message:N?.id==="bulk"?`are you sure you want to delete the ${E.size} selected presets? this action cannot be undone.`:`are you sure you want to delete "${N?.name}"? this action cannot be undone.`}),u.jsx(cs,{isOpen:C,onConfirm:me,onCancel:_e,message:_?`loading a preset will overwrite your current session. are you sure you want to load "${_.name}"?`:""})]})}function Tb(){const[a,n]=L.useState(!1);return L.useEffect(()=>{const r=()=>{n(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",margin:a?"0.5rem 0.5rem 1rem 0.5rem":"2rem 2rem 1rem 2rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"feedback"})})}),u.jsxs("div",{style:{padding:a?"1rem":"2rem"},children:[u.jsxs("div",{style:{marginBottom:"1.5rem",background:"var(--color-bg-secondary)",border:"1px solid var(--color-border-light)",borderRadius:"6px",padding:"1rem",color:"var(--color-text-secondary)",fontSize:"1rem",textAlign:"center",lineHeight:1.5},children:[u.jsx("i",{className:"fas fa-info-circle",style:{marginRight:"0.5rem",color:"var(--color-text-secondary)"}}),"before submitting an issue,",u.jsx("br",{}),"please ",u.jsx("a",{href:"https://github.com/joseph-holland/op-patchstudio/issues",target:"_blank",rel:"noopener",style:{color:"var(--color-text-secondary)",textDecoration:"underline",wordBreak:"break-all"},children:"check if your bug or request has already been raised here"}),"."]}),u.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:u.jsx("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLSdgfoCaXzmQL6iF4QR08owfFSAwH651jlGChzcnz-pqwsI4Gw/viewform?embedded=true",width:"1200",height:"1000",frameBorder:"0",marginHeight:0,marginWidth:0,style:{border:"none",borderRadius:"15px",maxWidth:"100%",minHeight:"800px",background:"white"},children:"loading"})})]})]})}function Cb(a,n){return function(){return a.apply(n,arguments)}}const{toString:M2}=Object.prototype,{getPrototypeOf:Of}=Object,{iterator:hc,toStringTag:Ab}=Symbol,gc=(a=>n=>{const r=M2.call(n);return a[r]||(a[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),or=a=>(a=a.toLowerCase(),n=>gc(n)===a),yc=a=>n=>typeof n===a,{isArray:Ki}=Array,us=yc("undefined");function k2(a){return a!==null&&!us(a)&&a.constructor!==null&&!us(a.constructor)&&Rn(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const Rb=or("ArrayBuffer");function N2(a){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(a):n=a&&a.buffer&&Rb(a.buffer),n}const O2=yc("string"),Rn=yc("function"),Mb=yc("number"),bc=a=>a!==null&&typeof a=="object",D2=a=>a===!0||a===!1,Ul=a=>{if(gc(a)!=="object")return!1;const n=Of(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Ab in a)&&!(hc in a)},j2=or("Date"),L2=or("File"),I2=or("Blob"),z2=or("FileList"),U2=a=>bc(a)&&Rn(a.pipe),B2=a=>{let n;return a&&(typeof FormData=="function"&&a instanceof FormData||Rn(a.append)&&((n=gc(a))==="formdata"||n==="object"&&Rn(a.toString)&&a.toString()==="[object FormData]"))},P2=or("URLSearchParams"),[F2,H2,W2,V2]=["ReadableStream","Request","Response","Headers"].map(or),$2=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gs(a,n,{allOwnKeys:r=!1}={}){if(a===null||typeof a>"u")return;let i,s;if(typeof a!="object"&&(a=[a]),Ki(a))for(i=0,s=a.length;i<s;i++)n.call(null,a[i],i,a);else{const c=r?Object.getOwnPropertyNames(a):Object.keys(a),d=c.length;let f;for(i=0;i<d;i++)f=c[i],n.call(null,a[f],f,a)}}function kb(a,n){n=n.toLowerCase();const r=Object.keys(a);let i=r.length,s;for(;i-- >0;)if(s=r[i],n===s.toLowerCase())return s;return null}const Ha=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Nb=a=>!us(a)&&a!==Ha;function sf(){const{caseless:a}=Nb(this)&&this||{},n={},r=(i,s)=>{const c=a&&kb(n,s)||s;Ul(n[c])&&Ul(i)?n[c]=sf(n[c],i):Ul(i)?n[c]=sf({},i):Ki(i)?n[c]=i.slice():n[c]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&gs(arguments[i],r);return n}const G2=(a,n,r,{allOwnKeys:i}={})=>(gs(n,(s,c)=>{r&&Rn(s)?a[c]=Cb(s,r):a[c]=s},{allOwnKeys:i}),a),q2=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),Y2=(a,n,r,i)=>{a.prototype=Object.create(n.prototype,i),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:n.prototype}),r&&Object.assign(a.prototype,r)},Z2=(a,n,r,i)=>{let s,c,d;const f={};if(n=n||{},a==null)return n;do{for(s=Object.getOwnPropertyNames(a),c=s.length;c-- >0;)d=s[c],(!i||i(d,a,n))&&!f[d]&&(n[d]=a[d],f[d]=!0);a=r!==!1&&Of(a)}while(a&&(!r||r(a,n))&&a!==Object.prototype);return n},K2=(a,n,r)=>{a=String(a),(r===void 0||r>a.length)&&(r=a.length),r-=n.length;const i=a.indexOf(n,r);return i!==-1&&i===r},X2=a=>{if(!a)return null;if(Ki(a))return a;let n=a.length;if(!Mb(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=a[n];return r},Q2=(a=>n=>a&&n instanceof a)(typeof Uint8Array<"u"&&Of(Uint8Array)),J2=(a,n)=>{const i=(a&&a[hc]).call(a);let s;for(;(s=i.next())&&!s.done;){const c=s.value;n.call(a,c[0],c[1])}},e_=(a,n)=>{let r;const i=[];for(;(r=a.exec(n))!==null;)i.push(r);return i},t_=or("HTMLFormElement"),n_=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,s){return i.toUpperCase()+s}),Xy=(({hasOwnProperty:a})=>(n,r)=>a.call(n,r))(Object.prototype),r_=or("RegExp"),Ob=(a,n)=>{const r=Object.getOwnPropertyDescriptors(a),i={};gs(r,(s,c)=>{let d;(d=n(s,c,a))!==!1&&(i[c]=d||s)}),Object.defineProperties(a,i)},a_=a=>{Ob(a,(n,r)=>{if(Rn(a)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=a[r];if(Rn(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},i_=(a,n)=>{const r={},i=s=>{s.forEach(c=>{r[c]=!0})};return Ki(a)?i(a):i(String(a).split(n)),r},o_=()=>{},s_=(a,n)=>a!=null&&Number.isFinite(a=+a)?a:n;function l_(a){return!!(a&&Rn(a.append)&&a[Ab]==="FormData"&&a[hc])}const c_=a=>{const n=new Array(10),r=(i,s)=>{if(bc(i)){if(n.indexOf(i)>=0)return;if(!("toJSON"in i)){n[s]=i;const c=Ki(i)?[]:{};return gs(i,(d,f)=>{const m=r(d,s+1);!us(m)&&(c[f]=m)}),n[s]=void 0,c}}return i};return r(a,0)},u_=or("AsyncFunction"),d_=a=>a&&(bc(a)||Rn(a))&&Rn(a.then)&&Rn(a.catch),Db=((a,n)=>a?setImmediate:n?((r,i)=>(Ha.addEventListener("message",({source:s,data:c})=>{s===Ha&&c===r&&i.length&&i.shift()()},!1),s=>{i.push(s),Ha.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Rn(Ha.postMessage)),f_=typeof queueMicrotask<"u"?queueMicrotask.bind(Ha):typeof process<"u"&&process.nextTick||Db,m_=a=>a!=null&&Rn(a[hc]),Te={isArray:Ki,isArrayBuffer:Rb,isBuffer:k2,isFormData:B2,isArrayBufferView:N2,isString:O2,isNumber:Mb,isBoolean:D2,isObject:bc,isPlainObject:Ul,isReadableStream:F2,isRequest:H2,isResponse:W2,isHeaders:V2,isUndefined:us,isDate:j2,isFile:L2,isBlob:I2,isRegExp:r_,isFunction:Rn,isStream:U2,isURLSearchParams:P2,isTypedArray:Q2,isFileList:z2,forEach:gs,merge:sf,extend:G2,trim:$2,stripBOM:q2,inherits:Y2,toFlatObject:Z2,kindOf:gc,kindOfTest:or,endsWith:K2,toArray:X2,forEachEntry:J2,matchAll:e_,isHTMLForm:t_,hasOwnProperty:Xy,hasOwnProp:Xy,reduceDescriptors:Ob,freezeMethods:a_,toObjectSet:i_,toCamelCase:n_,noop:o_,toFiniteNumber:s_,findKey:kb,global:Ha,isContextDefined:Nb,isSpecCompliantForm:l_,toJSONObject:c_,isAsyncFn:u_,isThenable:d_,setImmediate:Db,asap:f_,isIterable:m_};function st(a,n,r,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Te.inherits(st,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const jb=st.prototype,Lb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{Lb[a]={value:a}});Object.defineProperties(st,Lb);Object.defineProperty(jb,"isAxiosError",{value:!0});st.from=(a,n,r,i,s,c)=>{const d=Object.create(jb);return Te.toFlatObject(a,d,function(m){return m!==Error.prototype},f=>f!=="isAxiosError"),st.call(d,a.message,n,r,i,s),d.cause=a,d.name=a.name,c&&Object.assign(d,c),d};const p_=null;function lf(a){return Te.isPlainObject(a)||Te.isArray(a)}function Ib(a){return Te.endsWith(a,"[]")?a.slice(0,-2):a}function Qy(a,n,r){return a?a.concat(n).map(function(s,c){return s=Ib(s),!r&&c?"["+s+"]":s}).join(r?".":""):n}function h_(a){return Te.isArray(a)&&!a.some(lf)}const g_=Te.toFlatObject(Te,{},null,function(n){return/^is[A-Z]/.test(n)});function vc(a,n,r){if(!Te.isObject(a))throw new TypeError("target must be an object");n=n||new FormData,r=Te.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,E){return!Te.isUndefined(E[g])});const i=r.metaTokens,s=r.visitor||b,c=r.dots,d=r.indexes,m=(r.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(n);if(!Te.isFunction(s))throw new TypeError("visitor must be a function");function h(y){if(y===null)return"";if(Te.isDate(y))return y.toISOString();if(Te.isBoolean(y))return y.toString();if(!m&&Te.isBlob(y))throw new st("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(y)||Te.isTypedArray(y)?m&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function b(y,g,E){let R=y;if(y&&!E&&typeof y=="object"){if(Te.endsWith(g,"{}"))g=i?g:g.slice(0,-2),y=JSON.stringify(y);else if(Te.isArray(y)&&h_(y)||(Te.isFileList(y)||Te.endsWith(g,"[]"))&&(R=Te.toArray(y)))return g=Ib(g),R.forEach(function(A,N){!(Te.isUndefined(A)||A===null)&&n.append(d===!0?Qy([g],N,c):d===null?g:g+"[]",h(A))}),!1}return lf(y)?!0:(n.append(Qy(E,g,c),h(y)),!1)}const w=[],S=Object.assign(g_,{defaultVisitor:b,convertValue:h,isVisitable:lf});function x(y,g){if(!Te.isUndefined(y)){if(w.indexOf(y)!==-1)throw Error("Circular reference detected in "+g.join("."));w.push(y),Te.forEach(y,function(R,O){(!(Te.isUndefined(R)||R===null)&&s.call(n,R,Te.isString(O)?O.trim():O,g,S))===!0&&x(R,g?g.concat(O):[O])}),w.pop()}}if(!Te.isObject(a))throw new TypeError("data must be an object");return x(a),n}function Jy(a){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function Df(a,n){this._pairs=[],a&&vc(a,this,n)}const zb=Df.prototype;zb.append=function(n,r){this._pairs.push([n,r])};zb.toString=function(n){const r=n?function(i){return n.call(this,i,Jy)}:Jy;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function y_(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ub(a,n,r){if(!n)return a;const i=r&&r.encode||y_;Te.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let c;if(s?c=s(n,r):c=Te.isURLSearchParams(n)?n.toString():new Df(n,r).toString(i),c){const d=a.indexOf("#");d!==-1&&(a=a.slice(0,d)),a+=(a.indexOf("?")===-1?"?":"&")+c}return a}class e0{constructor(){this.handlers=[]}use(n,r,i){return this.handlers.push({fulfilled:n,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Te.forEach(this.handlers,function(i){i!==null&&n(i)})}}const Bb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},b_=typeof URLSearchParams<"u"?URLSearchParams:Df,v_=typeof FormData<"u"?FormData:null,x_=typeof Blob<"u"?Blob:null,S_={isBrowser:!0,classes:{URLSearchParams:b_,FormData:v_,Blob:x_},protocols:["http","https","file","blob","url","data"]},jf=typeof window<"u"&&typeof document<"u",cf=typeof navigator=="object"&&navigator||void 0,w_=jf&&(!cf||["ReactNative","NativeScript","NS"].indexOf(cf.product)<0),E_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",__=jf&&window.location.href||"http://localhost",T_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jf,hasStandardBrowserEnv:w_,hasStandardBrowserWebWorkerEnv:E_,navigator:cf,origin:__},Symbol.toStringTag,{value:"Module"})),yn={...T_,...S_};function C_(a,n){return vc(a,new yn.classes.URLSearchParams,Object.assign({visitor:function(r,i,s,c){return yn.isNode&&Te.isBuffer(r)?(this.append(i,r.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},n))}function A_(a){return Te.matchAll(/\w+|\[(\w*)]/g,a).map(n=>n[0]==="[]"?"":n[1]||n[0])}function R_(a){const n={},r=Object.keys(a);let i;const s=r.length;let c;for(i=0;i<s;i++)c=r[i],n[c]=a[c];return n}function Pb(a){function n(r,i,s,c){let d=r[c++];if(d==="__proto__")return!0;const f=Number.isFinite(+d),m=c>=r.length;return d=!d&&Te.isArray(s)?s.length:d,m?(Te.hasOwnProp(s,d)?s[d]=[s[d],i]:s[d]=i,!f):((!s[d]||!Te.isObject(s[d]))&&(s[d]=[]),n(r,i,s[d],c)&&Te.isArray(s[d])&&(s[d]=R_(s[d])),!f)}if(Te.isFormData(a)&&Te.isFunction(a.entries)){const r={};return Te.forEachEntry(a,(i,s)=>{n(A_(i),s,r,0)}),r}return null}function M_(a,n,r){if(Te.isString(a))try{return(n||JSON.parse)(a),Te.trim(a)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(a)}const ys={transitional:Bb,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const i=r.getContentType()||"",s=i.indexOf("application/json")>-1,c=Te.isObject(n);if(c&&Te.isHTMLForm(n)&&(n=new FormData(n)),Te.isFormData(n))return s?JSON.stringify(Pb(n)):n;if(Te.isArrayBuffer(n)||Te.isBuffer(n)||Te.isStream(n)||Te.isFile(n)||Te.isBlob(n)||Te.isReadableStream(n))return n;if(Te.isArrayBufferView(n))return n.buffer;if(Te.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let f;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return C_(n,this.formSerializer).toString();if((f=Te.isFileList(n))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return vc(f?{"files[]":n}:n,m&&new m,this.formSerializer)}}return c||s?(r.setContentType("application/json",!1),M_(n)):n}],transformResponse:[function(n){const r=this.transitional||ys.transitional,i=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Te.isResponse(n)||Te.isReadableStream(n))return n;if(n&&Te.isString(n)&&(i&&!this.responseType||s)){const d=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(n)}catch(f){if(d)throw f.name==="SyntaxError"?st.from(f,st.ERR_BAD_RESPONSE,this,null,this.response):f}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yn.classes.FormData,Blob:yn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],a=>{ys.headers[a]={}});const k_=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),N_=a=>{const n={};let r,i,s;return a&&a.split(`
`).forEach(function(d){s=d.indexOf(":"),r=d.substring(0,s).trim().toLowerCase(),i=d.substring(s+1).trim(),!(!r||n[r]&&k_[r])&&(r==="set-cookie"?n[r]?n[r].push(i):n[r]=[i]:n[r]=n[r]?n[r]+", "+i:i)}),n},t0=Symbol("internals");function as(a){return a&&String(a).trim().toLowerCase()}function Bl(a){return a===!1||a==null?a:Te.isArray(a)?a.map(Bl):String(a)}function O_(a){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(a);)n[i[1]]=i[2];return n}const D_=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function Gd(a,n,r,i,s){if(Te.isFunction(i))return i.call(this,n,r);if(s&&(n=r),!!Te.isString(n)){if(Te.isString(i))return n.indexOf(i)!==-1;if(Te.isRegExp(i))return i.test(n)}}function j_(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,i)=>r.toUpperCase()+i)}function L_(a,n){const r=Te.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(a,i+r,{value:function(s,c,d){return this[i].call(this,n,s,c,d)},configurable:!0})})}let Mn=class{constructor(n){n&&this.set(n)}set(n,r,i){const s=this;function c(f,m,h){const b=as(m);if(!b)throw new Error("header name must be a non-empty string");const w=Te.findKey(s,b);(!w||s[w]===void 0||h===!0||h===void 0&&s[w]!==!1)&&(s[w||m]=Bl(f))}const d=(f,m)=>Te.forEach(f,(h,b)=>c(h,b,m));if(Te.isPlainObject(n)||n instanceof this.constructor)d(n,r);else if(Te.isString(n)&&(n=n.trim())&&!D_(n))d(N_(n),r);else if(Te.isObject(n)&&Te.isIterable(n)){let f={},m,h;for(const b of n){if(!Te.isArray(b))throw TypeError("Object iterator must return a key-value pair");f[h=b[0]]=(m=f[h])?Te.isArray(m)?[...m,b[1]]:[m,b[1]]:b[1]}d(f,r)}else n!=null&&c(r,n,i);return this}get(n,r){if(n=as(n),n){const i=Te.findKey(this,n);if(i){const s=this[i];if(!r)return s;if(r===!0)return O_(s);if(Te.isFunction(r))return r.call(this,s,i);if(Te.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=as(n),n){const i=Te.findKey(this,n);return!!(i&&this[i]!==void 0&&(!r||Gd(this,this[i],i,r)))}return!1}delete(n,r){const i=this;let s=!1;function c(d){if(d=as(d),d){const f=Te.findKey(i,d);f&&(!r||Gd(i,i[f],f,r))&&(delete i[f],s=!0)}}return Te.isArray(n)?n.forEach(c):c(n),s}clear(n){const r=Object.keys(this);let i=r.length,s=!1;for(;i--;){const c=r[i];(!n||Gd(this,this[c],c,n,!0))&&(delete this[c],s=!0)}return s}normalize(n){const r=this,i={};return Te.forEach(this,(s,c)=>{const d=Te.findKey(i,c);if(d){r[d]=Bl(s),delete r[c];return}const f=n?j_(c):String(c).trim();f!==c&&delete r[c],r[f]=Bl(s),i[f]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return Te.forEach(this,(i,s)=>{i!=null&&i!==!1&&(r[s]=n&&Te.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const i=new this(n);return r.forEach(s=>i.set(s)),i}static accessor(n){const i=(this[t0]=this[t0]={accessors:{}}).accessors,s=this.prototype;function c(d){const f=as(d);i[f]||(L_(s,d),i[f]=!0)}return Te.isArray(n)?n.forEach(c):c(n),this}};Mn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(Mn.prototype,({value:a},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>a,set(i){this[r]=i}}});Te.freezeMethods(Mn);function qd(a,n){const r=this||ys,i=n||r,s=Mn.from(i.headers);let c=i.data;return Te.forEach(a,function(f){c=f.call(r,c,s.normalize(),n?n.status:void 0)}),s.normalize(),c}function Fb(a){return!!(a&&a.__CANCEL__)}function Xi(a,n,r){st.call(this,a??"canceled",st.ERR_CANCELED,n,r),this.name="CanceledError"}Te.inherits(Xi,st,{__CANCEL__:!0});function Hb(a,n,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?a(r):n(new st("Request failed with status code "+r.status,[st.ERR_BAD_REQUEST,st.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function I_(a){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return n&&n[1]||""}function z_(a,n){a=a||10;const r=new Array(a),i=new Array(a);let s=0,c=0,d;return n=n!==void 0?n:1e3,function(m){const h=Date.now(),b=i[c];d||(d=h),r[s]=m,i[s]=h;let w=c,S=0;for(;w!==s;)S+=r[w++],w=w%a;if(s=(s+1)%a,s===c&&(c=(c+1)%a),h-d<n)return;const x=b&&h-b;return x?Math.round(S*1e3/x):void 0}}function U_(a,n){let r=0,i=1e3/n,s,c;const d=(h,b=Date.now())=>{r=b,s=null,c&&(clearTimeout(c),c=null),a.apply(null,h)};return[(...h)=>{const b=Date.now(),w=b-r;w>=i?d(h,b):(s=h,c||(c=setTimeout(()=>{c=null,d(s)},i-w)))},()=>s&&d(s)]}const nc=(a,n,r=3)=>{let i=0;const s=z_(50,250);return U_(c=>{const d=c.loaded,f=c.lengthComputable?c.total:void 0,m=d-i,h=s(m),b=d<=f;i=d;const w={loaded:d,total:f,progress:f?d/f:void 0,bytes:m,rate:h||void 0,estimated:h&&f&&b?(f-d)/h:void 0,event:c,lengthComputable:f!=null,[n?"download":"upload"]:!0};a(w)},r)},n0=(a,n)=>{const r=a!=null;return[i=>n[0]({lengthComputable:r,total:a,loaded:i}),n[1]]},r0=a=>(...n)=>Te.asap(()=>a(...n)),B_=yn.hasStandardBrowserEnv?((a,n)=>r=>(r=new URL(r,yn.origin),a.protocol===r.protocol&&a.host===r.host&&(n||a.port===r.port)))(new URL(yn.origin),yn.navigator&&/(msie|trident)/i.test(yn.navigator.userAgent)):()=>!0,P_=yn.hasStandardBrowserEnv?{write(a,n,r,i,s,c){const d=[a+"="+encodeURIComponent(n)];Te.isNumber(r)&&d.push("expires="+new Date(r).toGMTString()),Te.isString(i)&&d.push("path="+i),Te.isString(s)&&d.push("domain="+s),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read(a){const n=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function F_(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function H_(a,n){return n?a.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):a}function Wb(a,n,r){let i=!F_(n);return a&&(i||r==!1)?H_(a,n):n}const a0=a=>a instanceof Mn?{...a}:a;function qa(a,n){n=n||{};const r={};function i(h,b,w,S){return Te.isPlainObject(h)&&Te.isPlainObject(b)?Te.merge.call({caseless:S},h,b):Te.isPlainObject(b)?Te.merge({},b):Te.isArray(b)?b.slice():b}function s(h,b,w,S){if(Te.isUndefined(b)){if(!Te.isUndefined(h))return i(void 0,h,w,S)}else return i(h,b,w,S)}function c(h,b){if(!Te.isUndefined(b))return i(void 0,b)}function d(h,b){if(Te.isUndefined(b)){if(!Te.isUndefined(h))return i(void 0,h)}else return i(void 0,b)}function f(h,b,w){if(w in n)return i(h,b);if(w in a)return i(void 0,h)}const m={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:f,headers:(h,b,w)=>s(a0(h),a0(b),w,!0)};return Te.forEach(Object.keys(Object.assign({},a,n)),function(b){const w=m[b]||s,S=w(a[b],n[b],b);Te.isUndefined(S)&&w!==f||(r[b]=S)}),r}const Vb=a=>{const n=qa({},a);let{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:c,headers:d,auth:f}=n;n.headers=d=Mn.from(d),n.url=Ub(Wb(n.baseURL,n.url,n.allowAbsoluteUrls),a.params,a.paramsSerializer),f&&d.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let m;if(Te.isFormData(r)){if(yn.hasStandardBrowserEnv||yn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((m=d.getContentType())!==!1){const[h,...b]=m?m.split(";").map(w=>w.trim()).filter(Boolean):[];d.setContentType([h||"multipart/form-data",...b].join("; "))}}if(yn.hasStandardBrowserEnv&&(i&&Te.isFunction(i)&&(i=i(n)),i||i!==!1&&B_(n.url))){const h=s&&c&&P_.read(c);h&&d.set(s,h)}return n},W_=typeof XMLHttpRequest<"u",V_=W_&&function(a){return new Promise(function(r,i){const s=Vb(a);let c=s.data;const d=Mn.from(s.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:h}=s,b,w,S,x,y;function g(){x&&x(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(b),s.signal&&s.signal.removeEventListener("abort",b)}let E=new XMLHttpRequest;E.open(s.method.toUpperCase(),s.url,!0),E.timeout=s.timeout;function R(){if(!E)return;const A=Mn.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),M={data:!f||f==="text"||f==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:A,config:a,request:E};Hb(function(F){r(F),g()},function(F){i(F),g()},M),E=null}"onloadend"in E?E.onloadend=R:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(R)},E.onabort=function(){E&&(i(new st("Request aborted",st.ECONNABORTED,a,E)),E=null)},E.onerror=function(){i(new st("Network Error",st.ERR_NETWORK,a,E)),E=null},E.ontimeout=function(){let N=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const M=s.transitional||Bb;s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),i(new st(N,M.clarifyTimeoutError?st.ETIMEDOUT:st.ECONNABORTED,a,E)),E=null},c===void 0&&d.setContentType(null),"setRequestHeader"in E&&Te.forEach(d.toJSON(),function(N,M){E.setRequestHeader(M,N)}),Te.isUndefined(s.withCredentials)||(E.withCredentials=!!s.withCredentials),f&&f!=="json"&&(E.responseType=s.responseType),h&&([S,y]=nc(h,!0),E.addEventListener("progress",S)),m&&E.upload&&([w,x]=nc(m),E.upload.addEventListener("progress",w),E.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(b=A=>{E&&(i(!A||A.type?new Xi(null,a,E):A),E.abort(),E=null)},s.cancelToken&&s.cancelToken.subscribe(b),s.signal&&(s.signal.aborted?b():s.signal.addEventListener("abort",b)));const O=I_(s.url);if(O&&yn.protocols.indexOf(O)===-1){i(new st("Unsupported protocol "+O+":",st.ERR_BAD_REQUEST,a));return}E.send(c||null)})},$_=(a,n)=>{const{length:r}=a=a?a.filter(Boolean):[];if(n||r){let i=new AbortController,s;const c=function(h){if(!s){s=!0,f();const b=h instanceof Error?h:this.reason;i.abort(b instanceof st?b:new Xi(b instanceof Error?b.message:b))}};let d=n&&setTimeout(()=>{d=null,c(new st(`timeout ${n} of ms exceeded`,st.ETIMEDOUT))},n);const f=()=>{a&&(d&&clearTimeout(d),d=null,a.forEach(h=>{h.unsubscribe?h.unsubscribe(c):h.removeEventListener("abort",c)}),a=null)};a.forEach(h=>h.addEventListener("abort",c));const{signal:m}=i;return m.unsubscribe=()=>Te.asap(f),m}},G_=function*(a,n){let r=a.byteLength;if(r<n){yield a;return}let i=0,s;for(;i<r;)s=i+n,yield a.slice(i,s),i=s},q_=async function*(a,n){for await(const r of Y_(a))yield*G_(r,n)},Y_=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const n=a.getReader();try{for(;;){const{done:r,value:i}=await n.read();if(r)break;yield i}}finally{await n.cancel()}},i0=(a,n,r,i)=>{const s=q_(a,n);let c=0,d,f=m=>{d||(d=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:h,value:b}=await s.next();if(h){f(),m.close();return}let w=b.byteLength;if(r){let S=c+=w;r(S)}m.enqueue(new Uint8Array(b))}catch(h){throw f(h),h}},cancel(m){return f(m),s.return()}},{highWaterMark:2})},xc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",$b=xc&&typeof ReadableStream=="function",Z_=xc&&(typeof TextEncoder=="function"?(a=>n=>a.encode(n))(new TextEncoder):async a=>new Uint8Array(await new Response(a).arrayBuffer())),Gb=(a,...n)=>{try{return!!a(...n)}catch{return!1}},K_=$b&&Gb(()=>{let a=!1;const n=new Request(yn.origin,{body:new ReadableStream,method:"POST",get duplex(){return a=!0,"half"}}).headers.has("Content-Type");return a&&!n}),o0=64*1024,uf=$b&&Gb(()=>Te.isReadableStream(new Response("").body)),rc={stream:uf&&(a=>a.body)};xc&&(a=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!rc[n]&&(rc[n]=Te.isFunction(a[n])?r=>r[n]():(r,i)=>{throw new st(`Response type '${n}' is not supported`,st.ERR_NOT_SUPPORT,i)})})})(new Response);const X_=async a=>{if(a==null)return 0;if(Te.isBlob(a))return a.size;if(Te.isSpecCompliantForm(a))return(await new Request(yn.origin,{method:"POST",body:a}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(a)||Te.isArrayBuffer(a))return a.byteLength;if(Te.isURLSearchParams(a)&&(a=a+""),Te.isString(a))return(await Z_(a)).byteLength},Q_=async(a,n)=>{const r=Te.toFiniteNumber(a.getContentLength());return r??X_(n)},J_=xc&&(async a=>{let{url:n,method:r,data:i,signal:s,cancelToken:c,timeout:d,onDownloadProgress:f,onUploadProgress:m,responseType:h,headers:b,withCredentials:w="same-origin",fetchOptions:S}=Vb(a);h=h?(h+"").toLowerCase():"text";let x=$_([s,c&&c.toAbortSignal()],d),y;const g=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let E;try{if(m&&K_&&r!=="get"&&r!=="head"&&(E=await Q_(b,i))!==0){let M=new Request(n,{method:"POST",body:i,duplex:"half"}),z;if(Te.isFormData(i)&&(z=M.headers.get("content-type"))&&b.setContentType(z),M.body){const[F,B]=n0(E,nc(r0(m)));i=i0(M.body,o0,F,B)}}Te.isString(w)||(w=w?"include":"omit");const R="credentials"in Request.prototype;y=new Request(n,{...S,signal:x,method:r.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:R?w:void 0});let O=await fetch(y,S);const A=uf&&(h==="stream"||h==="response");if(uf&&(f||A&&g)){const M={};["status","statusText","headers"].forEach(I=>{M[I]=O[I]});const z=Te.toFiniteNumber(O.headers.get("content-length")),[F,B]=f&&n0(z,nc(r0(f),!0))||[];O=new Response(i0(O.body,o0,F,()=>{B&&B(),g&&g()}),M)}h=h||"text";let N=await rc[Te.findKey(rc,h)||"text"](O,a);return!A&&g&&g(),await new Promise((M,z)=>{Hb(M,z,{data:N,headers:Mn.from(O.headers),status:O.status,statusText:O.statusText,config:a,request:y})})}catch(R){throw g&&g(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new st("Network Error",st.ERR_NETWORK,a,y),{cause:R.cause||R}):st.from(R,R&&R.code,a,y)}}),df={http:p_,xhr:V_,fetch:J_};Te.forEach(df,(a,n)=>{if(a){try{Object.defineProperty(a,"name",{value:n})}catch{}Object.defineProperty(a,"adapterName",{value:n})}});const s0=a=>`- ${a}`,eT=a=>Te.isFunction(a)||a===null||a===!1,qb={getAdapter:a=>{a=Te.isArray(a)?a:[a];const{length:n}=a;let r,i;const s={};for(let c=0;c<n;c++){r=a[c];let d;if(i=r,!eT(r)&&(i=df[(d=String(r)).toLowerCase()],i===void 0))throw new st(`Unknown adapter '${d}'`);if(i)break;s[d||"#"+c]=i}if(!i){const c=Object.entries(s).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=n?c.length>1?`since :
`+c.map(s0).join(`
`):" "+s0(c[0]):"as no adapter specified";throw new st("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return i},adapters:df};function Yd(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new Xi(null,a)}function l0(a){return Yd(a),a.headers=Mn.from(a.headers),a.data=qd.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),qb.getAdapter(a.adapter||ys.adapter)(a).then(function(i){return Yd(a),i.data=qd.call(a,a.transformResponse,i),i.headers=Mn.from(i.headers),i},function(i){return Fb(i)||(Yd(a),i&&i.response&&(i.response.data=qd.call(a,a.transformResponse,i.response),i.response.headers=Mn.from(i.response.headers))),Promise.reject(i)})}const Yb="1.10.0",Sc={};["object","boolean","number","function","string","symbol"].forEach((a,n)=>{Sc[a]=function(i){return typeof i===a||"a"+(n<1?"n ":" ")+a}});const c0={};Sc.transitional=function(n,r,i){function s(c,d){return"[Axios v"+Yb+"] Transitional option '"+c+"'"+d+(i?". "+i:"")}return(c,d,f)=>{if(n===!1)throw new st(s(d," has been removed"+(r?" in "+r:"")),st.ERR_DEPRECATED);return r&&!c0[d]&&(c0[d]=!0,console.warn(s(d," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(c,d,f):!0}};Sc.spelling=function(n){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${n}`),!0)};function tT(a,n,r){if(typeof a!="object")throw new st("options must be an object",st.ERR_BAD_OPTION_VALUE);const i=Object.keys(a);let s=i.length;for(;s-- >0;){const c=i[s],d=n[c];if(d){const f=a[c],m=f===void 0||d(f,c,a);if(m!==!0)throw new st("option "+c+" must be "+m,st.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new st("Unknown option "+c,st.ERR_BAD_OPTION)}}const Pl={assertOptions:tT,validators:Sc},pr=Pl.validators;let $a=class{constructor(n){this.defaults=n||{},this.interceptors={request:new e0,response:new e0}}async request(n,r){try{return await this._request(n,r)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const c=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=qa(this.defaults,r);const{transitional:i,paramsSerializer:s,headers:c}=r;i!==void 0&&Pl.assertOptions(i,{silentJSONParsing:pr.transitional(pr.boolean),forcedJSONParsing:pr.transitional(pr.boolean),clarifyTimeoutError:pr.transitional(pr.boolean)},!1),s!=null&&(Te.isFunction(s)?r.paramsSerializer={serialize:s}:Pl.assertOptions(s,{encode:pr.function,serialize:pr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Pl.assertOptions(r,{baseUrl:pr.spelling("baseURL"),withXsrfToken:pr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=c&&Te.merge(c.common,c[r.method]);c&&Te.forEach(["delete","get","head","post","put","patch","common"],y=>{delete c[y]}),r.headers=Mn.concat(d,c);const f=[];let m=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(m=m&&g.synchronous,f.unshift(g.fulfilled,g.rejected))});const h=[];this.interceptors.response.forEach(function(g){h.push(g.fulfilled,g.rejected)});let b,w=0,S;if(!m){const y=[l0.bind(this),void 0];for(y.unshift.apply(y,f),y.push.apply(y,h),S=y.length,b=Promise.resolve(r);w<S;)b=b.then(y[w++],y[w++]);return b}S=f.length;let x=r;for(w=0;w<S;){const y=f[w++],g=f[w++];try{x=y(x)}catch(E){g.call(this,E);break}}try{b=l0.call(this,x)}catch(y){return Promise.reject(y)}for(w=0,S=h.length;w<S;)b=b.then(h[w++],h[w++]);return b}getUri(n){n=qa(this.defaults,n);const r=Wb(n.baseURL,n.url,n.allowAbsoluteUrls);return Ub(r,n.params,n.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(n){$a.prototype[n]=function(r,i){return this.request(qa(i||{},{method:n,url:r,data:(i||{}).data}))}});Te.forEach(["post","put","patch"],function(n){function r(i){return function(c,d,f){return this.request(qa(f||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}$a.prototype[n]=r(),$a.prototype[n+"Form"]=r(!0)});let nT=class Zb{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(c){r=c});const i=this;this.promise.then(s=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](s);i._listeners=null}),this.promise.then=s=>{let c;const d=new Promise(f=>{i.subscribe(f),c=f}).then(s);return d.cancel=function(){i.unsubscribe(c)},d},n(function(c,d,f){i.reason||(i.reason=new Xi(c,d,f),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=i=>{n.abort(i)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new Zb(function(s){n=s}),cancel:n}}};function rT(a){return function(r){return a.apply(null,r)}}function aT(a){return Te.isObject(a)&&a.isAxiosError===!0}const ff={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ff).forEach(([a,n])=>{ff[n]=a});function Kb(a){const n=new $a(a),r=Cb($a.prototype.request,n);return Te.extend(r,$a.prototype,n,{allOwnKeys:!0}),Te.extend(r,n,null,{allOwnKeys:!0}),r.create=function(s){return Kb(qa(a,s))},r}const Xt=Kb(ys);Xt.Axios=$a;Xt.CanceledError=Xi;Xt.CancelToken=nT;Xt.isCancel=Fb;Xt.VERSION=Yb;Xt.toFormData=vc;Xt.AxiosError=st;Xt.Cancel=Xt.CanceledError;Xt.all=function(n){return Promise.all(n)};Xt.spread=rT;Xt.isAxiosError=aT;Xt.mergeConfig=qa;Xt.AxiosHeaders=Mn;Xt.formToJSON=a=>Pb(Te.isHTMLForm(a)?new FormData(a):a);Xt.getAdapter=qb.getAdapter;Xt.HttpStatusCode=ff;Xt.default=Xt;const{Axios:vT,AxiosError:xT,CanceledError:ST,isCancel:wT,CancelToken:ET,VERSION:_T,all:TT,Cancel:CT,isAxiosError:AT,spread:RT,toFormData:MT,AxiosHeaders:kT,HttpStatusCode:NT,formToJSON:OT,getAdapter:DT,mergeConfig:jT}=Xt;async function iT(){try{const a="https://www.patreon.com/api/posts",n="14433645",r={"Accept-Language":"en-US,en;q=0.5"},i=["https://api.allorigins.win/raw?url=","https://cors-anywhere.herokuapp.com/","https://thingproxy.freeboard.io/fetch/"];console.log(`Using campaign ID: ${n}`);let s=null;for(const d of i)try{console.log(`Trying CORS proxy: ${d}`);const f=`${a}?filter[campaign_id]=${n}&sort=-published_at&page[size]=5`;if(console.log("API URL:",f),s=await Xt.get(d+encodeURIComponent(f),{headers:r,timeout:1e4}),console.log("API Response:",s.data),s.data&&Object.keys(s.data).length>0){console.log("Successfully got response with data");break}else console.log("Empty response, trying next proxy...")}catch(f){console.log(`Proxy ${d} failed:`,f);continue}if(!s||!s.data||Object.keys(s.data).length===0)return console.log("All CORS proxies failed, trying fallback..."),Zd();const c=[];return s.data&&s.data.data?(console.log("Found data array with length:",s.data.data.length),s.data.data.forEach(d=>{const{title:f,content:m,published_at:h,url:b}=d.attributes;let w=m.replace(/<\s*br\s*\/?>/gi,`
`).replace(/<\s*\/p\s*>/gi,`
`).replace(/<\s*p\s*>/gi,"").replace(/<\s*\/li\s*>/gi,`
`).replace(/<\s*li\s*>/gi," ");w=w.replace(/<(?!\/?(b|i|strong|em|ul|ol|li|a|p|br)\b)[^>]*>/gi,""),w=w.replace(/[ \t]+/g," ").trim();const S=w.split(" "),y=(S.length>80?S.slice(0,80).join(" ")+"...":w).replace(/\n/g,"<br>");c.push({title:f||"untitled post",excerpt:y,url:b||`https://www.patreon.com/posts/${d.id}`,date:h?new Date(h).toLocaleDateString():"recent"})})):console.log("No data found in API response"),console.log(`Successfully fetched ${c.length} posts from API`),c.length>0?c:(console.log("No posts found in API response, returning fallback data"),Zd())}catch(a){return console.error("Failed to fetch Patreon posts:",a),Zd()}}function Zd(){return[{title:"join me on this journey",excerpt:"follow along as we build something amazing together...",url:"https://www.patreon.com/c/oppatchstudio/posts",date:"recent"},{title:"good things are coming",excerpt:"exciting updates and new features are on the horizon...",url:"https://www.patreon.com/c/oppatchstudio/posts",date:"recent"},{title:"aif support added",excerpt:"new audio format support has been added to op-patchstudio...",url:"https://www.patreon.com/c/oppatchstudio/posts",date:"recent"}]}function Xb(){const[a,n]=L.useState([]),[r,i]=L.useState(!1),[s,c]=L.useState(!1),[d,f]=L.useState(!1);return L.useEffect(()=>{const m=()=>{f(window.innerWidth<768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),L.useEffect(()=>{a.length===0&&!r&&!s&&(i(!0),c(!1),iT().then(m=>{n(m),i(!1)}).catch(m=>{console.error("Failed to load Patreon posts:",m),i(!1),c(!0)}))},[a.length,r,s]),u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",margin:d?"0.5rem 0.5rem 1rem 0.5rem":"2rem 2rem 1rem 2rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"support the project"})})}),u.jsx("div",{style:{padding:d?"1rem":"2rem"},children:u.jsxs("div",{style:{textAlign:"center",maxWidth:"600px",margin:"0 auto"},children:[u.jsxs("p",{style:{color:"var(--color-text-secondary)",fontSize:"1.1rem",lineHeight:1.6,marginBottom:"2rem"},children:["OP-PatchStudio is a 100% free and ",u.jsx("a",{href:"https://github.com/joseph-holland/op-patchstudio",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-interactive-primary)",textDecoration:"underline"},children:"open-source"})," tool for creating and editing drum and multisample presets for the OP-XY (more devices coming soon).",u.jsx("br",{}),u.jsx("br",{}),"most features have come from community ideas and requests. by joining the ",u.jsx("a",{href:"https://www.patreon.com/c/oppatchstudio",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-interactive-primary)",textDecoration:"underline"},children:"project patreon"}),", you'll get behind-the-scenes updates, voting rights on roadmap features, priority support, exclusive content, tutorials and early access to preview features.",u.jsx("br",{}),u.jsx("br",{}),"your support helps cover the cost of ai coding tools and services that make rapid development of new features and support possible."]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center"},children:[u.jsxs("a",{href:"https://www.patreon.com/c/oppatchstudio",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 2rem",backgroundColor:"var(--color-interactive-primary)",color:"white",textDecoration:"none",borderRadius:"6px",fontWeight:"500",fontSize:"1.1rem",transition:"background-color 0.2s ease",minWidth:"200px",justifyContent:"center"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="var(--color-interactive-secondary)"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="var(--color-interactive-primary)"},children:[u.jsx("i",{className:"fab fa-patreon",style:{fontSize:"1.2rem"}}),"support on patreon"]}),u.jsxs("a",{href:"https://buymeacoffee.com/jxavierh",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 2rem",backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)",textDecoration:"none",borderRadius:"6px",fontWeight:"500",fontSize:"1.1rem",border:"1px solid var(--color-border-light)",transition:"background-color 0.2s ease",minWidth:"200px",justifyContent:"center"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="var(--color-border-subtle)"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},children:[u.jsx("i",{className:"fas fa-coffee",style:{fontSize:"1.2rem"}}),"buy me a coffee"]})]})]})})]}),u.jsxs("div",{style:{background:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 2px 8px var(--color-shadow-primary)",border:"1px solid var(--color-border-subtle)",overflow:"hidden",margin:d?"0.5rem 0.5rem 1rem 0.5rem":"2rem 2rem 1rem 2rem"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.7rem 1rem 0.5rem 1rem",borderBottom:"1px solid var(--color-border-medium)",backgroundColor:"var(--color-bg-secondary)"},children:u.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:u.jsx("h3",{style:{margin:0,color:"#222",fontSize:"1.25rem",fontWeight:300},children:"latest posts"})})}),u.jsx("div",{style:{padding:d?"1rem":"2rem"},children:r?u.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",fontSize:"1rem"},children:"loading posts..."}):s?u.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",fontSize:"1rem"},children:"failed to load posts"}):a.length>0?u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[a.map((m,h)=>u.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-bg-secondary)",borderRadius:"6px",border:"1px solid var(--color-border-light)"},children:[u.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--color-text-primary)",fontSize:"1.1rem",fontWeight:"500"},children:m.title}),u.jsx("div",{style:{margin:"0 0 1rem 0",color:"var(--color-text-secondary)",fontSize:"0.9rem",lineHeight:1.5},dangerouslySetInnerHTML:{__html:m.excerpt}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"0.8rem"},children:m.date}),u.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-interactive-primary)",textDecoration:"none",fontSize:"0.9rem",fontWeight:"500"},onMouseEnter:b=>{b.currentTarget.style.textDecoration="underline"},onMouseLeave:b=>{b.currentTarget.style.textDecoration="none"},children:"read more "})]})]},h)),u.jsx("div",{style:{textAlign:"center",marginTop:"1rem"},children:u.jsxs("a",{href:"https://www.patreon.com/c/oppatchstudio/posts",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)",textDecoration:"none",borderRadius:"6px",fontWeight:"500",fontSize:"1rem",border:"1px solid var(--color-border-light)",transition:"background-color 0.2s ease"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="var(--color-border-subtle)"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},children:[u.jsx("i",{className:"fab fa-patreon",style:{fontSize:"1rem"}}),"continue on patreon"]})})]}):u.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",fontSize:"1rem"},children:"no posts available"})})]})]})}function oT({currentTab:a,onTabChange:n}){const[r,i]=L.useState(!1);L.useEffect(()=>{const m=()=>{i(window.innerWidth<768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const s=(m,h)=>{if(m.key==="Enter"||m.key===" ")m.preventDefault(),n(h);else if(m.key==="ArrowLeft"||m.key==="ArrowRight"){m.preventDefault();const w=[...["drum","multisample","library"],"donate","feedback"],S=w.indexOf(a),x=m.key==="ArrowLeft"?-1:1,y=(S+x+w.length)%w.length;n(w[y])}else if(m.key==="Home")m.preventDefault(),n([...["drum","multisample","library"],"donate","feedback"][0]);else if(m.key==="End"){m.preventDefault();const w=[...["drum","multisample","library"],"donate","feedback"];n(w[w.length-1])}},c={padding:"0.75rem 1.5rem",border:"1px solid var(--color-border-subtle)",borderBottom:"none",borderRadius:"15px 15px 0 0",background:"var(--color-bg-secondary)",color:"var(--color-text-secondary)",fontWeight:"500",fontFamily:'"Montserrat", "Arial", sans-serif',fontSize:"0.95rem",cursor:"pointer",transition:"all 0.2s ease",marginRight:"2px",position:"relative",zIndex:1,outline:"none",borderColor:"var(--color-border-subtle) var(--color-border-subtle) var(--color-border-subtle) var(--color-border-subtle)",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center"},d={...c,background:"var(--color-bg-primary)",color:"var(--color-text-primary)",borderColor:"var(--color-border-subtle) var(--color-border-subtle) var(--color-bg-primary)",zIndex:2,marginBottom:"-1px",outline:"none"},f=(m,h)=>{const b=a===m;return u.jsx("button",{id:`${m}-tab`,role:"tab","aria-selected":b,"aria-controls":`${m}-tabpanel`,"aria-label":`${h} tab`,tabIndex:b?0:-1,style:b?d:c,onClick:()=>n(m),onKeyDown:w=>s(w,m),onMouseEnter:w=>{b||(w.currentTarget.style.background="var(--color-border-subtle)",w.currentTarget.style.color="var(--color-text-primary)")},onMouseLeave:w=>{b||(w.currentTarget.style.background="var(--color-bg-secondary)",w.currentTarget.style.color="var(--color-text-secondary)")},children:h})};return u.jsxs("div",{role:"tablist","aria-label":"main navigation tabs","aria-orientation":"horizontal",className:"tab-bar",style:{display:"flex",marginBottom:"0",borderBottom:"1px solid var(--color-border-subtle)",marginLeft:r?"8px":"16px",marginRight:r?"8px":"16px"},children:[f("drum","drum"),f("multisample","multisample"),f("library","library"),f("donate","donate"),f("feedback","feedback")]})}function sT(){const{state:a,dispatch:n}=un(),r=s=>{n({type:"SET_TAB",payload:s})},i={background:"var(--color-bg-primary)",borderRadius:"15px",border:"1px solid var(--color-border-subtle)",borderTop:"none",minHeight:"500px",overflow:"hidden"};return u.jsxs("div",{role:"tabpanel","aria-label":"main application content",style:{marginBottom:"2rem"},children:[u.jsx(oT,{currentTab:a.currentTab,onTabChange:r}),a.currentTab==="drum"&&u.jsx("div",{role:"tabpanel",id:"drum-tabpanel","aria-labelledby":"drum-tab","aria-label":"drum tool content",style:i,children:u.jsx(p2,{})}),a.currentTab==="multisample"&&u.jsx("div",{role:"tabpanel",id:"multisample-tabpanel","aria-labelledby":"multisample-tab","aria-label":"multisample tool content",style:i,children:u.jsx(E2,{})}),a.currentTab==="feedback"&&u.jsx("div",{role:"tabpanel",id:"feedback-tabpanel","aria-labelledby":"feedback-tab","aria-label":"feedback and support content",style:i,children:u.jsx(Tb,{})}),a.currentTab==="donate"&&$w.DONATE_PAGE&&u.jsx("div",{role:"tabpanel",id:"donate-tabpanel","aria-labelledby":"donate-tab","aria-label":"donation and support content",style:i,children:u.jsx(Xb,{})}),a.currentTab==="library"&&u.jsx("div",{role:"tabpanel",id:"library-tabpanel","aria-labelledby":"library-tab","aria-label":"preset library content",style:i,children:u.jsx(R2,{})})]})}function lT({notifications:a,onDismiss:n}){if(L.useEffect(()=>{const i=[];return a.forEach(s=>{const c=s.duration||5e3,d=setTimeout(()=>{n(s.id)},c);i.push(d)}),()=>{i.forEach(s=>clearTimeout(s))}},[a,n]),a.length===0)return null;const r=i=>{switch(i){case"success":return"fa-check-circle";case"error":return"fa-exclamation-circle";case"warning":return"fa-exclamation-triangle";case"info":return"fa-info-circle";default:return"fa-info-circle"}};return u.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4,display:"flex",flexDirection:"column",gap:"10px",maxWidth:"400px",fontFamily:'"Montserrat", "Arial", sans-serif'},children:[a.map(i=>{const s=r(i.type);return u.jsx("div",{style:{backgroundColor:"var(--color-bg-notification)",border:"1px solid var(--color-border-notification)",borderRadius:"6px",padding:"12px 16px",boxShadow:"0 4px 12px var(--color-shadow-elevated)",color:"var(--color-text-secondary)",position:"relative",animation:"slideInRight 0.3s ease-out"},children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[u.jsx("i",{className:`fas ${s}`,style:{color:"var(--color-text-secondary)",fontSize:"16px",marginTop:"2px",flexShrink:0}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"4px",color:"var(--color-text-primary)"},children:i.title}),u.jsx("div",{style:{fontSize:"13px",lineHeight:"1.4",color:"var(--color-text-secondary)"},children:i.message})]}),u.jsx("button",{onClick:()=>n(i.id),style:{background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontSize:"16px",padding:"0",opacity:.7,flexShrink:0},onMouseEnter:c=>{c.currentTarget.style.opacity="1",c.currentTarget.style.color="var(--color-text-primary)"},onMouseLeave:c=>{c.currentTarget.style.opacity="0.7",c.currentTarget.style.color="var(--color-text-secondary)"},children:u.jsx("i",{className:"fas fa-times"})})]})},i.id)}),u.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `})]})}const nr={INSTALL_DISMISSED:"pwa_install_dismissed",INSTALL_ACCEPTED:"pwa_install_accepted",VISIT_COUNT:"pwa_visit_count",LAST_PROMPT_DATE:"pwa_last_prompt_date"},Kd={REPROMPT_INTERVAL:7*24*60*60*1e3,MOBILE_DELAY:2e3,DESKTOP_DELAY:5e3},cT=()=>{const[a,n]=L.useState(null),[r,i]=L.useState(!1),[s,c]=L.useState(!1),[d,f]=L.useState(!1),m=()=>{if(window.matchMedia("(display-mode: standalone)").matches||localStorage.getItem(nr.INSTALL_ACCEPTED))return!1;const g=localStorage.getItem(nr.INSTALL_DISMISSED);if(g){const E=new Date(g).getTime();if(new Date().getTime()-E<Kd.REPROMPT_INTERVAL)return!1}return!0},h=()=>{const g=parseInt(localStorage.getItem(nr.VISIT_COUNT)||"0");localStorage.setItem(nr.VISIT_COUNT,(g+1).toString())},b=()=>{const g=navigator.userAgent.toLowerCase(),E=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(g);f(E)};L.useEffect(()=>{b(),h();const g=R=>{if(R.preventDefault(),n(R),m()){const O=d?Kd.MOBILE_DELAY:Kd.DESKTOP_DELAY;setTimeout(()=>{i(!0),setTimeout(()=>c(!0),10),localStorage.setItem(nr.LAST_PROMPT_DATE,new Date().toISOString())},O)}},E=()=>{w(),localStorage.setItem(nr.INSTALL_ACCEPTED,new Date().toISOString()),console.log("PWA was installed")};return window.addEventListener("beforeinstallprompt",g),window.addEventListener("appinstalled",E),()=>{window.removeEventListener("beforeinstallprompt",g),window.removeEventListener("appinstalled",E)}},[d]);const w=()=>{c(!1),setTimeout(()=>{i(!1),n(null)},200)},S=async()=>{if(!a)return;a.prompt();const{outcome:g}=await a.userChoice;g==="accepted"?(console.log("User accepted the install prompt"),localStorage.setItem(nr.INSTALL_ACCEPTED,new Date().toISOString())):(console.log("User dismissed the install prompt"),localStorage.setItem(nr.INSTALL_DISMISSED,new Date().toISOString())),w()},x=()=>{w(),localStorage.setItem(nr.INSTALL_DISMISSED,new Date().toISOString())},y=()=>{w(),localStorage.removeItem(nr.INSTALL_DISMISSED),localStorage.setItem(nr.VISIT_COUNT,"0")};return r?u.jsxs("div",{style:{position:"fixed",bottom:d?"10px":"20px",right:d?"10px":"20px",left:d?"10px":"auto",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)",borderRadius:"6px",padding:d?"12px":"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxWidth:d?"none":"300px",color:"var(--color-text-primary)",opacity:s?1:0,transform:s?"translateY(0)":"translateY(10px)",transition:"opacity 0.2s ease, transform 0.2s ease",fontFamily:'"Montserrat", "Arial", sans-serif'},children:[u.jsxs("div",{style:{marginBottom:"12px"},children:[u.jsx("strong",{style:{display:"block",marginBottom:"4px",fontSize:"0.95rem",fontWeight:"500",color:"var(--color-text-primary)"},children:"install OP-PatchStudio offline"}),u.jsx("span",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",lineHeight:"1.4"},children:"install as app for offline use and quick access"})]}),u.jsxs("div",{style:{display:"flex",gap:"8px",flexDirection:d?"column":"row",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:y,style:{padding:"0.5rem 0.75rem",border:"1px solid var(--color-border-medium)",borderRadius:"3px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-secondary)",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor="var(--color-bg-secondary)",g.currentTarget.style.borderColor="var(--color-border-medium)",g.currentTarget.style.color="var(--color-interactive-dark)"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="var(--color-bg-primary)",g.currentTarget.style.borderColor="var(--color-border-medium)",g.currentTarget.style.color="var(--color-text-secondary)"},children:"later"}),u.jsx("button",{onClick:x,style:{padding:"0.5rem 0.75rem",border:"1px solid var(--color-border-medium)",borderRadius:"3px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-secondary)",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor="var(--color-bg-secondary)",g.currentTarget.style.borderColor="var(--color-border-medium)",g.currentTarget.style.color="var(--color-interactive-dark)"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="var(--color-bg-primary)",g.currentTarget.style.borderColor="var(--color-border-medium)",g.currentTarget.style.color="var(--color-text-secondary)"},children:"dismiss"}),u.jsx("button",{onClick:S,style:{padding:"0.5rem 0.75rem",border:"none",borderRadius:"3px",backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"80px"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor="var(--color-interactive-dark)",g.currentTarget.style.transform="translateY(-1px)",g.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="var(--color-interactive-focus)",g.currentTarget.style.transform="translateY(0)",g.currentTarget.style.boxShadow="none"},children:"install"})]})]}):null};async function uT(){try{const a=await fetch("/manifest.json");if(!a.ok)throw new Error(`Failed to load version from manifest: ${a.statusText}`);return(await a.json()).version||"0.0.0"}catch(a){return console.warn("Failed to load version from manifest:",a),"0.0.0"}}function dT(){const[a,n]=L.useState("");return L.useEffect(()=>{uT().then(n)},[]),u.jsxs("footer",{style:{textAlign:"center",marginTop:"3rem",padding:"20px",fontSize:"0.9rem",color:"var(--color-text-tertiary)"},children:[u.jsxs("div",{style:{marginBottom:"1rem",color:"var(--color-text-tertiary)",fontSize:"0.85rem"},children:["OP-PatchStudio is an unofficial tool not affiliated with or endorsed by teenage engineering.",u.jsx("br",{}),'this software is provided "as is" without warranty of any kind. use at your own risk. for educational and personal use only.',u.jsx("br",{}),"OP-XY, OP-1 and OP-Z are registered trademarks of teenage engineering.",u.jsx("br",{})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",gap:"0.5em",fontSize:"0.98em"},children:[u.jsx("span",{style:{color:"var(--color-text-tertiary)"},children:"proudly open source"}),u.jsx("span",{style:{color:"var(--color-text-tertiary)"},children:"|"}),u.jsx("a",{href:"https://github.com/joseph-holland/op-patchstudio",target:"_blank",rel:"noopener",style:{color:"var(--color-text-secondary)"},children:"github repo"}),u.jsx("span",{style:{color:"var(--color-text-tertiary)"},children:"|"}),a?u.jsxs("a",{href:"/CHANGELOG.md",target:"_blank",rel:"noopener",style:{color:"var(--color-text-secondary)"},children:["v",a]}):u.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"loading version..."})]}),u.jsxs("div",{style:{marginTop:"0.5rem"},children:["crafted with fidelity by"," ",u.jsx("a",{href:"https://github.com/joseph-holland",target:"_blank",rel:"noopener",style:{color:"#666"},children:"joseph-holland"})]}),u.jsxs("div",{style:{marginTop:"0.5rem"},children:["inspired by the awesome"," ",u.jsx("a",{href:"https://buba447.github.io/opxy-drum-tool/",target:"_blank",rel:"noopener",style:{color:"#666"},children:"opxy-drum-tool"})," "," by zeitgeese"]})]})}function fT({isOpen:a,onLoadSession:n,onStartNew:r,sessionInfo:i}){const s=L.useRef(null),c=L.useRef(null),d=L.useRef(null);if(L.useEffect(()=>{if(a)return c.current?.focus(),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[a]),L.useEffect(()=>{const m=h=>{if(a)switch(h.key){case"Escape":r().catch(b=>{console.error("Failed to start new session:",b)});break;case"Tab":h.shiftKey?document.activeElement===c.current&&(h.preventDefault(),d.current?.focus()):document.activeElement===d.current&&(h.preventDefault(),c.current?.focus());break}};if(a)return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[a,r]),!a)return null;const f=()=>{if(!i)return"";const m=new Date(i.timestamp).toLocaleString(),h=i.drumSamplesCount,b=i.multisampleFilesCount;return`from ${m} with ${h} drum samples and ${b} multisample files`};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
        @media (max-width: 600px) {
          .session-modal-container {
            align-items: center !important;
            padding: 0 !important;
          }
          .session-modal {
            width: 100vw !important;
            max-width: 100vw !important;
            min-height: 40vh;
            max-height: 90vh;
            border-radius: 15px !important;
            margin: 0 !important;
            overflow-y: auto !important;
            box-sizing: border-box;
          }
          @media (max-height: 500px) {
            .session-modal-container {
              align-items: flex-end !important;
            }
            .session-modal {
              border-radius: 15px 15px 0 0 !important;
            }
          }
          .session-modal-header {
            padding: 1rem 1rem 0.75rem 1rem !important;
          }
          .session-modal-content {
            padding: 1rem !important;
            font-size: 1rem !important;
            word-break: break-word !important;
            white-space: normal !important;
          }
          .session-modal-actions {
            flex-direction: column !important;
            gap: 0.5rem !important;
            padding: 1rem 1rem 2rem 1rem !important;
          }
          .session-modal-actions button {
            min-width: 100%;
            font-size: 1.1rem !important;
            padding: 0.85rem 1rem !important;
            min-height: 44px !important;
          }
        }
        @media (max-width: 400px) {
          .session-modal {
            min-height: 50vh;
          }
        }
      `}),u.jsx("div",{className:"session-modal-container",role:"dialog","aria-modal":"true","aria-labelledby":"session-restoration-title","aria-describedby":"session-restoration-description",ref:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,fontFamily:'"Montserrat", "Arial", sans-serif',padding:0},children:u.jsxs("div",{className:"session-modal",style:{backgroundColor:"var(--color-bg-primary)",borderRadius:"15px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",maxWidth:"500px",width:"90%",margin:0,overflow:"hidden",minWidth:0,maxHeight:"90vh",overflowY:"auto",boxSizing:"border-box"},children:[u.jsx("div",{className:"session-modal-header",style:{padding:"1.5rem 1.5rem 1rem 1.5rem",borderBottom:"1px solid var(--color-border-light)"},children:u.jsxs("h3",{id:"session-restoration-title",style:{margin:"0",fontSize:"1.25rem",fontWeight:"300",color:"var(--color-text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("i",{className:"fas fa-clock-rotate-left",style:{color:"var(--color-text-primary)",fontSize:"1.25rem"},"aria-hidden":"true"}),"restore session"]})}),u.jsxs("div",{className:"session-modal-content",id:"session-restoration-description",style:{padding:"1.5rem",color:"var(--color-text-secondary)",fontSize:"0.95rem",lineHeight:"1.5"},children:[u.jsxs("p",{style:{margin:"0 0 1rem 0"},children:["a previous session was found ",f(),"."]}),u.jsx("p",{style:{margin:"0"},children:"would you like to restore this session or start with a fresh workspace?"})]}),u.jsxs("div",{className:"session-modal-actions",style:{padding:"1rem 1.5rem 1.5rem 1.5rem",display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[u.jsx("button",{ref:c,onClick:async()=>{try{await r()}catch(m){console.error("Failed to start new session:",m)}},style:{padding:"0.625rem 1.25rem",border:"1px solid var(--color-border-light)",borderRadius:"6px",backgroundColor:"var(--color-bg-primary)",color:"var(--color-text-secondary)",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"100px",minHeight:"44px"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="var(--color-bg-secondary)",m.currentTarget.style.borderColor="var(--color-border-light)",m.currentTarget.style.color="var(--color-text-primary)"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="var(--color-bg-primary)",m.currentTarget.style.borderColor="var(--color-border-light)",m.currentTarget.style.color="var(--color-text-secondary)"},children:"start new"}),u.jsx("button",{ref:d,onClick:n,style:{padding:"0.625rem 1.25rem",border:"none",borderRadius:"6px",backgroundColor:"var(--color-interactive-focus)",color:"var(--color-white)",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"inherit",minWidth:"100px",minHeight:"44px"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="var(--color-interactive-dark)",m.currentTarget.style.transform="translateY(-1px)",m.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="var(--color-interactive-focus)",m.currentTarget.style.transform="translateY(0)",m.currentTarget.style.boxShadow="none"},children:"restore"})]})]})})]})}function mT(){const{state:a,dispatch:n}=un(),r=L.useRef(null),i=L.useRef(!1),s=L.useRef(a),c=L.useCallback(async()=>{try{await Zt.saveSession(a)}catch(S){console.error("Failed to save session:",S)}},[a]);r.current=c,s.current=a,L.useEffect(()=>{(async()=>{if(i.current||window.sessionStorage.getItem("loading-preset")==="true")return;try{await Zt.clearCorruptedData()}catch(y){console.error("Failed to clear corrupted data:",y)}if(await Zt.hasPreviousSession()){const y=await Zt.getCurrentSession();if(y){if(y.savedToLibrary)return;const g=12*60*60*1e3;if(Date.now()-y.timestamp<=g){const O=y.drumSamples.length,A=y.multisampleFiles.length;(O>0||A>0)&&(n({type:"SET_SESSION_INFO",payload:{timestamp:y.timestamp,drumSamplesCount:O,multisampleFilesCount:A}}),n({type:"SET_SESSION_RESTORATION_MODAL_OPEN",payload:!0}))}}}})()},[n]),L.useEffect(()=>{if(a.isSessionRestorationModalOpen||window.sessionStorage.getItem("loading-preset")==="true")return;const S=setTimeout(()=>{r.current&&r.current()},1e3);return()=>{clearTimeout(S)}},[a.drumSamples,a.multisampleFiles,a.drumSettings,a.multisampleSettings,a.isSessionRestorationModalOpen]);const d=L.useCallback(async()=>{try{const S=await Zt.loadSession();if(!S)return;const x=[],y=[];for(const g of S.drumSamples)try{const E=await Zt.loadSampleFromSession(g.sampleId);if(!E){console.error(`Failed to load drum sample ${g.sampleId}`);continue}const R={originalIndex:g.originalIndex,file:E.file,audioBuffer:E.audioBuffer,name:E.file.name,isLoaded:!0,isAssigned:g.isAssigned,assignedKey:g.assignedKey,inPoint:g.settings.inPoint,outPoint:g.settings.outPoint,playmode:g.settings.playmode,reverse:g.settings.reverse,tune:g.settings.tune,pan:g.settings.pan,gain:g.settings.gain,hasBeenEdited:g.settings.hasBeenEdited,originalBitDepth:E.metadata.bitDepth,originalSampleRate:E.metadata.sampleRate,originalChannels:E.metadata.channels,fileSize:E.metadata.fileSize,duration:E.metadata.duration};x.push(R)}catch(E){console.error(`Failed to restore drum sample ${g.sampleId}:`,E)}for(const g of S.multisampleFiles)try{const E=await Zt.loadSampleFromSession(g.sampleId);if(!E){console.error(`Failed to load multisample file ${g.sampleId}`);continue}const R={file:E.file,audioBuffer:E.audioBuffer,name:E.file.name,isLoaded:!0,rootNote:g.rootNote,note:g.note,inPoint:g.inPoint,outPoint:g.outPoint,loopStart:g.loopStart,loopEnd:g.loopEnd,originalBitDepth:E.metadata.bitDepth,originalSampleRate:E.metadata.sampleRate,originalChannels:E.metadata.channels,fileSize:E.metadata.fileSize,duration:E.metadata.duration};y.push(R)}catch(E){console.error(`Failed to restore multisample file ${g.sampleId}:`,E)}y.sort((g,E)=>E.rootNote-g.rootNote),n({type:"RESTORE_SESSION",payload:{drumSettings:S.drumSettings,multisampleSettings:S.multisampleSettings,drumSamples:x,multisampleFiles:y,selectedMultisample:S.selectedMultisample,isDrumKeyboardPinned:S.isDrumKeyboardPinned,isMultisampleKeyboardPinned:S.isMultisampleKeyboardPinned}})}catch(S){console.error("Failed to load session:",S)}},[n]),f=L.useCallback(async()=>{i.current=!0;try{await Zt.clearCurrentSession()}catch(S){console.error("Failed to clear session data when declining restoration:",S)}n({type:"SET_SESSION_INFO",payload:null}),n({type:"SET_SESSION_RESTORATION_MODAL_OPEN",payload:!1})},[n]),m=L.useCallback(async()=>{try{await Zt.clearCurrentSession()}catch(S){console.error("Failed to clear current session:",S)}},[]),h=L.useCallback(async()=>{try{await Zt.clearAllSessionData()}catch(S){console.error("Failed to clear all session data:",S)}},[]),b=L.useCallback(async()=>{try{await Zt.markSessionAsSavedToLibrary()}catch(S){console.error("Failed to mark session as saved to library:",S)}},[]),w=L.useCallback(async()=>{try{await Zt.resetSavedToLibraryFlag()}catch(S){console.error("Failed to reset saved to library flag:",S)}},[]);return{saveSession:c,loadSession:d,declineSessionRestoration:f,clearCurrentSession:m,clearAllSessionData:h,markSessionAsSavedToLibrary:b,resetSavedToLibraryFlag:w}}let ac=null,Fl=null;const Lf=a=>{setTimeout(()=>{ac&&(ac(!0),a&&(Fl=a))},0)};function pT(){const{state:a,dispatch:n}=un(),[r,i]=L.useState(!1),[s,c]=L.useState(!1),[d,f]=L.useState(()=>window.location.hash==="#/feedback"?"feedback":window.location.hash==="#/donate"?"donate":"home"),{loadSession:m,declineSessionRestoration:h}=mT(),{isSessionRestorationModalOpen:b,sessionInfo:w}=a;L.useEffect(()=>(ac=c,()=>{ac=null}),[]),L.useEffect(()=>{const x=()=>{window.location.hash==="#/feedback"?f("feedback"):window.location.hash==="#/donate"?f("donate"):f("home")};return window.addEventListener("hashchange",x),()=>window.removeEventListener("hashchange",x)},[]),L.useEffect(()=>{const x=()=>{const E=hr.isMobile||hr.isTablet;i(E);const R=window.innerHeight>window.innerWidth;E&&!R&&s&&(c(!1),Fl&&setTimeout(()=>{Fl?.(),Fl=null},100))};x();const y=()=>{setTimeout(x,100)},g=()=>{x()};return window.addEventListener("orientationchange",y),window.addEventListener("resize",g),()=>{window.removeEventListener("orientationchange",y),window.removeEventListener("resize",g)}},[s]);const S=x=>{n({type:"REMOVE_NOTIFICATION",payload:x})};return u.jsxs(u.Fragment,{children:[u.jsx(G0,{theme:"white",className:"opxy-theme",children:u.jsx("div",{style:{minHeight:"100vh",backgroundColor:"var(--color-surface-tertiary)"},children:u.jsx(V0,{style:{padding:r?"0.5rem":"2rem",backgroundColor:"var(--color-surface-tertiary)",maxWidth:"1000px",margin:"0 auto",width:"100%",boxSizing:"border-box"},children:d==="feedback"?u.jsx(Tb,{}):d==="donate"?u.jsx(Xb,{}):u.jsxs(u.Fragment,{children:[u.jsx(Vw,{}),u.jsx(sT,{}),u.jsx(lT,{notifications:a.notifications,onDismiss:S}),u.jsx(cT,{}),u.jsx(dT,{})]})})})}),u.jsx(fT,{isOpen:b,onLoadSession:m,onStartNew:h,sessionInfo:w}),u.jsx("div",{className:"app-block-overlay",style:{background:"rgba(102,102,102,0.7)",fontFamily:'Helvetica, "Helvetica Neue", Arial, sans-serif',flexDirection:"column",opacity:s?1:0,visibility:s?"visible":"hidden",transition:"opacity 0.3s ease-in-out, visibility 0.3s ease-in-out"},children:u.jsxs("div",{style:{background:"white",border:"1px solid var(--color-border-light)",borderRadius:"15px",padding:"2rem",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"90vw",margin:"0 1rem"},children:[u.jsxs("div",{style:{position:"relative",width:"4em",height:"4em",marginBottom:"2.5rem",display:"inline-block"},children:[u.jsx("i",{className:"fas fa-mobile-alt",style:{position:"absolute",right:0,bottom:0,fontSize:"4em",color:"var(--color-interactive-primary, #1a1a1a)",opacity:.6}}),u.jsx("i",{className:"fas fa-mobile-alt",style:{position:"absolute",right:0,bottom:0,fontSize:"4em",color:"var(--color-interactive-primary, #1a1a1a)",transform:"rotate(-90deg) translate(20%, -50%)",transformOrigin:"bottom right"}}),u.jsx("i",{className:"fas fa-reply",style:{position:"absolute",left:"10%",top:"40%",fontSize:"2em",color:"var(--color-interactive-primary, #1a1a1a)",transform:"translate(-60%, -10%) rotate(-90deg)"}})]}),u.jsx("div",{style:{fontFamily:'Helvetica, "Helvetica Neue", Arial, sans-serif',fontWeight:300,fontSize:"2.1rem",color:"var(--color-text-primary)",textAlign:"center",letterSpacing:"-0.05em",lineHeight:1.1,padding:"0 1rem"},children:"please rotate your device to landscape mode"})]})})]})}function hT(){return u.jsx(hE,{children:u.jsx(pT,{})})}ox.createRoot(document.getElementById("root")).render(u.jsx(L.StrictMode,{children:u.jsx(hT,{})}));
